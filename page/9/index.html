<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Larkkkkkkk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Larkkkkkkk">
<meta property="og:url" content="https://larkkkkkkk.github.io/page/9/index.html">
<meta property="og:site_name" content="Larkkkkkkk">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Larkkkkkkk">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Larkkkkkkk" type="application/atom+xml">
  
  
    <link rel="icon" href="/http://oayoilchh.bkt.clouddn.com/2016/07/27/18:05:26%20">
  
  
      
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
<meta name="generator" content="Hexo 4.2.1"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
        <a href="/" class="profilepic">
            
            <img lazy-src="img/head.jpg" class="js-avatar">
            
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Larkkkkkkk</a></h1>
        </hgroup>
        
        
            <form>
                <input type="text" class="st-default-search-input search" id="local-search-input" placeholder="搜索一下" autocomplete="off">
            </form>
            <div id="local-search-result"></div>
        
        
            <script type="text/javascript">
                (function() {
                    'use strict';
                    function getMatchData(keyword, data) {
                        var matchData = [];
                        for(var i =0;i<data.length;i++){
                            if(data[i].title.toLowerCase().indexOf(keyword)>=0) 
                                matchData.push(data[i])
                        }
                        return matchData;
                    }
                    var $input = $('#local-search-input');
                    var $resultContent = $('#local-search-result');
                    $input.keyup(function(){
                        $.ajax({
                            url: '/search.json',
                            dataType: "json",
                            success: function( json ) {
                                var str='<ul class=\"search-result-list\">';                
                                var keyword = $input.val().trim().toLowerCase();
                                $resultContent.innerHTML = "";
                                if ($input.val().trim().length <= 0) {
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                }
                                var results = getMatchData(keyword, json);
                                if(results.length === 0){
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                } 
                                for(var i =0; i<results.length; i++){
                                    str += "<li><a href='"+ results[i].url +"' class='search-result-title'>"+ results[i].title +"</a></li>";
                                }
                                str += "</ul>";
                                $resultContent.empty();
                                $resultContent.append(str);
                                $('#switch-area').hide();
                            }
                        });
                    });
                })();
            </script>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        
        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a  href="https://github.com/Larkkkkkkk" target="_blank" rel="noopener">博客首页</a></li>
                        
                            <li><a  href="/archives">文章归档</a></li>
                        
                            <li><a  href="/CTFStudy">学习导航</a></li>
                        
                            <li><a  href="/PWNABLE">PWNABLE</a></li>
                        
                            <li><a  href="/resume">个人简历</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail"  target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=U2JgZ2ZlY2VmamATIiJ9MDw_" title="mail">mail</a>
                            
                                <a class="fl github"  target="_blank" href="https://github.com/Larkkkkkkk" title="github">github</a>
                            
                                <a class="fl zhihu"  target="_blank" href="https://www.zhihu.com/people/plain-3-78/activities" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo"  target="_blank" href="https://weibo.com/5304208276/profile?topnav=1&wvr=6" title="weibo">weibo</a>
                            
                                <a class="fl rss"  target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Ajax/" style="font-size: 12px;">Ajax</a> <a href="/tags/Cookie%E5%92%8CSession/" style="font-size: 14px;">Cookie和Session</a> <a href="/tags/DBUtils/" style="font-size: 11px;">DBUtils</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">EL表达式</a> <a href="/tags/Elasticsearch/" style="font-size: 11px;">Elasticsearch</a> <a href="/tags/Filter/" style="font-size: 11px;">Filter</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/HTTPServletReauest%E5%92%8CHTTPServletResponse/" style="font-size: 10px;">HTTPServletReauest和HTTPServletResponse</a> <a href="/tags/Hexo%E5%8D%9A%E5%AE%A2/" style="font-size: 10px;">Hexo博客</a> <a href="/tags/IDEA%E5%AE%89%E8%A3%85%E5%92%8C%E7%A0%B4%E8%A7%A3/" style="font-size: 10px;">IDEA安装和破解</a> <a href="/tags/JAVA/" style="font-size: 19px;">JAVA</a> <a href="/tags/JAVA-Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">JAVA-Lambda表达式</a> <a href="/tags/JAVA-Set%E9%9B%86%E5%90%88/" style="font-size: 10px;">JAVA-Set集合</a> <a href="/tags/JAVA-%E5%8F%8D%E5%B0%84/" style="font-size: 10px;">JAVA-反射</a> <a href="/tags/JAVA-%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 12px;">JAVA-多线程</a> <a href="/tags/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">JAVA-正则表达式</a> <a href="/tags/JAVA-%E6%B3%9B%E5%9E%8B/" style="font-size: 10px;">JAVA-泛型</a> <a href="/tags/JAVA-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" style="font-size: 12px;">JAVA-网络编程</a> <a href="/tags/JAVA-%E9%9B%86%E5%90%88/" style="font-size: 12px;">JAVA-集合</a> <a href="/tags/JAVA%E7%BB%83%E4%B9%A0/" style="font-size: 11px;">JAVA练习</a> <a href="/tags/JAVA%E7%BB%83%E4%B9%A0-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 10px;">JAVA练习-动态规划</a> <a href="/tags/JQuery/" style="font-size: 13px;">JQuery</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/Jmeter/" style="font-size: 10px;">Jmeter</a> <a href="/tags/LeetCode/" style="font-size: 17px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Listener/" style="font-size: 10px;">Listener</a> <a href="/tags/Mybatis/" style="font-size: 18px;">Mybatis</a> <a href="/tags/MybatisPlus/" style="font-size: 10px;">MybatisPlus</a> <a href="/tags/Mysql/" style="font-size: 12px;">Mysql</a> <a href="/tags/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8CJDBC/" style="font-size: 15px;">Mysql数据库和JDBC</a> <a href="/tags/RabbitMQ/" style="font-size: 10px;">RabbitMQ</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Servlet/" style="font-size: 11px;">Servlet</a> <a href="/tags/Spring/" style="font-size: 16px;">Spring</a> <a href="/tags/SpringMVC/" style="font-size: 15px;">SpringMVC</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Web%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/" style="font-size: 20px;">Web前端知识点</a> <a href="/tags/XML/" style="font-size: 11px;">XML</a> <a href="/tags/Zookeeper/" style="font-size: 10px;">Zookeeper</a> <a href="/tags/django/" style="font-size: 10px;">django</a> <a href="/tags/flask%E6%A1%86%E6%9E%B6/" style="font-size: 10px;">flask框架</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/jsp%E6%A0%87%E5%87%86%E6%A0%87%E7%AD%BE%E5%BA%93/" style="font-size: 10px;">jsp标准标签库</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/picture/" style="font-size: 10px;">picture</a> <a href="/tags/python/" style="font-size: 12px;">python</a> <a href="/tags/pytorch/" style="font-size: 10px;">pytorch</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/ssm%E6%A1%86%E6%9E%B6%E6%A8%A1%E6%9D%BF/" style="font-size: 10px;">ssm框架模板</a> <a href="/tags/webserver%E7%BC%96%E7%A8%8B/" style="font-size: 10px;">webserver编程</a> <a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 10px;">事务</a> <a href="/tags/%E4%BA%AC%E4%B8%9C/" style="font-size: 11px;">京东</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 10px;">前端</a> <a href="/tags/%E5%90%8E%E7%BC%80%E6%A0%91/" style="font-size: 10px;">后缀树</a> <a href="/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/" style="font-size: 10px;">哈希表</a> <a href="/tags/%E5%9B%BE/" style="font-size: 10px;">图</a> <a href="/tags/%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90/" style="font-size: 10px;">复杂度分析</a> <a href="/tags/%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" style="font-size: 10px;">学生管理系统</a> <a href="/tags/%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F2-0/" style="font-size: 12px;">学生管理系统2.0</a> <a href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 10px;">微信小程序</a> <a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 17px;">微服务</a> <a href="/tags/%E6%8B%BC%E5%A4%9A%E5%A4%9A/" style="font-size: 10px;">拼多多</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">排序</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 10px;">数据分析</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/" style="font-size: 10px;">数据库连接池</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/" style="font-size: 10px;">数据结构-稀疏数组</a> <a href="/tags/%E6%96%87%E5%AD%97%E7%AF%87-%E8%AE%B0%E5%BD%95/" style="font-size: 10px;">文字篇-记录</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 12px;">机器学习</a> <a href="/tags/%E6%A0%88/" style="font-size: 10px;">栈</a> <a href="/tags/%E6%A0%91/" style="font-size: 12px;">树</a> <a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 10px;">注解</a> <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 14px;">深度学习</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 11px;">爬虫</a> <a href="/tags/%E7%94%9F%E7%89%A9%E4%BF%A1%E6%81%AF%E5%AD%A6/" style="font-size: 10px;">生物信息学</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" style="font-size: 12px;">知识图谱</a> <a href="/tags/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%88%9D%E8%AF%95/" style="font-size: 12px;">研究生初试</a> <a href="/tags/%E7%A7%8B%E6%8B%9B/" style="font-size: 10px;">秋招</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 10px;">算法-动态规划</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%9B%9E%E6%BA%AF%E6%B3%95/" style="font-size: 10px;">算法-回溯法</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法-贪心算法</a> <a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 10px;">考研</a> <a href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/" style="font-size: 13px;">蓝桥杯</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 11px;">计算机网络</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%AF%BE%E8%AE%BE-%E8%BD%AF%E4%BB%B6%E4%B8%93%E4%B8%9A%E9%A2%98%E7%9B%AE/" style="font-size: 10px;">计算机网络课设(软件专业题目)</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12px;">设计模式</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size: 10px;">软件体系结构</a> <a href="/tags/%E9%80%92%E5%BD%92/" style="font-size: 10px;">递归</a> <a href="/tags/%E9%87%8D%E6%96%B0%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">重新部署</a> <a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 10px;">链表</a> <a href="/tags/%E9%98%9F%E5%88%97/" style="font-size: 10px;">队列</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 10px;">面试</a> <a href="/tags/%E9%A1%B5%E9%9D%A2%EF%BC%88H5-CSS%EF%BC%89/" style="font-size: 10px;">页面（H5+CSS）</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0/" style="font-size: 10px;">项目上传</a>
                    </div>
                </section>
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://ring3.xyz/">Yllen</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://mxny.org/">麦香浓郁</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://whereisk0shl.top/">K0sh1</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.ycjcl.cc/">信鑫</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://bystudent.com/">ByStundet表哥</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://www.jarviswang.me/">汪神_Jarvis</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://sh3ll.me/">Chu</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://www.hackfun.org/">4ido10n</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/iamstudy">L3m0n</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://o0xmuhe.me/">muhe</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://blog.nuptzj.cn/">_画船听雨</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.virzz.com/index.html">Virink</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.sqlsec.com/">国光</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.bodkin.ren/">老锥</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.cizel.cn/">C1zel</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://1phan.cc">1phan</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://www.liuil.top/">liuil</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/Ox9A82/">Ox9A82</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://burnegg.com/">burnegg</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://jwrsec.cn/">jwr-sec</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://sudalover.cn/">苏打</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://blog.binklac.com">VeroFess</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.bendawang.site/">bendawang</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://weeklyalgo.codes/">hook</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.flier.net.cn/">Flier&#39;blog</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.mutepig.club">mutepig</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://blog.iret.xyz/list.aspx">Silver</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://simp1e.leanote.com/">Simple</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://processor.pub/">Processor</a>
                    
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">一只淹死在二进制海洋里的二进制狗!</div>
                </section>
                
            </div>
        </div>
    </header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">Larkkkkkkk</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">Larkkkkkkk</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="https://github.com/Larkkkkkkk" target="_blank" rel="noopener">博客首页</a></li>
                
                    <li><a href="/archives">文章归档</a></li>
                
                    <li><a href="/CTFStudy">学习导航</a></li>
                
                    <li><a href="/PWNABLE">PWNABLE</a></li>
                
                    <li><a href="/resume">个人简历</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=U2JgZ2ZlY2VmamATIiJ9MDw_" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/Larkkkkkkk" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/plain-3-78/activities" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="https://weibo.com/5304208276/profile?topnav=1&wvr=6" title="weibo">weibo</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-CS224n斯坦福深度自然语言处理课" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/15/CS224n%E6%96%AF%E5%9D%A6%E7%A6%8F%E6%B7%B1%E5%BA%A6%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E8%AF%BE/" class="article-date">
      <time datetime="2022-10-15T09:19:09.000Z" itemprop="datePublished">2022-10-15</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/15/CS224n%E6%96%AF%E5%9D%A6%E7%A6%8F%E6%B7%B1%E5%BA%A6%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E8%AF%BE/">CS224n斯坦福深度自然语言处理课</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="课程链接"><a href="#课程链接" class="headerlink" title="课程链接"></a>课程链接</h1><p><a href="https://www.bilibili.com/video/BV1pt411h7aT/?spm_id_from=333.999.0.0" target="_blank" rel="noopener" title="CS224n自然语言处理课">https://www.bilibili.com/video/BV1pt411h7aT/?spm_id_from=333.999.0.0</a></p>
<p><img src="/2022/10/15/CS224n%E6%96%AF%E5%9D%A6%E7%A6%8F%E6%B7%B1%E5%BA%A6%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E8%AF%BE/1.png" alt></p>
<h1 id="学习词汇向量模型-Word2Vec"><a href="#学习词汇向量模型-Word2Vec" class="headerlink" title="学习词汇向量模型:Word2Vec"></a>学习词汇向量模型:Word2Vec</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.Word2Vec词汇向量模型：</span><br><span class="line">	1.1 概念:word单词 --&gt; 向量</span><br><span class="line">	1.2 算法:skip-gram(中心词--&gt;周围的词) &#x2F; CBOW(周围的词--&gt;中心词) </span><br><span class="line">	1.3</span><br></pre></td></tr></table></figure>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-软件体系结构" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/11/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" class="article-date">
      <time datetime="2022-10-11T11:53:31.000Z" itemprop="datePublished">2022-10-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/11/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/">软件体系结构</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="软件体系结构"><a href="#软件体系结构" class="headerlink" title="软件体系结构"></a>软件体系结构</h1><h2 id="参考论文"><a href="#参考论文" class="headerlink" title="参考论文"></a>参考论文</h2><p><a href="https://kns.cnki.net/kcms/detail/detail.aspx?dbcode=CJFD&dbname=CJFDAUTO&filename=SJSJ202209001&uniplatform=NZKPT&v=QSzkWHaEKr0sW6-OxHGc5xMEFRGPG1MA1RXR6bJx9UTyscuMa6P43lxv5Zq100uL" target="_blank" rel="noopener" title="面向软件在线升级过程的信任链机制">https://kns.cnki.net/kcms/detail/detail.aspx?dbcode=CJFD&amp;dbname=CJFDAUTO&amp;filename=SJSJ202209001&amp;uniplatform=NZKPT&amp;v=QSzkWHaEKr0sW6-OxHGc5xMEFRGPG1MA1RXR6bJx9UTyscuMa6P43lxv5Zq100uL</a></p>
<h2 id="ppt位置"><a href="#ppt位置" class="headerlink" title="ppt位置"></a>ppt位置</h2><p><a href="https://github.com/Larkkkkkkk/Larkkkkkkk.github.io/tree/master/2022/10/11/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84" target="_blank" rel="noopener">https://github.com/Larkkkkkkk/Larkkkkkkk.github.io/tree/master/2022/10/11/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84</a></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" rel="tag">软件体系结构</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-双碳大赛-垃圾分类" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/10/%E5%8F%8C%E7%A2%B3%E5%A4%A7%E8%B5%9B-%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB/" class="article-date">
      <time datetime="2022-10-10T13:18:37.000Z" itemprop="datePublished">2022-10-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/10/%E5%8F%8C%E7%A2%B3%E5%A4%A7%E8%B5%9B-%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB/">双碳大赛-垃圾分类</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.题目:垃圾分类的处理与数据分析</span><br><span class="line">2.技术:机器学习+深度学习</span><br></pre></td></tr></table></figure>

<h1 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.Kaggle:https:&#x2F;&#x2F;www.kaggle.com&#x2F;account&#x2F;login?phase&#x3D;startRegisterTab&amp;returnUrl&#x3D;%2F</span><br><span class="line">2.UCI：http:&#x2F;&#x2F;archive.ics.uci.edu&#x2F;ml&#x2F;index.php</span><br><span class="line">3.百度:https:&#x2F;&#x2F;github.com&#x2F;GokouRuri7&#x2F;TacoSSD</span><br><span class="line">4.阿里云:https:&#x2F;&#x2F;github.com&#x2F;Hmbb0606&#x2F;ResNet50_Garbage_sorting</span><br></pre></td></tr></table></figure>

<h1 id="torchvision简介"><a href="#torchvision简介" class="headerlink" title="torchvision简介"></a>torchvision简介</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line">from torchvision import datasets</span><br><span class="line">from torchvision import models</span><br><span class="line">from torchvision import transforms</span><br><span class="line">from torchvision import utils</span><br><span class="line"># torchvision是pytorch的一个图形库  --&gt; 主要用来构建计算机视觉模型</span><br><span class="line"># torchvision.datasets : 用来进行数据加载(有很多图片数据集)</span><br><span class="line"># torchvision.models: 包含常用的模型结构(含有预训练模型) [AlexNet&#x2F;VGG&#x2F;ResNet&#x2F;SqueezeNet&#x2F;DenseNet]</span><br><span class="line"># torchvision.transforms: 常用的图片变换 [裁剪&#x2F;旋转]  -- 操作对象通常是PIL Image&#x2F;torch.tensor类型的图像数据</span><br><span class="line"># torchvision.utils: 其他一些有用的方法</span><br></pre></td></tr></table></figure>

<h1 id="models包"><a href="#models包" class="headerlink" title="models包"></a>models包</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#1.使用models中的数据集</span><br><span class="line">##1.快速创建一个权重随机初始化的模型</span><br><span class="line">resnet18&#x3D;models.resnet18()</span><br><span class="line">alexnet&#x3D;models.alexnet()</span><br><span class="line">squeezenet&#x3D;models.squeezenet1_0()</span><br><span class="line">densenet&#x3D;models.densenet161()</span><br><span class="line">##2.通过pretrained&#x3D;True来加载一个别人预训练好的模型</span><br><span class="line">resnet18&#x3D;models.resnet18(pretrained&#x3D;True)  # pretrained设置为True,返回一个使用ImageNet数据集预训练过的模型,会下载权重并存储在缓存路径下</span><br><span class="line">alexnet&#x3D;models.alexnet(pretrained&#x3D;True,progress&#x3D;True)  # progress设置为True,显示下载进度条</span><br></pre></td></tr></table></figure>

<h1 id="transforms包"><a href="#transforms包" class="headerlink" title="transforms包"></a>transforms包</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#2.使用transforms包(Compose类)</span><br><span class="line">transforms.Compose([</span><br><span class="line">    #1.以输入图像的中心为裁切中心,对图像进行裁切</span><br><span class="line">      #1.1size取值: 1.int型数字表示裁剪成size大小的正方形 2.(h,w)表示裁剪成h*w大小</span><br><span class="line">    transforms.CenterCrop(size&#x3D;10),</span><br><span class="line">    #2.以输入图像的任意点为裁切中心，对图像进行裁切</span><br><span class="line">      #2.1size取值: 1.int型数字表示裁剪成size大小的正方形 2.(h,w)表示裁剪成h*w大小</span><br><span class="line">      #2.2pad_if_needed取值: 当指定当图像小于裁切后的大小时是否进行pad填充</span><br><span class="line">      #2.3padding取值: 1.int型表示每个边缘都进行pad填充 2.Sequence为2表示对左右边界、上下边界进行不同宽度的pad填充&#x2F;Sequence为4表示对左右边界、上下边界进行不同宽度的pad填充</span><br><span class="line">      #2.4fill取值(当padding_mode参数为“constant”时有效): 1.数字类型(torch.Tensor)  2.str类型 3.元组类型(长度为3表示分别对R,G,B三个通道进行填充)</span><br><span class="line">      #2.5padding_mode取值: 1.constant使用一个常量进行填充，由fill参数进行指定 2.edge使用图片最外侧边缘的像素颜色填充 3.reflect使用图片的镜像图像对边缘进行填充，最边缘的像素不重复 4.symmetric使用图片的镜像图像对边缘进行填充,最边缘的像素重复一次</span><br><span class="line">    transforms.RandomCrop(size&#x3D;10,pad_if_needed&#x3D;False),</span><br><span class="line">    #3.图像边缘进行Pad填充</span><br><span class="line">      #3.1padding取值: 1.int型表示每个边缘都进行pad填充 2.Sequence为2表示对左右边界、上下边界进行不同宽度的pad填充&#x2F;Sequence为4表示对左右边界、上下边界进行不同宽度的pad填充</span><br><span class="line">      #3.2fill取值(当padding_mode参数为“constant”时有效): 1.数字类型(torch.Tensor)  2.str类型 3.元组类型(长度为3表示分别对R,G,B三个通道进行填充)</span><br><span class="line">      #3.3padding_mode取值: 1.constant使用一个常量进行填充，由fill参数进行指定 2.edge使用图片最外侧边缘的像素颜色填充 3.reflect使用图片的镜像图像对边缘进行填充，最边缘的像素不重复 4.symmetric使用图片的镜像图像对边缘进行填充,最边缘的像素重复一次</span><br><span class="line">    transforms.Pad(padding&#x3D;10,fill&#x3D;0,padding_mode&#x3D;&#39;constant&#39;)</span><br><span class="line">    transforms.ToTensor()  #图像转换成torch.Tensor格式</span><br><span class="line">    #4.输入只能是torch.Tensor</span><br><span class="line">    transforms.Normalize(mean&#x3D;[0.5,0.5,0.5],std&#x3D;[0.1,0.1,0.1]) #tensor图像进行标准化转换 mean是均值 std是标准差</span><br><span class="line">    transforms.ConvertImageDtype(torch.float),  #tensor图像转换成torch.float类型</span><br><span class="line">    #5.数据类型转换(tensor&#x2F;numpy.ndarray --&gt; PIL Image)</span><br><span class="line">      #5.1 mode取值: 表示输入数据的色彩空间或像素深度 1.None则实际的mode和输入图像的通道数有关 2.RGBA为输入有四个通道 3.RGB为输入有三个通道 4.LA为输入有两个通道</span><br><span class="line">    transforms.ToPILImage(mode&#x3D;None)</span><br><span class="line">    #6.数据类型转换(PIL Image --&gt; tensor)</span><br><span class="line">    image&#x3D;Image.open(r&quot;&#x2F;path&#x2F;to&#x2F;image.jpg&quot;)</span><br><span class="line">    img_tensor&#x3D;transform.ToTensor()(image)</span><br><span class="line">])</span><br></pre></td></tr></table></figure>

<h1 id="datasets包"><a href="#datasets包" class="headerlink" title="datasets包"></a>datasets包</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#3.datasets包 -- 包中的类几乎都直接&#x2F;间接继承自torch.utils.data.DataSet类 -- 借由datasets包得到的数据集都可以再传递给torch.utils.data.DataLoader(多线程并行加载样本数据)</span><br><span class="line">data&#x3D;torchvision.datasets.ImageNet()</span><br><span class="line">data_loader&#x3D;torch.utils.data.DataLoader(data,batch_size&#x3D;4,shuffle&#x3D;True,num_workers&#x3D;args.nThreads) #并行加载一个ImageNet数据集</span><br><span class="line"></span><br><span class="line">#3.1 加载常用数据集</span><br><span class="line">#root: 表示存放mnist数据集的根目录(如果加载的是训练集这个参数就表示训练集的根目录，如果加载的是测试集这个参数就表示测试集的根目录)</span><br><span class="line">#train: True表示训练集,False表示测试集</span><br><span class="line">#transform: 可调用函数类型(输入图片必然是PIL Image格式的)</span><br><span class="line">#target_transform: 可调用函数类型(类对目标进行变换)</span><br><span class="line">#download:</span><br><span class="line">torchvision.datasets.MNIST(root,train&#x3D;True,transform&#x3D;None,target_transform&#x3D;None,download&#x3D;False)</span><br><span class="line">#3.2 加载用户自定义数据集(ImageFolder类)  --一种方式组织(不同类别的数据放在不同目录下，每个目录的名字就是数据的标签)</span><br><span class="line">torchvision.datasets.ImageFolder(root,transform&#x3D;None,target_transform&#x3D;None,loader&#x3D;default_loader,is_valid_file&#x3D;)</span><br><span class="line">dataset &#x3D; ImageFolder(&quot;train_data&#x2F;&quot;)</span><br><span class="line">print(dataset.classes)  #list类型的类名</span><br><span class="line">print(dataset.class_to_idx)  #list类型的标签</span><br><span class="line">print(dataset.imgs)  #list类型(图片名称和类型组成)</span><br><span class="line">print(dataset[0]) #对应图像的数据</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/10/%E5%8F%8C%E7%A2%B3%E5%A4%A7%E8%B5%9B-%E5%9E%83%E5%9C%BE%E5%88%86%E7%B1%BB/1.png" alt></p>
<h1 id="utils包"><a href="#utils包" class="headerlink" title="utils包"></a>utils包</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#4.utils包(一些计算机视觉领域经常用到的操作)</span><br><span class="line">##4.1 make_grid函数  --&gt; 将若干张图像拼成一幅图像</span><br><span class="line">###4.1.1 tensor: 1.Tensor类型必须是四维B×C×H×W,用来表示一组mini-batch的Tensor 2.List类型必须是一组大小相同的图片</span><br><span class="line">###4.1.2 nrow: 表示组成的大图中每一行包括的小图的数量</span><br><span class="line">###4.1.3 padding: 表示每张小图四周的padding大小</span><br><span class="line">###4.1.4 normalize: 1.True表示图像会被标准化(控制在(0,1)范围内，最大值最小值通过batch中所有图像的最大值最小值决定)</span><br><span class="line">###4.1.5 value_range: 用元组(min,max)作为标准化图像时用到的最大值和最小值</span><br><span class="line">###4.1.6 scale_each: 1.True表示每个图片使用自己的最值</span><br><span class="line">###4.1.7 pad_value: 表示pad填充的像素的颜色</span><br><span class="line">torchvision.utils.make_grid(tensor, nrow&#x3D;8, padding&#x3D;2, normalize&#x3D;False,value_range&#x3D;None, scale_each&#x3D;False, pad_value&#x3D;0)</span><br><span class="line"></span><br><span class="line">##4.2 save_image函数  --&gt; 将给定的Tensor保存成图片</span><br><span class="line">###4.2.1 tensor: 1.如果给定的是一个mini-batch的Tensor,会自动调用make_grid函数将图片组合成网格形式再保存 2.List类型</span><br><span class="line">###4.2.2 fp: 将图片保存到该参数指定的文件路径&#x2F;文件对象 1.string类型&#x2F;文件对象(file object)类型</span><br><span class="line">###4.2.3 format: 1.fp为文件名，则忽略 2.fp为文本对象，则参数经常被使用</span><br><span class="line">torchvision.utils.save_image(tensor,fp,format&#x3D;None)</span><br><span class="line">##4.3 draw_bounding_boxes函数 --&gt; 将给定的图像中画出bounding box。输入的图像必须是uint8类型，且范围在0到255之间</span><br><span class="line">###4.3.1 image:Tensor类型 表示被操作的图片 Tensor大小为C×H×W，dtype类型为uint8</span><br><span class="line">###4.3.2 boxes:Tensor类型 如果一张图像上有N个bounding box (box的四个点以(xmin, ymin, xmax, ymax)的形式进行组织) --注意，这个坐标是图像上的绝对坐标。</span><br><span class="line">torchvision.utils.draw_bounding_boxes(image,boxes,labels&#x3D;None,colors,fill&#x3D;False,width&#x3D;1,font&#x3D;None,font_size&#x3D;10)</span><br><span class="line"></span><br><span class="line">##4.4 draw_segmentation_masks函数</span><br><span class="line">###4.4.1 image：Tensor类型，大小是(3, H, W)，类型是uint8</span><br><span class="line">###4.4.2 masks：Tensor类型，大小是(num_masks, H, W)或(H, W)，dtype是bool类型</span><br><span class="line">###4.4.3 alpha：float类型，大小在0到1之间，表示mask的透明度，0表示完全透明，1表示不透明</span><br><span class="line">###4.4.4 colors：list类型或None。list类型来指定每个mask的颜色，颜色可以用字符串&quot;red&quot;或&quot;#FF00FF&quot;来表示，也可以用RGB元组(0, 255, 255)表示</span><br><span class="line">torchvision.utils.draw_segmentation_masks(image, masks, alpha&#x3D;0.8, colors&#x3D;None)</span><br></pre></td></tr></table></figure>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-PyTorch深度学习实践" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/07/PyTorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5/" class="article-date">
      <time datetime="2022-10-07T10:50:29.000Z" itemprop="datePublished">2022-10-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/07/PyTorch%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%AE%9E%E8%B7%B5/">PyTorch深度学习实践</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="安装PyTorch"><a href="#安装PyTorch" class="headerlink" title="安装PyTorch"></a>安装PyTorch</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.GPU版本</span><br><span class="line">2.CPU版本</span><br></pre></td></tr></table></figure>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-深度学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="article-date">
      <time datetime="2022-10-07T09:46:43.000Z" itemprop="datePublished">2022-10-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="深度学习入门路线"><a href="#深度学习入门路线" class="headerlink" title="深度学习入门路线"></a>深度学习入门路线</h1><p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/1.png" alt></p>
<h1 id="深度学习实战路线"><a href="#深度学习实战路线" class="headerlink" title="深度学习实战路线"></a>深度学习实战路线</h1><p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/2.1.png" alt></p>
<h1 id="深度学习必看书籍"><a href="#深度学习必看书籍" class="headerlink" title="深度学习必看书籍"></a>深度学习必看书籍</h1><p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/2.png" alt></p>
<h1 id="前馈神经网络"><a href="#前馈神经网络" class="headerlink" title="前馈神经网络"></a>前馈神经网络</h1><p><strong>总体框架</strong></p>
<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/3.png" alt></p>
<h2 id="神经元"><a href="#神经元" class="headerlink" title="神经元"></a>神经元</h2><p><strong>人工神经元:</strong></p>
<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/4.png" alt></p>
<p><strong>激活函数性质</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.连续并可导的非线性函数</span><br><span class="line">2.激活函数及其导数要尽可能简单,有利于提高网络计算效率</span><br><span class="line">3.激活函数的导函数的值域要在一个合适的空间(不能太大也不能太小,否则会影响训练的效率和稳定性)</span><br></pre></td></tr></table></figure>

<h3 id="Sigmoid函数-S型曲线函数"><a href="#Sigmoid函数-S型曲线函数" class="headerlink" title="Sigmoid函数(S型曲线函数)"></a>Sigmoid函数(S型曲线函数)</h3><p><strong>sigmoid函数的公式</strong></p>
<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/7.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.分为logistic函数和Tanh函数</span><br><span class="line">	1.1 logistic函数(值域&gt;0):</span><br><span class="line">	1.2 Tanh函数(值域(-1,1)):</span><br><span class="line">2.sigmoid函数的性质:</span><br><span class="line">  2.1 sigmoid函数是饱和函数[x&gt;-∞和x-&gt;+∞时,其f&#39;(x)-&gt;0]</span><br><span class="line">  2.2 Tanh函数是零中心化的,logistic函数输出恒大于0的</span><br></pre></td></tr></table></figure>

<p><strong>sigmoid两种函数的图像:</strong></p>
<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/5.png" alt></p>
<h3 id="ReLU函数-斜坡函数-修正线性单元"><a href="#ReLU函数-斜坡函数-修正线性单元" class="headerlink" title="ReLU函数(斜坡函数/修正线性单元)"></a>ReLU函数(斜坡函数/修正线性单元)</h3><p><strong>ReLU函数公式</strong></p>
<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/8.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.优点:</span><br><span class="line">  1.1 计算更加高效(采用ReLU的神经元只需要进行加、乘、比较操作) </span><br><span class="line">  1.2 具有生物学合理性(单侧抑制、宽兴奋边界) -- 能够保证大约50%的神经元会处于激活状态</span><br><span class="line">  1.3 ReLU函数为左饱和函数+x&gt;0时f&#39;(x)&#x3D;1,在一定程度上缓解了神经网络的梯度消失问题,加速梯度下降的收敛速度</span><br><span class="line">2.缺点:</span><br><span class="line">  2.1 输出是非零中心化的,给后一层的神经网络引入偏置偏移,会影响梯度下降的速度 </span><br><span class="line">	  2.2 死亡ReLU问题:ReLU神经元在训练时比较容易&quot;死亡&quot;(如果有一次不恰当的更新后,第一个隐藏层中的某个ReLU神经元在所有训练数据上都不能被激活,在以后的训练过程中永远不能被激活)</span><br></pre></td></tr></table></figure>

<h4 id="带泄露的ReLU"><a href="#带泄露的ReLU" class="headerlink" title="带泄露的ReLU"></a>带泄露的ReLU</h4><p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/10.png" alt></p>
<h4 id="带参数的ReLU"><a href="#带参数的ReLU" class="headerlink" title="带参数的ReLU"></a>带参数的ReLU</h4><p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/11.png" alt></p>
<h4 id="ELU函数"><a href="#ELU函数" class="headerlink" title="ELU函数"></a>ELU函数</h4><p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/12.png" alt></p>
<h4 id="Softplus函数"><a href="#Softplus函数" class="headerlink" title="Softplus函数"></a>Softplus函数</h4><p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/13.png" alt></p>
<p><strong>四种函数图对比:</strong></p>
<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/9.png" alt></p>
<h3 id="Swish函数"><a href="#Swish函数" class="headerlink" title="Swish函数"></a>Swish函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.自门控激活函数</span><br><span class="line">2.通过设置得到1&#x2F;0 --&gt; 门的状态为&quot;开&quot;&#x2F;&quot;关&quot;</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/14.png" alt></p>
<h3 id="GELU函数"><a href="#GELU函数" class="headerlink" title="GELU函数"></a>GELU函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.高斯误差线性单元 --&gt; 通过门控机制来调整其输出值的激活函数</span><br><span class="line">2.特殊的Swish函数</span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/15.png" alt></p>
<h3 id="Maxout单元"><a href="#Maxout单元" class="headerlink" title="Maxout单元"></a>Maxout单元</h3><p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/16.png" alt></p>
<h2 id="网络结构"><a href="#网络结构" class="headerlink" title="网络结构"></a>网络结构</h2><p><strong>三种网络结构:</strong></p>
<p><img src="/2022/10/07/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/17.png" alt></p>
<h3 id="前馈神经网络-1"><a href="#前馈神经网络-1" class="headerlink" title="前馈神经网络"></a>前馈神经网络</h3><h1 id="反向传播算法"><a href="#反向传播算法" class="headerlink" title="反向传播算法"></a>反向传播算法</h1><h2 id><a href="#" class="headerlink" title="##"></a>##</h2>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" rel="tag">深度学习</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-机器学习实战之工业蒸汽" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/" class="article-date">
      <time datetime="2022-09-27T12:44:48.000Z" itemprop="datePublished">2022-09-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/">机器学习实战之工业蒸汽</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="题目基本情况"><a href="#题目基本情况" class="headerlink" title="题目基本情况"></a>题目基本情况</h1><h2 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.数据集:</span><br><span class="line">https:&#x2F;&#x2F;tianchi.aliyun.com&#x2F;dataset&#x2F;dataDetail?dataId&#x3D;130516</span><br></pre></td></tr></table></figure>

<h1 id="数据探索"><a href="#数据探索" class="headerlink" title="数据探索"></a>数据探索</h1><h2 id="理论知识"><a href="#理论知识" class="headerlink" title="理论知识"></a>理论知识</h2><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/1.png" alt></p>
<h2 id="赛题数据探索"><a href="#赛题数据探索" class="headerlink" title="赛题数据探索"></a>赛题数据探索</h2><h3 id="导入工具包"><a href="#导入工具包" class="headerlink" title="导入工具包"></a>导入工具包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">import warnings</span><br><span class="line">from scipy import stats</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br></pre></td></tr></table></figure>

<h3 id="可视化数据分布"><a href="#可视化数据分布" class="headerlink" title="可视化数据分布"></a>可视化数据分布</h3><h4 id="箱型图-boxplot"><a href="#箱型图-boxplot" class="headerlink" title="箱型图(boxplot)"></a>箱型图(boxplot)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">##2.1 箱型图boxplot(所有特征变量)</span><br><span class="line">columns&#x3D;train_data.columns.tolist()[:39]  #前39列</span><br><span class="line">fig&#x3D;plt.figure(figsize&#x3D;(20,40)) #指定绘图对象宽度和高度</span><br><span class="line">for i in range(38):</span><br><span class="line">    plt.subplot(8,5,i+1) #指定8行5列子图</span><br><span class="line">    sns.boxplot(train_data[columns[i]],orient&#x3D;&quot;h&quot;,width&#x3D;0.5)  #orient是v(垂直)&#x2F;h(水平)</span><br></pre></td></tr></table></figure>

<p><strong>整体的箱型图:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.1.1.png" alt></p>
<p><strong>V0一个的箱型图:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.1.2.png" alt></p>
<h4 id="直方图-distplot-和Q-Q图-probplot"><a href="#直方图-distplot-和Q-Q图-probplot" class="headerlink" title="直方图(distplot)和Q-Q图(probplot)"></a>直方图(distplot)和Q-Q图(probplot)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">##2.3 直方图distplot和Q-Q图probplot(数据的分位数和正态分布的分位数对比参照) -- 如果数据符合正态分布 会在qq图内两条线重合</span><br><span class="line">train_cols&#x3D;6 #列</span><br><span class="line">train_rows&#x3D;len(train_data.columns)  #行</span><br><span class="line">plt.figure(figsize&#x3D;(train_cols,train_rows)) #指定绘图对象宽度和高度</span><br><span class="line">i&#x3D;0</span><br><span class="line">for col in train_data.columns:</span><br><span class="line">    i+&#x3D;1</span><br><span class="line">    ax&#x3D;plt.subplot(train_rows,train_cols,i) #指定r行c列子图第i个位置</span><br><span class="line">    sns.distplot(train_data[col],fit&#x3D;stats.norm)  #fit设置函数图像(与原图进行比较)</span><br><span class="line">    i+&#x3D;1</span><br><span class="line">    ax&#x3D;plt.subplot(train_rows,train_cols,i)  # 指定r行c列子图第i+1个位置</span><br><span class="line">    res&#x3D;stats.probplot(train_data[col],plot&#x3D;plt)  # fit设置函数图像(与原图进行比较)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.2.png" alt></p>
<h4 id="KDE分布图-核密度估计kdeplot"><a href="#KDE分布图-核密度估计kdeplot" class="headerlink" title="KDE分布图(核密度估计kdeplot)"></a>KDE分布图(核密度估计kdeplot)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">##2.4 KDE分布图kdeplot(核密度估计) --对直方图的加窗平滑(可以查看对比训练集和测试集中特征变量的分布情况)</span><br><span class="line">dist_cols&#x3D;6 #列</span><br><span class="line">dist_rows&#x3D;len(test_data.columns)  #行</span><br><span class="line">plt.figure(figsize&#x3D;(train_cols,train_rows)) #指定绘图对象宽度和高度</span><br><span class="line">i&#x3D;1</span><br><span class="line">for col in test_data.columns:</span><br><span class="line">    ax&#x3D;plt.subplot(dist_rows,dist_cols,i) #指定r行c列子图第i个位置</span><br><span class="line">    ax&#x3D;sns.kdeplot(train_data[col],color&#x3D;&quot;Red&quot;,shade&#x3D;True)</span><br><span class="line">    ax&#x3D;sns.kdeplot(test_data[col], color&#x3D;&quot;Blue&quot;, shade&#x3D;True)</span><br><span class="line">    ax.set_xlabel(col)  #横坐标名称</span><br><span class="line">    ax.set_ylabel(&quot;Frequency&quot;)  #纵坐标名称</span><br><span class="line">    ax&#x3D;ax.legend([&quot;训练集&quot;,&quot;测试集&quot;])  #两条曲线的名称</span><br><span class="line">    i&#x3D;i+1</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.3.png" alt></p>
<h4 id="线性回归关系图-regplot"><a href="#线性回归关系图-regplot" class="headerlink" title="线性回归关系图(regplot)"></a>线性回归关系图(regplot)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">##2.5 线性回归关系图regplot(分析变量之间的线性回归关系)</span><br><span class="line">fcols&#x3D;6 #列</span><br><span class="line">frows&#x3D;len(test_data.columns)  #行</span><br><span class="line">plt.figure(figsize&#x3D;(fcols,frows)) #指定绘图对象宽度和高度</span><br><span class="line">i&#x3D;0</span><br><span class="line">for col in test_data.columns:</span><br><span class="line">    i&#x3D;i+1</span><br><span class="line">    ax&#x3D;plt.subplot(frows,fcols,i) #指定r行c列子图第i个位置</span><br><span class="line">    sns.regplot(x&#x3D;col,y&#x3D;&#39;target&#39;,data&#x3D;train_data,ax&#x3D;ax,scatter_kws&#x3D;&#123;&#39;marker&#39;:&#39;.&#39;,&#39;s&#39;:3,&#39;alpha&#39;:0.3&#125;,line_kws&#x3D;&#123;&#39;color&#39;:&#39;k&#39;&#125;)</span><br><span class="line">    plt.xlabel(col)</span><br><span class="line">    plt.ylabel(&#39;target&#39;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.4.png" alt></p>
<h3 id="查看特征变量的相关性"><a href="#查看特征变量的相关性" class="headerlink" title="查看特征变量的相关性"></a>查看特征变量的相关性</h3><h4 id="计算相关性系数-data-corr"><a href="#计算相关性系数-data-corr" class="headerlink" title="计算相关性系数(data.corr)"></a>计算相关性系数(data.corr)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#3.查看特征变量的相关性</span><br><span class="line">##3.1 计算相关性系数corr --&gt; KDE图中拿训练集和测试集中分布不一致的特征变量进行删除(V5,V9,V11,V17,V22,V28) --&gt; 计算剩余特征变量和target变量的相关性系数</span><br><span class="line">pd.set_option(&#39;display.max_columns&#39;,10)  #显示10列 默认none就是最多</span><br><span class="line">pd.set_option(&#39;display.max_rows&#39;,10) #显示10行</span><br><span class="line">data_train1&#x3D;train_data.drop([&#39;V5&#39;,&#39;V9&#39;,&#39;V11&#39;,&#39;V17&#39;,&#39;V22&#39;,&#39;V28&#39;],axis&#x3D;1)  #删除那些测试集和训练集分布不一致的特征向量</span><br><span class="line">train_corr&#x3D;data_train1.corr() #corr给出任意两个变量之间的相关系数</span><br><span class="line">print(train_corr)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.5.png" alt></p>
<h4 id="相关热力图-sns-heatmap"><a href="#相关热力图-sns-heatmap" class="headerlink" title="相关热力图(sns.heatmap)"></a>相关热力图(sns.heatmap)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">##3.2 热力图heatmap</span><br><span class="line">ax&#x3D;plt.subplots(figsize&#x3D;(20,16)) #调整画布大小</span><br><span class="line">ax&#x3D;sns.heatmap(train_corr,vmax&#x3D;.8,square&#x3D;True,annot&#x3D;True)  #vmax和vmin是图例中最大值和最小值的显示值 square为热力图矩阵小块形状(T以列名为标签名)  annot为T表示每个方格写入数据</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.6.png" alt></p>
<h4 id="根据相关系数筛选特征变量-相关性选择-树模型"><a href="#根据相关系数筛选特征变量-相关性选择-树模型" class="headerlink" title="根据相关系数筛选特征变量(相关性选择/树模型)"></a>根据相关系数筛选特征变量(相关性选择/树模型)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">###3.3.1 寻找k个与target变量最相关的特征变量(K&#x3D;10)</span><br><span class="line">columns&#x3D;train_corr.nlargest(10,&#39;target&#39;)  #利用相关系数.nlargest()获取</span><br><span class="line">columnsindex&#x3D;columns[&#39;target&#39;].index   # 获取符合的下标&#39;V0&#39;&#x2F;&#39;V1&#39;&#x2F;&#39;V8&#39;&#x2F;&#39;V27&#39;&#x2F;&#39;V31&#39;&#x2F;&#39;V2&#39;&#x2F;&#39;V4&#39;&#x2F;&#39;V12&#39;&#x2F;&#39;V16&#39;</span><br><span class="line">columnsvalue&#x3D;train_data[columnsindex].values  #找到k个特征变量在训练集中的值</span><br><span class="line">cm&#x3D;np.corrcoef(columnsvalue) #皮尔逊积矩相关系数--计算两个变量x和y之间的线性相关(-1到1)</span><br><span class="line">ax&#x3D;plt.subplots(figsize&#x3D;(10,10)) #调整画布大小</span><br><span class="line">ax&#x3D;sns.heatmap(train_data[columnsindex].corr(),annot&#x3D;True,square&#x3D;True) #k个相关值画热力图</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.7.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">###3.3.2 找出与target变量的相关系数大于0.5的特征变量</span><br><span class="line">corrs&#x3D;train_data.corr() #获取训练数据集的相关系数</span><br><span class="line">corrres&#x3D;corrs.index[abs(corrs[&#39;target&#39;])&gt;0.5] # 获取符合的下标 V0&#39;&#x2F;&#39;V1&#39;&#x2F;&#39;V2&#39;&#x2F;&#39;V3&#39;&#x2F;&#39;V4&#39;&#x2F;&#39;V8&#39;&#x2F;&#39;V12&#39;&#x2F;&#39;V16&#39;&#x2F;&#39;V27&#39;&#x2F;&#39;V31&#39;&#x2F;&#39;V37&#39;</span><br><span class="line">ax&#x3D;plt.figure(figsize&#x3D;(10,10))</span><br><span class="line">ax&#x3D;sns.heatmap(train_data[corrres].corr(),annot&#x3D;True,cmap&#x3D;&quot;RdYlGn&quot;) #cmap设置颜色</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/2.8.png" alt></p>
<h4 id="Box-Cox变换"><a href="#Box-Cox变换" class="headerlink" title="Box-Cox变换"></a>Box-Cox变换</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">###3.3.3 Box-Cox变换(线性回归基于正态分布 --&gt; 统计分析将数据转换为符合正态分布)</span><br><span class="line">####1. 合并数据</span><br><span class="line">drop_columns &#x3D; [&#39;V5&#39;,&#39;V9&#39;,&#39;V11&#39;,&#39;V17&#39;,&#39;V22&#39;,&#39;V28&#39;] #KDE图发现训练集和测试集中这几个特征变量不一致 需要删除</span><br><span class="line">train_droptarget&#x3D;train_data.drop([&#39;target&#39;],axis&#x3D;1)  #按照axis&#x3D;1列删除了target的行和列(因为train里面比test多了target列)</span><br><span class="line">data_all&#x3D;pd.concat([train_droptarget,test_data])  #默认纵向拼接train和test两个训练集(列不变 行数会变多)</span><br><span class="line">data_all.drop(drop_columns,axis&#x3D;1,inplace&#x3D;True)  #按照axis&#x3D;1列删除那些列</span><br><span class="line">####2. 归一化(1.MinMaxScaler函数&#x2F;2.min-max离差标准化)</span><br><span class="line">colunms_list&#x3D;list(data_all.columns)  #对合并后的每列数据合成一个list列表</span><br><span class="line">def scale_minmax(col):  #定义一个标准化的函数用于apply方法的第一个参数</span><br><span class="line">    return (col-col.min())&#x2F;(col.max()-col.min())</span><br><span class="line">data_all[colunms_list]&#x3D;data_all[colunms_list].apply(scale_minmax,axis&#x3D;0) # axis&#x3D;0对每一列数据应用函数</span><br><span class="line"></span><br><span class="line">####3. Box-Cox变换</span><br><span class="line">data_all, lambda0 &#x3D; boxcox1p(data_all)</span><br><span class="line"></span><br><span class="line">####4. 重新画Q-Q图</span><br><span class="line">data_all_cols&#x3D;6 #列</span><br><span class="line">data_all_rows&#x3D;len(data_all.columns)  #行</span><br><span class="line">plt.figure(figsize&#x3D;(data_all_cols,data_all_rows)) #指定绘图对象宽度和高度</span><br><span class="line">i&#x3D;0</span><br><span class="line">for col in data_all.columns:</span><br><span class="line">    i+&#x3D;1</span><br><span class="line">    ax&#x3D;plt.subplot(data_all_rows,data_all_cols,i) #指定r行c列子图第i个位置</span><br><span class="line">    sns.distplot(data_all[col],fit&#x3D;stats.norm)  #fit设置函数图像(与原图进行比较)</span><br><span class="line">    i+&#x3D;1</span><br><span class="line">    ax&#x3D;plt.subplot(data_all_rows,data_all_cols,i)  # 指定r行c列子图第i+1个位置</span><br><span class="line">    res&#x3D;stats.probplot(data_all[col],plot&#x3D;plt)  # fit设置函数图像(与原图进行比较)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<h1 id="特征工程"><a href="#特征工程" class="headerlink" title="特征工程"></a>特征工程</h1><h2 id="特征工程的重要性和处理"><a href="#特征工程的重要性和处理" class="headerlink" title="特征工程的重要性和处理"></a>特征工程的重要性和处理</h2><p><strong>特征工程的重要性:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.1.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> 1.特征工程处理流程:</span><br><span class="line">1.1 去掉无用特征</span><br><span class="line">1.2 去掉冗余特征(如共线特征)</span><br><span class="line">   1.3 生成新特征(利用存在的特征、转换特征、内容中的特征、其他数据源)</span><br><span class="line">1.4 特征转换(数值化、类别转换、归一化等)</span><br><span class="line">1.5 特征处理(异常值、最大值、最小值、缺失值)</span><br></pre></td></tr></table></figure>

<h2 id="数据预处理和特征处理"><a href="#数据预处理和特征处理" class="headerlink" title="数据预处理和特征处理"></a>数据预处理和特征处理</h2><h3 id="数据预处理-数据采集-数据清洗-数据采样"><a href="#数据预处理-数据采集-数据清洗-数据采样" class="headerlink" title="数据预处理(数据采集+数据清洗+数据采样)"></a>数据预处理(数据采集+数据清洗+数据采样)</h3><h4 id="数据采集"><a href="#数据采集" class="headerlink" title="数据采集"></a>数据采集</h4><h4 id="数据清洗"><a href="#数据清洗" class="headerlink" title="数据清洗"></a>数据清洗</h4><h4 id="数据采样"><a href="#数据采样" class="headerlink" title="数据采样"></a>数据采样</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.数据采样的原因:经过采集和清洗之后正负样本是不均衡的 --&gt; 数据采样</span><br><span class="line">2.数据采样的方法:</span><br><span class="line">  2.1 随机采样: 可能随机采样得到的数据很不均匀</span><br><span class="line">  2.2 分层采样: </span><br><span class="line">3.正负样本不均衡的处理办法:</span><br><span class="line">  3.1 正样本&gt;负样本 + 量特别大 : 下采样(downsampling)的方法</span><br><span class="line">  3.2 正样本&gt;负样本 + 量不大 : 上采样(oversampling)的方法(图像识别的镜像和旋转&#x2F;修改损失函数设置样本权重)</span><br></pre></td></tr></table></figure>

<h3 id="特征处理"><a href="#特征处理" class="headerlink" title="特征处理"></a>特征处理</h3><p><strong>特征处理小结:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.5.png" alt></p>
<h4 id="标准化-StandardScaler类"><a href="#标准化-StandardScaler类" class="headerlink" title="标准化(StandardScaler类)"></a>标准化(StandardScaler类)</h4><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.1.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.标准化: 依照特征矩阵的列去处理数据[通过求标准分数的方法将特征--&gt;标准正态分布]</span><br><span class="line">2.使用场景:</span><br><span class="line">	2.1 数据存在异常值和较多噪声</span><br></pre></td></tr></table></figure>

<h4 id="区间缩放法-MinMaxScaler类"><a href="#区间缩放法-MinMaxScaler类" class="headerlink" title="区间缩放法(MinMaxScaler类)"></a>区间缩放法(MinMaxScaler类)</h4><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.4.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.区间缩放法: 利用两个最值(最大值和最小值)进行缩放 [归一化的一种]</span><br></pre></td></tr></table></figure>

<h4 id="归一化-Normalizer类"><a href="#归一化-Normalizer类" class="headerlink" title="归一化(Normalizer类)"></a>归一化(Normalizer类)</h4><p><strong>公式:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.3.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.归一化: 样本的特征值--&gt;同一量纲，数据--&gt;[0,1]&#x2F;[a,b]区间内</span><br><span class="line">2.使用场景:</span><br><span class="line">	2.1 输出结果范围有要求</span><br><span class="line">    2.2 数据较为稳定，不存在极端的最大值&#x2F;最小值</span><br></pre></td></tr></table></figure>

<h4 id="定量特征二值化-Binarizer类"><a href="#定量特征二值化-Binarizer类" class="headerlink" title="定量特征二值化(Binarizer类)"></a>定量特征二值化(Binarizer类)</h4><p><strong>公式:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.2.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1. 定量特征二值化: 核心在于设定一个阈值(&gt;阈值的赋值为1,≤阈值的赋值为0)</span><br></pre></td></tr></table></figure>

<h4 id="定性特征哑编码-OneHotEncoder类"><a href="#定性特征哑编码-OneHotEncoder类" class="headerlink" title="定性特征哑编码(OneHotEncoder类)"></a>定性特征哑编码(OneHotEncoder类)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.哑变量&#x2F;虚拟变量(Dummy Variable):通常是认为虚设的变量(0&#x2F;1),用来反映某个变量的不同属性。</span><br><span class="line">2.哑变量目的: 原本不能定量处理的变量进行量化，从而评估定性因素对因变量的影响</span><br><span class="line">	2.1 例如: 变量&quot;职业&quot;取值分别为工人、农民、学生、企业职员、其他(5种选项) --&gt; 工人定义为(0,0,0,1) 那么农民就是(0,0,1,0) 学生就是(0,1,0,0) 企业职工就是(1,0,0,0)</span><br><span class="line"></span><br><span class="line">2.哑编码: 类别变量 --&gt; 哑变量</span><br><span class="line">3.哑编码规则:对于有n个类别属性的变量,通常以1个类别特征为参照，产生n-1个哑变量</span><br></pre></td></tr></table></figure>

<h4 id="缺失值处理-impute库的SimpleImputer类"><a href="#缺失值处理-impute库的SimpleImputer类" class="headerlink" title="缺失值处理(impute库的SimpleImputer类)"></a>缺失值处理(impute库的SimpleImputer类)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.用Pandas读取后特征均为NaN(数据缺失)</span><br><span class="line">2.使用impute库的SimpleImputer类</span><br></pre></td></tr></table></figure>

<h4 id="数据转换"><a href="#数据转换" class="headerlink" title="数据转换"></a>数据转换</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.基于多项式的多项式转换(PolynomialFeatures类):参数degree为度(默认值为2)</span><br><span class="line">2.基于对数函数的对数变换:基于单变元函数的数据转换可以使用统一的方法完成(FunctionTransformer类)</span><br><span class="line">3.基于指数函数:</span><br></pre></td></tr></table></figure>

<h2 id="特征降维"><a href="#特征降维" class="headerlink" title="特征降维"></a>特征降维</h2><h3 id="特征选择"><a href="#特征选择" class="headerlink" title="特征选择"></a>特征选择</h3><p><strong>特征选择三类方法:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.6.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.特征选择概念:比较简单粗暴，就是映射函数直接将不重要的特征(×)，不过会造成特征信息的丢失，不利用模型精度</span><br><span class="line">2.特征选择方法:</span><br><span class="line">  2.1 过滤法(Filter):按照发散性&#x2F;相关性对各个特征进行评分,通过设定阈值&#x2F;待选择阈值的个数来选择特征</span><br><span class="line">  2.2 包装法(Wrapper):按照目标函数(AUC&#x2F;MSE)每次选择&#x2F;排除若干特征</span><br><span class="line">	  2.3 嵌入法(Embedded):使用某些算法和模型进行训练,得到各个特征的权值系数，根据系数从大到小选择特征</span><br></pre></td></tr></table></figure>

<h3 id="线性降维"><a href="#线性降维" class="headerlink" title="线性降维"></a>线性降维</h3><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.8.png" alt></p>
<h2 id="赛题特征工程"><a href="#赛题特征工程" class="headerlink" title="赛题特征工程"></a>赛题特征工程</h2><h3 id="异常值分析-箱线图找出异常删除异常"><a href="#异常值分析-箱线图找出异常删除异常" class="headerlink" title="异常值分析(箱线图找出异常删除异常)"></a>异常值分析(箱线图找出异常删除异常)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">##箱型图</span><br><span class="line">plt.figure(figsize&#x3D;(18,10))</span><br><span class="line">plt.boxplot(x&#x3D;train_data.values,labels&#x3D;train_data.columns) #标签就是训练集的各个列</span><br><span class="line">plt.hlines([-7.5,7.5],0,40,colors&#x3D;&#39;r&#39;)  #从-7.5到7.5绘制水平线 0和40就是这条线从第几个Vx开始画到第Vx个特征</span><br><span class="line">plt.show()</span><br><span class="line">##删除异常值(通过箱型图可以查看到明显的异常值【比如V9变量】)</span><br><span class="line">train_data&#x3D;train_data[train_data[&#39;V9&#39;]&gt;-7.5]</span><br><span class="line">test_data&#x3D;test_data[test_data[&#39;V9&#39;]&gt;-7.5]</span><br><span class="line">print(train_data.describe())</span><br><span class="line">print(test_data.describe())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.9.png" alt></p>
<h3 id="归一化-最大值和最小值"><a href="#归一化-最大值和最小值" class="headerlink" title="归一化(最大值和最小值)"></a>归一化(最大值和最小值)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">##归一化(最大值和最小值)  --放缩到(0,1区间)</span><br><span class="line">features_columns&#x3D;[col for col in train_data.columns if col not in [&#39;target&#39;]]   #从V0到V37</span><br><span class="line">min_max_scaler&#x3D;preprocessing.MinMaxScaler().fit(train_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;min_max_scaler.transform(train_data[features_columns])</span><br><span class="line">test_data_scaler&#x3D;min_max_scaler.transform(test_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;pd.DataFrame(train_data_scaler) #将训练集数据弄成DF格式</span><br><span class="line">train_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">test_data_scaler&#x3D;pd.DataFrame(test_data_scaler) #将测试集数据弄成DF格式</span><br><span class="line">test_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">train_data_scaler[&#39;target&#39;] &#x3D; train_data[&#39;target&#39;]</span><br><span class="line"></span><br><span class="line">print(train_data_scaler.describe())</span><br><span class="line">print(test_data_scaler.describe())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.10.png" alt></p>
<h3 id="查看数据分布-KDE差异较大删除特征"><a href="#查看数据分布-KDE差异较大删除特征" class="headerlink" title="查看数据分布(KDE差异较大删除特征)"></a>查看数据分布(KDE差异较大删除特征)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">##查看数据分布  --通过KDE分布对比了特征变量在两个数据集中的分布情况(V5&#x2F;V9&#x2F;V11&#x2F;V17&#x2F;V22&#x2F;V28在训练集和测试集分布差异较大，会影响模型的泛化能力，故删除这些特征)</span><br><span class="line">drop_col&#x3D;6 #6列</span><br><span class="line">drop_row&#x3D;1 #1行</span><br><span class="line">plt.figure(figsize&#x3D;(5*drop_col,5*drop_row))</span><br><span class="line">for i,col in enumerate([&quot;V5&quot;,&quot;V9&quot;,&quot;V11&quot;,&quot;V17&quot;,&quot;V22&quot;,&quot;V28&quot;]): #enumerate函数用于将一个可遍历的数据对象</span><br><span class="line">    ax&#x3D;plt.subplot(1,6,i+1)</span><br><span class="line">    ax&#x3D;sns.kdeplot(train_data_scaler[col],color&#x3D;&quot;Red&quot;,shade&#x3D;True) #画KDE图</span><br><span class="line">    ax&#x3D;sns.kdeplot(test_data_scaler[col],color&#x3D;&quot;Blue&quot;,shade&#x3D;True) #画KDE图</span><br><span class="line">    ax.set_xlabel(col) #设置x标签为col</span><br><span class="line">    ax.set_ylabel(&quot;Frequency&quot;) #设置y标签为Frequency</span><br><span class="line">    ax&#x3D;ax.legend([&quot;train&quot;, &quot;test&quot;])  #设置两条曲线分别叫train和test</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.11.png" alt></p>
<h3 id="特征相关性-用热力图可视化"><a href="#特征相关性-用热力图可视化" class="headerlink" title="特征相关性(用热力图可视化)"></a>特征相关性(用热力图可视化)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">##特征相关性(热力图可视化显示)</span><br><span class="line">plt.figure(figsize&#x3D;(20,16))</span><br><span class="line">column&#x3D;train_data_scaler.columns.tolist() # 整出来一个列表list表示从V0-V39-target</span><br><span class="line">mcorr&#x3D;train_data_scaler[column].corr(method&#x3D;&quot;spearman&quot;)  # spearman表示非线性的 pearson表示相关系数 kendall反映分类变量相关性的指标(无序序列的相关系数)</span><br><span class="line"># zeros_like()函数: 创建一个和mcorr同维度的数组(初始化全为False)</span><br><span class="line">mask&#x3D;np.zeros_like(mcorr,dtype&#x3D;np.bool)</span><br><span class="line"># triu_indices_from()函数: 返回矩阵的上三角(上三角全为True)</span><br><span class="line">mask[np.triu_indices_from(mask)]&#x3D;True</span><br><span class="line">g&#x3D;sns.heatmap(mcorr,mask&#x3D;mask,square&#x3D;True,annot&#x3D;True,fmt&#x3D;&#39;0.2f&#39;) # square为热力图矩阵小块形状(T以列名为标签名)  annot为True表示每个方格写入数据 fmt表示小数点后两位</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.12.png" alt></p>
<h3 id="特征降维-1"><a href="#特征降维-1" class="headerlink" title="特征降维"></a>特征降维</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">##特征降维(特征相关性的初筛--计算相关性系数并筛选&gt;0.1的特征变量)</span><br><span class="line">mcorr&#x3D;mcorr.abs() #将所有取绝对值</span><br><span class="line">numberical_corr&#x3D;mcorr[mcorr[&#39;target&#39;]&gt;0.1][&#39;target&#39;]</span><br><span class="line">print(numberical_corr.sort_values(ascending&#x3D;False))  # VX和系数值 (按照系数值进行排序)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.13.png" alt></p>
<h3 id="多重共线性分析-statsmodels-stats-outliers-influence-variance-inflation-factor"><a href="#多重共线性分析-statsmodels-stats-outliers-influence-variance-inflation-factor" class="headerlink" title="多重共线性分析(statsmodels.stats.outliers_influence.variance_inflation_factor)"></a>多重共线性分析(statsmodels.stats.outliers_influence.variance_inflation_factor)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">##多重共线性分析(特征组之间的相关性系数较大) -- 每个特征变量与其他特征变量之间的相关性系数较大所以存在较大的共线性影响 --&gt; 使用PCA进行处理(去除多重共线性)</span><br><span class="line">###statsmodels.stats.outliers_influence.variance_inflation_factor  多重共线性方差膨胀因子</span><br><span class="line">new_numberical&#x3D;[&#39;V0&#39;, &#39;V2&#39;, &#39;V3&#39;, &#39;V4&#39;, &#39;V5&#39;, &#39;V6&#39;, &#39;V10&#39;,&#39;V11&#39;, &#39;V13&#39;, &#39;V15&#39;, &#39;V16&#39;, &#39;V18&#39;, &#39;V19&#39;, &#39;V20&#39;, &#39;V22&#39;,&#39;V24&#39;,&#39;V30&#39;, &#39;V31&#39;, &#39;V37&#39;]</span><br><span class="line">X&#x3D;np.matrix(train_data_scaler[new_numberical]) #根据new_numberical来构成一个二维数组</span><br><span class="line">VIF_list&#x3D;[variance_inflation_factor(X,i) for i in range(X.shape[1])] # 获得多重共线性方差膨胀因子</span><br><span class="line">print(VIF_list)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.14.png" alt></p>
<h3 id="PCA处理-去除数据的多重共线性-并进行降维"><a href="#PCA处理-去除数据的多重共线性-并进行降维" class="headerlink" title="PCA处理(去除数据的多重共线性,并进行降维)"></a>PCA处理(去除数据的多重共线性,并进行降维)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">##PCA处理</span><br><span class="line">### sklearn.decomposition.PCA PCA处理之后可保持90%的信息数据</span><br><span class="line">pca&#x3D;PCA(n_components&#x3D;0.9) # 整数表示保留几个特征 小数表示百分之多少的信息</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_90&#x3D;pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_90&#x3D;pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_90&#x3D;pd.DataFrame(new_train_pca_90)</span><br><span class="line">new_test_pca_90&#x3D;pd.DataFrame(new_test_pca_90)</span><br><span class="line">new_train_pca_90[&#39;target&#39;]&#x3D;train_data_scaler[&#39;target&#39;]  # PCA处理之后保留了16个主成分</span><br><span class="line">print(new_train_pca_90.describe())</span><br><span class="line">print(&quot;----------------------------------------------&quot;)</span><br><span class="line">print(train_data_scaler.describe())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.15.png" alt></p>
<h1 id="模型训练"><a href="#模型训练" class="headerlink" title="模型训练"></a>模型训练</h1><h2 id="回归和相关模型"><a href="#回归和相关模型" class="headerlink" title="回归和相关模型"></a>回归和相关模型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #评价指标</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.归一化(最大值和最小值)  --放缩到(0,1区间)</span><br><span class="line">features_columns&#x3D;[col for col in train_data.columns if col not in [&#39;target&#39;]]   #从V0到V37</span><br><span class="line">min_max_scaler&#x3D;preprocessing.MinMaxScaler().fit(train_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;min_max_scaler.transform(train_data[features_columns])</span><br><span class="line">test_data_scaler&#x3D;min_max_scaler.transform(test_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;pd.DataFrame(train_data_scaler) #将训练集数据弄成DF格式</span><br><span class="line">train_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">test_data_scaler&#x3D;pd.DataFrame(test_data_scaler) #将测试集数据弄成DF格式</span><br><span class="line">test_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">train_data_scaler[&#39;target&#39;] &#x3D; train_data[&#39;target&#39;]</span><br><span class="line"></span><br><span class="line">#3.PCA处理</span><br><span class="line">### 1.sklearn.decomposition.PCA PCA处理之后可保持90%的信息数据</span><br><span class="line">pca&#x3D;PCA(n_components&#x3D;0.9) # 整数表示保留几个特征 小数表示百分之多少的信息</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_90&#x3D;pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_90&#x3D;pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_90&#x3D;pd.DataFrame(new_train_pca_90)</span><br><span class="line">new_test_pca_90&#x3D;pd.DataFrame(new_test_pca_90)</span><br><span class="line">new_train_pca_90[&#39;target&#39;]&#x3D;train_data_scaler[&#39;target&#39;]  # PCA处理之后保留了16个主成分</span><br><span class="line">### 2.sklearn.decomposition.PCA PCA处理之后可保持95%的信息数据</span><br><span class="line">pca &#x3D; PCA(n_components&#x3D;0.95)</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_16 &#x3D; pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_16 &#x3D; pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_16 &#x3D; pd.DataFrame(new_train_pca_16)</span><br><span class="line">new_test_pca_16 &#x3D; pd.DataFrame(new_test_pca_16)</span><br><span class="line">new_train_pca_16[&#39;target&#39;] &#x3D; train_data_scaler[&#39;target&#39;] # PCA处理之后保留了16个主成分</span><br><span class="line"></span><br><span class="line">#2.切分数据(训练集--&gt; 80%训练集和20%验证数据)</span><br><span class="line">new_train_pca_16&#x3D;new_train_pca_16.fillna(0) #采用PCA保留16维特征的数据</span><br><span class="line">train&#x3D;new_train_pca_16[new_test_pca_16.columns]</span><br><span class="line">target&#x3D;new_train_pca_16[&#39;target&#39;]</span><br><span class="line">##切分数据 训练数据80% 验证数据20%</span><br><span class="line">train_data,test_data,train_target,test_target&#x3D;train_test_split(train,target,test_size&#x3D;0.2,random_state&#x3D;0)</span><br><span class="line"></span><br><span class="line">#4.线性回归</span><br><span class="line">clf&#x3D;LinearRegression()  #实例化</span><br><span class="line">clf.fit(train_data,train_target) #创建训练集的转换器</span><br><span class="line">test_pred&#x3D;clf.predict(test_data) #获得测试集的预测</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred) #判断测试集的目标值和测试集的预测值</span><br><span class="line">print(&quot;线性回归预测结果:&quot;,score)  # 结果为0.13468236081062834</span><br><span class="line"></span><br><span class="line">#5.K近邻</span><br><span class="line">clf&#x3D;KNeighborsRegressor(n_neighbors&#x3D;3) # k取3</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">test_pred&#x3D;clf.predict(test_data)</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred)</span><br><span class="line">print(&quot;K近邻回归预测结果:&quot;,score) # 结果为0.22391053287197232</span><br><span class="line"></span><br><span class="line">#6.决策树回归</span><br><span class="line">clf&#x3D;DecisionTreeRegressor()</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">test_pred&#x3D;clf.predict(test_data)</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred)</span><br><span class="line">print(&quot;决策树回归预测结果:&quot;,score) # 结果为0.33070805190311414</span><br><span class="line"></span><br><span class="line">#7.随机森林回归</span><br><span class="line">clf&#x3D;RandomForestRegressor(n_estimators&#x3D;200)  #创建200课树的模型</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">test_pred&#x3D;clf.predict(test_data)</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred)</span><br><span class="line">print(&quot;随机森林回归预测结果:&quot;,score) # 结果为</span><br><span class="line"></span><br><span class="line">#8.LightGBM回归(微软开发的一个GBDT算法框架--更快的训练速度，更低的内存消耗，更好的准确率，处理海量数据)</span><br><span class="line">##(1)连续的浮点特征值 --&gt; k个整数 + (2)构造一个宽度为k的直方图   [遍历时，将离散化后的值作为索引在直方图中积累统计量]</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.16.png" alt></p>
<h2 id="赛题模型训练"><a href="#赛题模型训练" class="headerlink" title="赛题模型训练"></a>赛题模型训练</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">import lightgbm as lgb # LightGBM模型</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #评价指标</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br><span class="line"></span><br><span class="line">#3归一化(最大值和最小值)  --放缩到(0,1区间)</span><br><span class="line">features_columns&#x3D;[col for col in train_data.columns if col not in [&#39;target&#39;]]   #从V0到V37</span><br><span class="line">min_max_scaler&#x3D;preprocessing.MinMaxScaler().fit(train_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;min_max_scaler.transform(train_data[features_columns])</span><br><span class="line">test_data_scaler&#x3D;min_max_scaler.transform(test_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;pd.DataFrame(train_data_scaler) #将训练集数据弄成DF格式</span><br><span class="line">train_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">test_data_scaler&#x3D;pd.DataFrame(test_data_scaler) #将测试集数据弄成DF格式</span><br><span class="line">test_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">train_data_scaler[&#39;target&#39;] &#x3D; train_data[&#39;target&#39;]</span><br><span class="line"></span><br><span class="line">#3.PCA处理</span><br><span class="line">### 1.sklearn.decomposition.PCA PCA处理之后可保持90%的信息数据</span><br><span class="line">pca&#x3D;PCA(n_components&#x3D;0.9) # 整数表示保留几个特征 小数表示百分之多少的信息</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_90&#x3D;pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_90&#x3D;pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_90&#x3D;pd.DataFrame(new_train_pca_90)</span><br><span class="line">new_test_pca_90&#x3D;pd.DataFrame(new_test_pca_90)</span><br><span class="line">new_train_pca_90[&#39;target&#39;]&#x3D;train_data_scaler[&#39;target&#39;]  # PCA处理之后保留了16个主成分</span><br><span class="line">### 2.sklearn.decomposition.PCA PCA处理之后可保持95%的信息数据</span><br><span class="line">pca &#x3D; PCA(n_components&#x3D;0.95)</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_16 &#x3D; pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_16 &#x3D; pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_16 &#x3D; pd.DataFrame(new_train_pca_16)</span><br><span class="line">new_test_pca_16 &#x3D; pd.DataFrame(new_test_pca_16)</span><br><span class="line">new_train_pca_16[&#39;target&#39;] &#x3D; train_data_scaler[&#39;target&#39;] # PCA处理之后保留了16个主成分</span><br><span class="line"></span><br><span class="line">#2.切分数据(训练集--&gt; 80%训练集和20%验证数据)</span><br><span class="line">new_train_pca_16&#x3D;new_train_pca_16.fillna(0) #采用PCA保留16维特征的数据</span><br><span class="line">train&#x3D;new_train_pca_16[new_test_pca_16.columns]</span><br><span class="line">target&#x3D;new_train_pca_16[&#39;target&#39;]</span><br><span class="line">##切分数据 训练数据80% 验证数据20%</span><br><span class="line">train_data,test_data,train_target,test_target&#x3D;train_test_split(train,target,test_size&#x3D;0.2,random_state&#x3D;0)</span><br><span class="line"></span><br><span class="line">#4.线性回归(效果一般，适合分析使用)</span><br><span class="line">clf&#x3D;LinearRegression()  #实例化</span><br><span class="line">clf.fit(train_data,train_target) #创建训练集的转换器</span><br><span class="line">test_pred&#x3D;clf.predict(test_data) #获得测试集的预测</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred) #判断测试集的目标值和测试集的预测值</span><br><span class="line">print(&quot;线性回归预测结果:&quot;,score)  # 结果为0.13468236081062834</span><br><span class="line"></span><br><span class="line">#5.K近邻(效果一般)</span><br><span class="line">clf&#x3D;KNeighborsRegressor(n_neighbors&#x3D;8) # k取8 最近8个</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">test_pred&#x3D;clf.predict(test_data)</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred)</span><br><span class="line">print(&quot;K近邻回归预测结果:&quot;,score) # 结果为0.22391053287197232</span><br><span class="line"></span><br><span class="line">#6.决策树回归</span><br><span class="line">clf&#x3D;DecisionTreeRegressor()</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">test_pred&#x3D;clf.predict(test_data)</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred)</span><br><span class="line">print(&quot;决策树回归预测结果:&quot;,score) # 结果为0.33070805190311414</span><br><span class="line"></span><br><span class="line">#7.随机森林回归(比较合适)</span><br><span class="line">clf&#x3D;RandomForestRegressor(n_estimators&#x3D;200)  #创建200课树的模型</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">test_pred&#x3D;clf.predict(test_data)</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred)</span><br><span class="line">print(&quot;随机森林回归预测结果:&quot;,score) # 结果为</span><br><span class="line"></span><br><span class="line">#8.LightGBM回归(微软开发的一个GBDT算法框架--更快的训练速度，更低的内存消耗，更好的准确率，处理海量数据)</span><br><span class="line">##(1)连续的浮点特征值 --&gt; k个整数 + (2)构造一个宽度为k的直方图   [遍历时，将离散化后的值作为索引在直方图中积累统计量]</span><br><span class="line">clf&#x3D;lgb.LGBMRegressor(</span><br><span class="line">    learning_rate&#x3D;0.01, # 学习率 推荐的候选值为：[0.01, 0.015, 0.025, 0.05, 0.1]</span><br><span class="line">    max_depth&#x3D;-1, # 指定树的最大深度(防止过拟合)</span><br><span class="line">    n_estimators&#x3D;5000, # 树的数量</span><br><span class="line">    boosting_type&#x3D;&#39;gbdt&#39;, # 指定弱学习器的类型 -- gbdt表示使用基于树的模型进行计算(默认)&#x2F;gblinear表示使用线性模型&#x2F;rf使用随机森林</span><br><span class="line">    random_state&#x3D;2019,</span><br><span class="line">    objective&#x3D;&#39;regression&#39; # regression是使用L2正则项的回归模型(默认) &#x2F;regression_l1是使用L1正则项的回归模型 &#x2F;mape平均绝对百分比误差 &#x2F;binary二分类 &#x2F;multiclass多分类</span><br><span class="line">)</span><br><span class="line">##训练模型</span><br><span class="line">clf.fit(X&#x3D;train_data,y&#x3D;train_target,eval_metric&#x3D;&#39;MSE&#39;) #eval_metric表示评价指标(默认是logloss) MSE是均方误差</span><br><span class="line">test_pred&#x3D;clf.predict(test_data)</span><br><span class="line">score&#x3D;mean_squared_error(test_target,test_pred)</span><br><span class="line">print(&quot;lightGbm回归预测结果:&quot;,score)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.17.png" alt></p>
<h1 id="模型验证"><a href="#模型验证" class="headerlink" title="模型验证"></a>模型验证</h1><h2 id="模型评估的概念和方法"><a href="#模型评估的概念和方法" class="headerlink" title="模型评估的概念和方法"></a>模型评估的概念和方法</h2><h3 id="欠拟合和过拟合"><a href="#欠拟合和过拟合" class="headerlink" title="欠拟合和过拟合"></a>欠拟合和过拟合</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">import lightgbm as lgb # LightGBM模型</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #评价指标</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">from sklearn.pipeline import Pipeline</span><br><span class="line">from sklearn.preprocessing import PolynomialFeatures</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br><span class="line"></span><br><span class="line">#生成数据集并可视化显示</span><br><span class="line">np.random.seed(666)  #随机生成666个种子</span><br><span class="line">x&#x3D;np.random.uniform(-3.0,3.0,size&#x3D;100) #随机数的最小值是-3.0 最大值是3.0</span><br><span class="line">X&#x3D;x.reshape(-1,1) #reshape更改数据的行列数目</span><br><span class="line">y&#x3D;0.5*x**2+x+2+np.random.normal(0,1,size&#x3D;100)</span><br><span class="line">plt.scatter(x,y) #生成散点图</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">#1.使用线性回归模型对数据进行拟合</span><br><span class="line">lin_reg&#x3D;LinearRegression()</span><br><span class="line">lin_reg.fit(X,y)</span><br><span class="line">print(&quot;准确率为:&quot;,lin_reg.score(X,y)) #准确率约为0.495(比较低) --可见直线拟合数据的程度较低</span><br><span class="line">##使用均方误差来评价拟合程度</span><br><span class="line">y_predict&#x3D;lin_reg.predict(X)</span><br><span class="line">print(&quot;均方误差为:&quot;,mean_squared_error(y,y_predict)) # 均方误差为3.0750025765636577</span><br><span class="line">##绘制拟合结果</span><br><span class="line">plt.scatter(x,y)</span><br><span class="line">plt.plot(np.sort(x),y_predict[np.argsort(x)],color&#x3D;&#39;r&#39;)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">#2.使用多项式回归拟合(2.1封装Pipeline管道 2.2使用Pipeline拟合数据，多项式参数设置为degree&#x3D;x)</span><br><span class="line">##2.1 封装Pipeline管道(以便于下一步灵活调整多项式回归模型参数)</span><br><span class="line">def PolynomialRegression(degree):</span><br><span class="line">    return Pipeline(</span><br><span class="line">        [(&#39;poly&#39;,PolynomialFeatures(degree&#x3D;degree)),</span><br><span class="line">        (&#39;std_scaler&#39;,StandardScaler()),</span><br><span class="line">        (&#39;lin_reg&#39;,LinearRegression())])</span><br><span class="line"></span><br><span class="line">##2.2使用Pipeline拟合数据(多项式参数设置为degree&#x3D;2)</span><br><span class="line">poly2_reg&#x3D;PolynomialRegression(degree&#x3D;2) #使用degree&#x3D;2</span><br><span class="line">poly2_reg.fit(X,y)</span><br><span class="line">y2_predict&#x3D;poly2_reg.predict(X)</span><br><span class="line">print(&quot;degree为2时候的均方误差为:&quot;,mean_squared_error(y,y2_predict)) # 均方误差为1.0987392142417858</span><br><span class="line">##绘制拟合结果</span><br><span class="line">plt.scatter(x,y)</span><br><span class="line">plt.plot(np.sort(x),y2_predict[np.argsort(x)],color&#x3D;&#39;r&#39;)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">##2.2使用Pipeline拟合数据(多项式参数设置为degree&#x3D;10)</span><br><span class="line">poly10_reg&#x3D;PolynomialRegression(degree&#x3D;10) #使用degree&#x3D;10</span><br><span class="line">poly10_reg.fit(X,y)</span><br><span class="line">y10_predict&#x3D;poly10_reg.predict(X)</span><br><span class="line">print(&quot;degree为10时候的均方误差为:&quot;,mean_squared_error(y,y10_predict)) # 均方误差为1.050846676376416</span><br><span class="line">##绘制拟合结果</span><br><span class="line">plt.scatter(x,y)</span><br><span class="line">plt.plot(np.sort(x),y10_predict[np.argsort(x)],color&#x3D;&#39;r&#39;)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">##2.3使用Pipeline拟合数据(多项式参数设置为degree&#x3D;100)</span><br><span class="line">poly100_reg&#x3D;PolynomialRegression(degree&#x3D;100) #使用degree&#x3D;100</span><br><span class="line">poly100_reg.fit(X,y)</span><br><span class="line">y100_predict&#x3D;poly100_reg.predict(X)</span><br><span class="line">print(&quot;degree为100时候的均方误差为:&quot;,mean_squared_error(y,y100_predict)) # 均方误差为0.6831833931625624</span><br><span class="line">##绘制拟合结果</span><br><span class="line">plt.scatter(x,y)</span><br><span class="line">plt.plot(np.sort(x),y100_predict[np.argsort(x)],color&#x3D;&#39;r&#39;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.18.png" alt></p>
<h3 id="模型的泛化与正则化"><a href="#模型的泛化与正则化" class="headerlink" title="模型的泛化与正则化"></a>模型的泛化与正则化</h3><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.19.png" alt></p>
<h3 id="回归模型的评估指标和调用方法"><a href="#回归模型的评估指标和调用方法" class="headerlink" title="回归模型的评估指标和调用方法"></a>回归模型的评估指标和调用方法</h3><p><strong>四种回归模型评估方法:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.20.png" alt></p>
<p><strong>四种回归模型评估的公式:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.21.png" alt></p>
<h3 id="交叉验证"><a href="#交叉验证" class="headerlink" title="交叉验证"></a>交叉验证</h3><p><strong>1.简单交叉验证</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.22.png" alt></p>
<p><strong>2.K折交叉验证</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.23.png" alt></p>
<p><strong>3.留一法交叉验证</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.24.png" alt></p>
<p><strong>4.留P法交叉验证</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.25.png" alt></p>
<p><strong>5.其他交叉验证</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.26.png" alt></p>
<h2 id="模型调参"><a href="#模型调参" class="headerlink" title="模型调参"></a>模型调参</h2><h3 id="调参的概念"><a href="#调参的概念" class="headerlink" title="调参的概念"></a>调参的概念</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> 1.参数分类:</span><br><span class="line">   1.1 过程影响类参数: 子模型不变的前提下，调整&quot;子模型数(n_estimators)和学习率(learning_rate)&quot; --&gt; 改变训练过程，提高整体模型的性能</span><br><span class="line">   1.2 子模型影响类参数: 调整&quot;最大树深度(max_depth)和分裂条件(criterion)&quot; --&gt; 改变子模型的性能，提高整体模型的性能</span><br><span class="line">1.3 bagging: 降低方差</span><br><span class="line">1.4 boosting: 降低偏差</span><br></pre></td></tr></table></figure>

<h3 id="参数的影响"><a href="#参数的影响" class="headerlink" title="参数的影响"></a>参数的影响</h3><p><strong>参数对Random Forest的影响</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.27.png" alt></p>
<p><strong>参数对Gradient Tree Boosting的影响</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.28.png" alt></p>
<h3 id="网格搜索-Grid-Search"><a href="#网格搜索-Grid-Search" class="headerlink" title="网格搜索(Grid Search)"></a>网格搜索(Grid Search)</h3><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.29.png" alt></p>
<h3 id="学习曲线"><a href="#学习曲线" class="headerlink" title="学习曲线"></a>学习曲线</h3><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.30.png" alt></p>
<h3 id="验证曲线"><a href="#验证曲线" class="headerlink" title="验证曲线"></a>验证曲线</h3><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.31.png" alt></p>
<h2 id="赛题模型验证和调参"><a href="#赛题模型验证和调参" class="headerlink" title="赛题模型验证和调参"></a>赛题模型验证和调参</h2><h3 id="模型过拟合与欠拟合"><a href="#模型过拟合与欠拟合" class="headerlink" title="模型过拟合与欠拟合"></a>模型过拟合与欠拟合</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">import lightgbm as lgb # LightGBM模型</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #均方误差</span><br><span class="line">from sklearn.metrics import mean_absolute_error #平均绝对值误差</span><br><span class="line">from math import sqrt #平方根</span><br><span class="line">from sklearn.metrics import r2_score #R平方值</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">from sklearn.pipeline import Pipeline</span><br><span class="line">from sklearn.preprocessing import PolynomialFeatures</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model import SGDRegressor</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br><span class="line"></span><br><span class="line">#2.归一化(最大值和最小值)  --放缩到(0,1区间)</span><br><span class="line">features_columns&#x3D;[col for col in train_data.columns if col not in [&#39;target&#39;]]   #从V0到V37</span><br><span class="line">min_max_scaler&#x3D;preprocessing.MinMaxScaler().fit(train_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;min_max_scaler.transform(train_data[features_columns])</span><br><span class="line">test_data_scaler&#x3D;min_max_scaler.transform(test_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;pd.DataFrame(train_data_scaler) #将训练集数据弄成DF格式</span><br><span class="line">train_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">test_data_scaler&#x3D;pd.DataFrame(test_data_scaler) #将测试集数据弄成DF格式</span><br><span class="line">test_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">train_data_scaler[&#39;target&#39;] &#x3D; train_data[&#39;target&#39;]</span><br><span class="line"></span><br><span class="line">#3.PCA处理</span><br><span class="line">### 1.sklearn.decomposition.PCA PCA处理之后可保持90%的信息数据</span><br><span class="line">pca&#x3D;PCA(n_components&#x3D;16) # 整数表示保留几个特征 小数表示百分之多少的信息</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_16&#x3D;pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_16&#x3D;pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_16&#x3D;pd.DataFrame(new_train_pca_16)</span><br><span class="line">new_test_pca_16&#x3D;pd.DataFrame(new_test_pca_16)</span><br><span class="line">new_train_pca_16[&#39;target&#39;]&#x3D;train_data_scaler[&#39;target&#39;]  # PCA处理之后保留了16个主成分</span><br><span class="line"></span><br><span class="line">#4.切分数据(训练集--&gt; 80%训练集和20%验证数据)</span><br><span class="line">new_train_pca_16&#x3D;new_train_pca_16.fillna(0) #采用PCA保留16维特征的数据</span><br><span class="line">train&#x3D;new_train_pca_16[new_test_pca_16.columns]</span><br><span class="line">target&#x3D;new_train_pca_16[&#39;target&#39;]</span><br><span class="line">##切分数据 训练数据80% 验证数据20%</span><br><span class="line">train_data,test_data,train_target,test_target&#x3D;train_test_split(train,target,test_size&#x3D;0.2,random_state&#x3D;0)</span><br><span class="line"></span><br><span class="line">#5.欠拟合(没有多项式转换)</span><br><span class="line">clf&#x3D;SGDRegressor(max_iter&#x3D;500,tol&#x3D;1e-2) # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">score_train&#x3D;mean_squared_error(train_target,clf.predict(train_data)) # 训练集的均方误差</span><br><span class="line">score_test&#x3D;mean_squared_error(test_target,clf.predict(test_data)) # 测试集的均方误差</span><br><span class="line">print(&quot;SGDRegressor train MSE:&quot;,score_train) # SGDRegressor train MSE:0.14152723650374396</span><br><span class="line">print(&quot;SGDRegressor test MSE:&quot;,score_test) # SGDRegressor test MSE:0.1470304756084494</span><br><span class="line"></span><br><span class="line">#6.过拟合(多项式转换系数过大)</span><br><span class="line">poly&#x3D;PolynomialFeatures(5)  #多项式转换 写5</span><br><span class="line">train_data_poly&#x3D;poly.fit_transform(train_data)</span><br><span class="line">test_data_poly&#x3D;poly.transform(test_data)</span><br><span class="line">clf&#x3D;SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3) # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">clf.fit(train_data_poly, train_target)  #装在转换器</span><br><span class="line">score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data_poly))</span><br><span class="line">score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data_poly))</span><br><span class="line">print(&quot;SGDRegressor train MSE:&quot;,score_train) # SGDRegressor train MSE: 0.1332651075687169</span><br><span class="line">print(&quot;SGDRegressor test MSE:&quot;,score_test) # SGDRegressor test MSE:  0.14544120121194679</span><br><span class="line"></span><br><span class="line">#7.正常拟合</span><br><span class="line">poly&#x3D;PolynomialFeatures(3)  #多项式转换 写3</span><br><span class="line">train_data_poly&#x3D;poly.fit_transform(train_data)</span><br><span class="line">test_data_poly&#x3D;poly.transform(test_data)</span><br><span class="line">clf&#x3D;SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3) # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">clf.fit(train_data_poly, train_target)  #装在转换器</span><br><span class="line">score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data_poly))</span><br><span class="line">score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data_poly))</span><br><span class="line">print(&quot;SGDRegressor train MSE:&quot;,score_train) # SGDRegressor train MSE: 0.13343001175858962</span><br><span class="line">print(&quot;SGDRegressor test MSE:&quot;,score_test) # SGDRegressor test MSE: 0.14179907981584394</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.32.png" alt></p>
<h3 id="模型正则化"><a href="#模型正则化" class="headerlink" title="模型正则化"></a>模型正则化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">import lightgbm as lgb # LightGBM模型</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #均方误差</span><br><span class="line">from sklearn.metrics import mean_absolute_error #平均绝对值误差</span><br><span class="line">from math import sqrt #平方根</span><br><span class="line">from sklearn.metrics import r2_score #R平方值</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">from sklearn.pipeline import Pipeline</span><br><span class="line">from sklearn.preprocessing import PolynomialFeatures</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model import SGDRegressor</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.归一化(最大值和最小值)  --放缩到(0,1区间)</span><br><span class="line">features_columns&#x3D;[col for col in train_data.columns if col not in [&#39;target&#39;]]   #从V0到V37</span><br><span class="line">min_max_scaler&#x3D;preprocessing.MinMaxScaler().fit(train_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;min_max_scaler.transform(train_data[features_columns])</span><br><span class="line">test_data_scaler&#x3D;min_max_scaler.transform(test_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;pd.DataFrame(train_data_scaler) #将训练集数据弄成DF格式</span><br><span class="line">train_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">test_data_scaler&#x3D;pd.DataFrame(test_data_scaler) #将测试集数据弄成DF格式</span><br><span class="line">test_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">train_data_scaler[&#39;target&#39;] &#x3D; train_data[&#39;target&#39;]</span><br><span class="line"></span><br><span class="line">#3.PCA处理</span><br><span class="line">### 1.sklearn.decomposition.PCA PCA处理之后可保持90%的信息数据</span><br><span class="line">pca&#x3D;PCA(n_components&#x3D;16) # 整数表示保留几个特征 小数表示百分之多少的信息</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_16&#x3D;pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_16&#x3D;pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_16&#x3D;pd.DataFrame(new_train_pca_16)</span><br><span class="line">new_test_pca_16&#x3D;pd.DataFrame(new_test_pca_16)</span><br><span class="line">new_train_pca_16[&#39;target&#39;]&#x3D;train_data_scaler[&#39;target&#39;]  # PCA处理之后保留了16个主成分</span><br><span class="line"></span><br><span class="line">#4.切分数据(训练集--&gt; 80%训练集和20%验证数据)</span><br><span class="line">new_train_pca_16&#x3D;new_train_pca_16.fillna(0) #采用PCA保留16维特征的数据</span><br><span class="line">train&#x3D;new_train_pca_16[new_test_pca_16.columns]</span><br><span class="line">target&#x3D;new_train_pca_16[&#39;target&#39;]</span><br><span class="line">##切分数据 训练数据80% 验证数据20%</span><br><span class="line">train_data,test_data,train_target,test_target&#x3D;train_test_split(train,target,test_size&#x3D;0.2,random_state&#x3D;0)</span><br><span class="line"></span><br><span class="line">#8.模型正则化</span><br><span class="line">##8.1 L2范数正则化</span><br><span class="line">poly&#x3D;PolynomialFeatures(3)  #多项式转换 写3</span><br><span class="line">train_data_poly&#x3D;poly.fit_transform(train_data)</span><br><span class="line">test_data_poly&#x3D;poly.transform(test_data)</span><br><span class="line">clf&#x3D;SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3,penalty&#x3D;&#39;L2&#39;,alpha&#x3D;0.0001) # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">clf.fit(train_data_poly, train_target)  #装在转换器</span><br><span class="line">score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data_poly))</span><br><span class="line">score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data_poly))</span><br><span class="line">print(&quot;SGDRegressor train MSE:&quot;,score_train) # SGDRegressor train MSE: 0.13343001175858962</span><br><span class="line">print(&quot;SGDRegressor test MSE:&quot;,score_test) # SGDRegressor test MSE: 0.14179907981584394</span><br><span class="line"></span><br><span class="line">##8.2 L1范数正则化</span><br><span class="line">poly&#x3D;PolynomialFeatures(3)  #多项式转换 写3</span><br><span class="line">train_data_poly&#x3D;poly.fit_transform(train_data)</span><br><span class="line">test_data_poly&#x3D;poly.transform(test_data)</span><br><span class="line">clf&#x3D;SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3,penalty&#x3D;&#39;L1&#39;,alpha&#x3D;0.0001) # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">clf.fit(train_data_poly, train_target)  #装在转换器</span><br><span class="line">score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data_poly))</span><br><span class="line">score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data_poly))</span><br><span class="line">print(&quot;SGDRegressor train MSE:&quot;,score_train) # SGDRegressor train MSE: 0.1347595438689653</span><br><span class="line">print(&quot;SGDRegressor test MSE:&quot;,score_test) # SGDRegressor test MSE: 0.14295179346699013</span><br><span class="line"></span><br><span class="line">##8.3 ElasticNet联合L1和L2范数加权正则化</span><br><span class="line">poly&#x3D;PolynomialFeatures(3)  #多项式转换 写3</span><br><span class="line">train_data_poly&#x3D;poly.fit_transform(train_data)</span><br><span class="line">test_data_poly&#x3D;poly.transform(test_data)</span><br><span class="line">clf&#x3D;SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3,penalty&#x3D;&#39;elasticnet&#39;,l1_ratio&#x3D;0.9,alpha&#x3D;0.0001) # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">clf.fit(train_data_poly, train_target)  #装在转换器</span><br><span class="line">score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data_poly))</span><br><span class="line">score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data_poly))</span><br><span class="line">print(&quot;SGDRegressor train MSE:&quot;,score_train) # SGDRegressor train MSE: 0.13501686392085374</span><br><span class="line">print(&quot;SGDRegressor test MSE:&quot;,score_test) # SGDRegressor test MSE: 0.14315710816572816</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.33.png" alt></p>
<h3 id="模型交叉验证-四种"><a href="#模型交叉验证-四种" class="headerlink" title="模型交叉验证(四种)"></a>模型交叉验证(四种)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler  #归一化</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA  #PCA主成分降维</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">import lightgbm as lgb # LightGBM模型</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #均方误差</span><br><span class="line">from sklearn.metrics import mean_absolute_error #平均绝对值误差</span><br><span class="line">from math import sqrt #平方根</span><br><span class="line">from sklearn.metrics import r2_score #R平方值</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">from sklearn.pipeline import Pipeline  #管道</span><br><span class="line">from sklearn.preprocessing import PolynomialFeatures  #多项式转变</span><br><span class="line">from sklearn.preprocessing import StandardScaler #标准化</span><br><span class="line">from sklearn.linear_model import SGDRegressor  #随机递推下降</span><br><span class="line">from sklearn.model_selection import KFold #KFold是K折交叉验证</span><br><span class="line">from sklearn.model_selection import LeaveOneOut #留一法</span><br><span class="line">from sklearn.model_selection import LeavePOut #留P法</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br><span class="line"></span><br><span class="line">#2.归一化(最大值和最小值)  --放缩到(0,1区间)</span><br><span class="line">features_columns&#x3D;[col for col in train_data.columns if col not in [&#39;target&#39;]]   #从V0到V37</span><br><span class="line">min_max_scaler&#x3D;preprocessing.MinMaxScaler().fit(train_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;min_max_scaler.transform(train_data[features_columns])</span><br><span class="line">test_data_scaler&#x3D;min_max_scaler.transform(test_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;pd.DataFrame(train_data_scaler) #将训练集数据弄成DF格式</span><br><span class="line">train_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">test_data_scaler&#x3D;pd.DataFrame(test_data_scaler) #将测试集数据弄成DF格式</span><br><span class="line">test_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">train_data_scaler[&#39;target&#39;] &#x3D; train_data[&#39;target&#39;]</span><br><span class="line"></span><br><span class="line">#3.PCA处理</span><br><span class="line">### 1.sklearn.decomposition.PCA PCA处理之后可保持90%的信息数据</span><br><span class="line">pca&#x3D;PCA(n_components&#x3D;16) # 整数表示保留几个特征 小数表示百分之多少的信息</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_16&#x3D;pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_16&#x3D;pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_16&#x3D;pd.DataFrame(new_train_pca_16)</span><br><span class="line">new_test_pca_16&#x3D;pd.DataFrame(new_test_pca_16)</span><br><span class="line">new_train_pca_16[&#39;target&#39;]&#x3D;train_data_scaler[&#39;target&#39;]  # PCA处理之后保留了16个主成分</span><br><span class="line"></span><br><span class="line">#4.切分数据(训练集--&gt; 80%训练集和20%验证数据)</span><br><span class="line">new_train_pca_16&#x3D;new_train_pca_16.fillna(0) #采用PCA保留16维特征的数据</span><br><span class="line">train&#x3D;new_train_pca_16[new_test_pca_16.columns]</span><br><span class="line">target&#x3D;new_train_pca_16[&#39;target&#39;]</span><br><span class="line">##切分数据 训练数据80% 验证数据20%</span><br><span class="line">train_data,test_data,train_target,test_target&#x3D;train_test_split(train,target,test_size&#x3D;0.2,random_state&#x3D;0)</span><br><span class="line"></span><br><span class="line">#5.模型交叉验证</span><br><span class="line">##5.1 简单交叉验证</span><br><span class="line">clf&#x3D;SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3) # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">clf.fit(train_data,train_target)  #装在转换器</span><br><span class="line">score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data))</span><br><span class="line">score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data))</span><br><span class="line">#print(&quot;SGDRegressor train MSE:&quot;,score_train) # SGDRegressor train MSE: 0.1415415271798254</span><br><span class="line">#print(&quot;SGDRegressor test MSE:&quot;,score_test) # SGDRegressor test MSE: 0.147046507243961</span><br><span class="line"></span><br><span class="line">##5.2 k折交叉验证</span><br><span class="line">kf&#x3D;KFold(n_splits&#x3D;5)</span><br><span class="line">for k,(train_index,test_index) in enumerate(kf.split(train)):</span><br><span class="line">    train_data,test_data,train_target,test_target&#x3D;train.values[train_index],train.values[test_index],target[train_index],target[test_index]</span><br><span class="line">    clf &#x3D; SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3)  # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">    clf.fit(train_data,train_target)</span><br><span class="line">    score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data))</span><br><span class="line">    score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data))</span><br><span class="line">    print(k,&quot;折&quot;,&quot;SGDRegressor train MSE:&quot;,score_train) # x 折 SGDRegressor train MSE: 0.1415415271798254</span><br><span class="line">    print(k,&quot;折&quot;,&quot;SGDRegressor test MSE:&quot;,score_test) # x 折 SGDRegressor train MSE: 0.1415415271798254</span><br><span class="line"></span><br><span class="line">##5.3 留一法 LOO CV</span><br><span class="line">loo&#x3D;LeaveOneOut()</span><br><span class="line">num&#x3D;100</span><br><span class="line">for k,(train_index,test_index) in enumerate(loo.split(train)):</span><br><span class="line">    train_data,test_data,train_target,test_target &#x3D; train.values[train_index],train.values[test_index],target[train_index],target[test_index]</span><br><span class="line">    clf &#x3D; SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3)  # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">    clf.fit(train_data,train_target)</span><br><span class="line">    score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data))</span><br><span class="line">    score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data))</span><br><span class="line">    print(k,&quot;个&quot;,&quot;SGDRegressor train MSE:&quot;,score_train)</span><br><span class="line">    print(k,&quot;个&quot;,&quot;SGDRegressor test MSE:&quot;,score_test)</span><br><span class="line">    if k &gt;&#x3D; 9:</span><br><span class="line">        break</span><br><span class="line"></span><br><span class="line">##5.4 留P法 LPO CV</span><br><span class="line">lpo&#x3D;LeavePOut(p&#x3D;10)</span><br><span class="line">num&#x3D;100</span><br><span class="line">for k,(train_index, test_index) in enumerate(lpo.split(train)):</span><br><span class="line">    train_data,test_data,train_target,test_target &#x3D; train.values[train_index],train.values[test_index],target[train_index],target[test_index]</span><br><span class="line">    clf &#x3D; SGDRegressor(max_iter&#x3D;1000,tol&#x3D;1e-3)  # max_iter表示是训练数据的最大传递次数  tol是停止标准</span><br><span class="line">    clf.fit(train_data, train_target)</span><br><span class="line">    score_train &#x3D; mean_squared_error(train_target, clf.predict(train_data))</span><br><span class="line">    score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data))</span><br><span class="line">    print(k,&quot;10个&quot;,&quot;SGDRegressor train MSE:&quot;,score_train)</span><br><span class="line">    print(k,&quot;10个&quot;,&quot;SGDRegressor test MSE:&quot;,score_test)</span><br><span class="line">    if k &gt;&#x3D; 9:</span><br><span class="line">        break</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.34.png" alt></p>
<h3 id="模型超参空间及调参"><a href="#模型超参空间及调参" class="headerlink" title="模型超参空间及调参"></a>模型超参空间及调参</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler  #归一化</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA  #PCA主成分降维</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">import lightgbm as lgb # LightGBM模型</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #均方误差</span><br><span class="line">from sklearn.metrics import mean_absolute_error #平均绝对值误差</span><br><span class="line">from math import sqrt #平方根</span><br><span class="line">from sklearn.metrics import r2_score #R平方值</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">from sklearn.pipeline import Pipeline  #管道</span><br><span class="line">from sklearn.preprocessing import PolynomialFeatures  #多项式转变</span><br><span class="line">from sklearn.preprocessing import StandardScaler #标准化</span><br><span class="line">from sklearn.linear_model import SGDRegressor  #随机递推下降</span><br><span class="line">from sklearn.model_selection import KFold #KFold是K折交叉验证</span><br><span class="line">from sklearn.model_selection import LeaveOneOut #留一法</span><br><span class="line">from sklearn.model_selection import LeavePOut #留P法</span><br><span class="line">from sklearn.model_selection import GridSearchCV #网格搜索</span><br><span class="line">from sklearn.model_selection import RandomizedSearchCV</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br><span class="line"></span><br><span class="line">#2.归一化(最大值和最小值)  --放缩到(0,1区间)</span><br><span class="line">features_columns&#x3D;[col for col in train_data.columns if col not in [&#39;target&#39;]]   #从V0到V37</span><br><span class="line">min_max_scaler&#x3D;preprocessing.MinMaxScaler().fit(train_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;min_max_scaler.transform(train_data[features_columns])</span><br><span class="line">test_data_scaler&#x3D;min_max_scaler.transform(test_data[features_columns])</span><br><span class="line"></span><br><span class="line">train_data_scaler&#x3D;pd.DataFrame(train_data_scaler) #将训练集数据弄成DF格式</span><br><span class="line">train_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">test_data_scaler&#x3D;pd.DataFrame(test_data_scaler) #将测试集数据弄成DF格式</span><br><span class="line">test_data_scaler.columns&#x3D;features_columns</span><br><span class="line"></span><br><span class="line">train_data_scaler[&#39;target&#39;] &#x3D; train_data[&#39;target&#39;]</span><br><span class="line"></span><br><span class="line">#3.PCA处理</span><br><span class="line">### 1.sklearn.decomposition.PCA PCA处理之后可保持90%的信息数据</span><br><span class="line">pca&#x3D;PCA(n_components&#x3D;16) # 整数表示保留几个特征 小数表示百分之多少的信息</span><br><span class="line">#获得转换器</span><br><span class="line">new_train_pca_16&#x3D;pca.fit_transform(train_data_scaler.iloc[:,0:-1])</span><br><span class="line">new_test_pca_16&#x3D;pca.transform(test_data_scaler)</span><br><span class="line">#转移为DF格式</span><br><span class="line">new_train_pca_16&#x3D;pd.DataFrame(new_train_pca_16)</span><br><span class="line">new_test_pca_16&#x3D;pd.DataFrame(new_test_pca_16)</span><br><span class="line">new_train_pca_16[&#39;target&#39;]&#x3D;train_data_scaler[&#39;target&#39;]  # PCA处理之后保留了16个主成分</span><br><span class="line"></span><br><span class="line">#4.切分数据(训练集--&gt; 80%训练集和20%验证数据)</span><br><span class="line">new_train_pca_16&#x3D;new_train_pca_16.fillna(0) #采用PCA保留16维特征的数据</span><br><span class="line">train&#x3D;new_train_pca_16[new_test_pca_16.columns]</span><br><span class="line">target&#x3D;new_train_pca_16[&#39;target&#39;]</span><br><span class="line">##切分数据 训练数据80% 验证数据20%</span><br><span class="line">train_data,test_data,train_target,test_target&#x3D;train_test_split(train,target,test_size&#x3D;0.2,random_state&#x3D;0)</span><br><span class="line"></span><br><span class="line">#5.模型超参空间及调参</span><br><span class="line">##5.1 穷举网格搜索</span><br><span class="line">randomForestRegressor&#x3D;RandomForestRegressor()</span><br><span class="line">parameters&#x3D;&#123;</span><br><span class="line">    &#39;n_estimators&#39;:[50,100,200], #预测器数量</span><br><span class="line">    &#39;max_depth&#39;:[1,2,3] #最大深度</span><br><span class="line">&#125;</span><br><span class="line">clf&#x3D;GridSearchCV(randomForestRegressor,parameters,cv&#x3D;5) # cv指定几折交叉验证(训练集中训练集和验证集的划分有几次，然后得出平均值)</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data)) #均方误差</span><br><span class="line">print(&quot;RandomForestRegressor GridSearchCV test MSE:&quot;,score_test) # 0.25522816178256824</span><br><span class="line">##5.2 随机参数优化</span><br><span class="line">randomForestRegressor &#x3D; RandomForestRegressor()</span><br><span class="line">parameters &#x3D; &#123;</span><br><span class="line">              &#39;n_estimators&#39;:[50, 100, 200, 300], #预测器数量</span><br><span class="line">              &#39;max_depth&#39;:[1, 2, 3, 4, 5] #最大深度</span><br><span class="line">&#125;</span><br><span class="line">clf&#x3D;RandomizedSearchCV(randomForestRegressor,parameters,cv&#x3D;5)</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">score_test &#x3D; mean_squared_error(test_target, clf.predict(test_data)) #均方误差</span><br><span class="line">print(&quot;RandomForestRegressor RandomizedSearchCV test MSE:&quot;,score_test) #</span><br><span class="line">print(sorted(clf.cv_results_))</span><br><span class="line">##5.3 LGB调参(使用数据训练LGB模型，采用网格搜索方法调参)</span><br><span class="line">clf&#x3D;lgb.LGBMRegressor(num_leaves&#x3D;31)</span><br><span class="line">parameters &#x3D; &#123;</span><br><span class="line">    &#39;learning_rate&#39;: [0.01, 0.1, 1], #学习率</span><br><span class="line">    &#39;n_estimators&#39;: [20, 40] #预测器数量</span><br><span class="line">&#125;</span><br><span class="line">clf&#x3D;GridSearchCV(clf,parameters,cv&#x3D;5)</span><br><span class="line">clf.fit(train_data,train_target)</span><br><span class="line">print(&#39;Best parameters found by grid search are:&#39;,clf.best_params_)   #最好的学习率和预测器个数</span><br><span class="line">score_test&#x3D;mean_squared_error(test_target,clf.predict(test_data))</span><br><span class="line">print(&quot;LGBMRegressor RandomizedSearchCV test MSE:&quot;,score_test)  # LGBMRegressor RandomizedSearchCV test MSE: 0.15175110081465454</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.35.png" alt></p>
<h1 id="特征优化"><a href="#特征优化" class="headerlink" title="特征优化"></a>特征优化</h1><h2 id="特征优化的方法"><a href="#特征优化的方法" class="headerlink" title="特征优化的方法"></a>特征优化的方法</h2><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.36.png" alt></p>
<h2 id="赛题特征优化"><a href="#赛题特征优化" class="headerlink" title="赛题特征优化"></a>赛题特征优化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler  #归一化</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA  #PCA主成分降维</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">import lightgbm as lgb # LightGBM模型</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #均方误差</span><br><span class="line">from sklearn.metrics import mean_absolute_error #平均绝对值误差</span><br><span class="line">from math import sqrt #平方根</span><br><span class="line">from sklearn.metrics import r2_score #R平方值</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">from sklearn.pipeline import Pipeline  #管道</span><br><span class="line">from sklearn.preprocessing import PolynomialFeatures  #多项式转变</span><br><span class="line">from sklearn.preprocessing import StandardScaler #标准化</span><br><span class="line">from sklearn.linear_model import SGDRegressor  #随机递推下降</span><br><span class="line">from sklearn.model_selection import KFold #KFold是K折交叉验证</span><br><span class="line">from sklearn.model_selection import LeaveOneOut #留一法</span><br><span class="line">from sklearn.model_selection import LeavePOut #留P法</span><br><span class="line">from sklearn.model_selection import GridSearchCV #网格搜索</span><br><span class="line">from sklearn.model_selection import RandomizedSearchCV</span><br><span class="line">#1.读取数据</span><br><span class="line">train_data_file &#x3D; &quot;zhengqi_train.txt&quot;</span><br><span class="line">test_data_file &#x3D;  &quot;zhengqi_test.txt&quot;</span><br><span class="line">train_data &#x3D; pd.read_csv(train_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #训练集数据共有2888个样本(V0-V37共38个特征变量)  -- 有target字段</span><br><span class="line">test_data &#x3D; pd.read_csv(test_data_file, sep&#x3D;&#39;\t&#39;, encoding&#x3D;&#39;utf-8&#39;) #测试集数据共有1925个样本(V0-V37共有38个特征变量)  -- 无target字段</span><br><span class="line"></span><br><span class="line">#2.特征构造方法</span><br><span class="line">epsilon&#x3D;1e-5</span><br><span class="line">#组合交叉特征(自行定义) --增加x*x&#x2F;y log(x)&#x2F;y等</span><br><span class="line">function_dict &#x3D; &#123;</span><br><span class="line">            &#39;add&#39;: lambda x,y: x+y,    #加法</span><br><span class="line">            &#39;mins&#39;: lambda x,y: x-y,   #减法</span><br><span class="line">            &#39;div&#39;: lambda x,y: x&#x2F;(y+epsilon),  #除法</span><br><span class="line">            &#39;multi&#39;: lambda x,y: x*y  #乘法</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">#3.特征构造函数</span><br><span class="line">def auto_features_make(train_data,test_data,function_dict,col_list):  #传入训练集、测试集、特征构造方法、list集合</span><br><span class="line">    train_data,test_data&#x3D;train_data.copy(),test_data.copy()  #获取训练集和测试集</span><br><span class="line">    for i in col_list:</span><br><span class="line">        for j in col_list:</span><br><span class="line">            for function_name,function in function_dict.items(): #获取四个函数的函数名和函数</span><br><span class="line">                for data in [train_data,test_data]:  #从训练集和测试集获取数据</span><br><span class="line">                    function_features&#x3D;function(data[i],data[j])  # data[i]就是x data[j]就是y</span><br><span class="line">                    col_function_features&#x3D;&#39;-&#39;.join([i,function_name,j])</span><br><span class="line">                    data[col_function_features]&#x3D;function_features</span><br><span class="line">    return train_data,test_data</span><br><span class="line"></span><br><span class="line">#4.特征降维处理 --- 先构造新特征，然后使用PCA方法对特征进行降维处理</span><br><span class="line">train_data2,test_data2&#x3D;auto_features_make(train_data,test_data,function_dict,col_list&#x3D;test_data.columns)</span><br><span class="line">pca&#x3D;PCA(n_components&#x3D;500) # 整数表示保留几个特征 小数表示百分之多少的信息</span><br><span class="line">#获得转换器</span><br><span class="line">train_data2_pca&#x3D;pca.fit_transform(train_data2.iloc[:,0:-1])</span><br><span class="line">test_data2_pca&#x3D;pca.transform(test_data2)</span><br><span class="line">#转移为DF格式</span><br><span class="line">train_data2_pca&#x3D;pd.DataFrame(train_data2_pca)</span><br><span class="line">test_data2_pca&#x3D;pd.DataFrame(test_data2_pca)</span><br><span class="line">train_data2_pca[&#39;target&#39;]&#x3D;train_data2[&#39;target&#39;]  # PCA处理之后保留了16个主成分</span><br><span class="line">X_train2&#x3D;train_data2[test_data2.columns].values</span><br><span class="line">y_train&#x3D;train_data2[&#39;target&#39;]</span><br><span class="line"></span><br><span class="line">#5.使用LightGBM模型对新构造的特征进行模型训练和评估</span><br></pre></td></tr></table></figure>

<h1 id="模型融合"><a href="#模型融合" class="headerlink" title="模型融合"></a>模型融合</h1><h2 id="模型优化"><a href="#模型优化" class="headerlink" title="模型优化"></a>模型优化</h2><h3 id="模型学习曲线"><a href="#模型学习曲线" class="headerlink" title="模型学习曲线"></a>模型学习曲线</h3><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.37.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.欠拟合(高偏差): 模型太简单(没能力学习到样本的底层规律) -- 训练集和测试集的准确率很低</span><br><span class="line">2.过拟合(高方差): 模型太复杂(学习太过) -- 训练集准确率较好 测试集的准确率很低(相差较大)</span><br><span class="line">3.正常拟合</span><br></pre></td></tr></table></figure>

<h3 id="模型融合提升技术"><a href="#模型融合提升技术" class="headerlink" title="模型融合提升技术"></a>模型融合提升技术</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.概念:产生一组个体学习器 --根据某种策略 --&gt; 结合个体学习器，加强模型效果</span><br><span class="line">2.分类:</span><br><span class="line">  2.1 个体学习器之间不存在(×)强依赖关系 可以同时生成的并行化方法 --&gt; Bagging方法和随机森林</span><br><span class="line">  2.2 个体学习器之间存在(√)强依赖关系 必须串行的序列化方法 --&gt; Boosting方法</span><br></pre></td></tr></table></figure>

<h4 id="Bagging方法"><a href="#Bagging方法" class="headerlink" title="Bagging方法"></a>Bagging方法</h4><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.38.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.概念:从训练集中抽样得到每个基模型所需要的子训练集 --&gt; 对所有基模型预测的结果进行综合，产生最终的预测结果</span><br><span class="line">2.Bagging方法采用 --&gt; 自助采样法(Bootstrap sampling)</span><br><span class="line">  2.1 m个样本的原始训练集,每次先随机采集一个样本放入采样集，然后将该样本放回</span><br><span class="line">  2.2 m个样本(随机采样),所以会得到m个样本的采样集(可以得到多个不同的弱学习器)</span><br></pre></td></tr></table></figure>

<h4 id="随机森林"><a href="#随机森林" class="headerlink" title="随机森林"></a>随机森林</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.概念:(对Bagging方法改进)</span><br><span class="line">2.改进之处:</span><br><span class="line">  2.1 基本学习器限定为决策树</span><br><span class="line">  2.2 决策树学习过程中引入了随机属性选择</span><br><span class="line">  2.3 对基决策树的每个结点，先从该结点的属性集合中随机选择一个包含k个属性的子集，然后从这个子集中选择一个最优属性进行划分(就是划分很多小块然后小块里面选个最优属性划分，然后慢慢更新)</span><br></pre></td></tr></table></figure>

<h4 id="Boosting方法"><a href="#Boosting方法" class="headerlink" title="Boosting方法"></a>Boosting方法</h4><p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.39.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.概念:(阶梯状)基模型按照次序一一进行训练</span><br><span class="line">2.基模型的训练集按照某种策略进行一定的转换 --&gt; 所有基模型预测的结果进行线性综合,产生最终预测结果</span><br><span class="line">3.Boosting方法中著名的算法</span><br><span class="line">  3.1 AdaBoost算法 :加法模型、损失函数为指数函数、学习算法为前向分布算法</span><br><span class="line">  3.2 提升树(Boosting Tree) : 加法模型、基本学习器为决策树、学习算法为前向分布算法 的二分类算法</span><br><span class="line">	3.2.1 对于二分类问题: 损失函数为指数函数 </span><br><span class="line">    3.2.2 对于回归问题:  损失函数为平方误差</span><br><span class="line">  3.3 梯度提升树 : (对提升树算法的改进) 可以将损失函数的负梯度在当前模型的值 &lt;--&gt; 残差的近似值</span><br></pre></td></tr></table></figure>

<h3 id="预测结果融合策略"><a href="#预测结果融合策略" class="headerlink" title="预测结果融合策略"></a>预测结果融合策略</h3><p><strong>Stacking示意:</strong></p>
<p><img src="/2022/09/27/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98%E4%B9%8B%E5%B7%A5%E4%B8%9A%E8%92%B8%E6%B1%BD/3.2.40.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.Voting(投票机制): 采用少数服从多数的原则</span><br><span class="line"> 1.1 硬投票:对多个模型直接进行投票，投票数最多的类 --&gt; 最终被预测的类</span><br><span class="line">	 1.2 软投票:不同模型设置不同权重，对多个模型直接进行投票，投票数最多的类 --&gt; 最终被预测的类</span><br><span class="line">2.Averaging:将模型结果的平均值 --&gt; 最终的预测值(不同回归方法预测结果波动幅度相差比较大)</span><br><span class="line">3.Ranking:排名平均的方法(如果有权重，就求出n个模型权重比排名之和)</span><br><span class="line">4.Blending:</span><br><span class="line"> 4.1 先将原始的训练集分为两个部分(训练集 -&gt; 训练集+测试集)</span><br><span class="line"> 4.2 在第一层中,用70%的数据训练多个模型，然后去预测剩余30%数据的label</span><br><span class="line"> 4.3 在第二层中,用30%的数据在第一层预测的结果作为新特征继续训练即可</span><br><span class="line">5.Stacking: 用训练好的所有基模型对训练集进行预测</span><br><span class="line">    5.1 第j个基模型对第i个训练样本的预测值作为新的训练集中第i个样本的第j个特征值(最后基于新的训练集进行训练)</span><br><span class="line">    5.2 同理，预测的过程也要先经过所有基模型的预测形成新的测试集，最后对测试集进行测试	</span><br><span class="line"> 5.3 Stacking是一种分层模型集成框架 -- 第一层由多个基学习器组成(输入为原始训练集) 第二层由第一层基学习器的输出作为训练集进行训练</span><br></pre></td></tr></table></figure>

<h1 id="最终导包汇总"><a href="#最终导包汇总" class="headerlink" title="最终导包汇总"></a>最终导包汇总</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import seaborn as sns</span><br><span class="line">from sklearn import preprocessing</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler  #归一化</span><br><span class="line">from scipy import stats</span><br><span class="line">from sklearn.decomposition import PCA  #PCA主成分降维</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.linear_model import LinearRegression  #线性回归</span><br><span class="line">from sklearn.neighbors import KNeighborsRegressor  #K近邻回归</span><br><span class="line">from sklearn.tree import DecisionTreeRegressor     #决策树回归</span><br><span class="line">from sklearn.ensemble import RandomForestRegressor #随机森林回归</span><br><span class="line">from sklearn.svm import SVR  # 支持向量回归</span><br><span class="line">import lightgbm as lgb # LightGBM模型</span><br><span class="line">from sklearn.model_selection import train_test_split # 切分数据</span><br><span class="line">from sklearn.metrics import mean_squared_error #均方误差</span><br><span class="line">from sklearn.metrics import mean_absolute_error #平均绝对值误差</span><br><span class="line">from math import sqrt #平方根</span><br><span class="line">from sklearn.metrics import r2_score #R平方值</span><br><span class="line">from sklearn.model_selection import learning_curve</span><br><span class="line">from sklearn.model_selection import ShuffleSplit</span><br><span class="line">from sklearn.pipeline import Pipeline  #管道</span><br><span class="line">from sklearn.preprocessing import PolynomialFeatures  #多项式转变</span><br><span class="line">from sklearn.preprocessing import StandardScaler #标准化</span><br><span class="line">from sklearn.linear_model import SGDRegressor  #随机递推下降</span><br><span class="line">from sklearn.model_selection import KFold #KFold是K折交叉验证</span><br><span class="line">from sklearn.model_selection import LeaveOneOut #留一法</span><br><span class="line">from sklearn.model_selection import LeavePOut #留P法</span><br><span class="line">from sklearn.model_selection import GridSearchCV #网格搜索</span><br><span class="line">from sklearn.model_selection import RandomizedSearchCV</span><br></pre></td></tr></table></figure>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-统计学习方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/09/17/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/" class="article-date">
      <time datetime="2022-09-17T11:20:55.000Z" itemprop="datePublished">2022-09-17</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/09/17/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/">统计学习方法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="机器学习入门策略"><a href="#机器学习入门策略" class="headerlink" title="机器学习入门策略"></a>机器学习入门策略</h1><p><strong>参考的路线:</strong></p>
<p><img src="/2022/09/17/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/1.png" alt></p>
<h1 id="统计学习方法"><a href="#统计学习方法" class="headerlink" title="统计学习方法"></a>统计学习方法</h1><h2 id="统计学习"><a href="#统计学习" class="headerlink" title="统计学习"></a>统计学习</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.统计学习:关于计算机基于数据构建概率统计模型并运用模型对数据进行预测与分析的一门学科</span><br><span class="line">2.统计学习分类:	</span><br><span class="line">  2.1 监督学习</span><br><span class="line">  2.2 非监督学习</span><br><span class="line">     2.3 半监督学习</span><br><span class="line">  2.4 强化学习</span><br><span class="line">3.统计学习方法步骤:</span><br><span class="line">  3.1 得到一个有限的训练数据集合</span><br><span class="line">  3.2 确定包含所有可能的所有模型(学习模型的集合)</span><br><span class="line">     3.3 确定选择模型的标准(学习的策略)</span><br><span class="line">  3.4 实现求解最优模型的算法(学习的算法)</span><br><span class="line">  3.5 通过学习方法选择最优模型</span><br><span class="line">     3.6 利用最优模型对新数据进行预测或分析</span><br></pre></td></tr></table></figure>

<h2 id="监督学习"><a href="#监督学习" class="headerlink" title="监督学习"></a>监督学习</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.输入&#x2F;输出空间: 输入与输出所有可能取值的集合</span><br><span class="line">  1.1 可以是有限元素的集合</span><br><span class="line">  1.2 可以是整个欧式空间</span><br><span class="line">     1.3 可以是同一个空间，也可以是不同空间(输出空间&lt;&lt;输入空间)</span><br><span class="line">2.每个具体的输入是一个实例(instance),是用特征向量表示。[所有特征向量存在的空间被称为特征空间]</span><br><span class="line">   3.监督学习类型:</span><br><span class="line">  3.1 回归问题:输入变量和输出变量均为连续变量的预测问题</span><br><span class="line">     3.2 分类问题:输出变量为有限个离散变量的预测问题</span><br><span class="line">     3.3 标注问题:输入变量与输出变量均为变量序列的预测问题</span><br><span class="line">   4.联合概率分布(P(X,Y)):</span><br><span class="line">  监督学习假设输入与输出的随机变量X和Y遵循联合概率分布P(X,Y)</span><br><span class="line">5.假设空间:</span><br><span class="line">  模型输入由输入空间-&gt;输出空间的映射的集合</span><br></pre></td></tr></table></figure>

<h3 id="问题的形式化"><a href="#问题的形式化" class="headerlink" title="问题的形式化"></a>问题的形式化</h3><p><img src="/2022/09/17/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/1.png" alt></p>
<h2 id="统计学习三要素-方法-模型-策略-算法"><a href="#统计学习三要素-方法-模型-策略-算法" class="headerlink" title="统计学习三要素(方法=模型+策略+算法)"></a>统计学习三要素(方法=模型+策略+算法)</h2><h3 id="模型-条件概率分布-决策函数"><a href="#模型-条件概率分布-决策函数" class="headerlink" title="模型(条件概率分布/决策函数)"></a>模型(条件概率分布/决策函数)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="策略"><a href="#策略" class="headerlink" title="策略"></a>策略</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="模型评估与模型选择"><a href="#模型评估与模型选择" class="headerlink" title="模型评估与模型选择"></a>模型评估与模型选择</h2><h3 id="训练误差与测试误差"><a href="#训练误差与测试误差" class="headerlink" title="训练误差与测试误差"></a>训练误差与测试误差</h3><h3 id="过拟合与模型选择"><a href="#过拟合与模型选择" class="headerlink" title="过拟合与模型选择"></a>过拟合与模型选择</h3><h2 id="正则化与交叉验证"><a href="#正则化与交叉验证" class="headerlink" title="正则化与交叉验证"></a>正则化与交叉验证</h2><h3 id="正则化"><a href="#正则化" class="headerlink" title="正则化"></a>正则化</h3><h3 id="交叉验证"><a href="#交叉验证" class="headerlink" title="交叉验证"></a>交叉验证</h3><h2 id="泛化能力"><a href="#泛化能力" class="headerlink" title="泛化能力"></a>泛化能力</h2><h3 id="泛化误差"><a href="#泛化误差" class="headerlink" title="泛化误差"></a>泛化误差</h3><h3 id="泛化误差上界"><a href="#泛化误差上界" class="headerlink" title="泛化误差上界"></a>泛化误差上界</h3><h2 id="生成模型与判别模型"><a href="#生成模型与判别模型" class="headerlink" title="生成模型与判别模型"></a>生成模型与判别模型</h2><h2 id="分类问题"><a href="#分类问题" class="headerlink" title="分类问题"></a>分类问题</h2><h2 id="标注问题"><a href="#标注问题" class="headerlink" title="标注问题"></a>标注问题</h2><h2 id="回归问题"><a href="#回归问题" class="headerlink" title="回归问题"></a>回归问题</h2>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-利用python进行数据分析" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" class="article-date">
      <time datetime="2022-09-06T06:04:57.000Z" itemprop="datePublished">2022-09-06</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">利用python进行数据分析</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="Numpy基础-数组和矢量计算"><a href="#Numpy基础-数组和矢量计算" class="headerlink" title="Numpy基础(数组和矢量计算)"></a>Numpy基础(数组和矢量计算)</h1><p><strong>numpy功能</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.高性能科学计算和数据分析的基础包</span><br><span class="line">2.部分功能:</span><br><span class="line">	2.1 ndarray:具有矢量算术运算+复杂广播能力的多维数组</span><br><span class="line">	2.2 快速运算的标准数学函数</span><br><span class="line">	2.3 读写磁盘数据的工具</span><br><span class="line">	2.4 操作内存映射文件的工具</span><br><span class="line">	2.5 线性代数</span><br><span class="line">	2.6 随机数生成</span><br><span class="line">	2.7 傅里叶变换功能</span><br><span class="line">	2.8 集成代码的工具</span><br></pre></td></tr></table></figure>

<h2 id="多维数组对象-ndarray"><a href="#多维数组对象-ndarray" class="headerlink" title="多维数组对象(ndarray)"></a>多维数组对象(ndarray)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.ndarray是一个通用的同构数据多维容器(所有元素必须是同类型的)</span><br><span class="line">2.每个数组:</span><br><span class="line">	一个shape表示各维度大小的元组          (2,3)  就是两行三列</span><br><span class="line">	一个dtype用于说明数组数据类型的对象     float64 就是float类型64位</span><br></pre></td></tr></table></figure>

<h3 id="创建ndarray"><a href="#创建ndarray" class="headerlink" title="创建ndarray"></a>创建ndarray</h3><p><strong>函数总结</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1.1.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#普通序列</span><br><span class="line">data1&#x3D;[6,7.5,8,0,1]</span><br><span class="line">arr1&#x3D;np.array(data1)</span><br><span class="line">print(arr1)</span><br><span class="line">#嵌套序列</span><br><span class="line">data2&#x3D;[[1,2,3,4],[5,6,7,8]]</span><br><span class="line">arr2&#x3D;np.array(data2)</span><br><span class="line">print(arr2)</span><br><span class="line">print(f&quot;arr1的维度:&#123;arr1.shape&#125;&quot;)</span><br><span class="line">print(f&quot;arr2的维度:&#123;arr2.shape&#125;&quot;)</span><br><span class="line">print(f&quot;arr1的数据类型:&#123;arr1.dtype&#125;&quot;)</span><br><span class="line">print(f&quot;arr2的数据类型:&#123;arr2.dtype&#125;&quot;)</span><br><span class="line"></span><br><span class="line">#函数新建数组</span><br><span class="line">##创0</span><br><span class="line">data3&#x3D;np.zeros(10)  #创建10个</span><br><span class="line">data33&#x3D;np.zeros((3,6)) #创建3行6列</span><br><span class="line">data333&#x3D;np.empty(10)  #多数情况下返回的是未初始化的垃圾值</span><br><span class="line"></span><br><span class="line">##创1</span><br><span class="line">data4&#x3D;np.ones(10) #创建10个</span><br><span class="line"></span><br><span class="line">print(data3)</span><br><span class="line">print(data33)</span><br><span class="line">print(data333)</span><br><span class="line">print(data4)</span><br><span class="line"></span><br><span class="line">#函数常见n*n的单位矩阵(主对角线为1，其余为0)</span><br><span class="line">data5&#x3D;np.eye(5)</span><br><span class="line">print(data5)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/1.png" alt></p>
<h3 id="ndarray数据类型"><a href="#ndarray数据类型" class="headerlink" title="ndarray数据类型"></a>ndarray数据类型</h3><p><strong>数据类型总结</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/2.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#创建arr</span><br><span class="line">arr1&#x3D;np.array([1,2,3],dtype&#x3D;np.float64)  #创建时候给出内容和dtype</span><br><span class="line">arr2&#x3D;np.array([1,2,3],dtype&#x3D;np.int32)</span><br><span class="line">print(arr1.dtype)</span><br><span class="line">print(arr2.dtype)</span><br><span class="line"></span><br><span class="line">#astype方法显式转换dtype     ---&gt; 创建出一个新的数组(原始数据的一份拷贝)</span><br><span class="line">arr1&#x3D;np.array([1,2,3,4,5])</span><br><span class="line">#int32</span><br><span class="line">print(arr1.dtype)  </span><br><span class="line">float_arr&#x3D;arr1.astype(np.float64)</span><br><span class="line">#float64  </span><br><span class="line">print(float_arr.dtype)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/3.png" alt></p>
<h3 id="数组和标量之间的运算"><a href="#数组和标量之间的运算" class="headerlink" title="数组和标量之间的运算"></a>数组和标量之间的运算</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#创建arr</span><br><span class="line">arr&#x3D;np.array([[1.,2.,3],[4.,5.,6.]])   两行列表</span><br><span class="line">print(arr)</span><br><span class="line">print(arr*arr)</span><br><span class="line">print(arr-arr)</span><br><span class="line">#数组与标量的算术运算</span><br><span class="line">print(1&#x2F;arr)</span><br><span class="line">print(arr**0.5)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/4.png" alt></p>
<h3 id="基本的索引和切片"><a href="#基本的索引和切片" class="headerlink" title="基本的索引和切片"></a>基本的索引和切片</h3><h4 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#创建arr</span><br><span class="line">arr&#x3D;np.arange(10)</span><br><span class="line">#输出arr所有元素</span><br><span class="line">print(arr)</span><br><span class="line">#输出第6位元素</span><br><span class="line">print(arr[5])</span><br><span class="line">#输出6-8位元素</span><br><span class="line">print(arr[5:8])</span><br><span class="line">#将6-8位元素值都更改为100</span><br><span class="line">arr[5:8]&#x3D;100</span><br><span class="line">#重新输出</span><br><span class="line">print(arr)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/5.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#创建arr</span><br><span class="line">arr&#x3D;np.arange(10)</span><br><span class="line">print(arr)</span><br><span class="line">arr_slice&#x3D;arr[5:8]  #形成切片</span><br><span class="line">arr_slice[1]&#x3D;12345 #只改切片的第一个</span><br><span class="line">print(arr)</span><br><span class="line">#切片所有都改</span><br><span class="line">arr_slice[:]&#x3D;1000</span><br><span class="line">print(arr)  #arr也会被改变</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/6.png" alt></p>
<h4 id="高维数组"><a href="#高维数组" class="headerlink" title="高维数组"></a>高维数组</h4><p><strong>索引列表</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#创建arr</span><br><span class="line">arr&#x3D;np.array([[1,2,3],[4,5,6],[7,8,9]])</span><br><span class="line">#输出原始数组</span><br><span class="line">print(arr)</span><br><span class="line">#第二个 一位数组</span><br><span class="line">print(arr[2])</span><br><span class="line">#索引列表(逗号隔开) --&gt; 单个元素</span><br><span class="line">print(arr[0][2])</span><br><span class="line">print(arr[0,2])</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/7.png" alt></p>
<h3 id="切片索引"><a href="#切片索引" class="headerlink" title="切片索引"></a>切片索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#创建arr</span><br><span class="line">arr&#x3D;np.array([[1,2,3],[4,5,6],[7,8,9]])</span><br><span class="line">#输出原始数组</span><br><span class="line">print(arr)</span><br><span class="line"></span><br><span class="line">#1.一维对象</span><br><span class="line">arr1&#x3D;arr[1:3] #输出从1轴到2轴</span><br><span class="line">print(arr1)</span><br><span class="line"></span><br><span class="line">#2.多维对象</span><br><span class="line">##2.1一个&#x2F;多个轴进行切片</span><br><span class="line">arr2&#x3D;arr[:2] #输出0轴开始到1轴</span><br><span class="line">print(arr2)</span><br><span class="line"></span><br><span class="line">arr3&#x3D;arr[:2,1:] #h横:输出0轴到1轴 竖:输出1轴到最后轴</span><br><span class="line">print(arr3)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/8.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#创建arr</span><br><span class="line">arr&#x3D;np.array([[1,2,3],[4,5,6],[7,8,9]])</span><br><span class="line">##2.2整数索引混合进行切片</span><br><span class="line">arr4&#x3D;arr[1,:2]  #横:输出1轴 竖:输出0轴到1轴</span><br><span class="line">print(arr4)</span><br><span class="line">arr5&#x3D;arr[2,:1] #横:输出2轴 竖:输出0轴</span><br><span class="line">print(arr5)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/9.png" alt></p>
<h3 id="布尔型索引"><a href="#布尔型索引" class="headerlink" title="布尔型索引"></a>布尔型索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#创建 数组(存储数据)+数组(存储姓名)</span><br><span class="line">names&#x3D;np.array([&#39;Bob&#39;,&#39;Joe&#39;,&#39;Will&#39;,&#39;Bob&#39;,&#39;Will&#39;,&#39;Joe&#39;,&#39;Joe&#39;])</span><br><span class="line">data&#x3D;np.random.randn(7,4)</span><br><span class="line">print(names)</span><br><span class="line">print(data)</span><br><span class="line">print(names&#x3D;&#x3D;&#39;Bob&#39;) #数组的比较是矢量化的   ---&gt; 产生一个布尔型数组</span><br><span class="line">#数组索引</span><br><span class="line">print(data[names&#x3D;&#x3D;&#39;Bob&#39;])  #Bob对应的那些数字行</span><br><span class="line">#混合使用</span><br><span class="line">print(data[names&#x3D;&#x3D;&#39;Bob&#39;,2:]) #Bob对应的那些的2轴到最后一轴</span><br><span class="line">#进行否定: 不等于！&#x3D; 负号-</span><br><span class="line">print(data[names!&#x3D;&#39;Bob&#39;])</span><br><span class="line">print(data[~(names&#x3D;&#x3D;&#39;Bob&#39;)])</span><br><span class="line">#z组合布尔条件 和&amp; 或|</span><br><span class="line">res&#x3D;(names&#x3D;&#x3D;&#39;Bob&#39;)|(names&#x3D;&#x3D;&#39;Will&#39;)   #or和and关键字在布尔型数组会无效</span><br><span class="line">print(data[res])</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/10.png" alt></p>
<h3 id="花式索引"><a href="#花式索引" class="headerlink" title="花式索引"></a>花式索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">arr&#x3D;np.empty((8,4))  #创建一个8行4列的数组</span><br><span class="line">for i in range(8):   #每行赋当前行的值 </span><br><span class="line">    arr[i]&#x3D;i</span><br><span class="line">print(arr)  #输出数组所有元素</span><br><span class="line"></span><br><span class="line">#特定顺序选取行子集  ---&gt; 传入一个整数列表&#x2F;ndarray(指定顺序)</span><br><span class="line">##1.正数  从开头开始   </span><br><span class="line">print(arr[[4,3,0,6]])   输出4 3 0 6 四行</span><br><span class="line">##2.负数  从末尾开始</span><br><span class="line">print(arr[[-3,-5,-7]])  输出5 3 1 三行</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/11.png" alt></p>
<h3 id="数组转置和轴对称"><a href="#数组转置和轴对称" class="headerlink" title="数组转置和轴对称"></a>数组转置和轴对称</h3><h4 id="reshape函数"><a href="#reshape函数" class="headerlink" title="reshape函数"></a>reshape函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">arr&#x3D;np.arange(32).reshape((8,4))</span><br><span class="line">print(arr)</span><br><span class="line">#选取下标(1,0),(5,3),(7,1),(2,2)</span><br><span class="line">print(arr[[1,5,7,2],[0,3,1,2]])</span><br><span class="line">#使用n.p.ix_函数   将两个一维整数数组-&gt;用于选取方形区域的索引器</span><br><span class="line">print(arr[np.ix_([1,5,7,2],[0,3,1,2])])</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/12.png" alt></p>
<h4 id="转置和轴对称函数"><a href="#转置和轴对称函数" class="headerlink" title="转置和轴对称函数"></a>转置和轴对称函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">arr&#x3D;np.arange(15).reshape((3,5))</span><br><span class="line">print(arr)</span><br><span class="line">#转置(跟线代置换一样 横对竖)</span><br><span class="line">print(arr.T)  #轴兑换.T</span><br><span class="line"></span><br><span class="line">#矩阵内积XT X  np.dot</span><br><span class="line">arr2&#x3D;np.random.randn(6,3)  # 构建6行3列</span><br><span class="line">print(arr2,arr2.T)  # 6行3列 3列6行 --&gt; 6行6列</span><br><span class="line">print(arr2.T,arr2)</span><br><span class="line"></span><br><span class="line">#转置(高维数组) 元组(轴编号组成)才能对这些轴进行转置</span><br><span class="line">arr3&#x3D;np.arange(16).reshape((2,2,4)) #三维x&#x3D;2,y&#x3D;2,z&#x3D;4</span><br><span class="line">print(arr3)</span><br><span class="line">print(arr3.transpose((1,0,2)))</span><br><span class="line"></span><br><span class="line">#swapaxes方法[需要接受一对轴编号]</span><br><span class="line">print(arr3.swapaxes(1,2))</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/13.png" alt></p>
<h3 id="通用函数-元素级数组函数"><a href="#通用函数-元素级数组函数" class="headerlink" title="通用函数(元素级数组函数)"></a>通用函数(元素级数组函数)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.通用函数(ufunc):一种对ndarray中的数据执行元素级运算的函数</span><br><span class="line">2.通用函数:矢量化包装器</span><br><span class="line">	输入:一个&#x2F;多个标量值</span><br><span class="line">	输出:一个&#x2F;多个标量值</span><br></pre></td></tr></table></figure>

<p><strong>一元通用函数</strong></p>
<p>！<a href="14.png"></a></p>
<p><strong>二元通用函数</strong></p>
<p>！<a href="15.png"></a></p>
<h3 id="数组进行数据处理"><a href="#数组进行数据处理" class="headerlink" title="数组进行数据处理"></a>数组进行数据处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#假设我们想要在一组值(网格型)上计算函数sqrt(x^2+y^2)</span><br><span class="line">#np.meshgrid函数 </span><br><span class="line">	两个一维数组 --&gt; 两个二维矩阵(所有的(X,Y)对)</span><br><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">points&#x3D;np.arange(-5,5,0.01) #1000个间隔相等的点</span><br><span class="line">#生成(X,Y)对</span><br><span class="line">xs,ys&#x3D;np.meshgrid(points,points)</span><br><span class="line">#获取sqrt(X^2+Y^2)</span><br><span class="line">z&#x3D;np.sqrt(xs**2+ys**2)</span><br><span class="line">print(z)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/16.png" alt></p>
<h3 id="条件逻辑-数组运算"><a href="#条件逻辑-数组运算" class="headerlink" title="条件逻辑(数组运算)"></a>条件逻辑(数组运算)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">xarr&#x3D;np.array([1.1,1.2,1.3,1.4,1.5])</span><br><span class="line">yarr&#x3D;np.array([2.1,2.2,2.3,2.4,2.5])</span><br><span class="line">cond&#x3D;np.array([True,False,True,True,False])</span><br><span class="line"></span><br><span class="line">#根据判断cond的值为True选取xarr的值Flase选取yarr的值</span><br><span class="line">result&#x3D;np.where(cond,xarr,yarr)    #第二个和第三个参数可以是数组</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">#根据判断xarr大于1.3赋值2小于1.3赋值1  </span><br><span class="line">result2&#x3D;np.where(xarr&gt;1.3,2,1)     #第二个和第三个参数可以是标量值</span><br><span class="line">print(result2)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/17.png" alt></p>
<h3 id="数学和统计方法"><a href="#数学和统计方法" class="headerlink" title="数学和统计方法"></a>数学和统计方法</h3><p><strong>基本数组统计方法</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/18.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#正态分布的数据</span><br><span class="line">arr&#x3D;np.random.randn(5,4)</span><br><span class="line">print(arr)</span><br><span class="line">print(arr.sum())  #数组中全部&#x2F;某轴向的元素求和</span><br><span class="line">print(arr.mean()) #算数平均数</span><br><span class="line">print(arr.min()) #最小值</span><br><span class="line">print(arr.max()) #最大值</span><br><span class="line">print(arr.argmin()) #最小元素索引</span><br><span class="line">print(arr.argmax()) #最大元素索引</span><br><span class="line">print(arr.cumsum()) #所有元素累计和</span><br><span class="line">print(arr.cumprod()) #所有元素累计积</span><br><span class="line">print(arr.std())  #标准差</span><br><span class="line">print(arr.var()) #方差</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/19.png" alt></p>
<h3 id="布尔型数组的方法"><a href="#布尔型数组的方法" class="headerlink" title="布尔型数组的方法"></a>布尔型数组的方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#布尔值会被强制转换为1(True)和0(False)</span><br><span class="line">arr&#x3D;np.random.randn(100)</span><br><span class="line">print(arr)</span><br><span class="line">print((arr&gt;100).sum())</span><br><span class="line"></span><br><span class="line">#any和all</span><br><span class="line">arr2&#x3D;np.array([False,False,True,False])</span><br><span class="line">print(arr2.any())  #测试是否存在一个&#x2F;多个True 测试是否存在一个&#x2F;多个非0元素</span><br><span class="line">print(arr2.all())  #测试是否所有值都是True 测试是否所有值都是非0元素</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/20.png" alt></p>
<h3 id="排序-sort方法"><a href="#排序-sort方法" class="headerlink" title="排序(sort方法)"></a>排序(sort方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">#一维数组</span><br><span class="line">arr&#x3D;np.random.randn(8)</span><br><span class="line">print(arr)</span><br><span class="line">#排序sort方法</span><br><span class="line">arr.sort()</span><br><span class="line">print(&quot;排序之后的:&quot;)</span><br><span class="line">print(arr)</span><br><span class="line"></span><br><span class="line">#多维数组</span><br><span class="line">arr&#x3D;np.random.randn(5,3)</span><br><span class="line">print(arr)</span><br><span class="line">arr.sort(1)  #对轴进行排序 就是每行自己排序</span><br><span class="line">print(&quot;排序之后的:&quot;)</span><br><span class="line">print(arr)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/21.png" alt></p>
<h3 id="数组的集合运算"><a href="#数组的集合运算" class="headerlink" title="数组的集合运算"></a>数组的集合运算</h3><p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/22.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">names&#x3D;np.array([&#39;Bob&#39;,&#39;Joe&#39;,&#39;Will&#39;,&#39;Bob&#39;,&#39;Will&#39;,&#39;Joe&#39;,&#39;Joe&#39;])</span><br><span class="line">#unique()只返回不重复的名字有几个</span><br><span class="line">print(np.unique(names))</span><br><span class="line"></span><br><span class="line">arr1&#x3D;np.array([1,2,3,4,5,5,5,6,6,6,8,8,8,9,9,91,123,456,123])</span><br><span class="line">arr2&#x3D;np.array([1,2,3,5,4,9,6,9,123,45678,789])</span><br><span class="line">#unique()只返回不重复的名字有几个</span><br><span class="line">print(np.unique(arr1))</span><br><span class="line">#intersect1d(x,y)返回x和y的公共元素</span><br><span class="line">print(np.intersect1d(arr1,arr2))</span><br><span class="line">#union1d(x,y)返回x和y的并集</span><br><span class="line">print(np.union1d(arr1,arr2))</span><br><span class="line">#int1d(x,y)返回布尔型数组(x的元素是否包含在y之内)  大小是x数组的长度</span><br><span class="line">print(np.in1d(arr1,arr2))</span><br><span class="line">#setdiff1d(x,y)返回集合的差(就是在x之中，不在y中)</span><br><span class="line">print(np.setdiff1d(arr1,arr2))</span><br><span class="line">print(np.setdiff1d(arr2,arr1))</span><br><span class="line">#setxor1d(x,y)返回集合的对称差(只在一个数组但是不同时在两个数组 --有可能在x不在y 有可能在y不在x)</span><br><span class="line">print(np.setxor1d(arr1,arr2))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/23.png" alt></p>
<h2 id="数组的文件输入输出-文本-二进制数据"><a href="#数组的文件输入输出-文本-二进制数据" class="headerlink" title="数组的文件输入输出(文本/二进制数据)"></a>数组的文件输入输出(文本/二进制数据)</h2><h3 id="保存到磁盘-save和load"><a href="#保存到磁盘-save和load" class="headerlink" title="保存到磁盘(save和load)"></a>保存到磁盘(save和load)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">#默认情况下，数组保存在.npy的文件(未压缩的原始二进制格式)</span><br><span class="line">arr&#x3D;np.arange(10)  #按照顺序输出10个数字0-9</span><br><span class="line">print(arr)</span><br><span class="line"></span><br><span class="line">#save() 将arr数组存到名为some_array的文件</span><br><span class="line">np.save(&#39;some_array&#39;,arr)  #存一个数组</span><br><span class="line">np.savez(&#39;array_archive.npz&#39;,a&#x3D;arr,b&#x3D;arr)  #存多个数组(数组以关键字参数的形式传入)</span><br><span class="line"></span><br><span class="line">#load去加载磁盘的文件(自动添加扩展名)</span><br><span class="line">np.load(&#39;some_array.npy&#39;)</span><br><span class="line">res&#x3D;np.load(&#39;array_archive.npz&#39;)  #得到类似字典的对象 对各个数组进行延迟加载</span><br><span class="line">print(res[&#39;b&#39;])</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/24.png" alt></p>
<h3 id="存取文本文件"><a href="#存取文本文件" class="headerlink" title="存取文本文件"></a>存取文本文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#1.python中的文件读写函数</span><br><span class="line">#2.pandas中的read_csv和read_table函数</span><br><span class="line">#3.numpy中的loadtxt和genfromtxt函数</span><br></pre></td></tr></table></figure>

<h2 id="线性代数-linalg"><a href="#线性代数-linalg" class="headerlink" title="线性代数(linalg)"></a>线性代数(linalg)</h2><p><strong>常用的numpy.linalg函数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/25.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from numpy.linalg import inv,qr</span><br><span class="line">x&#x3D;np.array([[1.,2.,3.],[4.,5.,6.]])</span><br><span class="line">y&#x3D;np.array([[6.,23.],[-1,7],[8,9]])</span><br><span class="line">print(x)</span><br><span class="line">print(y)</span><br><span class="line">#np.dot(x,y) &lt;-&gt; x.dot(y)</span><br><span class="line">print(x.dot(y))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/26.png" alt></p>
<h2 id="随机数生成-random"><a href="#随机数生成-random" class="headerlink" title="随机数生成(random)"></a>随机数生成(random)</h2><p><strong>random函数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/27.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">samples&#x3D;np.random.normal(size&#x3D;(4,4))</span><br><span class="line">print(samples)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/28.png" alt></p>
<h1 id="pandas入门"><a href="#pandas入门" class="headerlink" title="pandas入门"></a>pandas入门</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.pandas基于NumPy构建</span><br><span class="line">2.写代码导包</span><br><span class="line">	from pandas import Series,DataFrame</span><br><span class="line">	import pandas as pd</span><br><span class="line">3.主要数据类型:</span><br><span class="line">	Series 类似于一维数组的对象 (数据+数据标签)</span><br><span class="line">	DataFrame</span><br></pre></td></tr></table></figure>

<h2 id="Series-像字典"><a href="#Series-像字典" class="headerlink" title="Series(像字典)"></a>Series(像字典)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">#不指定索引</span><br><span class="line">obj&#x3D;Series([4,7,-5,3])</span><br><span class="line">#索引(0-N-1) 值</span><br><span class="line">print(obj)</span><br><span class="line">#所有值</span><br><span class="line">print(obj.values)</span><br><span class="line">#所有索引</span><br><span class="line">print(obj.index)</span><br><span class="line"></span><br><span class="line">#指定索引</span><br><span class="line">obj2&#x3D;Series([4,7,-5,3],index&#x3D;[&#39;d&#39;,&#39;b&#39;,&#39;a&#39;,&#39;c&#39;])</span><br><span class="line">print(obj2)</span><br><span class="line">print(obj2.index)</span><br><span class="line"></span><br><span class="line">#保留numpy数组运算(保留索引和值之间的链接)</span><br><span class="line">print(obj2[obj2&gt;0])</span><br><span class="line">print(obj2*2)</span><br><span class="line">print(np.exp(obj2))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/29.png" alt></p>
<h2 id="DataFrame-表格型"><a href="#DataFrame-表格型" class="headerlink" title="DataFrame(表格型)"></a>DataFrame(表格型)</h2><p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/32.png" alt></p>
<h3 id="DataFrame创建"><a href="#DataFrame创建" class="headerlink" title="DataFrame创建"></a>DataFrame创建</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">#1.直接传入一个字典(等长列表&#x2F;numpy数组)</span><br><span class="line">data&#x3D;&#123;</span><br><span class="line">        &#39;state&#39;:[&#39;Ohio&#39;,&#39;Ohio&#39;,&#39;Ohio&#39;,&#39;Nevada&#39;,&#39;Nevada&#39;],</span><br><span class="line">        &#39;year&#39;:[2000,2001,2002,2001,2002],</span><br><span class="line">        &#39;pop&#39;:[1.5,1.7,3.6,2.4,2.9]</span><br><span class="line">     &#125;</span><br><span class="line">frame&#x3D;DataFrame(data)</span><br><span class="line">print(frame)</span><br><span class="line"></span><br><span class="line">#指定列序列(dataframe根据指定顺序进行排列)</span><br><span class="line">frame1&#x3D;DataFrame(data,columns&#x3D;[&#39;year&#39;,&#39;state&#39;,&#39;pop&#39;])   #data字典要根据列来排序</span><br><span class="line">print(frame1)</span><br><span class="line"></span><br><span class="line">#指定列序列(传入的列在数据中找不到，产生NA值)</span><br><span class="line">frame2&#x3D;DataFrame(data,columns&#x3D;[&#39;year&#39;,&#39;state&#39;,&#39;pop&#39;,&#39;debt&#39;])   #debt没有就所有都显示NA</span><br><span class="line">frame3&#x3D;DataFrame(data,columns&#x3D;[&#39;year&#39;,&#39;state&#39;,&#39;pop&#39;,&#39;debt&#39;],index&#x3D;[&#39;one&#39;,&#39;two&#39;,&#39;three&#39;,&#39;four&#39;,&#39;five&#39;])   #debt没有就所有都显示NA   index变成英文</span><br><span class="line">print(frame2)</span><br><span class="line">print(frame3)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.嵌套字典(字典中的字典)   ---&gt; 外层字典的键作为列 内层字典的键作为行索引</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">#2.嵌套字典(字典中的字典)   ---&gt; 外层字典的键作为列 内层字典的键作为行索引</span><br><span class="line">pop&#x3D;&#123;&#39;Nevada&#39;:&#123;2001:2.4,2002:2.9&#125;,</span><br><span class="line">     &#39;Ohio&#39;:&#123;2000:1.5,2001:1.7,2002:3.6&#125;&#125;  # 列:Nevada,Ohio 行:2000,2001,2002</span><br><span class="line">frame3&#x3D;DataFrame(pop)</span><br><span class="line">print(frame3)</span><br></pre></td></tr></table></figure>

<p><strong>第一种方式</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/30.png" alt></p>
<p><strong>第二种方式</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/31.png" alt></p>
<h3 id="DataFrame使用"><a href="#DataFrame使用" class="headerlink" title="DataFrame使用"></a>DataFrame使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">#1.直接传入一个字典(等长列表&#x2F;numpy数组)</span><br><span class="line">data&#x3D;&#123;</span><br><span class="line">        &#39;state&#39;:[&#39;Ohio&#39;,&#39;Ohio&#39;,&#39;Ohio&#39;,&#39;Nevada&#39;,&#39;Nevada&#39;],</span><br><span class="line">        &#39;year&#39;:[2000,2001,2002,2001,2002],</span><br><span class="line">        &#39;pop&#39;:[1.5,1.7,3.6,2.4,2.9]</span><br><span class="line">     &#125;</span><br><span class="line">#指定列序列(传入的列在数据中找不到，产生NA值)</span><br><span class="line">frame2&#x3D;DataFrame(data,columns&#x3D;[&#39;year&#39;,&#39;state&#39;,&#39;pop&#39;,&#39;debt&#39;])   #debt没有就所有都显示NA</span><br><span class="line">print(frame2)</span><br><span class="line">frame2[&#39;debt&#39;]&#x3D;16.5   #修改长度和DataFrame长度相匹配!!!!!!!!!</span><br><span class="line">print(frame2)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/31.png" alt></p>
<h2 id="索引对象"><a href="#索引对象" class="headerlink" title="索引对象"></a>索引对象</h2><p><strong>Index对象</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/33.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">#轴标签和其他元数据(比如轴名称)</span><br><span class="line">#a 0</span><br><span class="line">#b 1</span><br><span class="line">#c 2</span><br><span class="line">obj&#x3D;Series(range(3),index&#x3D;[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;])          # Series&#x2F;DataFrame构造用到的任何数组&#x2F;其他序列的标签 --&gt; Index</span><br><span class="line">index&#x3D;obj.index</span><br><span class="line">print(index) # a b c</span><br><span class="line">print(index[1:]) # b c</span><br><span class="line"></span><br><span class="line">index[1]&#x3D;&#39;d&#39;   #index对象不可以修改</span><br></pre></td></tr></table></figure>

<p><strong>Index的方法和属性</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/34.png" alt></p>
<h2 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h2><h3 id="重新索引-reindex"><a href="#重新索引-reindex" class="headerlink" title="重新索引(reindex)"></a>重新索引(reindex)</h3><p><strong>reindex函数的参数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/36.png" alt></p>
<p><strong>method选项(前向/后向填充)</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/37.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"># d 4.5</span><br><span class="line"># b 7.2</span><br><span class="line"># a -5.3</span><br><span class="line"># c 3.6</span><br><span class="line">obj&#x3D;Series([4.5,7.2,-5.3,3.6],index&#x3D;[&#39;d&#39;,&#39;b&#39;,&#39;a&#39;,&#39;c&#39;])</span><br><span class="line">print(obj)</span><br><span class="line"># a -5.3</span><br><span class="line"># b 7.2</span><br><span class="line"># c 3.6</span><br><span class="line"># d 4.5</span><br><span class="line"># e NAN</span><br><span class="line">obj2&#x3D;obj.reindex([&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;])  #缺失的赋值为NAN</span><br><span class="line">print(obj2)</span><br><span class="line"># a -5.3</span><br><span class="line"># b 7.2</span><br><span class="line"># c 3.6</span><br><span class="line"># d 4.5</span><br><span class="line"># e 0</span><br><span class="line">obj3&#x3D;obj.reindex([&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;],fill_value&#x3D;0)  #缺失的赋值为0</span><br><span class="line">print(obj3)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/35.png" alt></p>
<h3 id="丢弃指定轴上的项-drop"><a href="#丢弃指定轴上的项-drop" class="headerlink" title="丢弃指定轴上的项(drop)"></a>丢弃指定轴上的项(drop)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">#一个索引数组&#x2F;列表 --&gt; 丢弃某条轴上的一个&#x2F;多个项</span><br><span class="line">#a 0.0</span><br><span class="line">#b 1.0</span><br><span class="line">#c 2.0 (丢弃)</span><br><span class="line">#d 3.0</span><br><span class="line">#e 4.0</span><br><span class="line">obj&#x3D;Series(np.arange(5.),index&#x3D;[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;])</span><br><span class="line">print(obj)</span><br><span class="line">#丢弃c</span><br><span class="line">new_obj&#x3D;obj.drop(&#39;c&#39;)</span><br><span class="line">print(new_obj)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/38.png" alt>    </p>
<h3 id="索引-选取-过滤"><a href="#索引-选取-过滤" class="headerlink" title="索引+选取+过滤"></a>索引+选取+过滤</h3><p><strong>Series索引(啥都有)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"># a 0.0</span><br><span class="line"># b 1.0</span><br><span class="line"># c 2.0</span><br><span class="line"># d 3.0</span><br><span class="line">obj&#x3D;Series(np.arange(4.),index&#x3D;[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;])</span><br><span class="line">print(obj)</span><br><span class="line"></span><br><span class="line">#输出b的索引为1.0</span><br><span class="line">print(obj[&#39;b&#39;])</span><br><span class="line"></span><br><span class="line">#输出1行的索引值为1.0</span><br><span class="line">print(obj[1])</span><br><span class="line"></span><br><span class="line">#输出第三行和第四行</span><br><span class="line">print(obj[2:4])</span><br><span class="line">#利用标签的切片是闭环!!!!!</span><br><span class="line">print(obj[&#39;b&#39;:&#39;c&#39;])       #py切片运算是不包含的最后一个</span><br><span class="line"></span><br><span class="line">#输出三行</span><br><span class="line">print(obj[[&#39;b&#39;,&#39;a&#39;,&#39;d&#39;]])</span><br><span class="line"></span><br><span class="line">#输出第二行和第三行</span><br><span class="line">print(obj[[1,3]])</span><br><span class="line"></span><br><span class="line">#输出前两行</span><br><span class="line">print(obj[obj&lt;2])</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/39.png" alt></p>
<p><strong>DataFrame索引(一个/多个列)</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/40.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">data&#x3D;DataFrame(np.arange(16).reshape((4,4)),  #随机数分为4*4</span><br><span class="line">               index&#x3D;[&#39;Ohio&#39;,&#39;Colorado&#39;,&#39;Utah&#39;,&#39;New York&#39;],   #列</span><br><span class="line">               columns&#x3D;[&#39;one&#39;,&#39;two&#39;,&#39;three&#39;,&#39;four&#39;]  #行</span><br><span class="line">               )</span><br><span class="line">print(data)</span><br><span class="line">print()</span><br><span class="line">#1</span><br><span class="line">#5</span><br><span class="line">#9</span><br><span class="line">#13</span><br><span class="line">print(data[&#39;two&#39;])</span><br><span class="line">print()</span><br><span class="line">#2   0</span><br><span class="line">#6   4</span><br><span class="line">#10  8</span><br><span class="line">#14  12</span><br><span class="line">print(data[[&#39;three&#39;,&#39;one&#39;]])</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">#选取</span><br><span class="line"></span><br><span class="line">#1.第一种</span><br><span class="line">##选取第一行和第二行</span><br><span class="line">print(data[:2])</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">##选取第三列中大于5的行</span><br><span class="line">print(data[&#39;three&#39;]&gt;5)</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">#2.第二种(更像是ndarray数组)</span><br><span class="line">##判断是否data&lt;5</span><br><span class="line">print(data&lt;5)</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">##将data中小于5的都改为0</span><br><span class="line">data[data&lt;5]&#x3D;0</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/41.png" alt></p>
<h3 id="算术运算和数据对齐"><a href="#算术运算和数据对齐" class="headerlink" title="算术运算和数据对齐"></a>算术运算和数据对齐</h3><p><strong>算数方法</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/44.png" alt></p>
<p><strong>Series(不同就赋值NaN)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"># a  7.3         a  -2.1</span><br><span class="line"># c  -2.5        c  3.6</span><br><span class="line"># d  3.4         e  -1.5</span><br><span class="line"># e  1.5         f  4</span><br><span class="line">#                g  3.1</span><br><span class="line">s1&#x3D;Series([7.3,-2.5,3.4,1.5],index&#x3D;[&#39;a&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;])</span><br><span class="line">s2&#x3D;Series([-2.1,3.6,-1.5,4,3.1],index&#x3D;[&#39;a&#39;,&#39;c&#39;,&#39;e&#39;,&#39;f&#39;,&#39;g&#39;])</span><br><span class="line"># a 7.3-2.1&#x3D;5.2</span><br><span class="line"># c 3.6-2.5&#x3D;1.1</span><br><span class="line"># d NaN (不重叠的赋值NaN)</span><br><span class="line"># e 1.5-1.5&#x3D;0</span><br><span class="line"># g NaN (不重叠的赋值NaN)</span><br><span class="line"># f NaN (不重叠的赋值NaN)</span><br><span class="line">print(s1+s2)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/42.png" alt></p>
<p><strong>DataFrame(不同就赋值NaN)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">#            b    c    d</span><br><span class="line">#Ohio      0.0  1.0  2.0</span><br><span class="line">#Texas     3.0  4.0  5.0</span><br><span class="line">#Colorado  6.0  7.0  8.0</span><br><span class="line">#          b     d     e</span><br><span class="line">#Utah    0.0   1.0   2.0</span><br><span class="line">#Ohio    3.0   4.0   5.0</span><br><span class="line">#Texas   6.0   7.0   8.0</span><br><span class="line">#Oregon  9.0  10.0  11.0</span><br><span class="line">df1&#x3D;DataFrame(np.arange(9.).reshape((3,3)),</span><br><span class="line">              columns&#x3D;list(&#39;bcd&#39;),</span><br><span class="line">              index&#x3D;[&#39;Ohio&#39;,&#39;Texas&#39;,&#39;Colorado&#39;],</span><br><span class="line">              )</span><br><span class="line">df2&#x3D;DataFrame(np.arange(12.).reshape((4,3)),</span><br><span class="line">              columns&#x3D;list(&#39;bde&#39;),</span><br><span class="line">              index&#x3D;[&#39;Utah&#39;,&#39;Ohio&#39;,&#39;Texas&#39;,&#39;Oregon&#39;],</span><br><span class="line">              )</span><br><span class="line">#得到新的DataFrame[索引和列为原来的两个DataFrame的并集]</span><br><span class="line">#不重叠的位置就会产生NaN值</span><br><span class="line">print(df1+df2)</span><br><span class="line"></span><br><span class="line">#填充数字  --&gt; 使用add(DataFrame对象，full_value&#x3D;值)</span><br><span class="line">print(df1.add(df2,fill_value&#x3D;0))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/43.png" alt></p>
<h3 id="函数应用和映射-apply和ufuns方法"><a href="#函数应用和映射-apply和ufuns方法" class="headerlink" title="函数应用和映射(apply和ufuns方法)"></a>函数应用和映射(apply和ufuns方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">frame&#x3D;DataFrame(np.random.randn(4,3),</span><br><span class="line">                columns&#x3D;list(&#39;bde&#39;),</span><br><span class="line">                index&#x3D;[&#39;Utah&#39;,&#39;Ohio&#39;,&#39;Texas&#39;,&#39;Oregon&#39;]</span><br><span class="line">                )</span><br><span class="line">print(frame)</span><br><span class="line"></span><br><span class="line">#1.numpy元素级数组方法(ufuncs)</span><br><span class="line">print(np.abs(frame))</span><br><span class="line">#2.函数应用到一维数组(由各列&#x2F;各行形成)   -- apply方法</span><br><span class="line">f&#x3D;lambda x:x.max() - x.min()</span><br><span class="line">print(frame.apply(f))</span><br><span class="line">print(frame.apply(f,axis&#x3D;1))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/44.png" alt></p>
<h3 id="排序和排名-sort-index和sorting"><a href="#排序和排名-sort-index和sorting" class="headerlink" title="排序和排名(sort_index和sorting)"></a>排序和排名(sort_index和sorting)</h3><p><strong>Series(根据index排序)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"># d 0</span><br><span class="line"># a 1</span><br><span class="line"># b 2</span><br><span class="line"># c 3</span><br><span class="line">obj&#x3D;Series(range(4),index&#x3D;[&#39;d&#39;,&#39;a&#39;,&#39;b&#39;,&#39;c&#39;])</span><br><span class="line">print(obj)</span><br><span class="line"># a 1</span><br><span class="line"># b 2</span><br><span class="line"># c 3</span><br><span class="line"># d 0</span><br><span class="line">print(obj.sort_index())   #缺失值默认放在Series末尾</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/46.png" alt></p>
<p><strong>DataFrame(根据任意轴index排序)</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">#         d  a  b  c</span><br><span class="line"># three   0  1  2  3</span><br><span class="line"># one     4  5  6  7</span><br><span class="line">frame&#x3D;DataFrame(np.arange(8).reshape((2,4)),   #两行四列 2*4</span><br><span class="line">                index&#x3D;[&#39;three&#39;,&#39;one&#39;],</span><br><span class="line">                columns&#x3D;[&#39;d&#39;,&#39;a&#39;,&#39;b&#39;,&#39;c&#39;]</span><br><span class="line">                )</span><br><span class="line">#1.普通排序</span><br><span class="line">print(frame.sort_index())</span><br><span class="line">#2.更改排序</span><br><span class="line">print(frame.sort_index(axis&#x3D;1))  #升序(默认)</span><br><span class="line">print(frame.sort_index(axis&#x3D;1,ascending&#x3D;False)) #降序(更改ascending属性)</span><br><span class="line">#3.根据一个&#x2F;多个列值排序  by属性</span><br><span class="line">print(frame.sort_index(by&#x3D;&#39;b&#39;))</span><br><span class="line">print(frame.sort_index(by&#x3D;[&#39;b&#39;,&#39;a&#39;]))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/47.png" alt></p>
<h3 id="排名-rank"><a href="#排名-rank" class="headerlink" title="排名(rank)"></a>排名(rank)</h3><p><strong>分析rank()怎么执行</strong></p>
<p><a href="https://blog.csdn.net/justinlonger/article/details/90646111" target="_blank" rel="noopener" title="参考">https://blog.csdn.net/justinlonger/article/details/90646111</a></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/48.png" alt></p>
<p><strong>Series</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">obj&#x3D;Series([7,-5,7,4,2,0,4])</span><br><span class="line">#</span><br><span class="line">#0    7</span><br><span class="line">#1   -5</span><br><span class="line">#2    7</span><br><span class="line">#3    4</span><br><span class="line">#4    2</span><br><span class="line">#5    0</span><br><span class="line">#6    4</span><br><span class="line">print(obj)</span><br><span class="line"># 有N个相同的元素，求和(相同元素排名)&#x2F;N</span><br><span class="line">print(obj.rank())  #索引0对应的元素最终排名为(6+7)&#x2F;2&#x3D;6.5  以此类推</span><br><span class="line">print(obj.rank(ascending&#x3D;False,method&#x3D;&#39;max&#39;))  #所有小数进位为右边的最小整数(4.5--&gt;5)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/49.png" alt></p>
<p><strong>DataFrame</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">frame&#x3D;DataFrame(&#123;</span><br><span class="line">                &#39;b&#39;:[4.3,7,-3,2],   # b a c 都是列名</span><br><span class="line">                &#39;a&#39;:[0,1,0,1],      # [x]都是值</span><br><span class="line">                &#39;c&#39;:[-2,5,8,-2.5]</span><br><span class="line">                &#125;)</span><br><span class="line">print(frame)</span><br><span class="line">print(frame.rank())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/50.png" alt></p>
<h3 id="带有重复值的轴索引"><a href="#带有重复值的轴索引" class="headerlink" title="带有重复值的轴索引"></a>带有重复值的轴索引</h3><p><strong>Series</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"># a 0</span><br><span class="line"># a 1</span><br><span class="line"># b 2</span><br><span class="line"># b 3</span><br><span class="line"># c 4</span><br><span class="line">obj&#x3D;Series(range(5),index&#x3D;[&#39;a&#39;,&#39;a&#39;,&#39;b&#39;,&#39;b&#39;,&#39;c&#39;])</span><br><span class="line">print(obj)</span><br><span class="line">#测试索引是否唯一</span><br><span class="line">print(obj.index.is_unique)  #输出False</span><br><span class="line">#索引对应多个值 --&gt; Series</span><br><span class="line">print(obj[&#39;a&#39;])</span><br><span class="line">#索引对应单个值 --&gt; 标量值</span><br><span class="line">print(obj[&#39;c&#39;])</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/52.png" alt></p>
<h3 id="汇总和统计"><a href="#汇总和统计" class="headerlink" title="汇总和统计"></a>汇总和统计</h3><p><strong>描述和汇总统计:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/54.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">#    one   two</span><br><span class="line"># a  1.4  np.man</span><br><span class="line"># b  7.1  -4.5</span><br><span class="line"># c  np.man np.man</span><br><span class="line"># d  0.75 -1.3</span><br><span class="line">df&#x3D;DataFrame([[1.4,np.nan],[7.1,-4.5],[np.nan,np.nan],[0.75,-1.3]],index&#x3D;[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;],columns&#x3D;[&#39;one&#39;,&#39;two&#39;])</span><br><span class="line">#第一列 1.4+7.1+0.75&#x3D;9.25</span><br><span class="line">#第二列 -4.5-1.3&#x3D;-5.80</span><br><span class="line"></span><br><span class="line">#直接统计</span><br><span class="line">print(df.sum())</span><br><span class="line"></span><br><span class="line">#间接统计(达到最小值&#x2F;最大值的索引)</span><br><span class="line">print(df.idxmax())</span><br><span class="line">print(df.idxmin())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/53.png" alt></p>
<h4 id="相关系数-corr-和协方差-cov"><a href="#相关系数-corr-和协方差-cov" class="headerlink" title="相关系数(corr)和协方差(cov)"></a>相关系数(corr)和协方差(cov)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.Series:</span><br><span class="line">	corr:计算两个Series中重叠的、非NA的、按索引对齐的值</span><br><span class="line">	cov:</span><br><span class="line">2.DataFrame:</span><br><span class="line">	corr:返回DataFrame</span><br><span class="line">	cov:返回DataFrame</span><br><span class="line"></span><br><span class="line">3.Series和DataFrame之间:</span><br><span class="line">	corrwith:3.1传入一个Series,返回一个相关系数值Series</span><br><span class="line">			 3.2传入一个DataFrame计算按列名配对的相关系数</span><br></pre></td></tr></table></figure>

<h4 id="唯一值-unique-和值计数-value-counts-和成员资格-isin"><a href="#唯一值-unique-和值计数-value-counts-和成员资格-isin" class="headerlink" title="唯一值(unique)和值计数(value_counts)和成员资格(isin)"></a>唯一值(unique)和值计数(value_counts)和成员资格(isin)</h4><p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/55.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. obj.value_counts()</span><br><span class="line">2. obj.unique()</span><br><span class="line">3. obj.isin([&#39;x&#39;,&#39;y&#39;])</span><br></pre></td></tr></table></figure>

<h3 id="处理缺失数据"><a href="#处理缺失数据" class="headerlink" title="处理缺失数据"></a>处理缺失数据</h3><p><strong>NA处理方法</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/56.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.滤除: dropna() 默认丢弃任何含有Na的行</span><br><span class="line">	1.1 Series:  data.dropna() &#x2F; 布尔型索引 data[data.notnull()]</span><br><span class="line">	1.2 DataFrame: </span><br><span class="line">			dropna(how&#x3D;&#39;all&#39;) 可以只丢弃全为na的那些行</span><br><span class="line">			dropna(axis&#x3D;1) 只丢弃全为na的那些列</span><br><span class="line">		</span><br><span class="line">2.填充: fillna() 默认返回新对象</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/57.png" alt></p>
<h3 id="层次化索引"><a href="#层次化索引" class="headerlink" title="层次化索引"></a>层次化索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">data&#x3D;Series(np.random.randn(10),</span><br><span class="line">            index&#x3D;[[&#39;a&#39;,&#39;a&#39;,&#39;a&#39;,&#39;b&#39;,&#39;b&#39;,&#39;b&#39;,&#39;c&#39;,&#39;c&#39;,&#39;d&#39;,&#39;d&#39;],</span><br><span class="line">            [1,2,3,1,2,3,1,2,2,3]]</span><br><span class="line">            )</span><br><span class="line">print(data)</span><br><span class="line">#选取数据索引</span><br><span class="line">print(data.index)</span><br><span class="line">#选取数据子集</span><br><span class="line">print(data[&#39;b&#39;])</span><br><span class="line">print(data[&#39;b&#39;:&#39;c&#39;])</span><br><span class="line">print(data[:,2])</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/58.png" alt></p>
<h4 id="重排分级顺序-sortlevel"><a href="#重排分级顺序-sortlevel" class="headerlink" title="重排分级顺序(sortlevel)"></a>重排分级顺序(sortlevel)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.swaplevel 根据两个级别的编号&#x2F;名称</span><br><span class="line">2.sortlevel 根据单个级别的值对数据进行排序</span><br></pre></td></tr></table></figure>

<h4 id="根据级别汇总统计-groupby"><a href="#根据级别汇总统计-groupby" class="headerlink" title="根据级别汇总统计(groupby)"></a>根据级别汇总统计(groupby)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.在统计和汇总(sum) --&gt; sum(level&#x3D;&#39;xxx&#39;)</span><br></pre></td></tr></table></figure>

<h4 id="使用DataFrame的列-set-index"><a href="#使用DataFrame的列-set-index" class="headerlink" title="使用DataFrame的列(set_index)"></a>使用DataFrame的列(set_index)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.一个&#x2F;多个列 --&gt; 行索引</span><br><span class="line">2. frame.set_index([&#39;x&#39;,&#39;y&#39;])</span><br></pre></td></tr></table></figure>

<h1 id="数据-加载-存储-文件格式"><a href="#数据-加载-存储-文件格式" class="headerlink" title="数据(加载/存储/文件格式)"></a>数据(加载/存储/文件格式)</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.输入输出：</span><br><span class="line">	1.1 读取文本文件和更高效的磁盘存储格式</span><br><span class="line">	1.2 加载数据库中的文件</span><br><span class="line">	1.3 利用Web API操作网络资源</span><br></pre></td></tr></table></figure>

<h2 id="读取数据-文本格式"><a href="#读取数据-文本格式" class="headerlink" title="读取数据(文本格式)"></a>读取数据(文本格式)</h2><h3 id="读取函数介绍"><a href="#读取函数介绍" class="headerlink" title="读取函数介绍"></a>读取函数介绍</h3><p><strong>pandas解析函数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/59.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1. 表格型数据 --&gt; DataFrame对象</span><br><span class="line">2. 不同的函数不同的方式</span><br></pre></td></tr></table></figure>

<p><strong>read_csv/read_table函数的参数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/60.png" alt></p>
<h3 id="逐块读取文本文件-属性nrows和属性chunksize"><a href="#逐块读取文本文件-属性nrows和属性chunksize" class="headerlink" title="逐块读取文本文件(属性nrows和属性chunksize)"></a>逐块读取文本文件(属性nrows和属性chunksize)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.pd.read_csv(&#39;xx.csv&#39;,nrows&#x3D;xx)</span><br><span class="line">2.pd.read_csv(&#39;xx.csv&#39;,chunksize&#x3D;xxx)</span><br><span class="line">3.TextParser.get_chunk()   读取任意大小的块</span><br></pre></td></tr></table></figure>

<h3 id="数据写出到文本格式-to-csv"><a href="#数据写出到文本格式-to-csv" class="headerlink" title="数据写出到文本格式(to_csv)"></a>数据写出到文本格式(to_csv)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.data.to_csv(&#39;xx.csv&#39;)   # (默认) ,分隔符 </span><br><span class="line">2.data.to_csv(&#39;xx.csv&#39;,sep&#x3D;&#39;|&#39;)  #sep可以更改为 |</span><br><span class="line">3.data.to_csv(&#39;xx.csv&#39;,na_rep&#x3D;&#39;NULL&#39;)  #缺失值在输出结果中会被表示为空字符串</span><br><span class="line">4.data.to_csv(&#39;xx.csv&#39;,index&#x3D;False,cols&#x3D;[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;]) #禁掉行和列的标签</span><br><span class="line"></span><br><span class="line">#Series</span><br><span class="line">5.Series.to_csv()</span><br><span class="line">6.Series.from_csv()</span><br></pre></td></tr></table></figure>

<h3 id="手工处理分隔符格式-csv-Dialect子类"><a href="#手工处理分隔符格式-csv-Dialect子类" class="headerlink" title="手工处理分隔符格式(csv.Dialect子类)"></a>手工处理分隔符格式(csv.Dialect子类)</h3><p><strong>Dialect属性:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/61.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#1.CSV子类定义:</span><br><span class="line">class dialect(csv.Dialect):</span><br><span class="line">	lineterminator&#x3D;&#39;\n&#39; 行结束符</span><br><span class="line">	delimiter&#x3D;&#39;;&#39; 分隔字段的单字符字符串</span><br><span class="line">	quotechar&#x3D;&#39;&quot;&#39; 带有特殊字符的字段的引用符号</span><br><span class="line"></span><br><span class="line">#2.csv.reader也可以接受CSV子类的各种参数</span><br><span class="line">	reader&#x3D;csv.reader(f,delimiter&#x3D;&#39;|&#39;)</span><br></pre></td></tr></table></figure>

<h3 id="JSON数据-loads和dumps方法"><a href="#JSON数据-loads和dumps方法" class="headerlink" title="JSON数据(loads和dumps方法)"></a>JSON数据(loads和dumps方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">	1.JSON简介:JavaScript Object Notation,已经成为通过HTTP请求在Web浏览器和其他应用程序之间发送数据的标准格式之一。</span><br><span class="line">	2.JSON基本类型:对象(字典)、数组(列表)、字符串、数值、布尔值、null</span><br><span class="line">	3. json.loads(): JSON字符串 --&gt; Python形式</span><br><span class="line">	4. json.dumps(): Python形式 --&gt; JSON字符串	</span><br><span class="line"></span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">obj&#x3D;&quot;&quot;&quot;</span><br><span class="line">&#123;&quot;name&quot;:&quot;Wes&quot;,</span><br><span class="line">    &quot;places_lived&quot;:[&quot;United States&quot;,&quot;Spain&quot;,&quot;Germany&quot;],</span><br><span class="line">    &quot;pet&quot;:null,</span><br><span class="line">    &quot;siblings&quot;:[&#123;&quot;name&quot;:&quot;Scott&quot;,&quot;age&quot;:25,&quot;pet&quot;:&quot;ZuKo&quot;&#125;,</span><br><span class="line">                &#123;&quot;name&quot;:&quot;Katie&quot;,&quot;age&quot;:33,&quot;pet&quot;:&quot;Cisco&quot;&#125;]</span><br><span class="line">&#125;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">#转为Py格式</span><br><span class="line">result&#x3D;json.loads(obj)</span><br><span class="line">print(result)</span><br><span class="line"></span><br><span class="line">#转回json格式</span><br><span class="line">asjson&#x3D;json.dumps(result)</span><br><span class="line"></span><br><span class="line">#一个&#x2F;一组 json对象 --&gt; DataFrame&#x2F;数据结构(便于分析)</span><br><span class="line">siblings&#x3D;DataFrame(result[&#39;siblings&#39;],columns&#x3D;[&#39;name&#39;,&#39;age&#39;])  #可以选一部分的siblings  也可以选全部内容</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/62.png" alt></p>
<h3 id="XML和HTML-get和text-content方法"><a href="#XML和HTML-get和text-content方法" class="headerlink" title="XML和HTML(get和text_content方法)"></a>XML和HTML(get和text_content方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">	1.python有许多可以读写html和xml格式数据的库(比如:lxml)</span><br><span class="line">	2. lxml.html处理html --&gt; lxml.objectify处理xml</span><br><span class="line"></span><br><span class="line">import json</span><br><span class="line">from lxml.html import parser</span><br><span class="line">from urllib2 import urlopen</span><br><span class="line"></span><br><span class="line">#使用国内镜像下载lxml</span><br><span class="line">#pip install pip install  -i https:&#x2F;&#x2F;pypi.doubanio.com&#x2F;simple&#x2F;  --trusted-host pypi.doubanio.com    --target&#x3D;e:\anaconda\lib\site-packages pythonds</span><br><span class="line">#在设置里面要更新编译器!!!   参考博客:https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_40402685&#x2F;article&#x2F;details&#x2F;102929846</span><br><span class="line">parsed&#x3D;parse(urlopen(&#39;http:&#x2F;&#x2F;finance.yahoo.com&#x2F;q&#x2F;op?s&#x3D;AAPL+Options&#39;))</span><br><span class="line">doc&#x3D;parsed.getroot()</span><br><span class="line">#通过这个对象可以获取特定类型的所有html标签</span><br><span class="line"></span><br><span class="line">#获取HTML元素的对象</span><br><span class="line">#获取html中链接是&lt;a&#x3D;&#39;&#39;&gt; a标签   --&gt; 使用文档根节点的findall()方法 + XPath</span><br><span class="line">links&#x3D;doc.findall(&#39;&#x2F;&#x2F;a&#39;)</span><br><span class="line">print(links[15:20])</span><br><span class="line"></span><br><span class="line">#获取URL和链接文本  --&gt; get方法(URL)和text_content方法(文本)</span><br><span class="line">Ink&#x3D;links[28]</span><br><span class="line">Ink.get(&#39;href&#39;)  # 获取地址http:&#x2F;&#x2F;finance.yahoo.com</span><br><span class="line">Ink.text_content()  # 获取内容 Special Editions</span><br></pre></td></tr></table></figure>

<h3 id="解析XML-lxml-objectify"><a href="#解析XML-lxml-objectify" class="headerlink" title="解析XML(lxml.objectify)"></a>解析XML(lxml.objectify)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">	1.lxml.objectify 解析xml文件</span><br><span class="line">	2..getroot 得到xml文件的根节点的引用</span><br><span class="line">	3.root.INDICATOR 返回一个用于产生各个&lt;INDICATOR&gt;XML元素的生成器	</span><br><span class="line"></span><br><span class="line">import json</span><br><span class="line">from lxml import objectify</span><br><span class="line">path&#x3D;&#39;Performance_MNR.xml&#39;</span><br><span class="line">parsed&#x3D;objectify.parse(open(path))</span><br><span class="line">root&#x3D;parsed.getroot()</span><br></pre></td></tr></table></figure>

<h2 id="二进制数据格式-save和load方法"><a href="#二进制数据格式-save和load方法" class="headerlink" title="二进制数据格式(save和load方法)"></a>二进制数据格式(save和load方法)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">#pickle只能用于短期存储格式(很难保证pickle格式永远是稳定的)</span><br><span class="line"></span><br><span class="line">#1. pandas对象的.save方法(将数据以pickle形式保存在磁盘)</span><br><span class="line">frame&#x3D;pd.read_csv(&#39;aaa&#x2F;ex1.csv&#39;)</span><br><span class="line">frame.save(&#39;aaa&#x2F;frame_pickle&#39;)   #保存为frame_pickle</span><br><span class="line"></span><br><span class="line">#2. pandas.load()将数据读回Python</span><br><span class="line">pd.load(&#39;aaa&#x2F;frame_pickle&#39;)   #读取frame_pickle</span><br></pre></td></tr></table></figure>

<h2 id="HDF5格式-层次型数据格式HDFStore类"><a href="#HDF5格式-层次型数据格式HDFStore类" class="headerlink" title="HDF5格式(层次型数据格式HDFStore类)"></a>HDF5格式(层次型数据格式HDFStore类)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.高效读写磁盘上二进制格式存储的科学数据</span><br><span class="line">2.HDF5是一个C库(带有很多语言的	接口--JAVA&#x2F;Python&#x2F;Matlab)</span><br><span class="line">3.一个HDF5文件 --&gt; 一个文件系统式节点结构(存储多个数据集) </span><br><span class="line">4.HDF5库的两个接口:</span><br><span class="line">	4.1 PyTables 抽象了HDF5的许多细节--&gt;提供数据容器、表索引、查询功能、核外计算技术 </span><br><span class="line">	4.2 h5py 提供一种直接而高级的HDF5 API访问接口</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#h5适合&quot;一次写 多次读&quot;的数据集</span><br><span class="line">import pandas as pd</span><br><span class="line">#pandas有一个HDFStore类(类似于最小化的字典的HDFStore类)</span><br><span class="line">#通过PyTables存储pandas对象</span><br><span class="line">store&#x3D;pd.HDFStore(&#39;mydata.h5&#39;)</span><br><span class="line">store[&#39;obj1&#39;]&#x3D;frame</span><br><span class="line">store[&#39;obj1_col&#39;]&#x3D;frame[&#39;a&#39;]   #像字典一样获取h5对象</span><br><span class="line">print(store)</span><br></pre></td></tr></table></figure>

<h2 id="读取Microsoft-Excel文件-ExcelFile类的xlrd和openpyxl包"><a href="#读取Microsoft-Excel文件-ExcelFile类的xlrd和openpyxl包" class="headerlink" title="读取Microsoft Excel文件(ExcelFile类的xlrd和openpyxl包)"></a>读取Microsoft Excel文件(ExcelFile类的xlrd和openpyxl包)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#1.传入xls或xlsx文件</span><br><span class="line">xls_file&#x3D;pd.ExcelFile(&#39;data.xls&#39;)</span><br><span class="line">print(xls_file)</span><br><span class="line"></span><br><span class="line">#2.通过parse读取到DataFrame</span><br><span class="line">table&#x3D;xls_file.parse(&#39;Sheet1&#39;)</span><br></pre></td></tr></table></figure>

<h2 id="HTML和Web-API-requests包"><a href="#HTML和Web-API-requests包" class="headerlink" title="HTML和Web API(requests包)"></a>HTML和Web API(requests包)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import requests</span><br><span class="line">import json</span><br><span class="line">#通过Python访问公共API(http:&#x2F;&#x2F;docs.python-requests.org)</span><br><span class="line">url&#x3D;&#39;https:&#x2F;&#x2F;www.liaoxuefeng.com&#x2F;wiki&#x2F;1016959663602400&#x2F;1016966022717728&#39;  #随便访问一个网站</span><br><span class="line">#发送一个HTTP GET请求</span><br><span class="line">resp&#x3D;requests.get(url)</span><br><span class="line">print(resp)</span><br><span class="line"></span><br><span class="line">#Response对象(text&#x3D;‘GET请求的内容’)  --&gt; 所以loads加载一下</span><br><span class="line">#许多Web API返回的都是JSON字符串(必须加载到一个Python对象)</span><br><span class="line">data&#x3D;json.loads(resp.text)</span><br><span class="line">print(data.keys())</span><br></pre></td></tr></table></figure>

<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库()"></a>数据库()</h2><h3 id="关系型数据库-pandas-io-sql模块的read-frame函数"><a href="#关系型数据库-pandas-io-sql模块的read-frame函数" class="headerlink" title="关系型数据库(pandas.io.sql模块的read_frame函数)"></a>关系型数据库(pandas.io.sql模块的read_frame函数)</h3><p><strong>两种方式:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 目前而言有两种方法:</span><br><span class="line">1.通过获得元组列表然后输出</span><br><span class="line">2.sql.read_frame()函数</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import json</span><br><span class="line">import pandas.io.sql as sql</span><br><span class="line">#嵌入式的SQLite数据库(Python内置的sqlite3驱动器)</span><br><span class="line">import sqlite3</span><br><span class="line"></span><br><span class="line">#定义test表</span><br><span class="line">query&#x3D;&quot;&quot;&quot;</span><br><span class="line">create table test   </span><br><span class="line">(</span><br><span class="line">    a varchar(20),</span><br><span class="line">    b varchar(20),</span><br><span class="line">    c real,</span><br><span class="line">    d integer</span><br><span class="line">);&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">#先连接</span><br><span class="line">con&#x3D;sqlite3.connect(&#39;:memory:&#39;)</span><br><span class="line">con.execute(query)</span><br><span class="line">con.commit()</span><br><span class="line"></span><br><span class="line">#插入几行数据</span><br><span class="line">data&#x3D;[(&#39;Atlanta&#39;,&#39;Georgia&#39;,1.25,6),</span><br><span class="line">      (&#39;Tallahassee&#39;,&#39;Florida&#39;,2.6,3),</span><br><span class="line">      (&#39;Sacramento&#39;,&#39;California&#39;,1.7,5)]</span><br><span class="line">stmt&#x3D;&quot;insert into test values(?,?,?,?)&quot;</span><br><span class="line">con.executemany(stmt,data)</span><br><span class="line">con.commit()</span><br><span class="line"></span><br><span class="line">#1.第一种 通过获得元组列表然后输出</span><br><span class="line">#返回一个元组列表(大部分python sql驱动[PyODBC psycopg2 MySQLdb pymssql])</span><br><span class="line">res&#x3D;con.execute(&#39;select * from test&#39;)</span><br><span class="line">rows&#x3D;res.fetchall()</span><br><span class="line">print(rows)  #输出所有的结果行</span><br><span class="line"></span><br><span class="line">#元组列表res --&gt; DataFrame构造器(还需要列名description属性)</span><br><span class="line">print(res.description)</span><br><span class="line">print(DataFrame(rows,columns&#x3D;zip(*res.description)[0]))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.read_frame函数(直接出)</span><br><span class="line">res1&#x3D;sql.read_frame(&#39;select * from test&#39;,con)</span><br><span class="line">print(res1)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/63.png" alt></p>
<h3 id="非关系型数据库-MongoDB为例"><a href="#非关系型数据库-MongoDB为例" class="headerlink" title="非关系型数据库(MongoDB为例)"></a>非关系型数据库(MongoDB为例)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import json</span><br><span class="line">import requests</span><br><span class="line">import pymongo #MongoDB的官方驱动器</span><br><span class="line"></span><br><span class="line">#通过默认端口27017连接MongoDB</span><br><span class="line">con&#x3D;pymongo.Connection(&#39;localhost&#39;,port&#x3D;27017)</span><br><span class="line">#访问tweets集合</span><br><span class="line">tweets&#x3D;con.db.tweets</span><br><span class="line">#通过tweets.save将tweets逐个存入集合</span><br><span class="line">url&#x3D;&#39;http:&#x2F;&#x2F;search.twitter.com&#x2F;search.json?q&#x3D;python%20pandas&#39;</span><br><span class="line">#通过request请求获取数据</span><br><span class="line">data&#x3D;json.loads(requests.get(url).text)</span><br><span class="line">#将所有data数据存到tweets集合</span><br><span class="line">for tweet in data[&#39;results&#39;]:</span><br><span class="line">      tweets.save(tweet)</span><br><span class="line">#将tweets集合中取出我发的tweet</span><br><span class="line">res&#x3D;tweets.find(&#123;&#39;from_user&#39;,&#39;宋亚翔&#39;&#125;)</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>

<h1 id="数据规整化-清理-转换-合并-重塑"><a href="#数据规整化-清理-转换-合并-重塑" class="headerlink" title="数据规整化(清理/转换/合并/重塑)"></a>数据规整化(清理/转换/合并/重塑)</h1><h2 id="合并数据集"><a href="#合并数据集" class="headerlink" title="合并数据集"></a>合并数据集</h2><p><strong>三种合并方法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.pandas.merge 根据1个&#x2F;多个键将不同的DataFrame中的行连接起来(像极了数据库连接操作 选几个行)</span><br><span class="line">2.pandas.concat 沿着一条轴将多个对象堆叠在一起</span><br><span class="line">3.实例方法combine_first 将重复数据编接在一起(像数据库的全外连接--先从第一个对象中选值，不行再去第二个对象中选值)</span><br></pre></td></tr></table></figure>

<h3 id="DataFrame的合并-merge和join"><a href="#DataFrame的合并-merge和join" class="headerlink" title="DataFrame的合并(merge和join)"></a>DataFrame的合并(merge和join)</h3><p><strong>merge函数参数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/64.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line"></span><br><span class="line">#1.多对一的合并merge</span><br><span class="line">##1.两个对象的列名相同</span><br><span class="line">df1&#x3D;DataFrame(&#123;&#39;key&#39;:[&#39;b&#39;,&#39;b&#39;,&#39;a&#39;,&#39;c&#39;,&#39;a&#39;,&#39;a&#39;,&#39;b&#39;],</span><br><span class="line">               &#39;data1&#39;:range(7)</span><br><span class="line">               &#125;)</span><br><span class="line">df2&#x3D;DataFrame(&#123;&#39;key&#39;:[&#39;a&#39;,&#39;b&#39;,&#39;d&#39;],</span><br><span class="line">               &#39;data2&#39;:range(3)</span><br><span class="line">               &#125;)</span><br><span class="line">###多对一的合并 merge</span><br><span class="line">print(pd.merge(df1,df2))  # 只有a和b</span><br><span class="line">print(pd.merge(df1,df2,on&#x3D;&#39;key&#39;)) #显示指定根据key 只有a和b</span><br><span class="line"></span><br><span class="line">##2.两个对象的列名不同(分别指定 left_on&#x3D;xxx,rigt_on&#x3D;xxx)</span><br><span class="line">df3&#x3D;DataFrame(&#123;&#39;lkey&#39;:[&#39;b&#39;,&#39;b&#39;,&#39;a&#39;,&#39;c&#39;,&#39;a&#39;,&#39;a&#39;,&#39;b&#39;],</span><br><span class="line">               &#39;data1&#39;:range(7)</span><br><span class="line">               &#125;)</span><br><span class="line">df4&#x3D;DataFrame(&#123;&#39;rkey&#39;:[&#39;a&#39;,&#39;b&#39;,&#39;d&#39;],</span><br><span class="line">               &#39;data2&#39;:range(3)</span><br><span class="line">               &#125;)</span><br><span class="line">###多对一的合并 merge</span><br><span class="line">print(pd.merge(df3,df4,left_on&#x3D;&#39;lkey&#39;,right_on&#x3D;&#39;rkey&#39;))  #左边根据lkey  右边根据rkey</span><br><span class="line"></span><br><span class="line">##3.外连接求取(键的并集)</span><br><span class="line">print(pd.merge(df1,df2,how&#x3D;&#39;outer&#39;))</span><br><span class="line"></span><br><span class="line">#2.多对多的合并(行的笛卡尔积)</span><br><span class="line">df5&#x3D;DataFrame(&#123;&#39;key&#39;:[&#39;b&#39;,&#39;b&#39;,&#39;a&#39;,&#39;c&#39;,&#39;a&#39;,&#39;b&#39;],</span><br><span class="line">               &#39;data1&#39;:range(6)</span><br><span class="line">               &#125;)</span><br><span class="line">df6&#x3D;DataFrame(&#123;&#39;key&#39;:[&#39;a&#39;,&#39;b&#39;,&#39;a&#39;,&#39;b&#39;,&#39;d&#39;],</span><br><span class="line">               &#39;data2&#39;:range(5)</span><br><span class="line">               &#125;)</span><br><span class="line">#左边有个3个b，右边有2个b  所以最终结果有6个b行</span><br><span class="line">print(pd.merge(df5,df6,on&#x3D;&#39;key&#39;,how&#x3D;&#39;left&#39;))</span><br><span class="line">print(pd.merge(df5,df6,how&#x3D;&#39;inner&#39;))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/65.png" alt></p>
<h3 id="索引上的合并-merge和join只不过更改属性"><a href="#索引上的合并-merge和join只不过更改属性" class="headerlink" title="索引上的合并(merge和join只不过更改属性)"></a>索引上的合并(merge和join只不过更改属性)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.普通索引: 设置left_index或者right_index&#x3D;True表明索引作为连接键</span><br><span class="line">2.层次化索引:设置列表的形式合并键的多个列 (left_on&#x3D;[&#39;key1&#39;,&#39;key2&#39;,right_index&#x3D;True])</span><br></pre></td></tr></table></figure>

<p><strong>代码举例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#  key  value</span><br><span class="line">#0   a      0</span><br><span class="line">#1   b      1</span><br><span class="line">#2   a      2</span><br><span class="line">#3   a      3</span><br><span class="line">#4   b      4</span><br><span class="line">#5   c      5</span><br><span class="line">#   group_val</span><br><span class="line">#a        3.5</span><br><span class="line">#b        7.0</span><br><span class="line"></span><br><span class="line">left1&#x3D;DataFrame(&#123;&#39;key&#39;:[&#39;a&#39;,&#39;b&#39;,&#39;a&#39;,&#39;a&#39;,&#39;b&#39;,&#39;c&#39;],</span><br><span class="line">                 &#39;value&#39;:range(6)</span><br><span class="line">                &#125;)</span><br><span class="line">right1&#x3D;DataFrame(&#123;&#39;group_val&#39;:[3.5,7]&#125;,</span><br><span class="line">                 index&#x3D;[&#39;a&#39;,&#39;b&#39;]</span><br><span class="line">                )</span><br><span class="line">#根据左边key和右边的索引作为键(index key group_val)</span><br><span class="line">print(pd.merge(left1,right1,left_on&#x3D;&#39;key&#39;,right_index&#x3D;True))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/66.png" alt></p>
<h3 id="轴向连接-concat"><a href="#轴向连接-concat" class="headerlink" title="轴向连接(concat)"></a>轴向连接(concat)</h3><p><strong>concat函数参数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/67.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#随机生成3*4的数列</span><br><span class="line">arr&#x3D;np.arange(12).reshape((3,4))</span><br><span class="line">print(np.concatenate([arr,arr],axis&#x3D;1))</span><br><span class="line"></span><br><span class="line">#假设有三个没有重叠索引的Series --&gt; concat函数</span><br><span class="line">s1&#x3D;Series([0,1],index&#x3D;[&#39;a&#39;,&#39;b&#39;])</span><br><span class="line">s2&#x3D;Series([2,3,4],index&#x3D;[&#39;c&#39;,&#39;d&#39;,&#39;e&#39;])</span><br><span class="line">s3&#x3D;Series([5,6],index&#x3D;[&#39;f&#39;,&#39;g&#39;])</span><br><span class="line">#(默认)concat是在axis&#x3D;0上工作 --&gt; 产生一个新的Series</span><br><span class="line">#      concat是在axis&#x3D;1上工作 --&gt; 产生一个新的DataFrame</span><br><span class="line">print(pd.concat([s1,s2,s3]))</span><br><span class="line">print(pd.concat([s1,s2,s3],axis&#x3D;1))  #axis&#x3D;1是列   0 1 2分别表示的s1 s2 s3</span><br><span class="line"></span><br><span class="line">#a    0</span><br><span class="line">#b    5</span><br><span class="line">#f    5</span><br><span class="line">#g    6</span><br><span class="line">s4&#x3D;pd.concat([s1*5,s3])</span><br><span class="line">print(pd.concat([s1,s4],axis&#x3D;1))  #axis&#x3D;1是列 0 1分别是s1 s4</span><br><span class="line">#传入innner可以得到他们的交集</span><br><span class="line">print(pd.concat([s1,s4],axis&#x3D;1,join&#x3D;&#39;inner&#39;)) #axis&#x3D;1是列 0 1分别是s1 s4  --&gt; 交集就取前两行</span><br><span class="line">#指定要在其他轴上使用的索引(join_axes参数)  (使用指定索引 --&gt; 可能会出现都是NaN值)</span><br><span class="line">print(pd.concat([s1,s4],axis&#x3D;1,join_axes&#x3D;[[&#39;a&#39;,&#39;c&#39;,&#39;b&#39;,&#39;e&#39;]]))</span><br><span class="line"></span><br><span class="line">#生成层次化索引(keys参数)</span><br><span class="line"></span><br><span class="line"># one    a    0</span><br><span class="line">#        b    1</span><br><span class="line"># two    a    0</span><br><span class="line">#        b    1</span><br><span class="line"># three  f    5</span><br><span class="line">#        g    6</span><br><span class="line"># dtype: int64</span><br><span class="line">res&#x3D;pd.concat([s1,s1,s3],keys&#x3D;[&#39;one&#39;,&#39;two&#39;,&#39;three&#39;])   #keys就是行</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line">#   one  two  three</span><br><span class="line">#a  0.0  0.0    NaN</span><br><span class="line">#b  1.0  1.0    NaN</span><br><span class="line">#f  NaN  NaN    5.0</span><br><span class="line">#g  NaN  NaN    6.0</span><br><span class="line">res1&#x3D;pd.concat([s1,s1,s3],axis&#x3D;1,keys&#x3D;[&#39;one&#39;,&#39;two&#39;,&#39;three&#39;])  #keys就是列(axis&#x3D;1生成一个DataFrame)</span><br><span class="line">print(res1)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/68.png" alt></p>
<h3 id="重叠数据的合并-combine-first"><a href="#重叠数据的合并-combine-first" class="headerlink" title="重叠数据的合并(combine_first)"></a>重叠数据的合并(combine_first)</h3><p><strong>方法总结</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. numpy中的where方法</span><br><span class="line">2. Series中的combine_first方法</span><br><span class="line">3. DataFrame中的combine_first方法</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#   a           b</span><br><span class="line">#f    NaN   f    0.0</span><br><span class="line">#e    2.5   e    1.0</span><br><span class="line">#d    NaN   d    2.0</span><br><span class="line">#c    3.5   c    3.0</span><br><span class="line">#b    4.5   b    4.0</span><br><span class="line">#a    NaN   a    NaN</span><br><span class="line">a&#x3D;Series([np.nan,2.5,np.nan,3.5,4.5,np.nan],</span><br><span class="line">         index&#x3D;[&#39;f&#39;,&#39;e&#39;,&#39;d&#39;,&#39;c&#39;,&#39;b&#39;,&#39;a&#39;])</span><br><span class="line">b&#x3D;Series(np.arange(len(a),dtype&#x3D;np.float64),</span><br><span class="line">         index&#x3D;[&#39;f&#39;,&#39;e&#39;,&#39;d&#39;,&#39;c&#39;,&#39;b&#39;,&#39;a&#39;])</span><br><span class="line">b[-1]&#x3D;np.nan #b中最后一个赋值NaN</span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line"></span><br><span class="line">#使用numpy中的where方法连接</span><br><span class="line">print(np.where(pd.isnull(a),b,a))</span><br><span class="line"></span><br><span class="line">#Series中的combine_first方法【+数据对齐】</span><br><span class="line">print(b[:2].combine_first(a[2:]))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/69.png" alt></p>
<h2 id="重塑-reshape-和轴向旋转-pivot"><a href="#重塑-reshape-和轴向旋转-pivot" class="headerlink" title="重塑(reshape)和轴向旋转(pivot)"></a>重塑(reshape)和轴向旋转(pivot)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.重塑 reshape方法</span><br><span class="line">2.轴向旋转 pivot方法</span><br></pre></td></tr></table></figure>

<h3 id="重塑层次化索引-stack和unstack"><a href="#重塑层次化索引-stack和unstack" class="headerlink" title="重塑层次化索引(stack和unstack)"></a>重塑层次化索引(stack和unstack)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.stack: 将数据的列&quot;旋转&quot;为行  【列--&gt;行】</span><br><span class="line">2.unstack:将数据的行“旋转”为列 【行--&gt;列】</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#number    one  two  three</span><br><span class="line">#state</span><br><span class="line">#Ohio      0     1     2</span><br><span class="line">#Colorado  3     4     5</span><br><span class="line">data&#x3D;DataFrame(np.arange(6).reshape((2,3)),</span><br><span class="line">               index&#x3D;pd.Index([&#39;Ohio&#39;,&#39;Colorado&#39;],name&#x3D;&#39;state&#39;),  #索引有2个Ohio Colorado</span><br><span class="line">                columns&#x3D;pd.Index([&#39;one&#39;,&#39;two&#39;,&#39;three&#39;],name&#x3D;&#39;number&#39;)  #列有三个one two three</span><br><span class="line">               )</span><br><span class="line">#列转成行(默认操作是最内层)</span><br><span class="line">res&#x3D;data.stack()  #变成一列0 1 2 3 4 5</span><br><span class="line">print(res)</span><br><span class="line"></span><br><span class="line">#行转成列(默认操作是最内层)</span><br><span class="line">print(res.unstack())     #可以传入 分层级别的编号&#x2F;分层级别的名称</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/70.png" alt></p>
<h3 id="长格式–-gt-宽格式"><a href="#长格式–-gt-宽格式" class="headerlink" title="长格式–&gt; 宽格式"></a>长格式–&gt; 宽格式</h3><p><strong>概述</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.时间序列数据[长格式(long)&#x2F;堆叠格式(stacked)]存储在数据库和CSV</span><br></pre></td></tr></table></figure>

<h2 id="数据转换"><a href="#数据转换" class="headerlink" title="数据转换"></a>数据转换</h2><h3 id="移除重复数据-duplicated和drop-duplicataes"><a href="#移除重复数据-duplicated和drop-duplicataes" class="headerlink" title="移除重复数据(duplicated和drop_duplicataes)"></a>移除重复数据(duplicated和drop_duplicataes)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#    k1  k2</span><br><span class="line">#0  one   1</span><br><span class="line">#1  one   1</span><br><span class="line">#2  one   2</span><br><span class="line">#3  two   3</span><br><span class="line">#4  two   3</span><br><span class="line">#5  two   4</span><br><span class="line">#6  two   4</span><br><span class="line">data&#x3D;DataFrame(&#123;&#39;k1&#39;:[&#39;one&#39;]*3+[&#39;two&#39;]*4,</span><br><span class="line">                &#39;k2&#39;:[1,1,2,3,3,4,4]</span><br><span class="line">                &#125;)</span><br><span class="line">#1.一个列</span><br><span class="line">#DataFrame的duplicated方法 --&gt; 布尔型Series (各行是否是重复行)</span><br><span class="line">print(data.duplicated())</span><br><span class="line">#DataFrame的drop_duplicataes方法 --&gt;移除了重复行的DataFrame</span><br><span class="line">print(data.drop_duplicates())</span><br><span class="line"></span><br><span class="line">#2.多个列</span><br><span class="line">data[&#39;v1&#39;]&#x3D;range(7) #多加一个列v1 有0-6这7个值</span><br><span class="line">print(data.drop_duplicates([&#39;k1&#39;]))  #只根据k1去判断</span><br><span class="line"></span><br><span class="line">#3.duplicated和drop_duplicates 默认保留第一个出现的值组合</span><br><span class="line">#keep&#x3D;&#39;last&#39;则保留最后一个</span><br><span class="line">print(data.drop_duplicates([&#39;k1&#39;, &#39;k2&#39;],keep&#x3D;&#39;last&#39;))  #更改keep让最后一个保留</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/71.png" alt></p>
<h3 id="利用函数-映射进行数据转换-Series的map方法"><a href="#利用函数-映射进行数据转换-Series的map方法" class="headerlink" title="利用函数/映射进行数据转换(Series的map方法)"></a>利用函数/映射进行数据转换(Series的map方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#有关肉类的数据 食物 -- 盎司</span><br><span class="line">data&#x3D;DataFrame(&#123;&#39;food&#39;:[&#39;bacon&#39;,&#39;pulled pork&#39;,&#39;bacon&#39;,&#39;Pastrami&#39;,&#39;corned beef&#39;,&#39;Bacon&#39;,&#39;pastrami&#39;,&#39;honey ham&#39;,&#39;nova lox&#39;],</span><br><span class="line">                &#39;ounces&#39;:[4,3,12,6,7.5,8,3,5,6]</span><br><span class="line">              &#125;)</span><br><span class="line">print(data)</span><br><span class="line"></span><br><span class="line">#想添加一列表示肉类食物来源的动物类型</span><br><span class="line">#编写一个映射(肉类--动物)</span><br><span class="line">meat_to_animal&#x3D;&#123;</span><br><span class="line">    &#39;bacon&#39;:&#39;pig&#39;,</span><br><span class="line">    &#39;pulled pork&#39;:&#39;pig&#39;,</span><br><span class="line">    &#39;pastrami&#39;:&#39;cow&#39;,</span><br><span class="line">    &#39;corned beef&#39;:&#39;cow&#39;,</span><br><span class="line">    &#39;honey ham&#39;:&#39;pig&#39;,</span><br><span class="line">    &#39;nova lox&#39;:&#39;salmon&#39;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#Series的map方法(接受一个函数&#x2F;含有映射关系的字典型对象)</span><br><span class="line">data[&#39;animal&#39;]&#x3D;data[&#39;food&#39;].map(str.lower).map(meat_to_animal)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/72.png" alt></p>
<h3 id="替换值-replace方法"><a href="#替换值-replace方法" class="headerlink" title="替换值(replace方法)"></a>替换值(replace方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#0       1.0</span><br><span class="line">#1    -999.0</span><br><span class="line">#2       2.0</span><br><span class="line">#3    -999.0</span><br><span class="line">#4   -1000.0</span><br><span class="line">#5       3.0</span><br><span class="line">data&#x3D;Series([1.,-999.,2.,-999.,-1000,3.])</span><br><span class="line">print(data)</span><br><span class="line">#-999可能是一个缺失数据的标记值 --&gt; 更改为pandas可以理解的NA值</span><br><span class="line">#一对一替换</span><br><span class="line">data.replace(-999,np.nan)</span><br><span class="line">#多对一替换</span><br><span class="line">data.replace([-999,-1000],np.nan)</span><br><span class="line">#多对多替换</span><br><span class="line">data.replace([-999,-1000],[np.nan,0])</span><br><span class="line">#多对多替换(字典形式)</span><br><span class="line">data.replace(&#123;-999:np.nan,-1000:0&#125;)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/73.png" alt></p>
<h3 id="轴索引重命名-map全体更新和rename全体更新-部分更新"><a href="#轴索引重命名-map全体更新和rename全体更新-部分更新" class="headerlink" title="轴索引重命名(map全体更新和rename全体更新/部分更新)"></a>轴索引重命名(map全体更新和rename全体更新/部分更新)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#          one  two  three  four</span><br><span class="line">#Ohio        0    1      2     3</span><br><span class="line">#Colorado    4    5      6     7</span><br><span class="line">#New York    8    9     10    11</span><br><span class="line"></span><br><span class="line">#Series轴标签和Series值都可以通过函数&#x2F;映射 --&gt; 新对象</span><br><span class="line">data&#x3D;DataFrame(np.arange(12).reshape((3,4)),</span><br><span class="line">                index&#x3D;[&#39;Ohio&#39;,&#39;Colorado&#39;,&#39;New York&#39;],</span><br><span class="line">               columns&#x3D;[&#39;one&#39;,&#39;two&#39;,&#39;three&#39;,&#39;four&#39;])</span><br><span class="line"></span><br><span class="line">#轴标签也有map方法</span><br><span class="line">print(data.index.map(str.upper))  #所有轴更大</span><br><span class="line">data.index&#x3D;data.index.map(str.upper)</span><br><span class="line">#更新之后的data (标签更新)</span><br><span class="line">print(data)</span><br><span class="line"></span><br><span class="line">#rename方法</span><br><span class="line">#创建数据集的转换版(不修改原始数据)</span><br><span class="line">print(data.rename(index&#x3D;str.title,columns&#x3D;str.upper))</span><br><span class="line">#部分轴标签更新</span><br><span class="line">print(data.rename(index&#x3D;&#123;&#39;OHIO&#39;:&#39;哈尔滨&#39;&#125;,columns&#x3D;&#123;&#39;three&#39;:&#39;第三&#39;&#125;))  #替换</span><br><span class="line">#原地修改(inplace&#x3D;True)</span><br><span class="line">datares&#x3D;data.rename(index&#x3D;&#123;&#39;OHIO&#39;:&#39;哈尔滨&#39;&#125;,columns&#x3D;&#123;&#39;three&#39;:&#39;第三&#39;&#125;,inplace&#x3D;True)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/74.png" alt></p>
<h3 id="离散化和面元-bin-划分-cut函数和qcut"><a href="#离散化和面元-bin-划分-cut函数和qcut" class="headerlink" title="离散化和面元(bin)划分(cut函数和qcut)"></a>离散化和面元(bin)划分(cut函数和qcut)</h3><h4 id="cut函数"><a href="#cut函数" class="headerlink" title="cut函数"></a>cut函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">ages&#x3D;[20,22,25,27,21,23,37,31,61,45,41,32]</span><br><span class="line">#将数据划分为好几个面元(bin)</span><br><span class="line">#使用pandas的cut函数</span><br><span class="line">bins&#x3D;[18,25,35,60,100]  #划分为 18-25 26-35 35-60 60-100</span><br><span class="line">cats&#x3D;pd.cut(ages,bins)</span><br><span class="line"></span><br><span class="line">#pandas返回的是一个特殊的Categorical对象【表示面元名称的字符串】</span><br><span class="line">print(cats)</span><br><span class="line"></span><br><span class="line">#一个表示不同分类名称的levels数组</span><br><span class="line">#一个为年龄数据进行标号的labels实行</span><br><span class="line">print(cats.codes)</span><br><span class="line">print(pd.value_counts(cats))  #圆括号表示开端 方括号表示闭端  --&gt; 可以通过right&#x3D;False修改哪边是闭端</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/75.png" alt></p>
<h4 id="qcut函数"><a href="#qcut函数" class="headerlink" title="qcut函数"></a>qcut函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#cut和qcut都可以根据数据的最小值和最大值计算等长面元</span><br><span class="line">#cut可能无法使得每个面元中含有相同数量的数据点</span><br><span class="line">#qcut使用的样本分位数 --&gt; 大小基本相等的面元</span><br><span class="line"></span><br><span class="line">#正态分布</span><br><span class="line">data&#x3D;np.random.randn(1000)</span><br><span class="line">cats&#x3D;pd.qcut(data,4) #按照四位数进行切割</span><br><span class="line">print(cats)</span><br><span class="line">print(pd.value_counts(cats)) #圆括号表示开端 方括号表示闭端  --&gt; 可以通过right&#x3D;False修改哪边是闭端</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/76.png" alt></p>
<h3 id="异常值-检测和过滤"><a href="#异常值-检测和过滤" class="headerlink" title="异常值(检测和过滤)"></a>异常值(检测和过滤)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">np.random.seed(12345)</span><br><span class="line">data&#x3D;DataFrame(np.random.randn(1000,4))</span><br><span class="line">print(data.describe())</span><br><span class="line">#找到某列中|值|&gt;3</span><br><span class="line">flag&#x3D;data[3]</span><br><span class="line">print(flag[np.abs(flag)&gt;3])</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/77.png" alt></p>
<h3 id="排列-np-random-permutation-和随机采样-np-random-randint"><a href="#排列-np-random-permutation-和随机采样-np-random-randint" class="headerlink" title="排列(np.random.permutation)和随机采样(np.random.randint)"></a>排列(np.random.permutation)和随机采样(np.random.randint)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#利用numpy.random.permutation函数 --&gt; 对Series&#x2F;DataFrame的列的排列工作 (permuting,随机重排序)</span><br><span class="line">#通过需要排列的轴的长度调用permutation --&gt; 整数数组(表示新序列)</span><br><span class="line">#    0   1   2   3</span><br><span class="line">#0   0   1   2   3</span><br><span class="line">#1   4   5   6   7</span><br><span class="line">#2   8   9  10  11</span><br><span class="line">#3  12  13  14  15</span><br><span class="line">#4  16  17  18  19</span><br><span class="line">df&#x3D;DataFrame(np.arange(5*4).reshape(5,4))  #生成5行4列的矩阵</span><br><span class="line">sampler&#x3D;np.random.permutation(5)  #调用permutation(5)</span><br><span class="line">print(sampler)  #产生一个表示新顺序的整数数组</span><br><span class="line">#基于ix索引操作 &#x2F; take函数</span><br><span class="line">print(df.take(sampler))</span><br><span class="line"></span><br><span class="line">bag&#x3D;np.array([5,7,-1,6,4])</span><br><span class="line">sampler1&#x3D;np.random.randint(0,len(bag),size&#x3D;10) #0-5之间的10个数字</span><br><span class="line">print(sampler1)</span><br><span class="line">print(bag.take(sampler1))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/78.png" alt></p>
<h3 id="指标-哑变量-get-dummies方法"><a href="#指标-哑变量-get-dummies方法" class="headerlink" title="指标/哑变量(get_dummies方法)"></a>指标/哑变量(get_dummies方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.分类变量(categorical variable) --&gt; 哑变量矩阵(dummy matrix)&#x2F;指标矩阵(indicator matrix)</span><br><span class="line">2.如果DataFrame的某一列中含有k个不同的值 --&gt;一个k列矩阵&#x2F;DataFrame(值全为0&#x2F;1)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#   data1 key</span><br><span class="line">#0      0   b</span><br><span class="line">#1      1   b</span><br><span class="line">#2      2   a</span><br><span class="line">#3      3   c</span><br><span class="line">#4      4   a</span><br><span class="line">#5      5   b</span><br><span class="line">df&#x3D;DataFrame(&#123;&#39;key&#39;:[&#39;b&#39;,&#39;b&#39;,&#39;a&#39;,&#39;c&#39;,&#39;a&#39;,&#39;b&#39;],</span><br><span class="line">                &#39;data1&#39;:range(6)</span><br><span class="line">             &#125;)</span><br><span class="line">#根据key列得到一个k列矩阵&#x2F;DataFrame(全为1&#x2F;0)</span><br><span class="line">print(pd.get_dummies(df[&#39;key&#39;]))  #key取值有a b c 所以新的DataFrame列就是a b c</span><br><span class="line"></span><br><span class="line">#给指标DataFrame的列加上一个前缀 --&gt; get_dummies的prefix参数</span><br><span class="line">dummies&#x3D;pd.get_dummies(df[&#39;key&#39;],prefix&#x3D;&#39;xin&#39;)  #key取值有a b c 所以新的DataFrame列就是xin_a xin_b xin_c</span><br><span class="line">df_with_dummy&#x3D;df[[&#39;data1&#39;]].join(dummies)  #列就加入data1 成为四列</span><br><span class="line">print(df_with_dummy)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/79.png" alt></p>
<h2 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h2><h3 id="字符串对象方法"><a href="#字符串对象方法" class="headerlink" title="字符串对象方法"></a>字符串对象方法</h3><p><strong>py内置的字符串方法</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/81.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#val是要判断的字符串</span><br><span class="line">val&#x3D;&#39;a,b guido&#39;</span><br><span class="line"></span><br><span class="line">#1.字符串拆分</span><br><span class="line">##根据split拆分成数段(用逗号分隔的字符串)</span><br><span class="line">print(val.split(&#39;,&#39;))</span><br><span class="line">##根据strip修剪空白符(包括换行符)</span><br><span class="line">pieces&#x3D;[x.strip() for x in val.split(&#39;,&#39;)]</span><br><span class="line">print(pieces)</span><br><span class="line"></span><br><span class="line">#2.字符串添加</span><br><span class="line">##子字符串添加‘::’ --&gt; .join()</span><br><span class="line">print(&#39;::&#39;.join(pieces))</span><br><span class="line"></span><br><span class="line">#3.字符串查找</span><br><span class="line">##子串定位 --&gt; in关键字(index和find)</span><br><span class="line">print(&#39;guido&#39; in val)</span><br><span class="line">##find和index区别[如果找不到的话index引发一个异常,find返回-1]</span><br><span class="line">print(val.index(&#39;,&#39;))</span><br><span class="line">print(val.find(&#39;:&#39;))</span><br><span class="line"></span><br><span class="line">#4.字符串统计</span><br><span class="line">##返回指定子串的出现次数:</span><br><span class="line">print(val.count(&#39;,&#39;))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/80.png" alt></p>
<h3 id="正则表达式-regex"><a href="#正则表达式-regex" class="headerlink" title="正则表达式(regex)"></a>正则表达式(regex)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.py内置的re模块负责对字符串应用正则表达式</span><br><span class="line">2.py内置的re模块分为三大类:</span><br><span class="line">	2.1 模式匹配</span><br><span class="line">	2.2 替换</span><br><span class="line">	2.3 拆分</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/82.png" alt></p>
<h3 id="pandas中矢量化的字符串函数"><a href="#pandas中矢量化的字符串函数" class="headerlink" title="pandas中矢量化的字符串函数"></a>pandas中矢量化的字符串函数</h3><p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/83.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">#清理待分析的散乱数据 --&gt; 字符串规整化工作</span><br><span class="line"></span><br><span class="line">#Dava     dava@google.com</span><br><span class="line">#Rob        rob@gmail.com</span><br><span class="line">#Steve    steve@email.com</span><br><span class="line">#Wes                  NaN</span><br><span class="line">data&#x3D;&#123;&#39;Dava&#39;:&#39;dava@google.com&#39;,</span><br><span class="line">      &#39;Steve&#39;:&#39;steve@email.com&#39;,</span><br><span class="line">      &#39;Rob&#39;:&#39;rob@gmail.com&#39;,</span><br><span class="line">      &#39;Wes&#39;:np.nan&#125;</span><br><span class="line">#将data数据Series规格化</span><br><span class="line">data&#x3D;Series(data)</span><br><span class="line">#判断data是否为空</span><br><span class="line">print(data.isnull())</span><br><span class="line"></span><br><span class="line">#通过data.map可以让所有的字符串和正则表达式方法都应用于各个值(如果存在NA就会报错!!!)</span><br><span class="line">#Series有一些可以跳过NA值的字符串操作方法 --&gt; 通过Series的str属性就可以访问这些方法</span><br><span class="line">print(data.str.contains(&#39;gmail&#39;))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/84.png" alt></p>
<h1 id="绘图和可视化-matplotlib"><a href="#绘图和可视化-matplotlib" class="headerlink" title="绘图和可视化(matplotlib)"></a>绘图和可视化(matplotlib)</h1><h2 id="matplotlib-API入门"><a href="#matplotlib-API入门" class="headerlink" title="matplotlib API入门"></a>matplotlib API入门</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.matplotlib是一个用于创建出版质量图表的桌面绘图包(主要是2D方面)</span><br><span class="line">2.matplotlib结合一种GUI工具包(IPython)可以拥有缩放和平移等交互功能</span><br><span class="line">3.matplotlib支持各种操作系统上许多不同的GUI后端，而且将图片导出为各种常见的矢量(vector)和光栅图(raster):PDF,SVG,JPG,PNG,BMP,GIF等</span><br><span class="line"></span><br><span class="line">使用方法:</span><br><span class="line">1.Pylab模式的IPython(ipython--pylab) --&gt; 将IPython配置为使用你所指定的matplotlib GUI后端(TK,wxPyhton,PyQt,Mac OS X native,GTK)</span><br><span class="line">2.引入语句:</span><br><span class="line">	import matplotlib</span><br><span class="line">	import matplotlib.pyplot as plt</span><br></pre></td></tr></table></figure>

<h3 id="Figure和Subplot-更方便的plt-subplots方法"><a href="#Figure和Subplot-更方便的plt-subplots方法" class="headerlink" title="Figure和Subplot(更方便的plt.subplots方法)"></a>Figure和Subplot(更方便的plt.subplots方法)</h3><h4 id="旧的figure和subplot"><a href="#旧的figure和subplot" class="headerlink" title="旧的figure和subplot"></a>旧的figure和subplot</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from numpy.random import randn</span><br><span class="line">fig&#x3D;plt.figure()</span><br><span class="line">#返回的对象是AxesSubplot对象 --&gt; 直接调用实例方法就可以在其他空着的格子里面画画</span><br><span class="line">ax1&#x3D;fig.add_subplot(2,2,1) # 图像应该是2*2 并且 当前选中的是4个subplot中的第一个(编号从1开始)</span><br><span class="line">ax2&#x3D;fig.add_subplot(2,2,2)</span><br><span class="line">ax3&#x3D;fig.add_subplot(2,2,3)</span><br><span class="line">#绘图命令(在最后一个用过的subplot进行绘制)</span><br><span class="line">plt.plot(randn(50).cumsum(),&#39;k--&#39;)   #k--是一个线型选择(用于告诉matplotlib绘制黑色虚线图)</span><br><span class="line">_&#x3D;ax1.hist(randn(100),bins&#x3D;20,color&#x3D;&#39;k&#39;,alpha&#x3D;0.3)</span><br><span class="line">ax2.scatter(np.arange(30),np.arange(30)+3*randn(30))</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/85.png" alt></p>
<h4 id="新的subplots"><a href="#新的subplots" class="headerlink" title="新的subplots"></a>新的subplots</h4><p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/87.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">#更方便的plt.subplots()方法</span><br><span class="line">fig,axes&#x3D;plt.subplots(2,3)   # --&gt; 一个含有已创建的subplot对象的NumPy数组</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/86.png" alt></p>
<h3 id="调整subplot周围的间距-Figure的subplots-adjust方法"><a href="#调整subplot周围的间距-Figure的subplots-adjust方法" class="headerlink" title="调整subplot周围的间距(Figure的subplots_adjust方法)"></a>调整subplot周围的间距(Figure的subplots_adjust方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">	# wspace和hspace用于控制宽度和高度的百分比(用作subplot之间的间距)</span><br><span class="line">	1.subplots_adjust(left&#x3D;None,bottom&#x3D;None,right&#x3D;None,top&#x3D;None,wspace&#x3D;None,hspace&#x3D;None)</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from numpy.random import randn</span><br><span class="line"># subplots为2行2列 使用相同的X和Y轴刻度</span><br><span class="line">fig,axes&#x3D;plt.subplots(2,2,sharex&#x3D;True,sharey&#x3D;True)</span><br><span class="line">for i in range(2):</span><br><span class="line">    for j in range(2):</span><br><span class="line">        axes[i,j].hist(randn(500),bins&#x3D;50,color&#x3D;&#39;k&#39;,alpha&#x3D;0.5)</span><br><span class="line">#间距收缩为0</span><br><span class="line">plt.subplots_adjust(wspace&#x3D;0,hspace&#x3D;0)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/87.png" alt></p>
<h3 id="颜色-color-、标记-marker-、线型-linestyle"><a href="#颜色-color-、标记-marker-、线型-linestyle" class="headerlink" title="颜色(color)、标记(marker)、线型(linestyle)"></a>颜色(color)、标记(marker)、线型(linestyle)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from numpy.random import randn</span><br><span class="line">#标记类型和线型必须放在颜色后面</span><br><span class="line"></span><br><span class="line">#两种书写方式相同</span><br><span class="line">#ax.plot(x,y,&#39;g--&#39;)   在一个字符串中指定颜色和线型的方式非常方便</span><br><span class="line">#ax.plot(x,y,linestyle&#x3D;&#39;--&#39;,color&#x3D;&#39;g&#39;)</span><br><span class="line"></span><br><span class="line">#两种书写方式相同</span><br><span class="line">plt.plot(randn(30).cumsum(),&#39;ko--&#39;)</span><br><span class="line">#plt.plot(randn(30).cumsum(),color&#x3D;&#39;k&#39;,linestyle&#x3D;&#39;dashed&#39;,marker&#x3D;&#39;o&#39;)  #marker是标记</span><br><span class="line"></span><br><span class="line">#线形图(非实际数据点默认是按线性方式插值的) -- drawstyle选项修改</span><br><span class="line">plt.plot(randn(30),&#39;k--&#39;,label&#x3D;&#39;Default&#39;)</span><br><span class="line">plt.plot(randn(30),&#39;k--&#39;,drawstyle&#x3D;&#39;steps-post&#39;,label&#x3D;&#39;steps-post&#39;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/89.png" alt></p>
<h3 id="刻度-xticks-、标签-xticklabels-、图例-xlim"><a href="#刻度-xticks-、标签-xticklabels-、图例-xlim" class="headerlink" title="刻度(xticks)、标签(xticklabels)、图例(xlim)"></a>刻度(xticks)、标签(xticklabels)、图例(xlim)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">大多数的图表装饰项:	</span><br><span class="line">1.过程型的pyplot接口(交互式使用) -- xlim(图表的范围)&#x2F;xticks(刻度位置)&#x2F;xticklabels(刻度标签)之类的方法</span><br><span class="line">	1.1 调用时不带参数(返回当前的参数值): 例如plt.xlim()返回当前的X轴绘图范围</span><br><span class="line">	1.2 调用时带参数(设置参数值): 例如plt.xlim([0,10])会将X轴的范围设置0-10</span><br><span class="line">2.面向对象的原生matplotlib API</span><br></pre></td></tr></table></figure>

<h4 id="设置标题-set-title-、轴标签-set-xlabel-、刻度-set-xticks-、刻度标签-set-xticklabels"><a href="#设置标题-set-title-、轴标签-set-xlabel-、刻度-set-xticks-、刻度标签-set-xticklabels" class="headerlink" title="设置标题(set_title)、轴标签(set_xlabel)、刻度(set_xticks)、刻度标签(set_xticklabels)"></a>设置标题(set_title)、轴标签(set_xlabel)、刻度(set_xticks)、刻度标签(set_xticklabels)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from numpy.random import randn</span><br><span class="line">fig&#x3D;plt.figure();</span><br><span class="line">ax&#x3D;fig.add_subplot(1,1,1)</span><br><span class="line">ax.plot(randn(1000).cumsum())</span><br><span class="line"></span><br><span class="line">#修改X轴的刻度 --&gt; set_xticks和set_xticklabels</span><br><span class="line">#set_xticks告诉matplotlib要将刻度放在数据范围中的哪些位置(默认情况下这些位置也是刻度标签)</span><br><span class="line">#set_xticklabels将任何其他的值用作标签</span><br><span class="line">ticks&#x3D;ax.set_xticks([0,250,500,750,1000])</span><br><span class="line">labels&#x3D;ax.set_xticklabels([&#39;one&#39;,&#39;two&#39;,&#39;three&#39;,&#39;four&#39;,&#39;five&#39;],rotation&#x3D;30,fontsize&#x3D;&#39;small&#39;)</span><br><span class="line"></span><br><span class="line">#给X轴设置名称 --&gt; set_xlabel</span><br><span class="line">#给设置一个标题 --&gt; set_title</span><br><span class="line">ax.set_title(&#39;My first matplotlib plot&#39;)</span><br><span class="line">ax.set_xlabel(&#39;Stages&#39;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/90.png" alt></p>
<h4 id="添加图例-ax-legend-plt-legend"><a href="#添加图例-ax-legend-plt-legend" class="headerlink" title="添加图例(ax.legend/plt.legend)"></a>添加图例(ax.legend/plt.legend)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">fig&#x3D;plt.figure();ax&#x3D;fig.add_subplot(1,1,1)</span><br><span class="line">#画三条线段</span><br><span class="line">ax.plot(randn(100).cumsum(),&#39;k&#39;,label&#x3D;&#39;one&#39;)</span><br><span class="line">ax.plot(randn(100).cumsum(),&#39;k&#39;,label&#x3D;&#39;two&#39;)</span><br><span class="line">ax.plot(randn(100).cumsum(),&#39;k&#39;,label&#x3D;&#39;three&#39;)</span><br><span class="line">#调用ax.legnd()或plt.legend()来自动创建图例</span><br><span class="line">ax.legend(loc&#x3D;&#39;best&#39;)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/91.png" alt></p>
<h4 id="注解以及在Subplot上绘图-matplotlib-pyplot-matplotlib-patches"><a href="#注解以及在Subplot上绘图-matplotlib-pyplot-matplotlib-patches" class="headerlink" title="注解以及在Subplot上绘图(matplotlib.pyplot/matplotlib.patches)"></a>注解以及在Subplot上绘图(matplotlib.pyplot/matplotlib.patches)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.matplotlib有一些表示常见图形的对象(对象被称为块[patch])</span><br><span class="line">2.matplotlib.pyplot(Rectangle和Circle)</span><br><span class="line">3.matplotlib.patches</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from numpy.random import randn</span><br><span class="line">from datetime import datetime</span><br><span class="line">fig&#x3D;plt.figure()</span><br><span class="line">ax&#x3D;fig.add_subplot(1,1,1)</span><br><span class="line">rect&#x3D;plt.Rectangle((0.2,0.75),0.4,0.15,color&#x3D;&#39;k&#39;,alpha&#x3D;0.3)</span><br><span class="line">circ&#x3D;plt.Circle((0.7,0.2),0.15,color&#x3D;&#39;b&#39;,alpha&#x3D;0.3)</span><br><span class="line">pgon&#x3D;plt.Polygon([[0.15,0.15],[0.35,0.4],[0.2,0.6]],color&#x3D;&#39;g&#39;,alpha&#x3D;0.5)</span><br><span class="line">ax.add_patch(rect)</span><br><span class="line">ax.add_patch(circ)</span><br><span class="line">ax.add_patch(pgon)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/92.png" alt></p>
<h4 id="将图标保存到文件-plt-savefig"><a href="#将图标保存到文件-plt-savefig" class="headerlink" title="将图标保存到文件(plt.savefig)"></a>将图标保存到文件(plt.savefig)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from datetime import datetime</span><br><span class="line">from io import BytesIO</span><br><span class="line">fig&#x3D;plt.figure()</span><br><span class="line">ax&#x3D;fig.add_subplot(1,1,1)</span><br><span class="line">rect&#x3D;plt.Rectangle((0.2,0.75),0.4,0.15,color&#x3D;&#39;k&#39;,alpha&#x3D;0.3)</span><br><span class="line">circ&#x3D;plt.Circle((0.7,0.2),0.15,color&#x3D;&#39;b&#39;,alpha&#x3D;0.3)</span><br><span class="line">pgon&#x3D;plt.Polygon([[0.15,0.15],[0.35,0.4],[0.2,0.6]],color&#x3D;&#39;g&#39;,alpha&#x3D;0.5)</span><br><span class="line">ax.add_patch(rect)</span><br><span class="line">ax.add_patch(circ)</span><br><span class="line">ax.add_patch(pgon)</span><br><span class="line"></span><br><span class="line">#将当前图标保存到文件  &lt;--&gt; Figure对象的实例方法savefig</span><br><span class="line">##普通格式(指定扩展名是什么就会出现什么)</span><br><span class="line">plt.savefig(&#39;figpath.svg&#39;)  #图表保存为SVG文件</span><br><span class="line">##自带各种属性</span><br><span class="line">plt.savefig(&#39;figpath.png&#39;,dpi&#x3D;400,bbox_inches&#x3D;&#39;tight&#39;)</span><br><span class="line">##Web上提供动态生成的图片</span><br><span class="line">buffer&#x3D;BytesIO()</span><br><span class="line">plt.savefig(buffer)</span><br><span class="line">plot_data&#x3D;buffer.getvalue()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/93.png" alt></p>
<h3 id="matplotlib配置"><a href="#matplotlib配置" class="headerlink" title="matplotlib配置"></a>matplotlib配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> 操作matplotlib配置系统的方式</span><br><span class="line">1.Python编程方式(利用rc方法):</span><br><span class="line">	1.1 plt.rc(&#39;figure&#39;,figsize&#x3D;(10,10))  #第一个参数是希望自定义的对象</span><br><span class="line">	1.2 font_options&#x3D;&#123;&#39;family&#39;:&#39;monospace&#39;,&#39;weight&#39;:&#39;bold&#39;,&#39;size&#39;:&#39;small&#39;&#125;</span><br><span class="line">		plt.rc(&#39;font&#39;,**font_options)   #将选项写成一个字典</span><br><span class="line">2.进入matplotlib&#x2F;mpl-data目录 --&gt; 自定义</span><br></pre></td></tr></table></figure>

<h2 id="pandas中的绘图函数"><a href="#pandas中的绘图函数" class="headerlink" title="pandas中的绘图函数"></a>pandas中的绘图函数</h2><h3 id="线型图-默认kind-’line’"><a href="#线型图-默认kind-’line’" class="headerlink" title="线型图(默认kind=’line’)"></a>线型图(默认kind=’line’)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1.Series和DataFrame都有一个用于生成各类图表的plot方法(默认是线形图)</span><br></pre></td></tr></table></figure>

<p><strong>Series的plot参数:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/95.png" alt></p>
<p><strong>DataFrame的plot参数:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/96.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from numpy.random import randn</span><br><span class="line">s&#x3D;Series(np.random.randn(10).cumsum(),index&#x3D;np.arange(0,100,10))  #该Series对象的索引会被传给matplotlib --&gt; 绘制X轴</span><br><span class="line">s.plot()</span><br><span class="line">plt.show()</span><br><span class="line">#DataFrame的plot方法会在一个subplot中为各列绘制一条线,并自动创建图例</span><br><span class="line">df&#x3D;DataFrame(np.random.randn(10,4).cumsum(0),columns&#x3D;[&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;],index&#x3D;np.arange(0,100,10))</span><br><span class="line">df.plot()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/94.png" alt></p>
<h3 id="柱状图-kind-’bar’-‘barh’"><a href="#柱状图-kind-’bar’-‘barh’" class="headerlink" title="柱状图(kind=’bar’/‘barh’)"></a>柱状图(kind=’bar’/‘barh’)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.Series.plot( 设置kind&#x3D;&#39;bar&#39;(垂直柱状图) &#x2F; kind&#x3D;&#39;barh&#39;(水平柱状图) )</span><br><span class="line">2.DataFrame.plot( 设置kind&#x3D;&#39;bar&#39;(垂直柱状图) &#x2F; kind&#x3D;&#39;barh&#39;(水平柱状图) )</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import matplotlib</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">#Series</span><br><span class="line">fig,axes&#x3D;plt.subplots(2,1)</span><br><span class="line">data&#x3D;Series(np.random.rand(16),index&#x3D;list(&#39;abcdefghijklmnop&#39;))</span><br><span class="line">#kind&#x3D;&#39;bar&#39;</span><br><span class="line">data.plot(kind&#x3D;&#39;bar&#39;,ax&#x3D;axes[0],color&#x3D;&#39;k&#39;,alpha&#x3D;0.7)   #alpha是透明度0-1</span><br><span class="line">data.plot(kind&#x3D;&#39;barh&#39;,ax&#x3D;axes[0],color&#x3D;&#39;k&#39;,alpha&#x3D;0.7)  #alpha是透明度0-1</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">#DataFrame(柱状图会将每一行的值分为一组)</span><br><span class="line">df &#x3D; pd.DataFrame(np.random.rand(6, 4),</span><br><span class="line">                          index&#x3D;[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39;, &#39;six&#39;],</span><br><span class="line">                           columns&#x3D;pd.Index([&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;], name&#x3D;&#39;Genus&#39;))</span><br><span class="line">df.plot(kind&#x3D;&#39;bar&#39;)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">#stacked&#x3D;True可以生成堆积柱状图</span><br><span class="line">df.plot(kind&#x3D;&#39;barh&#39;,stacked&#x3D;True,alpha&#x3D;0.5)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/97.png" alt></p>
<h3 id="直方图-Series的hist方法-和密度图-kind-’kde’"><a href="#直方图-Series的hist方法-和密度图-kind-’kde’" class="headerlink" title="直方图(Series的hist方法)和密度图(kind=’kde’)"></a>直方图(Series的hist方法)和密度图(kind=’kde’)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.直方图(histogram):是一种可以对值频率进行离散化显示的柱状图[数据点被拆分到离散的、间隔均匀的面元中，绘制的是各面元中数据点的数量]</span><br><span class="line">2.密度图(KDE,核密度估计图):将该分布近似为一组核(诸如正态分布等)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tips[&#39;tip_pct&#39;]&#x3D;tips[tip] &#x2F; tips[&#39;total_bill&#39;]</span><br><span class="line">tips[&#39;tip_pct&#39;].hist(bins&#x3D;50)</span><br><span class="line">tips[&#39;tip_pct&#39;].plot(kind&#x3D;&#39;kde&#39;)</span><br></pre></td></tr></table></figure>

<h3 id="散布图-plt-scatter方法和pd-scatter-matrix函数"><a href="#散布图-plt-scatter方法和pd-scatter-matrix函数" class="headerlink" title="散布图(plt.scatter方法和pd.scatter_matrix函数)"></a>散布图(plt.scatter方法和pd.scatter_matrix函数)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.散布图(scatter plot):是观察两个一维数据序列之间的关系</span><br><span class="line">2.使用方法 </span><br><span class="line">	2.1 plt.scatter() 观察一组变量的散布图(也被称为散布图矩阵)</span><br><span class="line">	2.2 pd.scatter_matrix()</span><br><span class="line">		pandas提供了一个从DataFrame创建散布图矩阵的scatter_matrix函数(还支持在对角线上放置各变量的直方图&#x2F;密度图)</span><br></pre></td></tr></table></figure>

<h2 id="Python图形化工具生态系统"><a href="#Python图形化工具生态系统" class="headerlink" title="Python图形化工具生态系统"></a>Python图形化工具生态系统</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.Chaco: 静态图+交互式图形</span><br><span class="line">2.mayavi:基于开源C++图形库VTK的3D图形工具包</span><br></pre></td></tr></table></figure>

<h1 id="数据聚合与分组运算"><a href="#数据聚合与分组运算" class="headerlink" title="数据聚合与分组运算"></a>数据聚合与分组运算</h1><h2 id="GroupBy技术"><a href="#GroupBy技术" class="headerlink" title="GroupBy技术"></a>GroupBy技术</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.分组(split) : pandas对象(Series&#x2F;DataFrame) --&gt; 根据一个&#x2F;多个键拆分(split)为多组 [对象特定轴上执行的，DataFrame可以在其行(axis&#x3D;0)其列(axis&#x3D;1)进行分组]</span><br><span class="line">	1.1 分组键:(多种形式+类型不必相同)</span><br><span class="line">		1.1.1 列表&#x2F;数组(长度和待分组的轴一样)	</span><br><span class="line">		1.1.2 表示DataFrame某个列名的值</span><br><span class="line">		1.1.3 字典&#x2F;Series(待分组轴上的值--分组名的对应关系)</span><br><span class="line">		1.1.4 函数(用于处理轴索引&#x2F;索引中的各个标签)</span><br><span class="line"></span><br><span class="line">2.应用(apply) : 将一个函数应用到各个分组 --&gt; 产生一个新值</span><br><span class="line">3.合并(combine) : 所有函数的执行结果合并到最终的结果对象中</span><br></pre></td></tr></table></figure>

<p><strong>流程:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/98.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">#1.分组键为Series</span><br><span class="line">df&#x3D;DataFrame(&#123;&#39;key1&#39; : [&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;a&#39;],</span><br><span class="line">              &#39;key2&#39; : [&#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;],</span><br><span class="line">              &#39;data1&#39; : np.random.randn(5),</span><br><span class="line">              &#39;data2&#39; : np.random.randn(5)&#125;)</span><br><span class="line">#根据一个分组</span><br><span class="line">##根据key1进行分组,并计算data1列的平均值  --&gt; 访问data1，并且根据key1调用groupby</span><br><span class="line">grouped1&#x3D;df[&#39;data1&#39;].groupby(df[&#39;key1&#39;])  #grouped是一个GroupBy对象</span><br><span class="line">##调用GroupBy的mean方法计算分组平均值</span><br><span class="line">print(grouped1.mean())</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">#根据多个分组</span><br><span class="line">grouped2&#x3D;df[&#39;data1&#39;].groupby([df[&#39;key1&#39;],df[&#39;key2&#39;]])</span><br><span class="line">##调用GroupBy的mean方法计算分组平均值</span><br><span class="line">print(grouped2.mean())</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">#2.分组键为数组(长度适当)</span><br><span class="line">states&#x3D;np.array([&#39;Ohio&#39;,&#39;California&#39;,&#39;California&#39;,&#39;Ohio&#39;,&#39;Ohio&#39;])</span><br><span class="line">years&#x3D;np.array([2005,2005,2006,2005,2006])</span><br><span class="line">grouped3&#x3D;df[&#39;data1&#39;].groupby([states,years])</span><br><span class="line">print(grouped3.mean())</span><br><span class="line">print()</span><br><span class="line"></span><br><span class="line">#3.分组键为列名(字符串&#x2F;数字&#x2F;其他Python对象)</span><br><span class="line">print(df.groupby(&#39;key1&#39;).mean())</span><br><span class="line">print(df.groupby([&#39;key1&#39;,&#39;key2&#39;]).mean())</span><br><span class="line">print()</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/99.png" alt></p>
<h3 id="分组迭代-groupby方法"><a href="#分组迭代-groupby方法" class="headerlink" title="分组迭代(groupby方法)"></a>分组迭代(groupby方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">	1.GroupBy对象支持迭代 --&gt; 一组二元元组(分组名+数据块)</span><br><span class="line"></span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line">#      data1     data2 key1 key2</span><br><span class="line">#0  0.794423  0.872517    a  one</span><br><span class="line">#1  0.228070  0.846891    a  two</span><br><span class="line">#2  1.002588  0.632977    b  one</span><br><span class="line">#3 -1.664231  0.320534    b  two</span><br><span class="line">#4  1.470316 -1.338423    a  one</span><br><span class="line">df&#x3D;DataFrame(&#123;&#39;key1&#39; : [&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;a&#39;],</span><br><span class="line">              &#39;key2&#39; : [&#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;],</span><br><span class="line">              &#39;data1&#39; : np.random.randn(5),</span><br><span class="line">              &#39;data2&#39; : np.random.randn(5)</span><br><span class="line">             &#125;)</span><br><span class="line"></span><br><span class="line">for name,group in df.groupby(&#39;key1&#39;):  #根据key1进行分组输出name是a的和group是b的</span><br><span class="line">    print(name)</span><br><span class="line">    print(group)</span><br><span class="line"></span><br><span class="line">print(&quot;--------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">for (k1,k2),group in df.groupby([&#39;key1&#39;,&#39;key2&#39;]):  # 多重键(元组的第一个元素将会是由键值组成的元组) # a与one a与two b与one b与two</span><br><span class="line">    print(k1,k2)</span><br><span class="line">    print(group)</span><br><span class="line"></span><br><span class="line">print(&quot;--------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">#将这些数据片段做成一个字典</span><br><span class="line">pieces&#x3D;dict(list(df.groupby(&#39;key1&#39;)))</span><br><span class="line">print(pieces[&#39;b&#39;])</span><br><span class="line"></span><br><span class="line">print(&quot;--------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">#groupby默认是axis&#x3D;0按照行分组</span><br><span class="line">grouped1&#x3D;df.groupby(df.dtypes,axis&#x3D;1)</span><br><span class="line">pieces2&#x3D;dict(list(grouped1))</span><br><span class="line">print(pieces2)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/100.png" alt></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/101.png" alt></p>
<h3 id="选取一个-一组列-groupby-‘x1’-’x2’"><a href="#选取一个-一组列-groupby-‘x1’-’x2’" class="headerlink" title="选取一个/一组列(groupby([‘x1’,’x2’]))"></a>选取一个/一组列(groupby([‘x1’,’x2’]))</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#两种转换</span><br><span class="line">df.groupby(&#39;key1&#39;)[&#39;data1&#39;]  &lt;--&gt;  df[&#39;data1&#39;].groupby(df[&#39;key1&#39;])</span><br><span class="line"></span><br><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line">#对于由DataFrame产生的GroupBy对象 --&gt; 用一个&#x2F;一组列名对其进行索引(选取部分列进行聚合的目的)</span><br><span class="line">#      data1     data2 key1 key2</span><br><span class="line">#0  0.794423  0.872517    a  one</span><br><span class="line">#1  0.228070  0.846891    a  two</span><br><span class="line">#2  1.002588  0.632977    b  one</span><br><span class="line">#3 -1.664231  0.320534    b  two</span><br><span class="line">#4  1.470316 -1.338423    a  one</span><br><span class="line">df&#x3D;DataFrame(&#123;&#39;key1&#39; : [&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;a&#39;],</span><br><span class="line">              &#39;key2&#39; : [&#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;],</span><br><span class="line">              &#39;data1&#39; : np.random.randn(5),</span><br><span class="line">              &#39;data2&#39; : np.random.randn(5)</span><br><span class="line">             &#125;)</span><br><span class="line">res&#x3D;df.groupby([&#39;key1&#39;,&#39;key2&#39;])[[&#39;data2&#39;]].mean()  #df[&#39;data2&#39;].groupby(df[&#39;key1&#39;,&#39;key2&#39;])</span><br><span class="line">print(res)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/102.png" alt></p>
<h3 id="通过字典-Series进行分组-groupby-字典名"><a href="#通过字典-Series进行分组-groupby-字典名" class="headerlink" title="通过字典/Series进行分组(groupby(字典名))"></a>通过字典/Series进行分组(groupby(字典名))</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">#1.DataFrame</span><br><span class="line">people &#x3D; pd.DataFrame(np.random.randn(5, 5),</span><br><span class="line">                     columns&#x3D;[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;],</span><br><span class="line">                     index&#x3D;[&#39;Joe&#39;, &#39;Steve&#39;, &#39;Wes&#39;, &#39;Jim&#39;, &#39;Travis&#39;])</span><br><span class="line">#添加几个NaN值</span><br><span class="line">people.ix[2:3,[&#39;b&#39;,&#39;c&#39;]]&#x3D;np.nan # b和c两列的第三行Wes</span><br><span class="line">#假设已知列的分组关系(根据分组计算列的总计)</span><br><span class="line">mapping&#x3D;&#123;&#39;a&#39;:&#39;red&#39;,&#39;b&#39;:&#39;red&#39;,&#39;c&#39;:&#39;blue&#39;,&#39;d&#39;:&#39;blue&#39;,&#39;e&#39;:&#39;red&#39;,&#39;f&#39;:&#39;orange&#39;&#125;</span><br><span class="line">#只需将这个字典传给groupby</span><br><span class="line">by_column&#x3D;people.groupby(mapping,axis&#x3D;1)  #传入分组字典和按照列分组</span><br><span class="line">print(by_column.sum())</span><br><span class="line"></span><br><span class="line">#2.Series(可以看做一个固定大小的映射)</span><br><span class="line">map_series&#x3D;Series(mapping)</span><br><span class="line">by_column2&#x3D;people.groupby(map_series,axis&#x3D;1)</span><br><span class="line">print(by_column2.count())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/103.png" alt></p>
<h3 id="通过函数进行分组-groupby-函数"><a href="#通过函数进行分组-groupby-函数" class="headerlink" title="通过函数进行分组(groupby(函数))"></a>通过函数进行分组(groupby(函数))</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">people &#x3D; pd.DataFrame(np.random.randn(5, 5),</span><br><span class="line">                     columns&#x3D;[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;],</span><br><span class="line">                     index&#x3D;[&#39;Joe&#39;, &#39;Steve&#39;, &#39;Wes&#39;, &#39;Jim&#39;, &#39;Travis&#39;])</span><br><span class="line">#添加几个NaN值</span><br><span class="line">people.ix[2:3,[&#39;b&#39;,&#39;c&#39;]]&#x3D;np.nan # b和c两列的第三行Wes</span><br><span class="line">#传入len函数</span><br><span class="line">print(people.groupby(len).sum())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/104.png" alt></p>
<h3 id="通过索引级别分组-level关键字"><a href="#通过索引级别分组-level关键字" class="headerlink" title="通过索引级别分组(level关键字)"></a>通过索引级别分组(level关键字)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">Icolumns &#x3D; pd.MultiIndex.from_arrays([[&#39;US&#39;, &#39;US&#39;, &#39;US&#39;, &#39;JP&#39;, &#39;JP&#39;],</span><br><span class="line">                                     [1, 3, 5, 1, 3]],</span><br><span class="line">                                      names&#x3D;[&#39;cty&#39;, &#39;tenor&#39;])</span><br><span class="line">hier_df&#x3D;DataFrame(np.random.randn(4,5))</span><br><span class="line">print(hier_df)</span><br><span class="line">#通过level关键字传入级别编号&#x2F;名称</span><br><span class="line">res&#x3D;hier_df.groupby(level&#x3D;&#39;cty&#39;,axis&#x3D;1)</span><br><span class="line">print(res.count())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/105.png" alt></p>
<h2 id="数据聚合"><a href="#数据聚合" class="headerlink" title="数据聚合"></a>数据聚合</h2><p><strong>groupby聚合函数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/106.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">#quantile可以计算Series&#x2F;DataFrame列的样本分位数</span><br><span class="line">df&#x3D;DataFrame(&#123;&#39;key1&#39; : [&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;a&#39;],</span><br><span class="line">              &#39;key2&#39; : [&#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;],</span><br><span class="line">              &#39;data1&#39; : np.random.randn(5),</span><br><span class="line">              &#39;data2&#39; : np.random.randn(5)</span><br><span class="line">             &#125;)</span><br><span class="line">#根据key1分组</span><br><span class="line">grouped&#x3D;df.groupby(&#39;key1&#39;)</span><br><span class="line">print(grouped[&#39;data1&#39;].quantile(0.9))  #quantile是一个Series方法</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/107.png" alt></p>
<h3 id="无索引的形式返回聚合数据-as-index-False禁用"><a href="#无索引的形式返回聚合数据-as-index-False禁用" class="headerlink" title="无索引的形式返回聚合数据(as_index=False禁用)"></a>无索引的形式返回聚合数据(as_index=False禁用)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">#quantile可以计算Series&#x2F;DataFrame列的样本分位数</span><br><span class="line">df&#x3D;DataFrame(&#123;&#39;key1&#39; : [&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;a&#39;],</span><br><span class="line">              &#39;key2&#39; : [&#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;],</span><br><span class="line">              &#39;data1&#39; : np.random.randn(5),</span><br><span class="line">              &#39;data2&#39; : np.random.randn(5)</span><br><span class="line">             &#125;)</span><br><span class="line">#根据key1和Key2分组  但是以&quot;无索引化&quot;</span><br><span class="line">print(df.groupby([&#39;key1&#39;,&#39;key2&#39;],as_index&#x3D;False).mean())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/108.png" alt></p>
<h2 id="分组级运算和转换"><a href="#分组级运算和转换" class="headerlink" title="分组级运算和转换"></a>分组级运算和转换</h2><h3 id="transform和apply"><a href="#transform和apply" class="headerlink" title="transform和apply"></a>transform和apply</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">people &#x3D; pd.DataFrame(np.random.randn(5, 5),</span><br><span class="line">                     columns&#x3D;[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;],</span><br><span class="line">                     index&#x3D;[&#39;Joe&#39;, &#39;Steve&#39;, &#39;Wes&#39;, &#39;Jim&#39;, &#39;Travis&#39;])</span><br><span class="line">key&#x3D;[&#39;one&#39;,&#39;two&#39;,&#39;one&#39;,&#39;two&#39;,&#39;one&#39;]</span><br><span class="line"></span><br><span class="line">#1.根据transform() --&gt; 1.产生一个可以广播的标量值(np.mean) 2.产生一个相同大小的结果数组</span><br><span class="line">print(people.groupby(key).mean())  #列是a b c d e 行是one two</span><br><span class="line">print(&quot;---------------------------------------&quot;)</span><br><span class="line">print(people.groupby(key).transform(np.mean))  #列是a b c d e 行是Joe</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/109.png" alt></p>
<h3 id="禁止分组键-group-keys-False"><a href="#禁止分组键-group-keys-False" class="headerlink" title="禁止分组键(group_keys=False)"></a>禁止分组键(group_keys=False)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.groupby(&#39;key1&#39;,group_keys&#x3D;False).apply(top)</span><br></pre></td></tr></table></figure>

<h3 id="分位数-quantile-和桶-bucket-分析"><a href="#分位数-quantile-和桶-bucket-分析" class="headerlink" title="分位数(quantile)和桶(bucket)分析"></a>分位数(quantile)和桶(bucket)分析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.pandas有一些能根据指定面元&#x2F;样本分位数--&gt;数据拆分为多块的工具(cut和qcut)</span><br><span class="line">2.groupby</span><br><span class="line">1和2结合起来 --&gt; 桶(bucket)和分位数(quantile)</span><br></pre></td></tr></table></figure>

<p><strong>两种不同的分别方法(cut和qcut):</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line">frame&#x3D;DataFrame(&#123;</span><br><span class="line">                &#39;data1&#39;:np.random.randn(1000),</span><br><span class="line">                &#39;data2&#39;:np.random.randn(1000)</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">#1.长度相等的桶 -- 区间大小相等(data1相同)  -- cut()</span><br><span class="line">##按照四位数进行分隔</span><br><span class="line">factor&#x3D;pd.cut(frame.data1,4)   #cut返回的Factor对象可以直接用于groupby</span><br><span class="line">##统计计算</span><br><span class="line">def get_stats(group):    # 定义函数get_stats(4个方法)</span><br><span class="line">    return &#123;&#39;min&#39;:group.min(),</span><br><span class="line">            &#39;max&#39;:group.max(),</span><br><span class="line">            &#39;count&#39;:group.count(),</span><br><span class="line">            &#39;mean&#39;:group.mean()</span><br><span class="line">            &#125;</span><br><span class="line">grouped1&#x3D;frame.data2.groupby(factor)</span><br><span class="line">print(grouped1.apply(get_stats).unstack())  # 重塑层次化索引 --&gt; unstack()是行转成列(默认操作是最内层)</span><br><span class="line"></span><br><span class="line">#2.大小相等的桶 -- 数据点数量相等(count相同)  -- qcut()</span><br><span class="line">##按照10位数分隔 + labels&#x3D;False</span><br><span class="line">grouping&#x3D;pd.qcut(frame.data1,10,labels&#x3D;False)</span><br><span class="line">##统计计算</span><br><span class="line">grouped2&#x3D;frame.data2.groupby(grouping)</span><br><span class="line">print(grouped2.apply(get_stats).unstack())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/110.png" alt></p>
<h3 id="示例-用特定于分组的值填充缺失值-fillna方法"><a href="#示例-用特定于分组的值填充缺失值-fillna方法" class="headerlink" title="(示例)用特定于分组的值填充缺失值(fillna方法)"></a>(示例)用特定于分组的值填充缺失值(fillna方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">#对于缺失数据的清理工作 --&gt; 1.dropna()将其滤除  2.fillna()将其填充</span><br><span class="line"></span><br><span class="line">##获取一个Series对象</span><br><span class="line">s&#x3D;Series(np.random.randn(6))</span><br><span class="line">s[::2]&#x3D;np.nan  #索引为0 2 4三行设置NaN值</span><br><span class="line">print(s)</span><br><span class="line">print(&quot;---------------------------------&quot;)</span><br><span class="line">#使用fillna()填充所有的NaN值</span><br><span class="line">print(s.fillna(s.mean()))  #mean是算数平均值</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/111.png" alt></p>
<h3 id="示例-随机采样和排列-random-permutation方法"><a href="#示例-随机采样和排列-random-permutation方法" class="headerlink" title="(示例)随机采样和排列(random.permutation方法)"></a>(示例)随机采样和排列(random.permutation方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">#蒙特卡罗模拟(大数据集中随机抽取样本)  --&gt; np.random.permutation(N)的前K个元素  [N为完整数据的大小,k为期待的样本大小]</span><br><span class="line">#构造一副英语型扑克牌</span><br><span class="line">#红桃(Hearts) 黑桃(Spades) 梅花(Clubs) 方片(Diamonds)</span><br><span class="line">suits&#x3D;[&#39;H&#39;,&#39;S&#39;,&#39;C&#39;,&#39;D&#39;]</span><br><span class="line">card_val&#x3D;(range(1,11)+[10]*3)*4</span><br><span class="line">base_names&#x3D;[&#39;A&#39;]+range(2,11)+[&#39;J&#39;,&#39;K&#39;,&#39;Q&#39;]</span><br><span class="line">cards&#x3D;[]</span><br><span class="line">for suit in [&#39;H&#39;,&#39;S&#39;,&#39;C&#39;,&#39;D&#39;]:</span><br><span class="line">    cards.extend(str(num)+suit for num in base_names)</span><br><span class="line">#拥有一个长度为52的Series(索引为牌名)   -- 值则是21点&#x2F;其他游戏中用于计分的点数(A的点数为1)</span><br><span class="line">deck&#x3D;Series(card_val,index&#x3D;cards)</span><br><span class="line">print(np.random.permutation(len(deck)))</span><br></pre></td></tr></table></figure>

<h2 id="透视表-pivot-table-和交叉表-crosstab"><a href="#透视表-pivot-table-和交叉表-crosstab" class="headerlink" title="透视表(pivot table)和交叉表(crosstab)"></a>透视表(pivot table)和交叉表(crosstab)</h2><p><strong>pivot_table参数:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/112.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> 透视表:</span><br><span class="line">1.透视表(pivot table):是各种电子表格程序和其他数据分析软件中一种常见的数据汇总工具</span><br><span class="line">2.透视表通过一个&#x2F;多个键对数据进行聚合，并根据行和列上的分组键将数据分配到各个矩阵区域</span><br><span class="line">3.DataFrame有一个pivot_table方法 【还可以添加分项小计margins】</span><br><span class="line">4.pandas.pivot_table函数</span><br><span class="line"> 交叉表:</span><br><span class="line">1.交叉表:是一种用于计算分组频率的特殊透视表</span><br><span class="line">2.DataFrame有一个pivot_table方法	</span><br><span class="line">3.pandas.crosstab函数(数组&#x2F;Series&#x2F;数组列表,数组&#x2F;Series&#x2F;数组列表,...)</span><br></pre></td></tr></table></figure>

<h1 id="时间序列-time-series"><a href="#时间序列-time-series" class="headerlink" title="时间序列(time series)"></a>时间序列(time series)</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> 具体应用场景:</span><br><span class="line">1.时间戳(timestamp):特定的时刻</span><br><span class="line">2.固定时期(period):例如2022年9月	</span><br><span class="line">3.时间间隔(interval):由起点和结束时间戳表示</span><br><span class="line">4.实验&#x2F;过程时间:每个时间点都是相对于特定起始时间的一个度量</span><br></pre></td></tr></table></figure>

<h2 id="日期和时间数据类型及工具-datetime模块"><a href="#日期和时间数据类型及工具-datetime模块" class="headerlink" title="日期和时间数据类型及工具(datetime模块)"></a>日期和时间数据类型及工具(datetime模块)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.python标准库:日期(data)、时间(time)数据的数据类型、日历方面的功能</span><br><span class="line">2. datetime模块 time模块 calendar模块</span><br></pre></td></tr></table></figure>

<p><strong>datetime模块中的数据类型</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/114.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">#获取当前时间now</span><br><span class="line">now&#x3D;datetime.datetime.now()  # 2022-09-16 14:33:42.323779</span><br><span class="line">print(now)</span><br><span class="line">print(now.year,now.month,now.day)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/113.png" alt></p>
<h2 id="字符串和datetime之间的转换-strptime-strftime方法"><a href="#字符串和datetime之间的转换-strptime-strftime方法" class="headerlink" title="字符串和datetime之间的转换(strptime/strftime方法)"></a>字符串和datetime之间的转换(strptime/strftime方法)</h2><p><strong>datetime格式定义:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/116.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">from dateutil.parser import parse</span><br><span class="line">import pandas as pd</span><br><span class="line">#(--&gt;传入一个格式化字符串)利用 str&#x2F;strftime方法</span><br><span class="line">#datetime对象和pandas的Timestamp对象可以被格式化字符串</span><br><span class="line"></span><br><span class="line">##三种方式:</span><br><span class="line">#1.利用datetime.strftime方法(将字符串转为日期)</span><br><span class="line">print(datetime.datetime(2011,1,3).strftime(&#39;%Y-%m-%d&#39;))  #%Y是四位数的年 m是2位数的月(01-12) d是2位数的日(01-31)</span><br><span class="line">#2.利用datetime.strptime方法(通过已知格式进行日期解析的最佳方式)</span><br><span class="line">value&#x3D;&#39;2011-01-03&#39;</span><br><span class="line">print(datetime.datetime.strptime(value,&#39;%Y-%m-%d&#39;))</span><br><span class="line">#3.通过dateutil第三方包的parser.parse方法</span><br><span class="line">print(parse(&#39;2011-01-03&#39;))</span><br><span class="line">print(parse(&#39;6&#x2F;12&#x2F;2011&#39;,dayfirst&#x3D;True)) #通常日出现在月前面 (年 日 月) --&gt; 设置dayfirst&#x3D;True</span><br><span class="line"></span><br><span class="line">datestrs&#x3D;[&#39;7&#x2F;6&#x2F;2011&#39;,&#39;8&#x2F;6&#x2F;2011&#39;]</span><br><span class="line">##to_datetime方法 (解析多种不同的日期表示形式)</span><br><span class="line">print(pd.to_datetime(datestrs))  #to_datetime方法</span><br><span class="line">#处理缺失值(None&#x2F;空字符串)</span><br><span class="line">print(pd.to_datetime(datestrs+[None]))   #NaT(Not a Time)是pandas中时间戳数据的Na值</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/115.png" alt></p>
<h2 id="时间序列基础"><a href="#时间序列基础" class="headerlink" title="时间序列基础"></a>时间序列基础</h2><p><strong>索引更换为datetime数据</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">dates&#x3D;[datetime.datetime(2011,1,2),datetime.datetime(2011,1,5),datetime.datetime(2011,1,7),datetime.datetime(2011,1,8),datetime.datetime(2011,1,10),datetime.datetime(2011,1,12)]</span><br><span class="line">#根据dates给出的时间作为索引</span><br><span class="line">ts&#x3D;Series(np.random.randn(6),index&#x3D;dates)  #datetime对象实际上是放在一个DatatimeIndex中</span><br><span class="line">print(ts)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/117.png" alt></p>
<h3 id="索引、选取、子集构造-和Series一致"><a href="#索引、选取、子集构造-和Series一致" class="headerlink" title="索引、选取、子集构造(和Series一致)"></a>索引、选取、子集构造(和Series一致)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">dates&#x3D;[datetime.datetime(2011,1,2),datetime.datetime(2011,1,5),datetime.datetime(2011,1,7),datetime.datetime(2011,1,8),datetime.datetime(2011,1,10),datetime.datetime(2011,1,12)]</span><br><span class="line">#根据dates给出的时间作为索引</span><br><span class="line">ts&#x3D;Series(np.random.randn(6),index&#x3D;dates)  #datetime对象实际上是放在一个DatatimeIndex中</span><br><span class="line">print(ts)</span><br><span class="line"></span><br><span class="line">#TimeSeries是Series的一个子类(索引和数据选取方面行为一样)</span><br><span class="line">#获取ts的第三行 (2011-01-07)</span><br><span class="line">stamp&#x3D;ts.index[2]</span><br><span class="line">print(f&#39;stamp抓取的是:&#123;stamp&#125;&#39;)</span><br><span class="line">print(f&#39;stamp对应行的数据是:&#123;ts[stamp]&#125;&#39;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/118.png" alt></p>
<h2 id="日期的范围-频率-移动"><a href="#日期的范围-频率-移动" class="headerlink" title="日期的范围/频率/移动"></a>日期的范围/频率/移动</h2><h3 id="生成日期范围-pandas-data-range"><a href="#生成日期范围-pandas-data-range" class="headerlink" title="生成日期范围(pandas.data_range)"></a>生成日期范围(pandas.data_range)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">#(默认)date_range会产生按天计算的时间点</span><br><span class="line">index1&#x3D;pd.date_range(&#39;4&#x2F;1&#x2F;2012&#39;,&#39;5&#x2F;1&#x2F;2012&#39;) # 从2012年4月1日到2012年6月1日  dtype&#x3D;&#39;datetime64[ns]&#39;, freq&#x3D;&#39;D&#39;</span><br><span class="line">print(index1)</span><br><span class="line">print(&quot;---------------------------------------------------------------------------&quot;)</span><br><span class="line">#如果只传入起始&#x2F;结束日期(start&#x2F;end) --&gt; 还得传入一个表示一段时间的数字(periods&#x3D;&#39;x&#39;)</span><br><span class="line">index2&#x3D;pd.date_range(start&#x3D;&#39;4&#x2F;1&#x2F;2012&#39;,periods&#x3D;10)</span><br><span class="line">print(index2)</span><br><span class="line">print(&quot;---------------------------------------------------------------------------&quot;)</span><br><span class="line">index3&#x3D;pd.date_range(end&#x3D;&#39;6&#x2F;1&#x2F;2012&#39;,periods&#x3D;10)</span><br><span class="line">print(index3)</span><br><span class="line">print(&quot;---------------------------------------------------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">#只显示日期索引(只有每个月最后一天) --&gt; 更改BM频率freq&#x3D;&#39;BM&#39;</span><br><span class="line">index4&#x3D;pd.date_range(&#39;1&#x2F;1&#x2F;2000&#39;,&#39;12&#x2F;1&#x2F;2000&#39;,freq&#x3D;&#39;BM&#39;)</span><br><span class="line">print(index4)</span><br><span class="line">print(&quot;---------------------------------------------------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">#产生一组被规范化到午夜的时间戳() --&gt; 更改normalize&#x3D;True</span><br><span class="line">index5&#x3D;pd.date_range(&#39;5&#x2F;2&#x2F;2012&#39;,periods&#x3D;10,normalize&#x3D;True)</span><br><span class="line">print(index5)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/119.png" alt></p>
<h3 id="频率和日期偏移量-freq属性"><a href="#频率和日期偏移量-freq属性" class="headerlink" title="频率和日期偏移量(freq属性)"></a>频率和日期偏移量(freq属性)</h3><p><strong>时间序列的基础频率</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/120.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from pandas.tseries.offsets import Hour,Minute</span><br><span class="line">#pandas中的频率&#x3D;基础频率(字符串别名表示)+乘数</span><br><span class="line">#对于每个基础频率，都有一个被称为日期偏移量(data offset)的对象与之对应</span><br><span class="line"></span><br><span class="line">##1.比较笨重的方法</span><br><span class="line">#按小时计算的频率(Hour类表示)</span><br><span class="line">hour&#x3D;Hour()</span><br><span class="line">print(hour)  #1 Hour</span><br><span class="line">#定制偏移量的倍数(传入一个整数)</span><br><span class="line">d_hour&#x3D;Hour(4)</span><br><span class="line">print(d_hour)</span><br><span class="line"></span><br><span class="line">##2.比较方便的方法</span><br><span class="line">#创建字符串别名</span><br><span class="line">index1&#x3D;pd.date_range(&#39;1&#x2F;1&#x2F;2000&#39;,&#39;2&#x2F;1&#x2F;2000&#39;,freq&#x3D;&#39;4h&#39;)  #按照4个小时进行变换</span><br><span class="line">print(index1)</span><br><span class="line"></span><br><span class="line">#大部分偏移量对象通过加法进行连接</span><br><span class="line">print(f&#39;加起来一共是:&#123;Hour(2)+Hour(4)+Minute(30)&#125;&#39;)</span><br><span class="line"></span><br><span class="line">#freq&#x3D;&#39;WOM-3FRI&#39; --&gt;  &quot;每月第三个星期五&quot;之类的日期</span><br><span class="line">index2&#x3D;pd.date_range(&#39;1&#x2F;1&#x2F;2000&#39;,&#39;2&#x2F;1&#x2F;2000&#39;,freq&#x3D;&#39;WOM-3FRI&#39;)</span><br><span class="line">print(list(index2))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/121.png" alt></p>
<h3 id="移动-超前和滞后-数据-shift方法"><a href="#移动-超前和滞后-数据-shift方法" class="headerlink" title="移动(超前和滞后)数据(shift方法)"></a>移动(超前和滞后)数据(shift方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from pandas.tseries.offsets import Hour,Minute</span><br><span class="line"></span><br><span class="line">#Series和DataFrame都有一个shift方法(单纯的前移&#x2F;后移操作，保持索引不变)</span><br><span class="line">#2000-01-31   -0.201348</span><br><span class="line">#2000-02-29   -0.126236</span><br><span class="line">#2000-03-31   -0.457643</span><br><span class="line">#2000-04-30    1.012834</span><br><span class="line">ts&#x3D;Series(np.random.randn(4),</span><br><span class="line">          index&#x3D;pd.date_range(&#39;1&#x2F;1&#x2F;2000&#39;,periods&#x3D;4,freq&#x3D;&#39;M&#39;)  # 从2000.01.01开始记录四个日期 然后频率为M(每月最后一个日历日)</span><br><span class="line">          )</span><br><span class="line">print(ts)</span><br><span class="line">print(&quot;---------------------------------------------------&quot;)</span><br><span class="line">print(ts.shift(2))  # 日期不变 数据往后压(前面补NaN)</span><br><span class="line">print(&quot;---------------------------------------------------&quot;)</span><br><span class="line">print(ts.shift(-2)) # 日期不变 数据往前提(后面补NaN)</span><br><span class="line">print(&quot;---------------------------------------------------&quot;)</span><br><span class="line">print(ts.shift(3,freq&#x3D;&#39;D&#39;)) # 日期根据频率D变化</span><br><span class="line">print(&quot;---------------------------------------------------&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/122.png" alt></p>
<h4 id="通过偏移量对日期进行位移-rollback和rollforward方法"><a href="#通过偏移量对日期进行位移-rollback和rollforward方法" class="headerlink" title="通过偏移量对日期进行位移(rollback和rollforward方法)"></a>通过偏移量对日期进行位移(rollback和rollforward方法)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from pandas.tseries.offsets import Hour,Minute</span><br><span class="line">from pandas.tseries.offsets import Day,MonthEnd</span><br><span class="line"></span><br><span class="line">#pandas的日期偏移量可以作用在datatime&#x2F;Timestamp对象上</span><br><span class="line">now&#x3D;datetime.datetime(2011,11,17)  # 当前时间设定为2011年11月17日</span><br><span class="line">print(now+3*Day())  # 加上三天之后成为2011年11月20日</span><br><span class="line"></span><br><span class="line">#添加锚点偏移量(频率要考虑月末是不是周末，并不是均匀分隔的)  --&gt; 第一次增量会将原日期向前滚动到符合频率规则的下一个日期</span><br><span class="line">print(now+MonthEnd()) # 2011年11月20日+月末&#x3D;2011年11月30日</span><br><span class="line">print(now+MonthEnd(2)) # 2011年11月20日+月末(往后推2个月)&#x3D;2011年12月31日</span><br><span class="line">#通过rollforward和rollback方法(显式将日期向前&#x2F;向后滚动)</span><br><span class="line">offset&#x3D;MonthEnd()</span><br><span class="line">print(f&#39;现在是:&#123;now&#125;&#39;)  # 2011年11月17日</span><br><span class="line">print(offset.rollforward(now)) #往前推 日子快了 就是11.30日</span><br><span class="line">print(offset.rollback(now)) #往后推 日子慢了 就是10.31日</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/123.png" alt></p>
<h2 id="时区处理-第三方库pytz"><a href="#时区处理-第三方库pytz" class="headerlink" title="时区处理(第三方库pytz)"></a>时区处理(第三方库pytz)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.在Python中时区信息来自第三方库pytz --&gt; 使得Python可以使用Olson数据库(汇编了世界时区信息)</span><br><span class="line">2. import pytz</span><br></pre></td></tr></table></figure>

<p><strong>pandas中的方法可以接受时区名(建议)/对象</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import pytz</span><br><span class="line">print(pytz.common_timezones[-5:])  #最后五个时区表</span><br><span class="line">#获取时区对象 --&gt; pytz.timezone</span><br><span class="line">tz&#x3D;pytz.timezone(&#39;US&#x2F;Eastern&#39;)</span><br><span class="line">print(tz)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/124.png" alt></p>
<h2 id="本地化-tz-localize-和转换-tz-convert"><a href="#本地化-tz-localize-和转换-tz-convert" class="headerlink" title="本地化(tz_localize)和转换(tz_convert)"></a>本地化(tz_localize)和转换(tz_convert)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">import pytz</span><br><span class="line"></span><br><span class="line">#(默认)pandas中的时间序列是单纯的(naive)时区</span><br><span class="line">rng&#x3D;pd.date_range(&#39;3&#x2F;9&#x2F;2012 9:30&#39;,periods&#x3D;6,freq&#x3D;&#39;D&#39;)  # 从2012年9月3日9点30分开始 顺序出来6个日期</span><br><span class="line">#随机出6个数字 索引按照rng的日期</span><br><span class="line">ts&#x3D;Series(np.random.randn(len(rng)),index&#x3D;rng)</span><br><span class="line">print(ts)</span><br><span class="line">print(ts.index.tz) #None</span><br><span class="line"></span><br><span class="line">#单纯到本地化的转换 --&gt; tz_localize方法</span><br><span class="line">ts_utc&#x3D;ts.tz_localize(&#39;UTC&#39;)</span><br><span class="line">print(ts_utc)</span><br><span class="line"></span><br><span class="line">#转换到其他时区 --&gt; tz_convert方法</span><br><span class="line">ts_con&#x3D;ts_utc.tz_convert(&#39;US&#x2F;Eastern&#39;)</span><br><span class="line">print(ts_con)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/125.png" alt></p>
<h2 id="时期-算数运算-pd-Period类"><a href="#时期-算数运算-pd-Period类" class="headerlink" title="时期+算数运算(pd.Period类)"></a>时期+算数运算(pd.Period类)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.时期:时间区间(比如:数日，数月，数季，数年等)</span><br><span class="line">2.Period类所表示的就是这种数据类型(构造函数需要用到一个字符串&#x2F;整数)</span><br></pre></td></tr></table></figure>

<p><strong>Period类</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">import pytz</span><br><span class="line"></span><br><span class="line">#这个Period对象表示的是从2007年1月1日到2007年12月31日之间的整段时间</span><br><span class="line">p&#x3D;pd.Period(2007,freq&#x3D;&#39;A-DEC&#39;)</span><br><span class="line">#这个Period对象表示的是从2022年1月1日到2022年12月31日之间的整段时间</span><br><span class="line">p2&#x3D;pd.Period(2022,freq&#x3D;&#39;A-DEC&#39;)</span><br><span class="line">print(f&#39;当前年份:&#123;p&#125;&#39;)</span><br><span class="line">#只需要对Period对象加&#x2F;减一个整数就可以达到根据其频率进行位移</span><br><span class="line">print(f&#39;当前年份基础上加五年:&#123;p+5&#125;&#39;)</span><br><span class="line">print(f&#39;当前年份基础上减两年:&#123;p-2&#125;&#39;)</span><br><span class="line">print(f&#39;两个相同频率的Period对象之间的差就是单位数量的差:&#123;p2-p&#125;&#39;)  #2022-2007&#x3D;15</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/126.png" alt></p>
<h3 id="时期的频率转换-asfreq方法"><a href="#时期的频率转换-asfreq方法" class="headerlink" title="时期的频率转换(asfreq方法)"></a>时期的频率转换(asfreq方法)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import pandas as pd</span><br><span class="line"></span><br><span class="line">#这个Period对象表示的是从2007年1月1日到2007年12月31日之间的整段时间</span><br><span class="line">p&#x3D;pd.Period(2007,freq&#x3D;&#39;A-DEC&#39;)</span><br><span class="line"></span><br><span class="line">#任务:</span><br><span class="line">#年度时期 --&gt; 当年年初&#x2F;年末的一个月度时期</span><br><span class="line">print(p.asfreq(&#39;M&#39;,how&#x3D;&#39;start&#39;))</span><br><span class="line">print(p.asfreq(&#39;M&#39;,how&#x3D;&#39;end&#39;))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/127.png" alt></p>
<h3 id="通过数组创建PeriodIndex"><a href="#通过数组创建PeriodIndex" class="headerlink" title="通过数组创建PeriodIndex"></a>通过数组创建PeriodIndex</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">index&#x3D;pd.PeriodIndex(xxx,freq&#x3D;&#39;Q-DEC&#39;)</span><br></pre></td></tr></table></figure>

<h2 id="重采样-resampling-频率转换"><a href="#重采样-resampling-频率转换" class="headerlink" title="重采样(resampling)+频率转换"></a>重采样(resampling)+频率转换</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">重采样(resampling):将时间序列从一个频率 --&gt; 另一个频率的处理过程</span><br><span class="line">降采样(downsampling):高频率数据聚合 --&gt; 低频率</span><br><span class="line">升采样(upsampling):低频率数据 --&gt; 高频率</span><br></pre></td></tr></table></figure>

<h3 id="重采样-resample方法"><a href="#重采样-resample方法" class="headerlink" title="重采样(resample方法)"></a>重采样(resample方法)</h3><p><strong>resample方法的参数</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/128.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">rng&#x3D;pd.date_range(&#39;1&#x2F;1&#x2F;2000&#39;,periods&#x3D;100,freq&#x3D;&#39;D&#39;)</span><br><span class="line">ts&#x3D;Series(randn(len(rng)),index&#x3D;rng)</span><br><span class="line">print(ts.resample(&#39;M&#39;).mean())   #以前是resample(&#39;M&#39;,how&#x3D;&#39;mean&#39;)</span><br><span class="line">print(&quot;-------------------------------------------------------------------------&quot;)</span><br><span class="line">print(ts.resample(&#39;M&#39;,kind&#x3D;&#39;period&#39;).mean())   #聚合到时期(period)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/129.png" alt></p>
<h3 id="降采样-resample方法更改属性"><a href="#降采样-resample方法更改属性" class="headerlink" title="降采样(resample方法更改属性)"></a>降采样(resample方法更改属性)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from numpy.random import randn</span><br><span class="line">import pytz</span><br><span class="line"></span><br><span class="line">rng&#x3D;pd.date_range(&#39;1&#x2F;1&#x2F;2000&#39;,periods&#x3D;12,freq&#x3D;&#39;T&#39;)</span><br><span class="line">ts&#x3D;Series(np.arange(12),index&#x3D;rng)  #索引是时间(从2000年1月1日开始每一分钟一个数据)</span><br><span class="line">print(ts)</span><br><span class="line">print(&quot;---------------------------------&quot;)</span><br><span class="line">#1分钟聚合到5分钟(通过求和)</span><br><span class="line">print(ts.resample(&#39;5min&#39;).sum())   # 默认是右区间闭合(X,X]  默认以各面元左边界的时间戳进行标记</span><br><span class="line">print(&quot;---------------------------------&quot;)</span><br><span class="line">print(ts.resample(&#39;5min&#39;,closed&#x3D;&#39;left&#39;).sum())  # 可以通过closed改为是左区间闭合[X,X)  默认以各面元左边界的时间戳进行标记</span><br><span class="line">print(&quot;---------------------------------&quot;)</span><br><span class="line">print(ts.resample(&#39;5min&#39;,closed&#x3D;&#39;left&#39;,label&#x3D;&#39;right&#39;).sum()) # 可以通过closed改为是左区间闭合[X,X) 更改为以各面元右边界的时间戳进行标记</span><br><span class="line">print(&quot;---------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">#对结果索引做一些位移 (loffset设置一个字符串&#x2F;日期偏移量)</span><br><span class="line">print(ts.resample(&#39;5min&#39;,loffset&#x3D;&#39;-1s&#39;).sum())</span><br><span class="line">print(&quot;---------------------------------&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/130.png" alt></p>
<h3 id="OHLC降采样-属性how-’ohlc’"><a href="#OHLC降采样-属性how-’ohlc’" class="headerlink" title="OHLC降采样(属性how=’ohlc’)"></a>OHLC降采样(属性how=’ohlc’)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">#金融领域(有一种无处不在的时间序列聚合方式)</span><br><span class="line">#计算各面元的四个值</span><br><span class="line">##第一个值(open,开盘)</span><br><span class="line">##最后一个值(close,收盘)</span><br><span class="line">##最大值(high,最高)</span><br><span class="line">##最小值(low,最低)</span><br><span class="line">rng&#x3D;pd.date_range(&#39;1&#x2F;1&#x2F;2000&#39;,periods&#x3D;6,freq&#x3D;&#39;T&#39;)</span><br><span class="line">ts&#x3D;Series(np.arange(6),index&#x3D;rng)  #索引是时间(从2000年1月1日开始每一分钟一个数据)</span><br><span class="line">print(ts)</span><br><span class="line">print(&quot;------------------------------------&quot;)</span><br><span class="line">print(ts.resample(&#39;5min&#39;).ohlc())</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/131.png" alt></p>
<h3 id="groupby降采样-groupby加上lambda字符串"><a href="#groupby降采样-groupby加上lambda字符串" class="headerlink" title="groupby降采样(groupby加上lambda字符串)"></a>groupby降采样(groupby加上lambda字符串)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">rng&#x3D;pd.date_range(&#39;25&#x2F;1&#x2F;2000&#39;,periods&#x3D;13,freq&#x3D;&#39;D&#39;)</span><br><span class="line">ts&#x3D;Series(np.arange(13),index&#x3D;rng)  #索引是时间(从2000年1月1日开始每一分钟一个数据)</span><br><span class="line">print(ts)</span><br><span class="line">print(&quot;--------------------------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">#根据月份&#x2F;星期几进行分组</span><br><span class="line">print(ts.groupby(lambda x:x.month).mean())  #根据月份</span><br><span class="line">print(&quot;--------------------------------------------------&quot;)</span><br><span class="line">print(ts.groupby(lambda x:x.weekday).mean()) #根据星期X</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/132.png" alt></p>
<h3 id="升采样和插值-fill-method属性和limit属性"><a href="#升采样和插值-fill-method属性和limit属性" class="headerlink" title="升采样和插值(fill_method属性和limit属性)"></a>升采样和插值(fill_method属性和limit属性)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">frame &#x3D; pd.DataFrame(np.random.randn(2, 4),</span><br><span class="line">                    index&#x3D;pd.date_range(&#39;1&#x2F;1&#x2F;2000&#39;, periods&#x3D;2,freq&#x3D;&#39;W-WED&#39;),  #频率是周</span><br><span class="line">                    columns&#x3D;[&#39;Colorado&#39;, &#39;Texas&#39;, &#39;New York&#39;, &#39;Ohio&#39;])</span><br><span class="line">print(frame)</span><br><span class="line">print(&quot;-----------------------------------------------------------------------------------------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">#将其重采样到日频率(默认会引入缺失值)</span><br><span class="line">df_daily&#x3D;frame.resample(&#39;D&#39;).sum()</span><br><span class="line">print(df_daily)</span><br><span class="line">print(&quot;-----------------------------------------------------------------------------------------------------------------&quot;)</span><br><span class="line"></span><br><span class="line">#填充(fill_method属性)</span><br><span class="line">print(frame.resample(&#39;D&#39;).ffill())</span><br><span class="line">print(&quot;-----------------------------------------------------------------------------------------------------------------&quot;)</span><br><span class="line">#填充指定的时期数</span><br><span class="line">print(frame.resample(&#39;D&#39;).ffill(limit&#x3D;2))  #前三行填充</span><br><span class="line">print(&quot;-----------------------------------------------------------------------------------------------------------------&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/133.png" alt></p>
<h3 id="通过时期进行重采样"><a href="#通过时期进行重采样" class="headerlink" title="通过时期进行重采样"></a>通过时期进行重采样</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import datetime</span><br><span class="line">import numpy as np</span><br><span class="line">from pandas import Series,DataFrame</span><br><span class="line">import pandas as pd</span><br><span class="line">from numpy.random import randn</span><br><span class="line"></span><br><span class="line">frame &#x3D; pd.DataFrame(np.random.randn(24, 4),</span><br><span class="line">                     index&#x3D;pd.period_range(&#39;1-2000&#39;, &#39;12-2001&#39;, freq&#x3D;&#39;M&#39;),  #按照月从2000年1月到2001年12月一共24个</span><br><span class="line">                     columns&#x3D;[&#39;Colorado&#39;, &#39;Texas&#39;, &#39;New York&#39;, &#39;Ohio&#39;]) #列为四个项</span><br><span class="line"></span><br><span class="line">#降采样(只有2000和2001行)</span><br><span class="line">annual_frame&#x3D;frame.resample(&#39;A-DEC&#39;).mean()</span><br><span class="line">print(annual_frame)</span><br><span class="line">print(&quot;----------------------------------------------------------------------------------&quot;)</span><br><span class="line">#升采样(要决定在新频率中各区间的哪端用于放置原来的值)</span><br><span class="line">print(annual_frame.resample(&#39;Q-DEC&#39;).ffill()) # Q-DEC是季度型(每年以12月结束)</span><br><span class="line">print(&quot;----------------------------------------------------------------------------------&quot;)</span><br><span class="line">print(annual_frame.resample(&#39;Q-DEC&#39;,convention&#x3D;&#39;start&#39;).ffill()) # Q-DEC是季度型(每年以12月结束)</span><br><span class="line">print(&quot;----------------------------------------------------------------------------------&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/134.png" alt></p>
<h2 id="移动窗口函数"><a href="#移动窗口函数" class="headerlink" title="移动窗口函数"></a>移动窗口函数</h2><p><strong>移动窗口和指数加权函数:</strong></p>
<p><img src="/2022/09/06/%E5%88%A9%E7%94%A8python%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/135.png" alt></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" rel="tag">数据分析</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-python从入门到实践课本课后题" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/" class="article-date">
      <time datetime="2022-04-07T02:02:38.000Z" itemprop="datePublished">2022-04-07</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/">python从入门到实践课本课后题</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h1><h2 id="2-1-简单消息"><a href="#2-1-简单消息" class="headerlink" title="2.1 简单消息"></a>2.1 简单消息</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;&quot;hello songyaxiang&quot;</span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.1.png" alt></p>
<hr>
<h2 id="2-2-多条简单消息"><a href="#2-2-多条简单消息" class="headerlink" title="2.2 多条简单消息"></a>2.2 多条简单消息</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;&quot;hello songyaxiang&quot;</span><br><span class="line">print(message)</span><br><span class="line">message&#x3D;&quot;hello python&quot;</span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.2.png" alt></p>
<hr>
<h2 id="2-3-个性化消息"><a href="#2-3-个性化消息" class="headerlink" title="2.3 个性化消息"></a>2.3 个性化消息</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;&quot;Eric&quot;</span><br><span class="line">print(f&quot;hello &#123;message&#125;,would you like to learn some Python today?&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.3.png" alt></p>
<hr>
<h2 id="2-4-调整名字的大小写"><a href="#2-4-调整名字的大小写" class="headerlink" title="2.4 调整名字的大小写"></a>2.4 调整名字的大小写</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;&quot;song_ya_xiang&quot;</span><br><span class="line">print(message.title())</span><br><span class="line">print(message.upper())</span><br><span class="line">print(message.lower())</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.4.png" alt></p>
<hr>
<h2 id="2-5-名言"><a href="#2-5-名言" class="headerlink" title="2.5 名言"></a>2.5 名言</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;&#39;Albert Einstein once said,&quot;A person who never made a mistake never tried anything new&quot;&#39; #单双引号混用</span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.5.png" alt></p>
<hr>
<h2 id="2-6-名言2"><a href="#2-6-名言2" class="headerlink" title="2.6 名言2"></a>2.6 名言2</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">famous_person&#x3D;&quot;Albert&quot;</span><br><span class="line">#单双引号混用</span><br><span class="line">message&#x3D;f&quot;&#123;famous_person&#125; &quot;&#39;Einstein once said,&quot;A person who never made a mistake never tried anything new&quot;&#39;</span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.6.png" alt></p>
<hr>
<h2 id="2-7-剔除人名中的空白"><a href="#2-7-剔除人名中的空白" class="headerlink" title="2.7 剔除人名中的空白"></a>2.7 剔除人名中的空白</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;&quot; songyaxiang    &quot;   #左边一个空格  右边四个空格</span><br><span class="line">print(f&quot;\t&#123;message&#125;&quot;)  #\t是四个空格</span><br><span class="line">print(f&quot;&#123;message&#125;\n&quot;)  #\n是换行</span><br><span class="line">#删除左边空格</span><br><span class="line">print(message.lstrip())</span><br><span class="line">#删除右边空格</span><br><span class="line">print(message.rstrip())</span><br><span class="line">#删除两边空格</span><br><span class="line">print(message.strip())</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.7.png" alt></p>
<hr>
<h2 id="2-8-数字四则运算"><a href="#2-8-数字四则运算" class="headerlink" title="2.8 数字四则运算"></a>2.8 数字四则运算</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;2</span><br><span class="line">print(message)    #试着输出message看看是不是2</span><br><span class="line">print(f&quot;加法的结果是:&#123;message+4&#125;&quot;)  #2+4&#x3D;6</span><br><span class="line">print(f&quot;减法的结果是:&#123;message-4&#125;&quot;)  #2-4&#x3D;-2</span><br><span class="line">print(f&quot;乘法的结果是:&#123;message*4&#125;&quot;)  #2*4&#x3D;8</span><br><span class="line">print(f&quot;除法的结果是:&#123;message&#x2F;4&#125;&quot;)  #2&#x2F;4&#x3D;0.5</span><br><span class="line">print(f&quot;乘方的结果是:&#123;message**4&#125;&quot;) #2的4次方&#x3D;16</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.8.png" alt></p>
<hr>
<h2 id="2-9-最喜欢的数"><a href="#2-9-最喜欢的数" class="headerlink" title="2.9 最喜欢的数"></a>2.9 最喜欢的数</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;7777777</span><br><span class="line">print(message)    #试着输出message看看是不是7777777</span><br><span class="line">print(f&quot;我最喜欢的数是:&#123;message&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/2.9.png" alt></p>
<hr>
<h1 id="列表基本内容"><a href="#列表基本内容" class="headerlink" title="列表基本内容"></a>列表基本内容</h1><h2 id="3-1-姓名"><a href="#3-1-姓名" class="headerlink" title="3.1 姓名"></a>3.1 姓名</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">names&#x3D;[&#39;SongYaXiang&#39;,&#39;Python&#39;,&#39;Java&#39;,&#39;C++&#39;]</span><br><span class="line">print(names)     #输出列表会带中括号！！！</span><br><span class="line">print(names[0])  #下标从0-3</span><br><span class="line">print(names[1])</span><br><span class="line">print(names[2])</span><br><span class="line">print(names[3])</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/3.1.png" alt></p>
<hr>
<h2 id="3-2-问候语"><a href="#3-2-问候语" class="headerlink" title="3.2 问候语"></a>3.2 问候语</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">names&#x3D;[&#39;SongYaXiang&#39;,&#39;Python&#39;,&#39;Java&#39;,&#39;C++&#39;]</span><br><span class="line">print(f&quot;&#123;names[0]&#125; hello!&quot;)</span><br><span class="line">print(f&quot;&#123;names[1]&#125; hello!&quot;)</span><br><span class="line">print(f&quot;&#123;names[2]&#125; hello!&quot;)</span><br><span class="line">print(f&quot;&#123;names[3]&#125; hello!&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/3.2.png" alt></p>
<hr>
<h2 id="3-3-自己的列表"><a href="#3-3-自己的列表" class="headerlink" title="3.3 自己的列表"></a>3.3 自己的列表</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">tongxun&#x3D;[&#39;car&#39;,&#39;biycle&#39;,&#39;airplane&#39;,&#39;trip&#39;,&#39;van&#39;]</span><br><span class="line">print(f&quot;I like &#123;tongxun[0]&#125;&quot;)</span><br><span class="line">print(f&quot;I like &#123;tongxun[1]&#125;&quot;)</span><br><span class="line">print(f&quot;I like &#123;tongxun[2]&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/3.3.png" alt></p>
<hr>
<h2 id="3-4-3-7-嘉宾名单"><a href="#3-4-3-7-嘉宾名单" class="headerlink" title="3.4-3.7 嘉宾名单"></a>3.4-3.7 嘉宾名单</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jiabin&#x3D;[&#39;宋亚翔&#39;,&#39;python&#39;,&#39;java&#39;,&#39;c++&#39;,&#39;c语言&#39;]</span><br><span class="line">print(jiabin)</span><br><span class="line">#为每一位嘉宾打印消息</span><br><span class="line">print(f&quot;&#123;jiabin[0]&#125; 欢迎您来!!&quot;)</span><br><span class="line">print(f&quot;&#123;jiabin[1]&#125; 欢迎您来!!&quot;)</span><br><span class="line">print(f&quot;&#123;jiabin[2]&#125; 欢迎您来!!&quot;)</span><br><span class="line">print(f&quot;&#123;jiabin[3]&#125; 欢迎您来!!&quot;)</span><br><span class="line">print(f&quot;&#123;jiabin[4]&#125; 欢迎您来!!&quot;)</span><br><span class="line">print(&quot;----------修改(直接赋值)----------&quot;)</span><br><span class="line">jiabin[0]&#x3D;&#39;黎明&#39;   #宋亚翔不能来了  我们邀请了黎明来</span><br><span class="line">print(jiabin)</span><br><span class="line">print(&quot;----------开头添加insert()方法----------&quot;)</span><br><span class="line">jiabin.insert(0,&#39;王明&#39;)</span><br><span class="line">print(jiabin)</span><br><span class="line">print(&quot;----------中间添加insert()方法----------&quot;)</span><br><span class="line">jiabin.insert(2,&#39;王五&#39;)</span><br><span class="line">print(jiabin)</span><br><span class="line">print(&quot;----------末尾添加append()方法----------&quot;)</span><br><span class="line">jiabin.append(&#39;赵四&#39;)</span><br><span class="line">print(jiabin)</span><br><span class="line">print(&quot;----------末尾删除del语句----------&quot;)</span><br><span class="line">del jiabin[7]</span><br><span class="line">print(jiabin)</span><br><span class="line">print(&quot;----------删除pop()方法----------&quot;)</span><br><span class="line">jiabin.pop(5)</span><br><span class="line">print(jiabin)</span><br><span class="line">print(&quot;----------删除指定值remove()方法----------&quot;)</span><br><span class="line">jiabin.remove(&#39;python&#39;)</span><br><span class="line">print(jiabin)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/3.4.png" alt></p>
<hr>
<h2 id="3-8-放眼世界-排序-翻转"><a href="#3-8-放眼世界-排序-翻转" class="headerlink" title="3.8 放眼世界(排序/翻转)"></a>3.8 放眼世界(排序/翻转)</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">lvyou&#x3D;[&#39;南京&#39;,&#39;上海&#39;,&#39;北京&#39;,&#39;哈尔滨&#39;,&#39;西藏&#39;]</span><br><span class="line">print(f&quot;输出一下:&#123;lvyou&#125;&quot;)</span><br><span class="line"></span><br><span class="line">print(&quot;-----使用sorted函数正向排序-----&quot;)</span><br><span class="line">print(f&quot;使用sorted函数暂时排序:&#123;sorted(lvyou)&#125;&quot;)</span><br><span class="line">print(f&quot;重新输出一下:&#123;lvyou&#125;&quot;)</span><br><span class="line"></span><br><span class="line">print(&quot;-----使用sorted函数反向排序-----&quot;)</span><br><span class="line">print(f&quot;使用sorted函数暂时排序:&#123;sorted(lvyou,reverse&#x3D;True)&#125;&quot;)</span><br><span class="line">print(f&quot;重新输出一下:&#123;lvyou&#125;&quot;)</span><br><span class="line"></span><br><span class="line">print(&quot;-----使用reverse()方法翻转-----&quot;)</span><br><span class="line">lvyou.reverse()</span><br><span class="line">print(f&quot;翻转一下:&#123;lvyou&#125;&quot;)</span><br><span class="line">lvyou.reverse()</span><br><span class="line">print(f&quot;再翻转一下:&#123;lvyou&#125;&quot;)</span><br><span class="line"></span><br><span class="line">print(&quot;-----使用sort()方法正向排序-----&quot;)</span><br><span class="line">lvyou.sort()</span><br><span class="line">print(lvyou)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/3.8.png" alt></p>
<hr>
<h2 id="3-9-嘉宾长度"><a href="#3-9-嘉宾长度" class="headerlink" title="3.9 嘉宾长度"></a>3.9 嘉宾长度</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jiabin&#x3D;[&#39;宋亚翔&#39;,&#39;python&#39;,&#39;java&#39;,&#39;c++&#39;,&#39;c语言&#39;]</span><br><span class="line">print(len(jiabin))</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/3.9.png" alt></p>
<hr>
<h1 id="列表进阶内容"><a href="#列表进阶内容" class="headerlink" title="列表进阶内容"></a>列表进阶内容</h1><h2 id="4-1-比萨"><a href="#4-1-比萨" class="headerlink" title="4.1 比萨"></a>4.1 比萨</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">foods&#x3D;[&#39;tomato&#39;,&#39;bacon&#39;,&#39;cheese&#39;]</span><br><span class="line">for food in foods:</span><br><span class="line">    print(f&quot;I like &#123;food&#125;!&quot;)</span><br><span class="line">print(&quot;I really love pizza!&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.1.png" alt></p>
<hr>
<h2 id="4-2-动物"><a href="#4-2-动物" class="headerlink" title="4.2 动物"></a>4.2 动物</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">animals&#x3D;[&#39;monkey&#39;,&#39;mouse&#39;,&#39;elephant&#39;]</span><br><span class="line">for animal in animals:</span><br><span class="line">    print(animal)</span><br><span class="line">    print(f&quot;A &#123;animal&#125; would make a great pet&quot;)</span><br><span class="line">print(&quot;Any of these animals would make a great pet!&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.2.png" alt></p>
<hr>
<h2 id="4-3-for循环输出1-20"><a href="#4-3-for循环输出1-20" class="headerlink" title="4.3 for循环输出1-20"></a>4.3 for循环输出1-20</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">for value in range(1,21):</span><br><span class="line">    print(value)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.3.png" alt></p>
<hr>
<h2 id="4-4-一百万"><a href="#4-4-一百万" class="headerlink" title="4.4 一百万"></a>4.4 一百万</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">numbers&#x3D;list(range(1,1000001));</span><br><span class="line">for value in numbers:</span><br><span class="line">    print(value)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.4.png" alt></p>
<hr>
<h2 id="4-5-一百万求和"><a href="#4-5-一百万求和" class="headerlink" title="4.5 一百万求和"></a>4.5 一百万求和</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">numbers&#x3D;list(range(1,1000001));</span><br><span class="line">print(max(numbers))</span><br><span class="line">print(min(numbers))</span><br><span class="line">print(sum(numbers))</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.5.png" alt></p>
<hr>
<h2 id="4-6-循环打印奇数"><a href="#4-6-循环打印奇数" class="headerlink" title="4.6 循环打印奇数"></a>4.6 循环打印奇数</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">for value in range(1,21,2):</span><br><span class="line">    print(value)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.6.png" alt></p>
<hr>
<h2 id="4-7-循环打印3的倍数"><a href="#4-7-循环打印3的倍数" class="headerlink" title="4.7 循环打印3的倍数"></a>4.7 循环打印3的倍数</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">for value in range(3,31,3):</span><br><span class="line">    print(value)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.7.png" alt></p>
<hr>
<h2 id="4-8-循环打印某些数的立方"><a href="#4-8-循环打印某些数的立方" class="headerlink" title="4.8 循环打印某些数的立方"></a>4.8 循环打印某些数的立方</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">for value in range(1,11):</span><br><span class="line">    print(value**3)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.8.png" alt></p>
<hr>
<h2 id="4-9-立方解析-列表解析"><a href="#4-9-立方解析-列表解析" class="headerlink" title="4.9 立方解析(列表解析)"></a>4.9 立方解析(列表解析)</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">s&#x3D;[value**2 for value in range(1,11)];</span><br><span class="line">print(s)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.9.png" alt></p>
<hr>
<h2 id="4-10-切片"><a href="#4-10-切片" class="headerlink" title="4.10 切片"></a>4.10 切片</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">jiabins&#x3D;[&#39;宋亚翔&#39;,&#39;python&#39;,&#39;java&#39;,&#39;c++&#39;,&#39;c语言&#39;]</span><br><span class="line">for jiabin in jiabins[0:3]:</span><br><span class="line">    print(jiabin)</span><br><span class="line">print(&quot;--------------------&quot;)</span><br><span class="line">for jiabin in jiabins[-3:]:</span><br><span class="line">    print(jiabin)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.10.png" alt></p>
<hr>
<h2 id="4-11-你的比萨，我的比萨"><a href="#4-11-你的比萨，我的比萨" class="headerlink" title="4.11 你的比萨，我的比萨"></a>4.11 你的比萨，我的比萨</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">foods&#x3D;[&#39;tomato&#39;,&#39;bacon&#39;,&#39;cheese&#39;]</span><br><span class="line">friend_pizzas&#x3D;foods[:]     #复制副本</span><br><span class="line">#两个列表都添加新的比萨</span><br><span class="line">foods.append(&#39;abs&#39;)</span><br><span class="line">friend_pizzas.append(&#39;bbb&#39;)</span><br><span class="line">#循环遍历输出</span><br><span class="line">for food in foods:</span><br><span class="line">    print(food)</span><br><span class="line">print(&quot;\n&quot;)</span><br><span class="line">for friend in friend_pizzas:</span><br><span class="line">    print(friend)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.11.png" alt></p>
<hr>
<h2 id="4-13-自助餐"><a href="#4-13-自助餐" class="headerlink" title="4.13 自助餐"></a>4.13 自助餐</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">foods&#x3D;(&#39;aaa&#39;,&#39;bbb&#39;,&#39;ccc&#39;,&#39;ddd&#39;,&#39;eee&#39;)</span><br><span class="line">for food in foods:</span><br><span class="line">    print(food)</span><br><span class="line"># foods[0]&#x3D;&#39;fff&#39;  #元组不允许修改</span><br><span class="line">print(&quot;\n&quot;)</span><br><span class="line">foods&#x3D;(&#39;aaaa&#39;,&#39;bbbb&#39;,&#39;ccc&#39;,&#39;ddd&#39;,&#39;eee&#39;)    #只能所有的重新赋值</span><br><span class="line">for food in foods:</span><br><span class="line">    print(food)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/4.13.png" alt></p>
<hr>
<h1 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h1><h2 id="5-3-外星人颜色"><a href="#5-3-外星人颜色" class="headerlink" title="5.3 外星人颜色"></a>5.3 外星人颜色</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">alien_color&#x3D;&#39;green&#39;</span><br><span class="line">if alien_color &#x3D;&#x3D; &#39;green&#39;:</span><br><span class="line">    print(&quot;是绿色，恭喜您获得五分！&quot;)</span><br><span class="line">if alien_color &#x3D;&#x3D; &#39;yellow&#39;:</span><br><span class="line">    print(&quot;是黄色，恭喜您获得五分！&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.3.png" alt></p>
<hr>
<h2 id="5-4-外星人颜色2"><a href="#5-4-外星人颜色2" class="headerlink" title="5.4 外星人颜色2"></a>5.4 外星人颜色2</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">alien_color&#x3D;&#39;green&#39;</span><br><span class="line">if alien_color &#x3D;&#x3D; &#39;green&#39;:</span><br><span class="line">    print(&quot;是绿色，恭喜您获得5分！&quot;)</span><br><span class="line">else :</span><br><span class="line">    print(&quot;不是绿色，恭喜您获得10分！&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.4.png" alt></p>
<hr>
<h2 id="5-5-外星人颜色3"><a href="#5-5-外星人颜色3" class="headerlink" title="5.5 外星人颜色3"></a>5.5 外星人颜色3</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">alien_color&#x3D;&#39;yellow&#39;</span><br><span class="line">if alien_color &#x3D;&#x3D; &#39;green&#39;:</span><br><span class="line">    print(&quot;是绿色，恭喜您获得5分！&quot;)</span><br><span class="line">elif alien_color &#x3D;&#x3D; &#39;red&#39;:</span><br><span class="line">    print(&quot;是红色，恭喜您获得10分！&quot;)</span><br><span class="line">else :</span><br><span class="line">    print(&quot;是其他颜色，恭喜您获得15分！&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.5.png" alt></p>
<hr>
<h2 id="5-6-人生的不同阶段"><a href="#5-6-人生的不同阶段" class="headerlink" title="5.6 人生的不同阶段"></a>5.6 人生的不同阶段</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">age&#x3D;120</span><br><span class="line">if age&lt;2:</span><br><span class="line">    print(&quot;此人是婴儿&quot;)</span><br><span class="line">elif age&gt;2 and age &lt;4 :</span><br><span class="line">    print(&quot;此人是幼儿&quot;)</span><br><span class="line">elif age&gt;4 and age&lt;13 :</span><br><span class="line">    print(&quot;此人是儿童&quot;)</span><br><span class="line">elif age&gt;13 and age&lt;20 :</span><br><span class="line">    print(&quot;此人是青少年&quot;)</span><br><span class="line">elif age&gt;20 and age&lt;65 :</span><br><span class="line">    print(&quot;此人是成年人&quot;)</span><br><span class="line">else :</span><br><span class="line">    print(&quot;此人是老年人&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.6.png" alt></p>
<hr>
<h2 id="5-7-喜欢的水果"><a href="#5-7-喜欢的水果" class="headerlink" title="5.7 喜欢的水果"></a>5.7 喜欢的水果</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">favorite_fruits&#x3D;[&#39;apple&#39;,&#39;orange&#39;,&#39;bananas&#39;,]</span><br><span class="line">if &#39;apple&#39; in favorite_fruits :</span><br><span class="line">    print(&quot;apple在此列表内!&quot;)</span><br><span class="line">if &#39;oranges&#39; in favorite_fruits :</span><br><span class="line">    print(&quot;oranges在此列表内!&quot;)</span><br><span class="line">if &#39;orange&#39; in favorite_fruits :</span><br><span class="line">    print(&quot;orange在此列表内!&quot;)</span><br><span class="line">if &#39;bananas&#39; in favorite_fruits :</span><br><span class="line">    print(&quot;bananas在此列表内!&quot;)</span><br><span class="line">if &#39;applebet&#39; in favorite_fruits :</span><br><span class="line">    print(&quot;applebet在此列表内!&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.7.png" alt></p>
<hr>
<h2 id="5-8-以特殊方式跟管理员打招呼"><a href="#5-8-以特殊方式跟管理员打招呼" class="headerlink" title="5.8 以特殊方式跟管理员打招呼"></a>5.8 以特殊方式跟管理员打招呼</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">users&#x3D;[&#39;admin&#39;,&#39;bbb&#39;,&#39;ccc&#39;,&#39;ddd&#39;,&#39;eee_dasd&#39;]</span><br><span class="line">for user in users:</span><br><span class="line">    if user &#x3D;&#x3D; &#39;admin&#39; :</span><br><span class="line">        print(&quot;Hello admin,would you like to see a status report?&quot;)</span><br><span class="line">    else :</span><br><span class="line">        print(f&quot;Hello &#123;user&#125;,thank you for logging in again.&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.8.png" alt></p>
<hr>
<h2 id="5-9-处理没有用户的情形"><a href="#5-9-处理没有用户的情形" class="headerlink" title="5.9 处理没有用户的情形"></a>5.9 处理没有用户的情形</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">users&#x3D;[&#39;admin&#39;,&#39;bbb&#39;,&#39;ccc&#39;,&#39;ddd&#39;,&#39;eee_dasd&#39;]</span><br><span class="line">for user in users:</span><br><span class="line">    if user &#x3D;&#x3D; &#39;admin&#39; :</span><br><span class="line">        print(&quot;Hello admin,would you like to see a status report?&quot;)</span><br><span class="line">    else :</span><br><span class="line">        print(f&quot;Hello &#123;user&#125;,thank you for logging in again.&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.9.png" alt></p>
<hr>
<h2 id="5-10-检查用户名"><a href="#5-10-检查用户名" class="headerlink" title="5.10 检查用户名"></a>5.10 检查用户名</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">current_users&#x3D;[&#39;admin&#39;,&#39;John&#39;,&#39;CCC&#39;,&#39;ddd&#39;,&#39;EeE_dasd&#39;]</span><br><span class="line">new_users&#x3D;[&#39;aaa&#39;,&#39;bbb&#39;,&#39;JOHN&#39;,&#39;ddd&#39;,&#39;eee&#39;]</span><br><span class="line">#创建当前用户副本</span><br><span class="line">current_users_xiaoxie&#x3D;current_users[:]</span><br><span class="line">#将当前用户小写形式存储</span><br><span class="line">i&#x3D;0;</span><br><span class="line">for user in current_users_xiaoxie:</span><br><span class="line">    current_users_xiaoxie[i]&#x3D;user.lower()    #转为小写</span><br><span class="line">    i&#x3D;i+1</span><br><span class="line"></span><br><span class="line">#输出小写副本文件</span><br><span class="line">print(&quot;已经存在的用户小写形式为:&quot;)</span><br><span class="line">print(current_users_xiaoxie)</span><br><span class="line"></span><br><span class="line">#遍历查看是否注册过</span><br><span class="line">for user in new_users:</span><br><span class="line">   if user.lower() in current_users_xiaoxie :</span><br><span class="line">       print(f&quot;&#123;user&#125;注册过，请重新输入&quot;)</span><br><span class="line">   else :</span><br><span class="line">        print(f&quot;&#123;user&#125;可以使用&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.10.png" alt></p>
<hr>
<h2 id="5-11-序数"><a href="#5-11-序数" class="headerlink" title="5.11 序数"></a>5.11 序数</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">numbers&#x3D;[&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;];</span><br><span class="line">for number in numbers:</span><br><span class="line">    if number &#x3D;&#x3D; &#39;1&#39; :</span><br><span class="line">        print(&quot;1st&quot;)</span><br><span class="line">    elif number &#x3D;&#x3D; &#39;2&#39; :</span><br><span class="line">        print(&quot;2nd&quot;)</span><br><span class="line">    elif number &#x3D;&#x3D; &#39;3&#39; :</span><br><span class="line">        print(&quot;3rd&quot;)</span><br><span class="line">    else :</span><br><span class="line">        print(f&quot;&#123;number&#125;th&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/5.11.png" alt></p>
<hr>
<h1 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h1><h2 id="6-1-人"><a href="#6-1-人" class="headerlink" title="6.1 人"></a>6.1 人</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">peoples&#x3D;&#123;&#39;frist_name&#39;:&#39;宋&#39;,&#39;last_name&#39;:&#39;亚翔&#39;,&#39;age&#39;:&#39;23&#39;,&#39;city&#39;:&#39;西安&#39;&#125;</span><br><span class="line">for jian,zhi in peoples.items():</span><br><span class="line">    print(f&quot;&#123;jian&#125;: &#123;zhi&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.1.png" alt></p>
<hr>
<h2 id="6-2-喜欢的数"><a href="#6-2-喜欢的数" class="headerlink" title="6.2 喜欢的数"></a>6.2 喜欢的数</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">peoples&#x3D;&#123;&#39;宋亚翔&#39;:&#39;7&#39;,&#39;荔湾&#39;:&#39;34636&#39;,&#39;王五&#39;:&#39;23&#39;,&#39;赵四&#39;:&#39;5498&#39;&#125;</span><br><span class="line">for jian,zhi in peoples.items():</span><br><span class="line">    print(f&quot;&#123;jian&#125;: &#123;zhi&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.2.png" alt></p>
<hr>
<h2 id="6-3-词汇表"><a href="#6-3-词汇表" class="headerlink" title="6.3 词汇表"></a>6.3 词汇表</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">peoples&#x3D;&#123;&#39;JAVA&#39;:&#39;大二学的&#39;,&#39;C&#39;:&#39;大一学的&#39;,&#39;C#&#39;:&#39;大二学的&#39;,&#39;C++&#39;:&#39;还没学的&#39;,&#39;Python&#39;:&#39;正在学的&#39;&#125;</span><br><span class="line">for jian,zhi in peoples.items():</span><br><span class="line">    print(f&quot;&#123;jian&#125;: &#123;zhi&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.3.png" alt></p>
<hr>
<h2 id="6-4-词汇表2"><a href="#6-4-词汇表2" class="headerlink" title="6.4 词汇表2"></a>6.4 词汇表2</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">peoples&#x3D;&#123;&#39;JAVA&#39;:&#39;大二学的&#39;,&#39;C&#39;:&#39;大一学的&#39;,&#39;C#&#39;:&#39;大二学的&#39;,&#39;C++&#39;:&#39;还没学的&#39;,&#39;Python&#39;:&#39;正在学的&#39;&#125;</span><br><span class="line">print(peoples)</span><br><span class="line">#新添加两对键值对</span><br><span class="line">peoples[&#39;机器学习&#39;] &#x3D; &#39;研一学的&#39;</span><br><span class="line">peoples[&#39;深度学习&#39;] &#x3D; &#39;研二学的&#39;</span><br><span class="line">print(peoples)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.4.png" alt></p>
<hr>
<h2 id="6-5-河流"><a href="#6-5-河流" class="headerlink" title="6.5 河流"></a>6.5 河流</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">rivers&#x3D;&#123;&#39;the Yangtze River&#39;:&#39;China&#39;,&#39;Yellow River&#39;:&#39;China&#39;,&#39;Nile&#39;:&#39;Egypt&#39;&#125;</span><br><span class="line">#打印对应河流和国家</span><br><span class="line">for key,value in rivers.items():</span><br><span class="line">    print(f&quot;The &#123;key&#125; runs through &#123;value&#125;&quot;)</span><br><span class="line">print(&quot;\n&quot;)</span><br><span class="line">#打印所有河流名称</span><br><span class="line">for key in rivers.keys():</span><br><span class="line">    print(key)</span><br><span class="line">print(&quot;\n&quot;)</span><br><span class="line">#打印所有国家名称</span><br><span class="line">for value in rivers.values():</span><br><span class="line">    print(value)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.5.png" alt></p>
<hr>
<h2 id="6-6-调查"><a href="#6-6-调查" class="headerlink" title="6.6 调查"></a>6.6 调查</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">favorite_languages&#x3D;&#123;</span><br><span class="line">    &#39;jen&#39;:&#39;python&#39;,</span><br><span class="line">    &#39;sarah&#39;:&#39;c&#39;,</span><br><span class="line">    &#39;edward&#39;:&#39;ruby&#39;,</span><br><span class="line">    &#39;phil&#39;:&#39;python&#39;</span><br><span class="line">    &#125;</span><br><span class="line">people&#x3D;&#123;&#39;jen&#39;,&#39;ww&#39;,&#39;syx&#39;,&#39;zs&#39;&#125;</span><br><span class="line">for key in people:</span><br><span class="line">    if(key in favorite_languages):</span><br><span class="line">        print(f&quot;&#123;key&#125;恭喜你！&quot;)</span><br><span class="line">    else :</span><br><span class="line">        print(f&quot;&#123;key&#125;抱歉！&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.6.png" alt></p>
<hr>
<h2 id="6-7-人们"><a href="#6-7-人们" class="headerlink" title="6.7 人们"></a>6.7 人们</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">peoples_one&#x3D;&#123;&#39;frist_name&#39;:&#39;宋&#39;,&#39;last_name&#39;:&#39;亚翔&#39;,&#39;age&#39;:&#39;23&#39;,&#39;city&#39;:&#39;西安&#39;&#125;</span><br><span class="line">peoples_two&#x3D;&#123;&#39;frist_name&#39;:&#39;李&#39;,&#39;last_name&#39;:&#39;五&#39;,&#39;age&#39;:&#39;12&#39;,&#39;city&#39;:&#39;武汉&#39;&#125;</span><br><span class="line">peoples_three&#x3D;&#123;&#39;frist_name&#39;:&#39;赵&#39;,&#39;last_name&#39;:&#39;四&#39;,&#39;age&#39;:&#39;22&#39;,&#39;city&#39;:&#39;长沙&#39;&#125;</span><br><span class="line">peoples&#x3D;[peoples_one,peoples_two,peoples_three]</span><br><span class="line">for people in peoples:</span><br><span class="line">    print(people)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.7.png" alt></p>
<hr>
<h2 id="6-8-宠物"><a href="#6-8-宠物" class="headerlink" title="6.8 宠物"></a>6.8 宠物</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#列表里面存储字典</span><br><span class="line">peoples_one&#x3D;&#123;&#39;frist_name&#39;:&#39;欢欢&#39;,&#39;last_name&#39;:&#39;宋亚翔&#39;&#125;</span><br><span class="line">peoples_two&#x3D;&#123;&#39;frist_name&#39;:&#39;乐乐&#39;,&#39;last_name&#39;:&#39;李五&#39;,&#125;</span><br><span class="line">peoples_three&#x3D;&#123;&#39;frist_name&#39;:&#39;憨憨&#39;,&#39;last_name&#39;:&#39;赵四&#39;&#125;</span><br><span class="line">pets&#x3D;[peoples_one,peoples_two,peoples_three]</span><br><span class="line">for pet in pets:</span><br><span class="line">    print(pet)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.8.png" alt></p>
<hr>
<h2 id="6-9-喜欢的地方"><a href="#6-9-喜欢的地方" class="headerlink" title="6.9 喜欢的地方"></a>6.9 喜欢的地方</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#字典里面存储列表</span><br><span class="line">syx_place&#x3D;[&#39;上海&#39;,&#39;北京&#39;,&#39;哈尔滨&#39;]</span><br><span class="line">favorite_places&#x3D;&#123;&#39;宋亚翔&#39;:syx_place,&#39;王五&#39;:&#39;武汉&#39;,&#39;赵四&#39;:&#39;上海&#39;,&#125;</span><br><span class="line">for name,place in favorite_places.items():</span><br><span class="line">    print(f&quot;&#123;name&#125;: &#123;place&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.9.png" alt></p>
<hr>
<h2 id="6-10-喜欢的数2"><a href="#6-10-喜欢的数2" class="headerlink" title="6.10 喜欢的数2"></a>6.10 喜欢的数2</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#字典里面存储列表</span><br><span class="line">syx_number&#x3D;[&#39;12&#39;,&#39;77&#39;,&#39;7777&#39;]</span><br><span class="line">lz_number&#x3D;[&#39;408&#39;,&#39;555&#39;]</span><br><span class="line">peoples&#x3D;&#123;&#39;宋亚翔&#39;:syx_number,&#39;荔湾&#39;:lz_number,&#39;王五&#39;:&#39;23&#39;,&#39;赵四&#39;:&#39;5498&#39;&#125;</span><br><span class="line">for jian,zhi in peoples.items():</span><br><span class="line">    print(f&quot;&#123;jian&#125;: &#123;zhi&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.10.png" alt></p>
<hr>
<h2 id="6-11-城市"><a href="#6-11-城市" class="headerlink" title="6.11 城市"></a>6.11 城市</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#字典里面存储字典</span><br><span class="line">xian&#x3D;&#123;&#39;country&#39;:&#39;china&#39;,&#39;population&#39;:&#39;250.6w&#39;,&#39;fact&#39;:&#39;陕西省省会&#39;&#125;</span><br><span class="line">shanghai&#x3D;&#123;&#39;country&#39;:&#39;china&#39;,&#39;population&#39;:&#39;555.3w&#39;,&#39;fact&#39;:&#39;中国的一线城市&#39;&#125;</span><br><span class="line">beijing&#x3D;&#123;&#39;country&#39;:&#39;china&#39;,&#39;population&#39;:&#39;105.8w&#39;,&#39;fact&#39;:&#39;中国的首都&#39;&#125;</span><br><span class="line">cities&#x3D;&#123;&#39;xian&#39;:xian,&#39;shanghai&#39;:shanghai,&#39;beijing&#39;:beijing&#125;</span><br><span class="line">for city,xx in cities.items():</span><br><span class="line">    print(city,xx)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/6.11.png" alt></p>
<hr>
<h1 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h1><h2 id="7-1-汽车租赁"><a href="#7-1-汽车租赁" class="headerlink" title="7.1 汽车租赁"></a>7.1 汽车租赁</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;input(&quot;请问您需要租赁什么样的汽车？&quot;)</span><br><span class="line">print(message)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/7.1.png" alt></p>
<hr>
<h2 id="7-2-餐馆订位"><a href="#7-2-餐馆订位" class="headerlink" title="7.2 餐馆订位"></a>7.2 餐馆订位</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;input(&quot;请问您有几位用餐: &quot;)</span><br><span class="line">if int(message) &gt; 8 :</span><br><span class="line">    print(&quot;现在没有空桌&quot;)</span><br><span class="line">else :</span><br><span class="line">    print(&quot;现在有空桌&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/7.2.png" alt></p>
<hr>
<h2 id="7-3-10的整数倍"><a href="#7-3-10的整数倍" class="headerlink" title="7.3 10的整数倍"></a>7.3 10的整数倍</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;input(&quot;请输入1个数判断是否为10的整数倍: &quot;)</span><br><span class="line">if int(message)%10 &#x3D;&#x3D; 0:</span><br><span class="line">    print(&quot;是10的整数倍!&quot;)</span><br><span class="line">else :</span><br><span class="line">    print(&quot;不是10的整数倍!&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/7.3.png" alt></p>
<hr>
<h2 id="7-4-比萨配料"><a href="#7-4-比萨配料" class="headerlink" title="7.4 比萨配料"></a>7.4 比萨配料</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">message&#x3D;&#39;&#39;</span><br><span class="line">while message !&#x3D; &#39;quit&#39; :</span><br><span class="line">    message&#x3D;input(&quot;请输入需要添加的比萨配料:&quot;);</span><br><span class="line">    print(message)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/7.4.png" alt></p>
<hr>
<h2 id="7-5-电影票"><a href="#7-5-电影票" class="headerlink" title="7.5 电影票"></a>7.5 电影票</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">price&#x3D;&#39;&#39;</span><br><span class="line">while price !&#x3D; 0 :</span><br><span class="line">    price&#x3D;input(&quot;请输入观看者年龄:&quot;);</span><br><span class="line">    if int(price) &lt;&#x3D; 3 :</span><br><span class="line">        print(&quot;免费&quot;)</span><br><span class="line">    elif int(price)&gt; 3 and int(price) &lt; 12 :</span><br><span class="line">        print(&quot;10美元&quot;)</span><br><span class="line">    else :</span><br><span class="line">        print(&quot;15美元&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/7.5.png" alt></p>
<hr>
<h2 id="7-8-熟食店"><a href="#7-8-熟食店" class="headerlink" title="7.8 熟食店"></a>7.8 熟食店</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sandwich_orders&#x3D;[&#39;aaa&#39;,&#39;bbb&#39;,&#39;ccc&#39;]</span><br><span class="line">finished_sandwiches&#x3D;[]</span><br><span class="line">for sandwich in sandwich_orders:</span><br><span class="line">    print(&quot;I made your tuna sandwich&quot;)</span><br><span class="line">    finished_sandwiches.append(sandwich)</span><br><span class="line"></span><br><span class="line">print(finished_sandwiches)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/7.8.png" alt></p>
<hr>
<h2 id="7-9-五香烟熏牛肉卖完了"><a href="#7-9-五香烟熏牛肉卖完了" class="headerlink" title="7.9 五香烟熏牛肉卖完了"></a>7.9 五香烟熏牛肉卖完了</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sandwich_orders&#x3D;[&#39;aaa&#39;,&#39;pastrami&#39;,&#39;bbb&#39;,&#39;ccc&#39;,&#39;pastrami&#39;,&#39;pastrami&#39;,&#39;pastrami&#39;]</span><br><span class="line">print(&quot;删除前的列表：&quot;)</span><br><span class="line">print(sandwich_orders)</span><br><span class="line">print(&quot;熏牛肉已经卖完了！&quot;)</span><br><span class="line">#要删除的变量名</span><br><span class="line">current&#x3D;&#39;pastrami&#39;</span><br><span class="line">while current in sandwich_orders :</span><br><span class="line">    sandwich_orders.remove(current)</span><br><span class="line">print(&quot;删除后的列表：&quot;)</span><br><span class="line">print(sandwich_orders)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/7.9.png" alt></p>
<hr>
<h2 id="7-10-梦想的度假胜地"><a href="#7-10-梦想的度假胜地" class="headerlink" title="7.10 梦想的度假胜地"></a>7.10 梦想的度假胜地</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#获取最终调查结果</span><br><span class="line">result&#x3D;&#123;&#125;</span><br><span class="line">#结束的标志符</span><br><span class="line">flag&#x3D;True</span><br><span class="line">while flag:</span><br><span class="line">    name&#x3D;input(&quot;请问您的姓名:&quot;)</span><br><span class="line">    respnse&#x3D;input(&quot;请问您最想去的城市:&quot;)</span><br><span class="line">    result[name]&#x3D;respnse                #将姓名和所想去的城市存入字典</span><br><span class="line">    repeat&#x3D;input(&quot;还有人参加吗yes&#x2F;no？&quot;)</span><br><span class="line">    #如果没人参加了就设置flag为false</span><br><span class="line">    if repeat &#x3D;&#x3D; &#39;no&#39;:</span><br><span class="line">        flag&#x3D;False</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/7.10.png" alt></p>
<hr>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><h2 id="8-1-消息"><a href="#8-1-消息" class="headerlink" title="8.1 消息"></a>8.1 消息</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def display_message():</span><br><span class="line">    print(&quot;这是第八章，我们学习函数&quot;)</span><br><span class="line"></span><br><span class="line">display_message()</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.1.png" alt></p>
<hr>
<h2 id="8-2-喜欢的图书"><a href="#8-2-喜欢的图书" class="headerlink" title="8.2 喜欢的图书"></a>8.2 喜欢的图书</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def favorite_book(title):</span><br><span class="line">    print(f&quot;这是我最喜欢的书: &#123;title&#125;&quot;)</span><br><span class="line"></span><br><span class="line">favorite_book(&#39;python入门&#39;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.2.png" alt></p>
<hr>
<h2 id="8-3-T恤"><a href="#8-3-T恤" class="headerlink" title="8.3 T恤"></a>8.3 T恤</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def make_shirt(type&#x3D;&#39;python&#39;):</span><br><span class="line">    if type&#x3D;&#x3D;&#39;python&#39;:</span><br><span class="line">        print(&quot;I love Python&quot;)</span><br><span class="line">    else:</span><br><span class="line">        print(f&quot;I love &#123;type&#125;&quot;)</span><br><span class="line"></span><br><span class="line">make_shirt()</span><br><span class="line">make_shirt(&#39;JAVA&#39;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.3.png" alt></p>
<hr>
<h2 id="8-4-大号T恤"><a href="#8-4-大号T恤" class="headerlink" title="8.4 大号T恤"></a>8.4 大号T恤</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def make_shirt(type&#x3D;&#39;python&#39;):</span><br><span class="line">    if type&#x3D;&#x3D;&#39;python&#39;:</span><br><span class="line">        print(&quot;I love Python&quot;)</span><br><span class="line">    else:</span><br><span class="line">        print(f&quot;I love &#123;type&#125;&quot;)</span><br><span class="line"></span><br><span class="line">make_shirt()</span><br><span class="line">make_shirt(&#39;JAVA&#39;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.3.png" alt></p>
<hr>
<h2 id="8-5-城市"><a href="#8-5-城市" class="headerlink" title="8.5 城市"></a>8.5 城市</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def describe_city(city,country&#x3D;&#39;中国&#39;):</span><br><span class="line">    print(f&quot;&#123;city&#125; is in &#123;country&#125;&quot;)</span><br><span class="line"></span><br><span class="line">describe_city(&#39;北京&#39;)</span><br><span class="line">describe_city(&#39;克里米亚&#39;,&#39;乌克兰&#39;)</span><br><span class="line">describe_city(&#39;洛杉矶&#39;,&#39;美国&#39;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.5.png" alt></p>
<hr>
<h2 id="8-6-城市名"><a href="#8-6-城市名" class="headerlink" title="8.6 城市名"></a>8.6 城市名</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def city_country(city,country):</span><br><span class="line">    print(f&quot;&#123;city&#125;,&#123;country&#125;&quot;)</span><br><span class="line"></span><br><span class="line">city_country(&#39;北京&#39;,&#39;中国&#39;)</span><br><span class="line">city_country(&#39;洛杉矶&#39;,&#39;美国&#39;)</span><br><span class="line">city_country(&#39;东京&#39;,&#39;日本&#39;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.6.png" alt></p>
<hr>
<h2 id="8-7-专辑"><a href="#8-7-专辑" class="headerlink" title="8.7 专辑"></a>8.7 专辑</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def make_album(name&#x3D;None,zname&#x3D;None):</span><br><span class="line">    zj&#x3D;&#123;&#39;name&#39;:name,&#39;zname&#39;:zname&#125;</span><br><span class="line">    return zj</span><br><span class="line"></span><br><span class="line">a&#x3D;make_album()</span><br><span class="line">b&#x3D;make_album(&#39;syx&#39;,&#39;aa&#39;)</span><br><span class="line">c&#x3D;make_album(&#39;sss&#39;,&#39;aa&#39;)</span><br><span class="line">print(a)</span><br><span class="line">print(b)</span><br><span class="line">print(c)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.7.png" alt></p>
<hr>
<h2 id="8-8-用户的专辑"><a href="#8-8-用户的专辑" class="headerlink" title="8.8 用户的专辑"></a>8.8 用户的专辑</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def make_album(name&#x3D;None,zname&#x3D;None):</span><br><span class="line">    zj&#x3D;&#123;&#39;name&#39;:name,&#39;zname&#39;:zname&#125;</span><br><span class="line">    return zj</span><br><span class="line"></span><br><span class="line">name&#x3D;&#39;&#39;</span><br><span class="line">a &#x3D;&#39;&#39;</span><br><span class="line">while name!&#x3D; quit:</span><br><span class="line">    name&#x3D;input(&quot;输入歌手名称: &quot;)</span><br><span class="line">    sname&#x3D;input(&quot;输入专辑名: &quot;)</span><br><span class="line">    if name &#x3D;&#x3D;&#39;quit&#39;:</span><br><span class="line">        break;</span><br><span class="line">    a&#x3D;make_album(name,sname)</span><br><span class="line">    print(a)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.8.png" alt></p>
<hr>
<h2 id="8-9-消息"><a href="#8-9-消息" class="headerlink" title="8.9 消息"></a>8.9 消息</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def show_messages(messages):</span><br><span class="line">    for message in messages:</span><br><span class="line">        print(message)</span><br><span class="line"></span><br><span class="line">messages&#x3D;[&#39;我第一&#39;,&#39;我才是第一&#39;,&#39;我不卷了&#39;]</span><br><span class="line">show_messages(messages)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.9.png" alt></p>
<hr>
<h2 id="8-10-发送消息"><a href="#8-10-发送消息" class="headerlink" title="8.10 发送消息"></a>8.10 发送消息</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def show_messages(messages,sent):</span><br><span class="line">    print(&quot;这是show_messages函数:&quot;)</span><br><span class="line">    for message in messages:</span><br><span class="line">        print(message)</span><br><span class="line">        sent.append(message)</span><br><span class="line"></span><br><span class="line">def send_messages(a,b):</span><br><span class="line">    print(&quot;这是send_messages函数:&quot;)</span><br><span class="line">    print(&quot;这是messages列表:&quot;)</span><br><span class="line">    for aa in a:</span><br><span class="line">        print(aa)</span><br><span class="line">    print(&quot;这是sent_messages列表:&quot;)</span><br><span class="line">    for bb in b:</span><br><span class="line">            print(bb)</span><br><span class="line"></span><br><span class="line">messages&#x3D;[&#39;我第一&#39;,&#39;我才是第一&#39;,&#39;我不卷了&#39;]</span><br><span class="line">sent_messages&#x3D;[]</span><br><span class="line">#调用两个函数</span><br><span class="line">show_messages(messages,sent_messages)</span><br><span class="line">send_messages(messages,sent_messages)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.10.png" alt></p>
<hr>
<h2 id="8-11-消息归档"><a href="#8-11-消息归档" class="headerlink" title="8.11 消息归档"></a>8.11 消息归档</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def show_messages(messages,sent):</span><br><span class="line">    print(&quot;这是show_messages函数:&quot;)</span><br><span class="line">    for message in messages:</span><br><span class="line">        print(message)</span><br><span class="line">        sent.append(message)</span><br><span class="line"></span><br><span class="line">def send_messages(a,b):</span><br><span class="line">    print(&quot;这是send_messages函数:&quot;)</span><br><span class="line">    print(&quot;这是messages列表:&quot;)</span><br><span class="line">    for aa in a:</span><br><span class="line">        print(aa)</span><br><span class="line">    print(&quot;这是sent_messages列表:&quot;)</span><br><span class="line">    for bb in b:</span><br><span class="line">            print(bb)</span><br><span class="line"></span><br><span class="line">messages&#x3D;[&#39;我第一&#39;,&#39;我才是第一&#39;,&#39;我不卷了&#39;]</span><br><span class="line">sent_messages&#x3D;[]</span><br><span class="line">#调用两个函数</span><br><span class="line">show_messages(messages,sent_messages)</span><br><span class="line">copy&#x3D;messages[:]</span><br><span class="line">send_messages(copy,sent_messages)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.11.png" alt></p>
<hr>
<h2 id="8-12-三明治"><a href="#8-12-三明治" class="headerlink" title="8.12 三明治"></a>8.12 三明治</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def add_foods(foods):</span><br><span class="line">    print(f&quot;现在添加了&#123;foods&#125;食材&quot;)</span><br><span class="line"></span><br><span class="line">add_foods(&#39;maxisao&#39;)</span><br><span class="line">add_foods(&#39;mamaniya&#39;)</span><br><span class="line">add_foods(&#39;hanbaobao&#39;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.12.png" alt></p>
<hr>
<h2 id="8-13-用户简介"><a href="#8-13-用户简介" class="headerlink" title="8.13 用户简介"></a>8.13 用户简介</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def build_profile(first,last,**user_info):</span><br><span class="line">    &quot;&quot;&quot;创建一个字典，其中包含我们知道的有关用户的一切&quot;&quot;&quot;</span><br><span class="line">    user_info[&#39;first_name&#39;]&#x3D;first</span><br><span class="line">    user_info[&#39;last_name&#39;]&#x3D;last</span><br><span class="line">    return user_info</span><br><span class="line"></span><br><span class="line">user_profile&#x3D;build_profile(&#39;宋&#39;,&#39;亚翔&#39;,</span><br><span class="line">                           location&#x3D;&#39;西安&#39;,</span><br><span class="line">                            field&#x3D;&#39;计算机&#39;,</span><br><span class="line">                            sex&#x3D;&#39;男&#39;</span><br><span class="line">                           )</span><br><span class="line"></span><br><span class="line">print(user_profile)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.13.png" alt></p>
<hr>
<h2 id="8-14-汽车"><a href="#8-14-汽车" class="headerlink" title="8.14 汽车"></a>8.14 汽车</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def car(people,size,**xinxi):</span><br><span class="line">    xinxi[&#39;制造商&#39;]&#x3D;people</span><br><span class="line">    xinxi[&#39;型号&#39;]&#x3D;size</span><br><span class="line">    return xinxi</span><br><span class="line"></span><br><span class="line">result&#x3D;car(&#39;宋亚翔&#39;,&#39;1&#39;,city&#x3D;&#39;西安&#39;,price&#x3D;&#39;100065&#39;)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/8.14.png" alt></p>
<hr>
<h1 id="类"><a href="#类" class="headerlink" title="类"></a>类</h1><h2 id="9-1-餐馆"><a href="#9-1-餐馆" class="headerlink" title="9.1 餐馆"></a>9.1 餐馆</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Restaurant:</span><br><span class="line">    def __init__(self,restaurant_name,cuisine_type):</span><br><span class="line">            self.restaurant_name&#x3D;restaurant_name</span><br><span class="line">            self.cuisine_type&#x3D;cuisine_type</span><br><span class="line"></span><br><span class="line">    def describe_restaurant(self):</span><br><span class="line">        print(&quot;餐馆正在营业1&quot;)</span><br><span class="line">        print(&quot;餐馆正在营业2&quot;)</span><br><span class="line"></span><br><span class="line">    def open_restaurant(self):</span><br><span class="line">        print(&quot;餐馆正在营业3&quot;)</span><br><span class="line"></span><br><span class="line">my_food &#x3D; Restaurant(&#39;宋亚翔真香饭店&#39;,10)</span><br><span class="line">print(my_food.restaurant_name)</span><br><span class="line">print(my_food.cuisine_type)</span><br><span class="line">my_food.describe_restaurant()</span><br><span class="line">my_food.open_restaurant()</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.1.png" alt></p>
<hr>
<h2 id="9-2-三家餐馆"><a href="#9-2-三家餐馆" class="headerlink" title="9.2 三家餐馆"></a>9.2 三家餐馆</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Restaurant:</span><br><span class="line">    def __init__(self,restaurant_name,cuisine_type):</span><br><span class="line">            self.restaurant_name&#x3D;restaurant_name</span><br><span class="line">            self.cuisine_type&#x3D;cuisine_type</span><br><span class="line"></span><br><span class="line">    def describe_restaurant(self):</span><br><span class="line">        print(f&quot;&#123;self.restaurant_name&#125;正在营业&quot;)</span><br><span class="line"></span><br><span class="line">    def open_restaurant(self):</span><br><span class="line">        print(&quot;餐馆正在营业&quot;)</span><br><span class="line"></span><br><span class="line">my_food1 &#x3D; Restaurant(&#39;宋亚翔真香饭店&#39;,10)</span><br><span class="line">my_food2 &#x3D; Restaurant(&#39;王努力马洗扫饭店&#39;,22)</span><br><span class="line">my_food3 &#x3D; Restaurant(&#39;狗都不吃饭店&#39;,13)</span><br><span class="line">my_food1.describe_restaurant()</span><br><span class="line">my_food2.describe_restaurant()</span><br><span class="line">my_food3.describe_restaurant()</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.2.png" alt></p>
<hr>
<h2 id="9-3-用户"><a href="#9-3-用户" class="headerlink" title="9.3 用户"></a>9.3 用户</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class user:</span><br><span class="line">    def __init__(self,first_name,last_name,sex,age):</span><br><span class="line">        self.first_name&#x3D;first_name</span><br><span class="line">        self.last_name&#x3D;last_name</span><br><span class="line">        self.sex&#x3D;sex</span><br><span class="line">        self.age&#x3D;age</span><br><span class="line"></span><br><span class="line">    def describe_user(self):</span><br><span class="line">        print(f&quot;&#123;self.first_name&#125;&#123;self.last_name&#125;----性别为&#123;self.sex&#125; 年龄为:&#123;self.age&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    def greet_user(self):</span><br><span class="line">        print(f&quot;&#123;self.first_name&#125;先生欢迎你！&quot;)</span><br><span class="line"></span><br><span class="line">user_one&#x3D;user(&#39;宋&#39;,&#39;亚翔&#39;,&#39;男&#39;,&#39;23&#39;)</span><br><span class="line">user_one.describe_user()</span><br><span class="line">user_one.greet_user()</span><br><span class="line">user_two&#x3D;user(&#39;李&#39;,&#39;四&#39;,&#39;女&#39;,&#39;29&#39;)</span><br><span class="line">user_two.describe_user()</span><br><span class="line">user_two.greet_user()</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.3.png" alt></p>
<hr>
<h2 id="9-4-就餐人数"><a href="#9-4-就餐人数" class="headerlink" title="9.4 就餐人数"></a>9.4 就餐人数</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Restaurant:</span><br><span class="line">    def __init__(self,restaurant_name,cuisine_type):</span><br><span class="line">            self.restaurant_name&#x3D;restaurant_name</span><br><span class="line">            self.cuisine_type&#x3D;cuisine_type</span><br><span class="line">            self.number_served&#x3D;10   #指定默认值</span><br><span class="line"></span><br><span class="line">    def describe_restaurant(self):</span><br><span class="line">        print(f&quot;&#123;self.restaurant_name&#125;餐馆正在营业!&quot;)</span><br><span class="line">        print(&quot;餐馆正在营业2&quot;)</span><br><span class="line"></span><br><span class="line">    def open_restaurant(self):</span><br><span class="line">        print(f&quot;&#123;self.restaurant_name&#125;餐馆开门了!&quot;)</span><br><span class="line"></span><br><span class="line">    def set_number_served(self,number):</span><br><span class="line">        self.number_served&#x3D;number</span><br><span class="line"></span><br><span class="line">    def increment_number_served(self,number):</span><br><span class="line">        self.number_served+&#x3D;number</span><br><span class="line"></span><br><span class="line">my_food &#x3D; Restaurant(&#39;宋亚翔真香饭店&#39;,10)</span><br><span class="line">#打印多少人就餐</span><br><span class="line">my_food.open_restaurant()</span><br><span class="line">my_food.describe_restaurant()</span><br><span class="line">print(f&quot;开始人数是:&#123;my_food.number_served&#125;&quot;)</span><br><span class="line">my_food.set_number_served(100)</span><br><span class="line">print(f&quot;修改一次人数是:&#123;my_food.number_served&#125;&quot;)</span><br><span class="line">my_food.increment_number_served(25)</span><br><span class="line">print(f&quot;递增一次人数是:&#123;my_food.number_served&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.4.png" alt></p>
<hr>
<h2 id="9-5-尝试登录次数"><a href="#9-5-尝试登录次数" class="headerlink" title="9.5 尝试登录次数"></a>9.5 尝试登录次数</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class user:</span><br><span class="line">    def __init__(self,first_name,last_name,sex,age,login_attempts):</span><br><span class="line">        self.first_name&#x3D;first_name</span><br><span class="line">        self.last_name&#x3D;last_name</span><br><span class="line">        self.sex&#x3D;sex</span><br><span class="line">        self.age&#x3D;age</span><br><span class="line">        self.login_attempts&#x3D;login_attempts</span><br><span class="line"></span><br><span class="line">    def describe_user(self):</span><br><span class="line">        print(f&quot;&#123;self.first_name&#125;&#123;self.last_name&#125;----性别为&#123;self.sex&#125; 年龄为:&#123;self.age&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    def greet_user(self):</span><br><span class="line">        print(f&quot;&#123;self.first_name&#125;先生欢迎你！&quot;)</span><br><span class="line"></span><br><span class="line">    def increment_login_attempts(self):</span><br><span class="line">        self.login_attempts+&#x3D;1</span><br><span class="line"></span><br><span class="line">    def reset_login_attempts(self):</span><br><span class="line">        self.login_attempts&#x3D;0</span><br><span class="line"></span><br><span class="line">users&#x3D;user(&#39;宋&#39;,&#39;亚翔&#39;,&#39;男&#39;,&#39;23&#39;,77)</span><br><span class="line">users.increment_login_attempts()</span><br><span class="line">print(users.login_attempts)</span><br><span class="line">users.increment_login_attempts()</span><br><span class="line">print(users.login_attempts)</span><br><span class="line">users.increment_login_attempts()</span><br><span class="line">print(users.login_attempts)</span><br><span class="line">users.increment_login_attempts()</span><br><span class="line">print(users.login_attempts)</span><br><span class="line">users.reset_login_attempts()</span><br><span class="line">print(users.login_attempts)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.5.png" alt></p>
<hr>
<h2 id="9-6-冰淇淋小店"><a href="#9-6-冰淇淋小店" class="headerlink" title="9.6 冰淇淋小店"></a>9.6 冰淇淋小店</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#父类</span><br><span class="line">class Restaurant:</span><br><span class="line">    def __init__(self,restaurant_name,cuisine_type):</span><br><span class="line">            self.restaurant_name&#x3D;restaurant_name</span><br><span class="line">            self.cuisine_type&#x3D;cuisine_type</span><br><span class="line">            self.number_served&#x3D;10   #指定默认值</span><br><span class="line"></span><br><span class="line">    def describe_restaurant(self):</span><br><span class="line">        print(f&quot;&#123;self.restaurant_name&#125;餐馆正在营业!&quot;)</span><br><span class="line">        print(&quot;餐馆正在营业2&quot;)</span><br><span class="line"></span><br><span class="line">    def open_restaurant(self):</span><br><span class="line">        print(f&quot;&#123;self.restaurant_name&#125;餐馆开门了!&quot;)</span><br><span class="line"></span><br><span class="line">    def set_number_served(self,number):</span><br><span class="line">        self.number_served&#x3D;number</span><br><span class="line"></span><br><span class="line">    def increment_number_served(self,number):</span><br><span class="line">        self.number_served+&#x3D;number</span><br><span class="line"></span><br><span class="line">#子类</span><br><span class="line">class IceCreamStand(Restaurant):</span><br><span class="line">    def __init__(self,restaurant_name,cuisine_type,flavors):</span><br><span class="line">        super().__init__(restaurant_name,cuisine_type)       #一定是super()方法  并且没有self</span><br><span class="line">        self.flavors&#x3D;flavors</span><br><span class="line"></span><br><span class="line">    def xianshi(self):</span><br><span class="line">        print(f&quot;冰激凌有:&#123;self.flavors&#125;&quot;)</span><br><span class="line"></span><br><span class="line">#列表表示冰淇淋的口味</span><br><span class="line">flavor&#x3D;[&#39;草莓&#39;,&#39;蓝莓&#39;,&#39;香蕉&#39;]</span><br><span class="line">ice &#x3D;IceCreamStand(&#39;宋亚翔&#39;,&#39;桶装&#39;,flavor)</span><br><span class="line">ice.xianshi()</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.6.png" alt></p>
<hr>
<h2 id="9-7-管理员"><a href="#9-7-管理员" class="headerlink" title="9.7 管理员"></a>9.7 管理员</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class user:</span><br><span class="line">    def __init__(self,first_name,last_name,sex,age,login_attempts):</span><br><span class="line">        self.first_name&#x3D;first_name</span><br><span class="line">        self.last_name&#x3D;last_name</span><br><span class="line">        self.sex&#x3D;sex</span><br><span class="line">        self.age&#x3D;age</span><br><span class="line">        self.login_attempts&#x3D;login_attempts</span><br><span class="line"></span><br><span class="line">    def describe_user(self):</span><br><span class="line">        print(f&quot;&#123;self.first_name&#125;&#123;self.last_name&#125;----性别为&#123;self.sex&#125; 年龄为:&#123;self.age&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    def greet_user(self):</span><br><span class="line">        print(f&quot;&#123;self.first_name&#125;先生欢迎你！&quot;)</span><br><span class="line"></span><br><span class="line">    def increment_login_attempts(self):</span><br><span class="line">        self.login_attempts+&#x3D;1</span><br><span class="line"></span><br><span class="line">    def reset_login_attempts(self):</span><br><span class="line">        self.login_attempts&#x3D;0</span><br><span class="line"></span><br><span class="line">class Admin(user):</span><br><span class="line">    def __init__(self,first_name,last_name,sex,age,login_attempts,privileges):</span><br><span class="line">        super().__init__(first_name,last_name,sex,age,login_attempts)</span><br><span class="line">        self.privileges&#x3D;privileges</span><br><span class="line"></span><br><span class="line">    def show_privileges(self):</span><br><span class="line">        print(f&quot;管理员权限有:&#123;self.privileges&#125;&quot;)</span><br><span class="line"></span><br><span class="line">privilege&#x3D;[&quot;update&quot;,&quot;delete&quot;,&quot;add&quot;]</span><br><span class="line">admin &#x3D; Admin(&#39;宋&#39;,&#39;亚翔&#39;,&#39;男&#39;,&#39;23&#39;,22,privilege)</span><br><span class="line">admin.show_privileges()</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.7.png" alt></p>
<hr>
<h2 id="9-8-权限"><a href="#9-8-权限" class="headerlink" title="9.8 权限"></a>9.8 权限</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class user:</span><br><span class="line">    def __init__(self,first_name,last_name,sex,age,login_attempts):</span><br><span class="line">        self.first_name&#x3D;first_name</span><br><span class="line">        self.last_name&#x3D;last_name</span><br><span class="line">        self.sex&#x3D;sex</span><br><span class="line">        self.age&#x3D;age</span><br><span class="line">        self.login_attempts&#x3D;login_attempts</span><br><span class="line"></span><br><span class="line">    def describe_user(self):</span><br><span class="line">        print(f&quot;&#123;self.first_name&#125;&#123;self.last_name&#125;----性别为&#123;self.sex&#125; 年龄为:&#123;self.age&#125;&quot;)</span><br><span class="line"></span><br><span class="line">    def greet_user(self):</span><br><span class="line">        print(f&quot;&#123;self.first_name&#125;先生欢迎你！&quot;)</span><br><span class="line"></span><br><span class="line">    def increment_login_attempts(self):</span><br><span class="line">        self.login_attempts+&#x3D;1</span><br><span class="line"></span><br><span class="line">    def reset_login_attempts(self):</span><br><span class="line">        self.login_attempts&#x3D;0</span><br><span class="line"></span><br><span class="line">class Admin(user):</span><br><span class="line">    def __init__(self,first_name,last_name,sex,age,login_attempts,privileges):</span><br><span class="line">        super().__init__(first_name,last_name,sex,age,login_attempts)</span><br><span class="line">        self.privileges&#x3D;Privileges(pris)         #这里通过privileges实例 ----&gt; 属性</span><br><span class="line"></span><br><span class="line">class Privileges:</span><br><span class="line">    def __init__(self,privileges):</span><br><span class="line">       self.privleges&#x3D;privileges</span><br><span class="line"></span><br><span class="line">    def show_privileges(self):</span><br><span class="line">        print(f&quot;管理员权限有:&#123;self.privleges&#125;&quot;)</span><br><span class="line"></span><br><span class="line">pris&#x3D;[&#39;update&#39;,&#39;delete&#39;,&#39;add&#39;]</span><br><span class="line">ppp&#x3D;Privileges(pris)</span><br><span class="line">admin&#x3D;Admin(&#39;宋&#39;,&#39;亚翔&#39;,&#39;男&#39;,&#39;23&#39;,44,ppp)</span><br><span class="line">#相当于Privileges(pris)实例 然后调用展示</span><br><span class="line">admin.privileges.show_privileges()</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.8.png" alt></p>
<hr>
<h2 id="9-13-骰子"><a href="#9-13-骰子" class="headerlink" title="9.13 骰子"></a>9.13 骰子</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">from random import randint</span><br><span class="line">class Die:</span><br><span class="line">    def __init__(self,sides&#x3D;6):</span><br><span class="line">        self.sides&#x3D;sides</span><br><span class="line"></span><br><span class="line">    def roll_die(self):</span><br><span class="line">        print(randint(1,self.sides))</span><br><span class="line"></span><br><span class="line">die&#x3D;Die(6)</span><br><span class="line">die.roll_die()</span><br><span class="line">die&#x3D;Die(6)</span><br><span class="line">die.roll_die()</span><br><span class="line">die&#x3D;Die(6)</span><br><span class="line">die.roll_die()</span><br><span class="line">die&#x3D;Die(6)</span><br><span class="line">die.roll_die()</span><br><span class="line">die&#x3D;Die(6)</span><br><span class="line">die.roll_die()</span><br><span class="line">die&#x3D;Die(6)</span><br><span class="line">die.roll_die()</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.13.png" alt></p>
<hr>
<h2 id="9-14-彩票"><a href="#9-14-彩票" class="headerlink" title="9.14 彩票"></a>9.14 彩票</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">from random import sample</span><br><span class="line">lottery&#x3D;[&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;10&#39;,&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;]</span><br><span class="line">result&#x3D;sample(lottery,4)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.14.png" alt></p>
<hr>
<h2 id="9-15-彩票分析"><a href="#9-15-彩票分析" class="headerlink" title="9.15 彩票分析"></a>9.15 彩票分析</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">from random import sample</span><br><span class="line">lottery&#x3D;[&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;10&#39;,&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;e&#39;]</span><br><span class="line">result&#x3D;sample(lottery,4)</span><br><span class="line">print(f&quot;中大奖的序列是:&#123;result&#125;&quot;)</span><br><span class="line">current&#x3D;[]</span><br><span class="line">sum&#x3D;0</span><br><span class="line">while result!&#x3D;current:</span><br><span class="line">    current&#x3D;sample(lottery,4)</span><br><span class="line">    print(f&quot;当前随机的序列是:&#123;current&#125;&quot;)</span><br><span class="line">    sum+&#x3D;1</span><br><span class="line"></span><br><span class="line">print(f&quot;一共要&#123;sum&#125;多次才可以中大奖！&quot;)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/9.15.png" alt></p>
<hr>
<h1 id="文件和异常"><a href="#文件和异常" class="headerlink" title="文件和异常"></a>文件和异常</h1><h2 id="10-1-python学习笔记"><a href="#10-1-python学习笔记" class="headerlink" title="10.1 python学习笔记"></a>10.1 python学习笔记</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#.txt文件和.py文件在一个目录里面!!!</span><br><span class="line"></span><br><span class="line">#1.全文读取</span><br><span class="line">with open(&#39;learning_python.txt&#39;,encoding&#x3D;&#39;utf-8&#39;) as files:</span><br><span class="line">    contents&#x3D;files.read()</span><br><span class="line">print(contents)</span><br><span class="line"></span><br><span class="line">#2.逐行读取</span><br><span class="line">with open(&#39;learning_python.txt&#39;,encoding&#x3D;&#39;utf-8&#39;) as files:</span><br><span class="line">    for file in files:</span><br><span class="line">        print(file.strip()) #去除print打印多余空行</span><br><span class="line"></span><br><span class="line">#3.使用列表读取</span><br><span class="line">with open(&#39;learning_python.txt&#39;,encoding&#x3D;&#39;utf-8&#39;) as files:</span><br><span class="line">    lines&#x3D;files.readlines()</span><br><span class="line">#with语句外</span><br><span class="line">for line in lines:</span><br><span class="line">    print(line.strip())   #去除print打印多余空行</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/10.1.png" alt></p>
<hr>
<h2 id="10-2-C语言学习笔记"><a href="#10-2-C语言学习笔记" class="headerlink" title="10.2 C语言学习笔记"></a>10.2 C语言学习笔记</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#1.一行一行修改</span><br><span class="line">with open(&#39;learning_python.txt&#39;,encoding&#x3D;&#39;utf-8&#39;) as files:</span><br><span class="line">    lines&#x3D;files.readlines()</span><br><span class="line"></span><br><span class="line">for line in lines:</span><br><span class="line">    line&#x3D;line.replace(&#39;Python&#39;,&#39;JAVA&#39;)    </span><br><span class="line">    print(line.strip())   #删除print打印多余空格</span><br><span class="line"></span><br><span class="line">#2.整段文直接修改</span><br><span class="line">with open(&#39;learning_python.txt&#39;,encoding&#x3D;&#39;utf-8&#39;) as files:</span><br><span class="line">    lines&#x3D;files.read()</span><br><span class="line">    lines&#x3D;lines.replace(&#39;Python&#39;,&#39;JAVA&#39;)</span><br><span class="line">    print(lines)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/10.2.png" alt></p>
<hr>
<h2 id="10-3-访客"><a href="#10-3-访客" class="headerlink" title="10.3 访客"></a>10.3 访客</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#1.open()里面写是w 写入模式</span><br><span class="line">#2.使用write()写入文件</span><br><span class="line">with open(&#39;learning_python.txt&#39;,&#39;w&#39;,encoding&#x3D;&#39;utf-8&#39;) as files:</span><br><span class="line">    writes&#x3D;input(&quot;请输入用户名:&quot;)</span><br><span class="line">    files.write(writes)</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/10.3.png" alt></p>
<hr>
<h2 id="10-4-访客名单"><a href="#10-4-访客名单" class="headerlink" title="10.4 访客名单"></a>10.4 访客名单</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">with open(&#39;learning_python.txt&#39;,&#39;w&#39;,encoding&#x3D;&#39;utf-8&#39;) as files:</span><br><span class="line">    writes&#x3D;&#39;&#39;</span><br><span class="line">    while writes !&#x3D; &#39;quit&#39;:</span><br><span class="line">        writes&#x3D;input(&quot;请输入用户名:&quot;)  #输入用户名</span><br><span class="line">        print(f&quot;&#123;writes&#125;欢迎您！&quot;)    #打印问候语</span><br><span class="line">        files.write(f&quot;&#123;writes&#125;\n&quot;)   #自己在f字符串里面加\n换行</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/10.4.png" alt></p>
<hr>
<h2 id="10-5-调查"><a href="#10-5-调查" class="headerlink" title="10.5 调查"></a>10.5 调查</h2><p><strong>具体代码</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">with open(&#39;learning_python.txt&#39;,&#39;w&#39;,encoding&#x3D;&#39;utf-8&#39;) as files:</span><br><span class="line">    writes&#x3D;&#39;&#39;</span><br><span class="line">    while writes !&#x3D; &#39;quit&#39;:</span><br><span class="line">        print(&quot;为什么您喜欢编程?&quot;)</span><br><span class="line">        writes&#x3D;input(&quot;请输入原因:&quot;)  #输入用户名</span><br><span class="line">        files.write(f&quot;&#123;writes&#125;\n&quot;)   #自己在f字符串里面加\n换行</span><br></pre></td></tr></table></figure>

<p><strong>执行结果</strong></p>
<p><img src="/2022/04/07/python%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E8%B7%B5%E8%AF%BE%E6%9C%AC%E8%AF%BE%E5%90%8E%E9%A2%98/10.5.png" alt></p>
<hr>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/" rel="tag">python</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-机器学习" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" class="article-date">
      <time datetime="2022-04-01T02:04:02.000Z" itemprop="datePublished">2022-04-01</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="机器学习计划"><a href="#机器学习计划" class="headerlink" title="机器学习计划"></a>机器学习计划</h1><h2 id="学习思路"><a href="#学习思路" class="headerlink" title="学习思路"></a>学习思路</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.用书</span><br><span class="line">	西瓜书(机器学习)</span><br><span class="line">	python机器学习(蜥蜴书)</span><br><span class="line">2.视频</span><br><span class="line">	b站浙大教授带你全面解读机器学习西瓜书！</span><br><span class="line">	黑马程序员3天机器学习入门</span><br></pre></td></tr></table></figure>

<h2 id="参考视频pdf文件"><a href="#参考视频pdf文件" class="headerlink" title="参考视频pdf文件"></a>参考视频pdf文件</h2><p><a href="机器学习.pdf">参考笔记</a></p>
<hr>
<h1 id="机器学习简介"><a href="#机器学习简介" class="headerlink" title="机器学习简介"></a>机器学习简介</h1><h2 id="相关关系"><a href="#相关关系" class="headerlink" title="相关关系"></a>相关关系</h2><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/1.png" alt></p>
<h2 id="应用领域"><a href="#应用领域" class="headerlink" title="应用领域"></a>应用领域</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.传统预测:店铺销量预测&#x2F;量化投资&#x2F;广告推荐&#x2F;企业客户分类&#x2F;sql语句安全监测分类</span><br><span class="line">2.图像识别:人脸识别&#x2F;街道交通标志检测</span><br><span class="line">3.自然语言处理:文本分类&#x2F;情感分析&#x2F;自动聊天</span><br></pre></td></tr></table></figure>

<h2 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h2><h3 id="数据集-特征值-目标值"><a href="#数据集-特征值-目标值" class="headerlink" title="数据集(特征值+目标值)"></a>数据集(特征值+目标值)</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/2.png" alt></p>
<h3 id="常见三类问题"><a href="#常见三类问题" class="headerlink" title="常见三类问题"></a>常见三类问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.**分类问题**:给一堆小猫小狗 --&gt; 分类是小狗还是小猫</span><br><span class="line">2.**回归问题**:给一堆房价和地理位置等信息 --&gt; 得到连续的房价数据</span><br><span class="line">3.**聚类问题**:给一堆属性信息 --&gt; 合成在一起</span><br></pre></td></tr></table></figure>

<h3 id="算法分类"><a href="#算法分类" class="headerlink" title="算法分类"></a>算法分类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.监督学习(**预测**):输入数据有特征有标签(有标准答案)---分类和回归</span><br><span class="line">	1.1 分类： k-近邻算法&#x2F;贝叶斯分类&#x2F;决策树与随机森林&#x2F;逻辑回归&#x2F;神经网络</span><br><span class="line">	1.2 回归: 线性回归&#x2F;岭回归</span><br><span class="line">2.无监督学习:输入数据有特征无标签(无标准答案)---聚类</span><br><span class="line">	2.1 聚类： k-means</span><br></pre></td></tr></table></figure>

<h3 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/3.png" alt></p>
<hr>
<h1 id="特征工程"><a href="#特征工程" class="headerlink" title="特征工程"></a>特征工程</h1><h2 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h2><h3 id="可用数据集"><a href="#可用数据集" class="headerlink" title="可用数据集"></a>可用数据集</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1. Kaggle:https:&#x2F;&#x2F;www.kaggle.com&#x2F;datasets</span><br><span class="line">	1.1 数据量巨大</span><br><span class="line">	1.2 真实数据</span><br><span class="line">	1.3 80万科学家</span><br><span class="line">	1.4 大数据竞赛平台</span><br><span class="line">2. UCI：http:&#x2F;&#x2F;archive.ics.uci.edu&#x2F;ml&#x2F;</span><br><span class="line">	2.1 数据量几十万</span><br><span class="line">	2.2 涵盖科学&#x2F;生活&#x2F;经济等领域</span><br><span class="line">	2.3 收录360个数据集</span><br><span class="line">3. scikit-learn：https:&#x2F;&#x2F;scikit-learn.org&#x2F;stable&#x2F;</span><br><span class="line">	3.1 数据量较小</span><br><span class="line">	3.2 方便学习</span><br></pre></td></tr></table></figure>

<h3 id="sklearn数据集"><a href="#sklearn数据集" class="headerlink" title="sklearn数据集"></a>sklearn数据集</h3><h4 id="sklearn数据集内容"><a href="#sklearn数据集内容" class="headerlink" title="sklearn数据集内容"></a>sklearn数据集内容</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.分类&#x2F;聚类&#x2F;回归</span><br><span class="line">2.特征工程</span><br><span class="line">3.模型选择&#x2F;调优</span><br></pre></td></tr></table></figure>

<h4 id="sklearn获取流行数据集-datasets"><a href="#sklearn获取流行数据集-datasets" class="headerlink" title="sklearn获取流行数据集(datasets)"></a>sklearn获取流行数据集(datasets)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.sklearn.datasets  --- 加载获取流行数据集</span><br><span class="line">	1.1 datasets.load_*()  ---获取小规模数据集</span><br><span class="line">		数据包含在datasets里</span><br><span class="line">	1.2 datasets.fetch_*(data_home&#x3D;None)  ---获取大规模数据集</span><br><span class="line">		需要从网络上下载，函数的第一个参数是data_home，表示数据集下载的目录,默认是 ~&#x2F;scikit_learn_data&#x2F;</span><br></pre></td></tr></table></figure>

<h4 id="sklearn小数据集-load"><a href="#sklearn小数据集-load" class="headerlink" title="sklearn小数据集(load)"></a>sklearn小数据集(load)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from sklearn import datasets</span><br><span class="line">iris&#x3D;datasets.load_iris()</span><br><span class="line">print(iris)</span><br><span class="line">----------------------------------</span><br><span class="line">from sklearn import datasets</span><br><span class="line">boston&#x3D;datasets.load_boston()</span><br><span class="line">print(boston)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.1.png" alt></p>
<h4 id="sklearn大数据集-fetch"><a href="#sklearn大数据集-fetch" class="headerlink" title="sklearn大数据集(fetch)"></a>sklearn大数据集(fetch)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from sklearn import datasets</span><br><span class="line">newgroup&#x3D;datasets.fetch_20newsgroups()</span><br><span class="line">print(newgroup)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.2.png" alt></p>
<h4 id="sklearn返回值-字典格式"><a href="#sklearn返回值-字典格式" class="headerlink" title="sklearn返回值(字典格式)"></a>sklearn返回值(字典格式)</h4><p><strong>以鸢尾花为例(iris)</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.3.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#load和fetch均返回数据类型是datasets.base.Bunch(字典格式)</span><br><span class="line"></span><br><span class="line">	1.data：特征数据数组(特征值)</span><br><span class="line">	2.target：标签数组(目标值)</span><br><span class="line">	3.DESCR：数据描述</span><br><span class="line">	4.feature_names:特征名</span><br><span class="line">	5.target_names:目标名</span><br></pre></td></tr></table></figure>

<h3 id="数据集划分"><a href="#数据集划分" class="headerlink" title="数据集划分"></a>数据集划分</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">数据集划分：</span><br><span class="line">	1.训练数据: 用于训练&#x2F;构建模型</span><br><span class="line">	2.测试数据: 用于评估模型是否有效</span><br><span class="line">数据集划分比例：</span><br><span class="line">	训练集: 70% 80% 75%</span><br><span class="line">	测试集: 30% 20% 30%</span><br></pre></td></tr></table></figure>

<h4 id="数据集划分API-model-selection"><a href="#数据集划分API-model-selection" class="headerlink" title="数据集划分API(model_selection)"></a>数据集划分API(model_selection)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sklearn.model_selection.train_test_split(arrays,*option)</span><br><span class="line">	1.x: 特征值</span><br><span class="line">	2.y: 目标值</span><br><span class="line">	3.test_size: 测试集大小(一般是float&#x2F;默认是0.25)</span><br><span class="line">	4.random_state: 随机数种子(相同种子采样结果相同)</span><br></pre></td></tr></table></figure>

<p><strong>使用鸢尾花数据集:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">from sklearn import datasets</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line"></span><br><span class="line">iris&#x3D;datasets.load_iris()</span><br><span class="line"></span><br><span class="line">#训练集特征值x_train</span><br><span class="line">#测试集特征值x_test</span><br><span class="line">#训练集目标值y_train</span><br><span class="line">#测试集目标值y_test</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(iris.data,iris.target,random_state&#x3D;22)   #随机数种子是22  测试集大小默认是0.25</span><br><span class="line">print(f&quot;训练集特征值x_train: &#123;x_train&#125;&quot;)</span><br><span class="line">print(f&quot;测试集特征值x_test: &#123;x_test&#125;&quot;)</span><br><span class="line">print(f&quot;训练集目标值y_train: &#123;y_train&#125;&quot;)</span><br><span class="line">print(f&quot;测试集目标值y_test: &#123;y_test&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.4.png" alt></p>
<hr>
<h2 id="特征工程介绍"><a href="#特征工程介绍" class="headerlink" title="特征工程介绍"></a>特征工程介绍</h2><h3 id="特征提取-sklearn-feature-extraction"><a href="#特征提取-sklearn-feature-extraction" class="headerlink" title="特征提取(sklearn.feature_extraction)"></a>特征提取(sklearn.feature_extraction)</h3><ul>
<li>任意数据(文本/图像) –&gt; 数字特征(机器学习)</li>
</ul>
<h4 id="特征提取分类"><a href="#特征提取分类" class="headerlink" title="特征提取分类"></a>特征提取分类</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.字典特征提取(特征离散化) </span><br><span class="line">2.文本特征提取</span><br><span class="line">3.图像特征提取(深度学习)</span><br></pre></td></tr></table></figure>

<h4 id="字典特征提取-DictVectorizer类"><a href="#字典特征提取-DictVectorizer类" class="headerlink" title="字典特征提取(DictVectorizer类)"></a>字典特征提取(DictVectorizer类)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#有三个方法:</span><br><span class="line">1.fit_transform(X): 输入一个字典返回稀疏矩阵</span><br><span class="line">2.inverse_transform(X)： 输入一个稀疏数组&#x2F;数组返回原始数据格式</span><br><span class="line">3.get_feature_names()： 返回类别名称</span><br></pre></td></tr></table></figure>

<p><strong>以城市为例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.feature_extraction import DictVectorizer</span><br><span class="line">#对字典类型数据进行特征抽取</span><br><span class="line">data &#x3D; [&#123;&#39;city&#39;: &#39;北京&#39;,&#39;temperature&#39;:100&#125;, &#123;&#39;city&#39;: &#39;上海&#39;,&#39;temperature&#39;:60&#125;, &#123;&#39;city&#39;: &#39;深圳&#39;,&#39;temperature&#39;:30&#125;]</span><br><span class="line">#1.实例化一个转换器类</span><br><span class="line">transfer&#x3D;DictVectorizer(sparse&#x3D;False)    #sparse默认是True打开的是稀疏矩阵</span><br><span class="line">#2.调用fit_transform()方法抽取特征</span><br><span class="line">data_new&#x3D;transfer.fit_transform(data)</span><br><span class="line">#获得特征名称</span><br><span class="line">print(transfer.get_feature_names())</span><br><span class="line">#获得特征</span><br><span class="line">print(data_new)          #sparse默认是True打开的是稀疏矩阵</span><br><span class="line">#反转最初的数据格式</span><br><span class="line">print(f&quot;原来的数据格式是:&#123;transfer.inverse_transform(data_new)&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.5.png" alt></p>
<h4 id="文本特征提取-CountVectorizer类统计特征词出现个数"><a href="#文本特征提取-CountVectorizer类统计特征词出现个数" class="headerlink" title="文本特征提取(CountVectorizer类统计特征词出现个数)"></a>文本特征提取(CountVectorizer类统计特征词出现个数)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#有三个方法:</span><br><span class="line">1.fit_transform(X): 输入一个文本&#x2F;文本字符串返回稀疏矩阵</span><br><span class="line">2.inverse_transform(X)： 输入一个稀疏数组&#x2F;数组返回原始数据格式</span><br><span class="line">3.get_feature_names()： 返回类别名称</span><br></pre></td></tr></table></figure>

<p><strong>以英文段落为例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.feature_extraction.text import CountVectorizer</span><br><span class="line">#准备数据</span><br><span class="line">data &#x3D;[&quot;life is short,i like like python&quot;, &quot;life is too long,i dislike python&quot;]</span><br><span class="line">#1.实例化一个转换器</span><br><span class="line">count&#x3D;CountVectorizer()</span><br><span class="line">#2.调用fit_transfrom()方法获取数据</span><br><span class="line">data_new&#x3D;count.fit_transform(data)</span><br><span class="line">print(count.get_feature_names_out())   #get_feature_names已经过期了！！！</span><br><span class="line">#二维数组要用toarray()方法展示出来  没有sparse&#x3D;False这个设置！！！</span><br><span class="line">print(data_new.toarray())</span><br><span class="line">print(count.inverse_transform(data_new))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.6.png" alt></p>
<h4 id="文本特征提取-TfidfVectorier类-jieba库的cut方法分词"><a href="#文本特征提取-TfidfVectorier类-jieba库的cut方法分词" class="headerlink" title="文本特征提取(TfidfVectorier类+jieba库的cut方法分词)"></a>文本特征提取(TfidfVectorier类+jieba库的cut方法分词)</h4><h4 id="jieba库的cut方法"><a href="#jieba库的cut方法" class="headerlink" title="jieba库的cut方法"></a>jieba库的cut方法</h4><p><strong>以中文段落为例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.feature_extraction.text import CountVectorizer</span><br><span class="line">import jieba</span><br><span class="line">#准备数据</span><br><span class="line">data&#x3D;[&quot;一种还是一种今天很残酷，明天更残酷，后天很美好，但绝对大部分是死在明天晚上，所以 每个人不要放弃今天。&quot;,</span><br><span class="line">      &quot;我们看到的从很远星系来的光是在几百万年之前发出的，这样当我们看到宇宙时，我们是在 看它的过去。&quot;,</span><br><span class="line">      &quot;如果只用一种方式了解某样事物，你就不会真正了解它。了解事物真正含义的秘密取决于如 何将其与我们所了解的事物相联系。&quot;]</span><br><span class="line"></span><br><span class="line">#1.将中文文本分词</span><br><span class="line">data_new&#x3D;[]</span><br><span class="line">for sent in data:</span><br><span class="line">      data_new.append(&quot; &quot;.join(list(jieba.cut(sent))))   #使用jieba库的cut分词方法!!!</span><br><span class="line">#2.调用fit_transform()方法</span><br><span class="line">transfer&#x3D;CountVectorizer(stop_words&#x3D;[&quot;一种&quot;,&quot;哈哈&quot;])     #禁用词--- 分词的时候不把他们当做特征词！！！</span><br><span class="line">data_final&#x3D;transfer.fit_transform(data_new)</span><br><span class="line">print(f&quot;特征名称:\n &#123;transfer.get_feature_names_out()&#125;&quot;)</span><br><span class="line">print(f&quot;data_new内容:\n&#123;data_final.toarray()&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.7.png" alt></p>
<hr>
<h4 id="TfidfVectorier类"><a href="#TfidfVectorier类" class="headerlink" title="TfidfVectorier类"></a>TfidfVectorier类</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.TF-IDF思想:某个词&#x2F;短语在一篇文章中出现概率高，并且在其他文章中很少出现，则认为有很好的区分度，适合用来分类</span><br><span class="line">2.TF-IDF作用:用于评估对于一个文件&#x2F;语料库文件的重要程度</span><br><span class="line">3.TF-IDF公式:</span><br><span class="line">	TF(词频): 词语在文件中出现频率</span><br><span class="line">	IDF(逆向文档频率): log[总文件数目&#x2F;文件数目]10</span><br><span class="line">	tfidf&#x3D;TF*IDF</span><br></pre></td></tr></table></figure>

<p><strong>以中文段落为例:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.feature_extraction.text import TfidfVectorizer</span><br><span class="line">import jieba</span><br><span class="line">#准备数据</span><br><span class="line">data&#x3D;[&quot;一种还是一种今天很残酷，明天更残酷，后天很美好，但绝对大部分是死在明天晚上，所以 每个人不要放弃今天。&quot;,</span><br><span class="line">      &quot;我们看到的从很远星系来的光是在几百万年之前发出的，这样当我们看到宇宙时，我们是在 看它的过去。&quot;,</span><br><span class="line">      &quot;如果只用一种方式了解某样事物，你就不会真正了解它。了解事物真正含义的秘密取决于如 何将其与我们所了解的事物相联系。&quot;]</span><br><span class="line">#1.将中文文本分词</span><br><span class="line">data_new&#x3D;[]</span><br><span class="line">for sent in data:</span><br><span class="line">      data_new.append(&quot; &quot;.join(list(jieba.cut(sent))))</span><br><span class="line">#2.调用fit_transform()方法</span><br><span class="line">transfer&#x3D;TfidfVectorizer()     #禁用词--- 分词的时候不把他们当做特征词！！！</span><br><span class="line">data_final&#x3D;transfer.fit_transform(data_new)</span><br><span class="line">print(f&quot;特征名称:\n &#123;transfer.get_feature_names_out()&#125;&quot;)</span><br><span class="line">print(f&quot;data_new内容:\n&#123;data_final.toarray()&#125;&quot;)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.8.png" alt></p>
<hr>
<h3 id="特征预处理-sklearn-preprocessing"><a href="#特征预处理-sklearn-preprocessing" class="headerlink" title="特征预处理(sklearn.preprocessing)"></a>特征预处理(sklearn.preprocessing)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">特征预处理:特征数据 --(转换函数)--&gt; 特征数据[更加适合算法模型]	</span><br><span class="line">特征预处理:</span><br><span class="line">	1.归一化(传统精确小数据场景): MinMaxScaler   ----最大值最小值是变化并且容易受到异常点影响 ---&gt; 鲁棒性较差</span><br><span class="line">	2.标准化(嘈杂大数据场景): StandardScaler ----</span><br></pre></td></tr></table></figure>

<h4 id="归一化-MinMaxScaler"><a href="#归一化-MinMaxScaler" class="headerlink" title="归一化(MinMaxScaler)"></a>归一化(MinMaxScaler)</h4><p><strong>归一化推导公式:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.10.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import MinMaxScaler  #标准化</span><br><span class="line">#1.获取数据</span><br><span class="line">data&#x3D;pd.read_csv(&quot;dating.txt&quot;)  #文档在.py文件所在目录</span><br><span class="line">data&#x3D;data.iloc[:,:3]</span><br><span class="line">print(data)</span><br><span class="line">#2.实例化一个转换器类</span><br><span class="line">transfer&#x3D;MinMaxScaler(feature_range&#x3D;[0,1])   #默认归一化在0-1</span><br><span class="line">#3.调用fit_transform()</span><br><span class="line">data_new&#x3D;transfer.fit_transform(data)</span><br><span class="line">print(data_new)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.9.png" alt></p>
<h4 id="标准化-StandardScaler"><a href="#标准化-StandardScaler" class="headerlink" title="标准化(StandardScaler)"></a>标准化(StandardScaler)</h4><p><strong>标准化推导公式:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.11.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler   #统一化</span><br><span class="line">#1.获取数据</span><br><span class="line">data&#x3D;pd.read_csv(&quot;dating.txt&quot;)  #文档在.py文件所在目录</span><br><span class="line">print(data)</span><br><span class="line">#2.实例化一个转换器类</span><br><span class="line">transfer&#x3D;StandardScaler()</span><br><span class="line">#3.调用fit_transform()</span><br><span class="line">data_new&#x3D;transfer.fit_transform(data[[&#39;milage&#39;,&#39;Liters&#39;,&#39;Consumtime&#39;]])</span><br><span class="line">print(&quot;标准化的结果:\n&quot;, data_new)</span><br><span class="line">print(&quot;每一列特征的平均值：\n&quot;, transfer.mean_)</span><br><span class="line">print(&quot;每一列特征的方差：\n&quot;, transfer.var_)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.12.png" alt></p>
<hr>
<h3 id="特征降维"><a href="#特征降维" class="headerlink" title="特征降维"></a>特征降维</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">概念:</span><br><span class="line">	在某些限定条件下，降低随机变量(特征)个数 ---&gt; 一组“不相关”主变量</span><br><span class="line"></span><br><span class="line">分类:</span><br><span class="line">	1.特征选择</span><br><span class="line">		1.1 嵌入式 Embeded</span><br><span class="line">			决策树</span><br><span class="line">			正则化</span><br><span class="line">			深度学习</span><br><span class="line">		1.2 过滤式 Filter </span><br><span class="line">			方差选择法:低方差特征过滤</span><br><span class="line">			相关系数:特征与特征之间的相关过程</span><br><span class="line">		1.3 包裹式</span><br><span class="line">	2.主成分分析</span><br></pre></td></tr></table></figure>

<h4 id="特征选择"><a href="#特征选择" class="headerlink" title="特征选择"></a>特征选择</h4><h4 id="低方差特征过滤-varianceThreshold"><a href="#低方差特征过滤-varianceThreshold" class="headerlink" title="低方差特征过滤(varianceThreshold)"></a>低方差特征过滤(varianceThreshold)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.删除低方差的一些特征，再结合方差的大小来考虑这个方式的角度</span><br><span class="line">2. API: </span><br><span class="line">sklearn.feature_selection.VarianceThreshold(threshold &#x3D; 0.0)  --删除所有低方差特征</span><br><span class="line">Variance.fit_transform(X):</span><br><span class="line">	X是numpy array格式的数据[行,列]</span><br><span class="line">	返回值:删除训练集差异低于threshold的特征(默认是删除所有样本中具有相同值的特征)</span><br></pre></td></tr></table></figure>

<p><strong>筛选某些股票的指标特征</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from sklearn.feature_selection import VarianceThreshold</span><br><span class="line">#1.获取数据</span><br><span class="line">data&#x3D;pd.read_csv(&quot;factor_returns.csv&quot;)</span><br><span class="line">data&#x3D;data.iloc[:,1:-2]</span><br><span class="line">#2.实例化转换器类</span><br><span class="line">transfer&#x3D;VarianceThreshold(threshold&#x3D;10)  &#x2F;&#x2F;特征方差选10</span><br><span class="line">#3.调用fit_transform</span><br><span class="line">data_new&#x3D;transfer.fit_transform(data)</span><br><span class="line">print(data_new)</span><br></pre></td></tr></table></figure>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.13.png" alt></p>
<h4 id="相关系数过滤-scipy"><a href="#相关系数过滤-scipy" class="headerlink" title="相关系数过滤(scipy)"></a>相关系数过滤(scipy)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.皮尔逊相关系数:反映变量之间相关关系密切程度的统计指标</span><br><span class="line">	相关系数(r):-1到1之间</span><br><span class="line">	1.1 r&gt;0表示正相关</span><br><span class="line">	1.2 r&lt;0表示负相关</span><br><span class="line">       1.3 |r|&#x3D;1表示两变量之间完全相关</span><br><span class="line">	1.4 r&#x3D;0表示两变量之间无相关</span><br><span class="line">	1.5 0&lt;|r|&lt;1表示两变量存在一定程度相关，且越接近1之间的线性关系越密切，接近0之间表示线性相关越弱</span><br><span class="line">	1.6 |r|&lt;0.4低度相关,0.4≤|r|&lt;0.7显著性相关,0.7≤|r|&lt;1高度线性相关</span><br><span class="line">	</span><br><span class="line">2. from scipy.stats import pearsonr</span><br><span class="line">	X: 特征值x,</span><br><span class="line">	Y: 特征值y,返回值是[特征值相关,特征值]</span><br><span class="line"></span><br><span class="line">3.特征之间相关性很高: </span><br><span class="line">	3.1 选其中一个</span><br><span class="line">	3.2 加权求和 每个占比多少</span><br><span class="line">	3.3 主成分分析</span><br></pre></td></tr></table></figure>
<h4 id="主成分分析-PCA降维保留信息"><a href="#主成分分析-PCA降维保留信息" class="headerlink" title="主成分分析(PCA降维保留信息)"></a>主成分分析(PCA降维保留信息)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.API：通过矩阵运算得到一个合适的直线-&gt;主成分分析的结果</span><br><span class="line">	sklearn.decomposition.PCA(n_components&#x3D;None) </span><br><span class="line">		n_components：</span><br><span class="line">			小数:表示保留百分之多少的信息</span><br><span class="line">			整数:减少到多少特征</span><br><span class="line">		PCA.fit_transform(X是numpy array格式数据)</span><br><span class="line">		返回值:转换后指定维度的array</span><br></pre></td></tr></table></figure>

<p><strong>举例使用</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">from sklearn.decomposition import PCA</span><br><span class="line">#1.获取数据</span><br><span class="line">data&#x3D;[[2,8,4,5],</span><br><span class="line">     [6,3,0,8],</span><br><span class="line">     [5,4,9,1]]</span><br><span class="line">#2.实例化转换器类</span><br><span class="line">transfer&#x3D;PCA(n_components&#x3D;2)  #转换后有2个维度(2个特征)</span><br><span class="line">data_new&#x3D;transfer.fit_transform(data)</span><br><span class="line">print(data_new)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.14.png" alt></p>
<h4 id="instacart降维案例"><a href="#instacart降维案例" class="headerlink" title="instacart降维案例"></a>instacart降维案例</h4><p><strong>问题分析</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;探究用户对物品类别的喜好细分&gt;</span><br><span class="line">2.order_products_prior.csv订单与商品信息: order_id,product_id,add_to_cart_order,reordered   </span><br><span class="line">  products.csv商品信息: product_id,product_name,aisle_id,department_id</span><br><span class="line">  orders.csv用户的订单信息: order_id,user_id,eval_set,order_number.....</span><br><span class="line">  aisles.csv商品所属物品类别: aisle_id,aisle</span><br><span class="line">2. 得到四个csv文件 ----&gt; 需要将user_id和aisle放在同一个表中</span><br><span class="line">3. 找到user_id和aisle ----&gt; 交叉表和透视表</span><br><span class="line">4. 特征冗余过多 ----&gt;PCA降维</span><br></pre></td></tr></table></figure>

<p><strong>具体实现</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">from sklearn.decomposition import PCA</span><br><span class="line">#1.获取数据(记得放在代码当前位置文件夹下)</span><br><span class="line">data1&#x3D;pd.read_csv(&quot;order_products__prior.csv&quot;)</span><br><span class="line">data2&#x3D;pd.read_csv(&quot;products.csv&quot;)</span><br><span class="line">data3&#x3D;pd.read_csv(&quot;orders.csv&quot;)</span><br><span class="line">data4&#x3D;pd.read_csv(&quot;aisles.csv&quot;)</span><br><span class="line"></span><br><span class="line">#2.合并表 merge()函数</span><br><span class="line">table1&#x3D;pd.merge(data4,data2,on&#x3D;[&quot;aisle_id&quot;,&quot;aisle_id&quot;])</span><br><span class="line">table2&#x3D;pd.merge(table1,data1,on&#x3D;[&quot;product_id&quot;,&quot;product_id&quot;])</span><br><span class="line">table3&#x3D;pd.merge(table2,data3,on&#x3D;[&quot;order_id&quot;,&quot;order_id&quot;])</span><br><span class="line"></span><br><span class="line">#3.交叉表 crosstab()函数</span><br><span class="line">table&#x3D;pd.crosstab(table3[&quot;user_id&quot;],table3[&quot;aisle&quot;])</span><br><span class="line"></span><br><span class="line">#4.PCA降维 PCA()函数</span><br><span class="line">transfer&#x3D;PCA(n_components&#x3D;0.95)  #保留百分之95的数据</span><br><span class="line">data_new&#x3D;transfer.fit_transform(table)  #降维</span><br><span class="line">print(data_new)  #输出PCA降维后的数据</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.15.png" alt></p>
<hr>
<h2 id="sklearn转换器和估计器"><a href="#sklearn转换器和估计器" class="headerlink" title="sklearn转换器和估计器"></a>sklearn转换器和估计器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> 1.特征工程的步骤:</span><br><span class="line">1.1 实例化(实例化的是一个转换器类(Transformer))</span><br><span class="line">1.2 调用fit_transform(对于文档简历分类词频矩阵，不能同时调用)</span><br><span class="line"></span><br><span class="line"> 2.转换器:特征工程的接口</span><br><span class="line">   2.1 转换器的形式:</span><br><span class="line">	2.1.1 fit_transform</span><br><span class="line">	2.1.2 fit</span><br><span class="line">	2.1.3 transform</span><br></pre></td></tr></table></figure>

<h3 id="转换器-fit-transform"><a href="#转换器-fit-transform" class="headerlink" title="转换器(fit_transform)"></a>转换器(fit_transform)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler  #引入特征预处理中的标准化</span><br><span class="line"></span><br><span class="line">#特征预处理</span><br><span class="line">##1.归一化(MinMaxScaler)</span><br><span class="line">##2.标准化(StandardScaler)</span><br><span class="line"></span><br><span class="line">std1&#x3D;StandardScaler()</span><br><span class="line">a&#x3D;[[1,2,3],[4,5,6]]</span><br><span class="line">print(std1.fit_transform(a))</span><br><span class="line"></span><br><span class="line">std2&#x3D;StandardScaler()</span><br><span class="line">print(std2.fit(a))</span><br><span class="line">print(std2.transform(a))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.16.png" alt></p>
<h3 id="估计器-estimator"><a href="#估计器-estimator" class="headerlink" title="估计器(estimator)"></a>估计器(estimator)</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.17.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> 1.估计器的步骤:</span><br><span class="line">1.1 实例化一个estimator</span><br><span class="line">1.2 调用estimator.fit(x_train,y_train)计算 --&gt; 调用完毕，模型生成</span><br><span class="line">1.3 模型评估:</span><br><span class="line">	1.3.1 直接对比真实值和预测值: </span><br><span class="line">		y_predict&#x3D;estimator.predict(x_test)</span><br><span class="line">		y_test&#x3D;&#x3D;y_predict</span><br><span class="line">       1.3.2 计算准确率:</span><br><span class="line">		accuracy&#x3D;estimator.score(x_test,y_test)</span><br></pre></td></tr></table></figure>

<p><strong>估计器的分类:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.18.png" alt></p>
<h2 id="K-近邻算法-sklearn-neighbors-KNeighborsClassifier"><a href="#K-近邻算法-sklearn-neighbors-KNeighborsClassifier" class="headerlink" title="K-近邻算法(sklearn.neighbors.KNeighborsClassifier)"></a>K-近邻算法(sklearn.neighbors.KNeighborsClassifier)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.核心思想: 你的&quot;邻居&quot;来推断你的类别</span><br><span class="line">   2.距离公式: 欧式距离 &#x2F; 明可夫斯基距离</span><br><span class="line">3.API: sklearn.neighbors.KNeighborsClassifier(n_neighbors&#x3D;5,algorithm&#x3D;&#39;auto&#39;)</span><br><span class="line">	3.1 n_neighbors: (默认整数类型为5)  --&gt;通过k_neighbors查询默认使用的邻居数</span><br><span class="line">	3.2 algorithm: 可选用于计算最近邻居的算法[auto&#x2F;ball_tree&#x2F;kd_tree&#x2F;brute]</span><br></pre></td></tr></table></figure>

<h3 id="模型选择与调优-sklearn-model-selection-GridSearchCV"><a href="#模型选择与调优-sklearn-model-selection-GridSearchCV" class="headerlink" title="模型选择与调优(sklearn.model_selection.GridSearchCV)"></a>模型选择与调优(sklearn.model_selection.GridSearchCV)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.交叉验证(cross validation):为了让被评估的模型更加准确可信</span><br><span class="line">     1.1将拿到的训练数据更加细化: </span><br><span class="line">		训练集:训练集+验证集 </span><br><span class="line">		测试集:测试集</span><br><span class="line">2.超参数搜索-网格搜索(Grid Search):</span><br><span class="line">  2.1 超参数:有很多参数是需要手动指定的(如k-近邻算法中的K值)</span><br><span class="line">  2.2 API: sklearn.model_selection.GridSearchCV(estimator,param_grid&#x3D;None,cv&#x3D;None)</span><br><span class="line">	2.2.1 estimator:估计器对象</span><br><span class="line">	2.2.2 param_grid:估计器参数(dict) --&gt; 一般是取字典&#123;&quot;n_neighbors&quot;:[1,3,5]&#125;</span><br><span class="line">	2.2.3 cv:指定几折交叉验证(训练集中训练集和验证集的划分有几次，然后得出平均值)</span><br><span class="line">	2.2.4 fit():输入训练数据</span><br><span class="line">	2.2.5 score()：准确率</span><br></pre></td></tr></table></figure>

<h3 id="电影类型分析"><a href="#电影类型分析" class="headerlink" title="电影类型分析"></a>电影类型分析</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.19.png" alt></p>
<h3 id="鸢尾花分析"><a href="#鸢尾花分析" class="headerlink" title="鸢尾花分析"></a>鸢尾花分析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler  #引入特征预处理中的标准化</span><br><span class="line">from sklearn.datasets import load_iris</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.neighbors import KNeighborsClassifier</span><br><span class="line">#用KNN算法对鸢尾花进行分类</span><br><span class="line">#1.获取数据</span><br><span class="line">iris&#x3D;load_iris()</span><br><span class="line"></span><br><span class="line">#2.划分数据集</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(iris.data,iris.target,random_state&#x3D;6)</span><br><span class="line"></span><br><span class="line">#3.特征工程(标准化)</span><br><span class="line">transfer&#x3D;StandardScaler()</span><br><span class="line">x_train&#x3D;transfer.fit_transform(x_train)</span><br><span class="line">x_test&#x3D;transfer.transform(x_test)</span><br><span class="line"></span><br><span class="line">#4.KNN算法预估器</span><br><span class="line">estimator&#x3D;KNeighborsClassifier(n_neighbors&#x3D;3)</span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line"></span><br><span class="line">#5.模型评估</span><br><span class="line">##方法一:直接对比真实值和预测值</span><br><span class="line">y_predict&#x3D;estimator.predict(x_test)</span><br><span class="line">print(y_test&#x3D;&#x3D;y_predict)</span><br><span class="line">##方法二:计算准确率</span><br><span class="line">score&#x3D;estimator.score(x_test,y_test)</span><br><span class="line">print(&quot;准确率为:&quot;,score)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.20.png" alt></p>
<h3 id="鸢尾花分析-添加网格搜索和交叉验证"><a href="#鸢尾花分析-添加网格搜索和交叉验证" class="headerlink" title="鸢尾花分析(添加网格搜索和交叉验证)"></a>鸢尾花分析(添加网格搜索和交叉验证)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler  #引入特征预处理中的标准化</span><br><span class="line">from sklearn.datasets import load_iris</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.neighbors import KNeighborsClassifier</span><br><span class="line">from sklearn.model_selection import GridSearchCV</span><br><span class="line">#用KNN算法对鸢尾花进行分类</span><br><span class="line">#1.获取数据</span><br><span class="line">iris&#x3D;load_iris()</span><br><span class="line"></span><br><span class="line">#2.划分数据集</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(iris.data,iris.target,random_state&#x3D;6)</span><br><span class="line"></span><br><span class="line">#3.特征工程(标准化)</span><br><span class="line">transfer&#x3D;StandardScaler()</span><br><span class="line">x_train&#x3D;transfer.fit_transform(x_train)</span><br><span class="line">x_test&#x3D;transfer.transform(x_test)</span><br><span class="line"></span><br><span class="line">#4.KNN算法预估器</span><br><span class="line">estimator&#x3D;KNeighborsClassifier()</span><br><span class="line"></span><br><span class="line">##加入网格搜索和交叉验证</span><br><span class="line">param_dict&#x3D;&#123;&quot;n_neighbors&quot;:[1,3,5,7,9,11]&#125;</span><br><span class="line">estimator&#x3D;GridSearchCV(estimator,param_grid&#x3D;param_dict,cv&#x3D;10)</span><br><span class="line"></span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line"></span><br><span class="line">#5.模型评估</span><br><span class="line">##方法一:直接对比真实值和预测值</span><br><span class="line">y_predict&#x3D;estimator.predict(x_test)</span><br><span class="line">print(y_test&#x3D;&#x3D;y_predict)</span><br><span class="line">##方法二:计算准确率</span><br><span class="line">score&#x3D;estimator.score(x_test,y_test)</span><br><span class="line">print(&quot;准确率为:&quot;,score)</span><br><span class="line"></span><br><span class="line">#6.获取结果分析</span><br><span class="line">print(&quot;最佳参数:&quot;,estimator.best_params_)</span><br><span class="line">print(&quot;最佳结果:&quot;,estimator.best_score_)</span><br><span class="line">print(&quot;最佳估计器:&quot;,estimator.best_estimator_)</span><br><span class="line">print(&quot;交叉验证的结果:&quot;,estimator.cv_results_)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.21.png" alt></p>
<h3 id="预测facebook签到位置"><a href="#预测facebook签到位置" class="headerlink" title="预测facebook签到位置"></a>预测facebook签到位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler  #引入特征预处理中的标准化</span><br><span class="line">from sklearn.datasets import load_iris</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.neighbors import KNeighborsClassifier</span><br><span class="line">from sklearn.model_selection import GridSearchCV</span><br><span class="line">#Facebook预测签到位置</span><br><span class="line"></span><br><span class="line">##1.获取数据</span><br><span class="line">data&#x3D;pd.read_csv(&quot;train.csv&quot;)</span><br><span class="line"></span><br><span class="line">##2.数据处理(获取特征值和目标值)</span><br><span class="line">###2.1 缩小数据范围 2&lt;x&lt;2.5 1.0&lt;y&lt;1.5</span><br><span class="line">###2.2 改变time时间 年月日时分秒</span><br><span class="line">###2.3 过滤签到次数少的地点</span><br><span class="line">data&#x3D;data.query(&quot;x&lt;2.5&amp;x&gt;2&amp;y&gt;1.0&amp;y&lt;1.5&quot;)</span><br><span class="line">time_value&#x3D;pd.to_datetime(data[&quot;time&quot;],unit&#x3D;&quot;s&quot;)</span><br><span class="line">data&#x3D;pd.DatetimeIndex(time_value)</span><br><span class="line"></span><br><span class="line">place_count&#x3D;data.groupby(&quot;place_id&quot;)</span><br><span class="line">data_final&#x3D;data[data[&quot;place_id&quot;].isin(place_count[place_count&gt;3].index.values)]</span><br><span class="line">##3.特征工程</span><br><span class="line">x&#x3D;data_final[[&quot;x&quot;,&quot;y&quot;,&quot;accuracy&quot;,&quot;day&quot;,&quot;weekday&quot;,&quot;hour&quot;]]</span><br><span class="line">y&#x3D;data_final[&quot;place_id&quot;]</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(x,y)</span><br><span class="line"></span><br><span class="line">##4.KNN算法预估器</span><br><span class="line">estimator&#x3D;KNeighborsClassifier()</span><br><span class="line"></span><br><span class="line">###加入网格搜索和交叉验证</span><br><span class="line">param_dict&#x3D;&#123;&quot;n_neighbors&quot;:[1,3,5,7,9,11]&#125;</span><br><span class="line">estimator&#x3D;GridSearchCV(estimator,param_grid&#x3D;param_dict,cv&#x3D;10)</span><br><span class="line"></span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line"></span><br><span class="line">##5.模型评估</span><br><span class="line">###方法一:直接对比真实值和预测值</span><br><span class="line">y_predict&#x3D;estimator.predict(x_test)</span><br><span class="line">print(y_test&#x3D;&#x3D;y_predict)</span><br><span class="line">###方法二:计算准确率</span><br><span class="line">score&#x3D;estimator.score(x_test,y_test)</span><br><span class="line">print(&quot;准确率为:&quot;,score)</span><br><span class="line"></span><br><span class="line">##6.获取结果分析</span><br><span class="line">print(&quot;最佳参数:&quot;,estimator.best_params_)</span><br><span class="line">print(&quot;最佳结果:&quot;,estimator.best_score_)</span><br><span class="line">print(&quot;最佳估计器:&quot;,estimator.best_estimator_)</span><br><span class="line">print(&quot;交叉验证的结果:&quot;,estimator.cv_results_)</span><br></pre></td></tr></table></figure>

<h2 id="朴素贝叶斯算法-sklearn-naive-bayes-MultinomialNB-alpha-1-0"><a href="#朴素贝叶斯算法-sklearn-naive-bayes-MultinomialNB-alpha-1-0" class="headerlink" title="朴素贝叶斯算法(sklearn.naive_bayes.MultinomialNB(alpha=1.0))"></a>朴素贝叶斯算法(sklearn.naive_bayes.MultinomialNB(alpha=1.0))</h2><h3 id="条件概率与联合概率"><a href="#条件概率与联合概率" class="headerlink" title="条件概率与联合概率"></a>条件概率与联合概率</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.22.png" alt></p>
<h3 id="贝叶斯公式"><a href="#贝叶斯公式" class="headerlink" title="贝叶斯公式"></a>贝叶斯公式</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.23.png" alt></p>
<h3 id="拉普拉斯平滑系数-防止计算出的分类概率为0"><a href="#拉普拉斯平滑系数-防止计算出的分类概率为0" class="headerlink" title="拉普拉斯平滑系数(防止计算出的分类概率为0)"></a>拉普拉斯平滑系数(防止计算出的分类概率为0)</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.24.png" alt></p>
<h3 id="文本分类分析-新闻分类"><a href="#文本分类分析-新闻分类" class="headerlink" title="文本分类分析(新闻分类)"></a>文本分类分析(新闻分类)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler  #引入特征预处理中的标准化</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.neighbors import KNeighborsClassifier</span><br><span class="line">from sklearn.model_selection import GridSearchCV</span><br><span class="line">from sklearn.naive_bayes import MultinomialNB</span><br><span class="line">from sklearn.datasets import fetch_20newsgroups  #引入新闻数据集</span><br><span class="line">from sklearn.feature_extraction.text import TfidfVectorizer #文本提取的库</span><br><span class="line">#1.获取数据</span><br><span class="line">news&#x3D;fetch_20newsgroups(subset&#x3D;&quot;all&quot;)</span><br><span class="line">#2.划分数据集</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(news.data,news.target)</span><br><span class="line">#3.特征工程</span><br><span class="line">transfer&#x3D;TfidfVectorizer()</span><br><span class="line">##3.1文本特征提取</span><br><span class="line">x_train&#x3D;transfer.fit_transform(x_train)</span><br><span class="line">x_test&#x3D;transfer.transform(x_test)</span><br><span class="line">#4.朴素贝叶斯预估器流程</span><br><span class="line">estimator&#x3D;MultinomialNB()</span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line">#5.模型评估</span><br><span class="line">##方法一:直接对比真实值和预测值</span><br><span class="line">y_predict&#x3D;estimator.predict(x_test)</span><br><span class="line">print(y_test&#x3D;&#x3D;y_predict)</span><br><span class="line">##方法二:计算准确率</span><br><span class="line">score&#x3D;estimator.score(x_test,y_test)</span><br><span class="line">print(&quot;准确率为:&quot;,score)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.25.png" alt></p>
<h2 id="决策树-sklearn-tree-DecisionTreeClassifier"><a href="#决策树-sklearn-tree-DecisionTreeClassifier" class="headerlink" title="决策树(sklearn.tree.DecisionTreeClassifier)"></a>决策树(sklearn.tree.DecisionTreeClassifier)</h2><h3 id="信息论基础"><a href="#信息论基础" class="headerlink" title="信息论基础"></a>信息论基础</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.26.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.信息:</span><br><span class="line">  香农:消除随机不定性的东西</span><br><span class="line">  例:小明 年龄未知 &quot;我今年18岁了&quot; (我可以通过说的这句话推断出年龄，消除了不知道的年龄)--就是信息  	 </span><br><span class="line">        小华 &quot;小明明年19岁&quot; (因为小明的话已经推断出年龄，所以这句话不算消除) --不是信息	</span><br><span class="line">   2.信息的衡量(信息商&#x2F;信息熵)</span><br><span class="line">3.信息增益[g(D,A)]&#x3D;信息熵[H(D)]-条件熵[H(D|A)]</span><br></pre></td></tr></table></figure>

<h3 id="决策树划分依据-3种"><a href="#决策树划分依据-3种" class="headerlink" title="决策树划分依据(3种)"></a>决策树划分依据(3种)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. ID3  信息增益(最大的准则)</span><br><span class="line">2. C4.5 信息增益比(最大的准则)</span><br><span class="line">3. CART 分类树:基尼系数(最小的准则) 在sklearn中可以选择划分的默认原则</span><br></pre></td></tr></table></figure>

<h3 id="决策树的实现"><a href="#决策树的实现" class="headerlink" title="决策树的实现"></a>决策树的实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sklearn.tree.DecisionTreeClassifier(criterion&#x3D;&#39;gini&#39;,max_depth&#x3D;None,random_state&#x3D;None)</span><br><span class="line"> 1.决策树分类器</span><br><span class="line"> 2.criterion: 默认是gini系数(也可以选择信息增益的熵entropy)</span><br><span class="line"> 3.2.</span><br><span class="line"> 4.random_state: 随机数种子</span><br></pre></td></tr></table></figure>
<h3 id="鸢尾花预测"><a href="#鸢尾花预测" class="headerlink" title="鸢尾花预测"></a>鸢尾花预测</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler  #引入特征预处理中的标准化</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.feature_extraction.text import TfidfVectorizer #文本提取的库</span><br><span class="line">from sklearn.tree import DecisionTreeClassifier #决策树</span><br><span class="line">from sklearn.datasets import load_iris  #传入鸢尾花数据集</span><br><span class="line">#1.获取数据</span><br><span class="line">iris&#x3D;load_iris()</span><br><span class="line">#2.划分数据集</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(iris.data,iris.target,random_state&#x3D;22)</span><br><span class="line">#4.决策树预估器流程</span><br><span class="line">estimator&#x3D;DecisionTreeClassifier(criterion&#x3D;&#39;entropy&#39;) #设置为数据增益</span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line">#5.模型评估</span><br><span class="line">##方法一:直接对比真实值和预测值</span><br><span class="line">y_predict&#x3D;estimator.predict(x_test)</span><br><span class="line">print(y_test&#x3D;&#x3D;y_predict)</span><br><span class="line">##方法二:计算准确率</span><br><span class="line">score&#x3D;estimator.score(x_test,y_test)</span><br><span class="line">print(&quot;准确率为:&quot;,score)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.27.png" alt></p>
<h3 id="决策树可视化-sklearn-tree-export-graphviz-导出DOT格式"><a href="#决策树可视化-sklearn-tree-export-graphviz-导出DOT格式" class="headerlink" title="决策树可视化(sklearn.tree.export_graphviz()导出DOT格式)"></a>决策树可视化(sklearn.tree.export_graphviz()导出DOT格式)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sklearn.tree.export_graphviz()该函数能够导出DOT格式</span><br><span class="line"> 1.决策树可视化</span><br><span class="line"> 2.estimator: 预估器对象</span><br><span class="line"> 3.out_file: 输出名称</span><br><span class="line">    4.feature_names:特征的名字</span><br><span class="line"></span><br><span class="line">得到dot文件之后复制内容去http:&#x2F;&#x2F;webgraphviz.com&#x2F;执行</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.28.png" alt></p>
<h3 id="泰坦尼克号乘客生存预测"><a href="#泰坦尼克号乘客生存预测" class="headerlink" title="泰坦尼克号乘客生存预测"></a>泰坦尼克号乘客生存预测</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.preprocessing import StandardScaler  #引入特征预处理中的标准化</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.feature_extraction import DictVectorizer  #缺失值处理</span><br><span class="line">from sklearn.feature_extraction.text import TfidfVectorizer #文本提取的库</span><br><span class="line">from sklearn.tree import DecisionTreeClassifier #决策树</span><br><span class="line">from sklearn.tree import export_graphviz #决策树可视化</span><br><span class="line">#1.获取数据</span><br><span class="line">titanic&#x3D;pd.read_csv(&#39;http:&#x2F;&#x2F;biostat.mc.vanderbilt.edu&#x2F;wiki&#x2F;pub&#x2F;Main&#x2F;DataSets&#x2F;titanic.txt&#39;)</span><br><span class="line">##1.1数据处理</span><br><span class="line">x&#x3D;titanic[[&#39;pclass&#39;,&#39;age&#39;,&#39;sex&#39;]]</span><br><span class="line">y&#x3D;titanic[&#39;survived&#39;]</span><br><span class="line">##1.2缺失值处理(将特征当中有类别的特征进行字典特征抽取)</span><br><span class="line">x[&#39;age&#39;].fillna(x[&#39;age&#39;].mean(),inplace&#x3D;True)</span><br><span class="line">dict&#x3D;DictVectorizer(sparse&#x3D;False)</span><br><span class="line">x&#x3D;dict.fit_transform(x.to_dict(orient&#x3D;&quot;records&quot;))</span><br><span class="line">#2.划分数据集</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(x,y,test_size&#x3D;0.3)</span><br><span class="line">#3.决策树预估器流程</span><br><span class="line">estimator&#x3D;DecisionTreeClassifier(max_depth&#x3D;5) #设置为数据增益</span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line">#4.模型评估</span><br><span class="line">score&#x3D;estimator.score(x_test,y_test)</span><br><span class="line">print(&quot;准确率为:&quot;,score)</span><br></pre></td></tr></table></figure>

<h2 id="随机森林-sklearn-ensemble-RandomForestClassifier"><a href="#随机森林-sklearn-ensemble-RandomForestClassifier" class="headerlink" title="随机森林(sklearn.ensemble.RandomForestClassifier)"></a>随机森林(sklearn.ensemble.RandomForestClassifier)</h2><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.29.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.随机森林: 一个包含多个决策树的分类器(输出的类型是通过个别树输出的类别的众数决定)</span><br><span class="line">2.随机:</span><br><span class="line">  2.1 训练集随机: bootstrap随机有放回抽样 </span><br><span class="line">  2.2 特征随机: 从M个特征中随机抽取m个特征(很像降维)</span><br><span class="line"></span><br><span class="line">3.API: sklearn.ensemble.RandomForestClassifier</span><br><span class="line">  3.1 随机森林分类器</span><br><span class="line">  3.2 n_estimators: 几个估计器</span><br><span class="line">     3.3 criterion: 默认gini系数，(也可以使用信息增益的熵entropy)</span><br><span class="line">  3.4 max_depth: 树的深度</span><br><span class="line">     3.5 bootstrap: 是否设置随机有放回抽样</span><br><span class="line">  3.6 random_state:  </span><br><span class="line">  3.7 min_samples_split:</span><br></pre></td></tr></table></figure>

<h1 id="回归问题"><a href="#回归问题" class="headerlink" title="回归问题"></a>回归问题</h1><h2 id="线性回归"><a href="#线性回归" class="headerlink" title="线性回归"></a>线性回归</h2><h3 id="线性回归定义"><a href="#线性回归定义" class="headerlink" title="线性回归定义"></a>线性回归定义</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.基本概念:通过回归方程(函数)对一个&#x2F;多个自变量(特征值)和因变量(目标值)之间关系进行建模的一种分析方式</span><br><span class="line">2.线性模型(回归方程):特征值和目标值之间建立一个关系</span><br><span class="line">	3.线性模型分类:</span><br><span class="line">	3.1 线性关系   </span><br><span class="line">		3.1.1 直线关系: 单特征与目标值的关系</span><br><span class="line">		3.1.2 平面关系: 两个特征与目标值的关系</span><br><span class="line">	3.2 非线性关系 </span><br><span class="line">		3.2.1 自变量一次: y&#x3D;ax1+bx2+cx3+....+b (最多是x的一次方)</span><br><span class="line">		3.2.2 参数一次: y&#x3D;ax1+bx2^2+cx3^3+...+b (a1&#x2F;b&#x2F;c等等都是一次)</span><br></pre></td></tr></table></figure>

<p><strong>线性回归通用公式:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.30.png" alt></p>
<h3 id="最小二乘法-损失函数"><a href="#最小二乘法-损失函数" class="headerlink" title="最小二乘法(损失函数)"></a>最小二乘法(损失函数)</h3><p><strong>最小二乘法公式:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.31.png" alt></p>
<h3 id="优化方法之正规方程-直接求解sklearn-linear-model-LinearRegression"><a href="#优化方法之正规方程-直接求解sklearn-linear-model-LinearRegression" class="headerlink" title="优化方法之正规方程(直接求解sklearn.linear_model.LinearRegression)"></a>优化方法之正规方程(直接求解sklearn.linear_model.LinearRegression)</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.32.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> sklearn.linear_model.LinearRegression(fit_intercept&#x3D;True)</span><br><span class="line">1.fit_intercept: 是否计算偏置</span><br><span class="line">2.LinearRegression.coef_: 回归系数</span><br><span class="line">3.LinearRegression.intercept_: 偏置</span><br></pre></td></tr></table></figure>

<h3 id="优化方法之梯度下降-不断试错sklearn-linear-model-SGDRegressor"><a href="#优化方法之梯度下降-不断试错sklearn-linear-model-SGDRegressor" class="headerlink" title="优化方法之梯度下降(不断试错sklearn.linear_model.SGDRegressor)"></a>优化方法之梯度下降(不断试错sklearn.linear_model.SGDRegressor)</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.33.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> sklearn.linear_model.SGDRegressor(loss&#x3D;&quot;squared_loss&quot;,fit_intercept&#x3D;True,learing_rate&#x3D;&#39;invscaling&#39;,eta0&#x3D;0.01)</span><br><span class="line">1.SGDRegressor类实现了随机梯度下降学习(支持不同的loss函数和正则化惩罚项来拟合线性回归模型)</span><br><span class="line">2.loss: 默认是普通最小二乘法squared_loss</span><br><span class="line">3.fit_intercept: 是否计算偏置</span><br><span class="line">4.learing_rate: 学习率填充</span><br><span class="line">	4.1 constant(常数值的学习率): eta&#x3D;eta0</span><br><span class="line">	4.2 optimal(默认): eta&#x3D;1.0&#x2F;(alpha&#x3D;*(t+t0)) </span><br><span class="line">	4.3 invscaling: eta&#x3D;eta0&#x2F;pow(t,power_t) [power_t&#x3D;0.25存在父类当中]</span><br><span class="line">	4.4 SGDRegressor.coef_: 回归系数</span><br><span class="line">	4.5 SGDRegressor.intercept_: 偏置</span><br></pre></td></tr></table></figure>

<h3 id="波士顿房价预测-正规方程和梯度下降对比"><a href="#波士顿房价预测-正规方程和梯度下降对比" class="headerlink" title="波士顿房价预测(正规方程和梯度下降对比)"></a>波士顿房价预测(正规方程和梯度下降对比)</h3><h4 id="正则方程"><a href="#正则方程" class="headerlink" title="正则方程"></a>正则方程</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.datasets import load_boston #导入波士顿数据集</span><br><span class="line">from sklearn.model_selection import train_test_split #划分数据集</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model import LinearRegression</span><br><span class="line">#1.获取数据集</span><br><span class="line">boston&#x3D;load_boston()</span><br><span class="line">#2.划分数据集</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(boston.data,boston.target,random_state&#x3D;22)</span><br><span class="line">#3.标准化</span><br><span class="line">transfer&#x3D;StandardScaler()</span><br><span class="line">x_train&#x3D;transfer.fit_transform(x_train) #训练集</span><br><span class="line">x_test&#x3D;transfer.transform(x_test) #测试集</span><br><span class="line">#4.决策树预估器流程</span><br><span class="line">estimator&#x3D;LinearRegression()</span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line">##得出模型</span><br><span class="line">print(&quot;权重系数为:&quot;,estimator.coef_)</span><br><span class="line">print(&quot;偏置为:&quot;,estimator.intercept_)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.34.png" alt></p>
<h4 id="梯度下降"><a href="#梯度下降" class="headerlink" title="梯度下降"></a>梯度下降</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.datasets import load_boston #导入波士顿数据集</span><br><span class="line">from sklearn.model_selection import train_test_split #划分数据集</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model.stochastic_gradient import SGDRegressor</span><br><span class="line">#1.获取数据集</span><br><span class="line">boston&#x3D;load_boston()</span><br><span class="line">#2.划分数据集</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(boston.data,boston.target,random_state&#x3D;22)</span><br><span class="line">#3.标准化</span><br><span class="line">transfer&#x3D;StandardScaler()</span><br><span class="line">x_train&#x3D;transfer.fit_transform(x_train) #训练集</span><br><span class="line">x_test&#x3D;transfer.transform(x_test) #测试集</span><br><span class="line">#4.决策树预估器流程</span><br><span class="line">estimator&#x3D;SGDRegressor()</span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line">##得出模型</span><br><span class="line">print(&quot;权重系数为:&quot;,estimator.coef_)</span><br><span class="line">print(&quot;偏置为:&quot;,estimator.intercept_)</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.35.png" alt></p>
<h4 id="两者对比"><a href="#两者对比" class="headerlink" title="两者对比"></a>两者对比</h4><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.38.png" alt></p>
<h3 id="回归性能评估-sklearn-metrics-mean-squared-error"><a href="#回归性能评估-sklearn-metrics-mean-squared-error" class="headerlink" title="回归性能评估(sklearn.metrics.mean_squared_error)"></a>回归性能评估(sklearn.metrics.mean_squared_error)</h3><p><strong>回归性能评估公式:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.36.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	1.API: sklearn.metrics.mean_squared_error(y_true,y_pred)</span><br><span class="line">	  1.1 均方误差回归损失</span><br><span class="line">	  1.2 y_true: 真实值</span><br><span class="line">	  1.3 y_pred: 预测值</span><br><span class="line"></span><br><span class="line">#在之前的基础上:</span><br><span class="line">from sklearn.metrics import mean_squared_error</span><br><span class="line">#5.模型评估</span><br><span class="line">y_predict&#x3D;estimator.predict(x_test)</span><br><span class="line">print(&quot;预测房价:&quot;,y_predict)</span><br><span class="line">error&#x3D;mean_squared_error(y_test,y_predict)</span><br><span class="line">print(&quot;梯度下降的-均方误差为:&quot;,error)</span><br></pre></td></tr></table></figure>

<p><strong>刚才的波士顿房价上进行预测:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.37.png" alt></p>
<h3 id="梯度下降优化方法-GD-SGD-SAG"><a href="#梯度下降优化方法-GD-SGD-SAG" class="headerlink" title="梯度下降优化方法(GD/SGD/SAG)"></a>梯度下降优化方法(GD/SGD/SAG)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.GD(原始的):计算所有样本的值才能够得到梯度(计算量大)</span><br><span class="line">	</span><br><span class="line">2.SGD(随机梯度下降):一次迭代只考虑一个训练样本</span><br><span class="line"></span><br><span class="line">3.SAG(随机平均梯度法):提高收敛速度(SGDRegressor和岭回归以及逻辑回归中都会有SAG优化)</span><br></pre></td></tr></table></figure>

<h2 id="欠拟合与过拟合"><a href="#欠拟合与过拟合" class="headerlink" title="欠拟合与过拟合()"></a>欠拟合与过拟合()</h2><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.39.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> 训练集很合理，测试集不行</span><br><span class="line">1.欠拟合:一个假设在训练数据上不能够获得比其他假设更好的拟合，测试集上不能很好拟合(学的特征太少)</span><br><span class="line">  1.1 原因:学习的特征过少</span><br><span class="line">  1.2 解决方法:增加数据的特征数量</span><br><span class="line"></span><br><span class="line">2.过拟合:一个假设在训练数据上能够获得比其他假设更好的拟合，测试集上不能很好拟合(学的特征太多)</span><br><span class="line">  2.1 原因:原始特征过多，存在一些嘈杂特征，模型过于复杂</span><br><span class="line">  2.2 解决方法:正则化</span><br></pre></td></tr></table></figure>

<h3 id="正则化"><a href="#正则化" class="headerlink" title="正则化"></a>正则化</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. L1正则化:可以使得其中一些w的值直接为0，删除这个特征的影响  (LASSO回归)</span><br><span class="line"></span><br><span class="line">2. L2正则化:可以使得其中一些w都很小，都接近0，削弱某个特征的影响  (Ridge回归)</span><br></pre></td></tr></table></figure>

<h2 id="岭回归-带L2正则化的线性回归"><a href="#岭回归-带L2正则化的线性回归" class="headerlink" title="岭回归(带L2正则化的线性回归)"></a>岭回归(带L2正则化的线性回归)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.API: sklearn.linear_model.Ridge(alpha&#x3D;1.0,fit_intercept&#x3D;True,solver&#x3D;&quot;auto&quot;,normalize&#x3D;False)</span><br><span class="line">  1.1 alpha: 正则化力度 (0-1 1-10)</span><br><span class="line">  	  1.2 solver: 会根据数据自动选择优化方法(如果数据集和特征都较大会使用SAG随机平均梯度法)</span><br><span class="line">     1.3 normalize: 数据是否进行标准化</span><br><span class="line">     1.4 Ridge.coef_: 回归权重</span><br><span class="line">  1.5 Ridge.intercept_: 回归偏置</span><br></pre></td></tr></table></figure>

<h3 id="波士顿房价预测-岭回归Ridge"><a href="#波士顿房价预测-岭回归Ridge" class="headerlink" title="波士顿房价预测(岭回归Ridge)"></a>波士顿房价预测(岭回归Ridge)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.datasets import load_boston #导入波士顿数据集</span><br><span class="line">from sklearn.model_selection import train_test_split #划分数据集</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model import Ridge</span><br><span class="line">#1.获取数据集</span><br><span class="line">boston&#x3D;load_boston()</span><br><span class="line">#2.划分数据集</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(boston.data,boston.target,random_state&#x3D;22)</span><br><span class="line">#3.标准化</span><br><span class="line">transfer&#x3D;StandardScaler()</span><br><span class="line">x_train&#x3D;transfer.fit_transform(x_train) #训练集</span><br><span class="line">x_test&#x3D;transfer.transform(x_test) #测试集</span><br><span class="line">#4.决策树预估器流程</span><br><span class="line">estimator&#x3D;Ridge()</span><br><span class="line">estimator.fit(x_train,y_train)</span><br><span class="line">##得出模型</span><br><span class="line">print(&quot;权重系数为:&quot;,estimator.coef_)</span><br><span class="line">print(&quot;偏置为:&quot;,estimator.intercept_)</span><br></pre></td></tr></table></figure>

<h1 id="分类算法"><a href="#分类算法" class="headerlink" title="分类算法"></a>分类算法</h1><h2 id="逻辑回归"><a href="#逻辑回归" class="headerlink" title="逻辑回归"></a>逻辑回归</h2><h3 id="逻辑回归概念"><a href="#逻辑回归概念" class="headerlink" title="逻辑回归概念"></a>逻辑回归概念</h3><p><strong>sigmoid函数</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.40.png" alt></p>
<h3 id="逻辑回归过程"><a href="#逻辑回归过程" class="headerlink" title="逻辑回归过程"></a>逻辑回归过程</h3><p><strong>流程:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.41.png" alt></p>
<h3 id="逻辑回归损失-对数似然损失"><a href="#逻辑回归损失-对数似然损失" class="headerlink" title="逻辑回归损失(对数似然损失)"></a>逻辑回归损失(对数似然损失)</h3><p><strong>对数似然损失:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.42.png" alt></p>
<p><strong>综合完整损失函数:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.43.png" alt></p>
<h3 id="逻辑回归损失优化-梯度下降"><a href="#逻辑回归损失优化-梯度下降" class="headerlink" title="逻辑回归损失优化(梯度下降)"></a>逻辑回归损失优化(梯度下降)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">减少损失函数的值 --&gt; 更新逻辑回归前面对应算法的权重参数 --&gt; 提升原本属于1类别的概率，降低原本属于0类别的概率</span><br></pre></td></tr></table></figure>

<h3 id="逻辑回归API-sklearn-linear-model-LogisticRegression"><a href="#逻辑回归API-sklearn-linear-model-LogisticRegression" class="headerlink" title="逻辑回归API(sklearn.linear_model.LogisticRegression)"></a>逻辑回归API(sklearn.linear_model.LogisticRegression)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. sklearn.linear_model.LogisticRegression(solver&#x3D;&#39;liblinear&#39;,penalty&#x3D;&#39;l2&#39;,c&#x3D;1.0)</span><br><span class="line">  1.1 solver: 优化求解方式(默认开源的liblinear库实现,内部使用了坐标轴下降法来迭代优化损失函数)</span><br><span class="line">  1.2 penalty: 正则化的种类(l1和l2(默认))</span><br><span class="line">  1.3 c: 正则化力度</span><br></pre></td></tr></table></figure>

<h3 id="癌症分类"><a href="#癌症分类" class="headerlink" title="癌症分类"></a>癌症分类</h3><p><strong>数据描述:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1.原始数据:https:&#x2F;&#x2F;archive.ics.uci.edu&#x2F;ml&#x2F;machine-learning-databases&#x2F;breast-cancer-wisconsin&#x2F;</span><br><span class="line">2.数据分析:</span><br><span class="line">  2.1 一共699条样本，共11列数据(第一列id,后9列分别是与肿瘤相关的医学特征，最后一列表示肿瘤类型的数值)</span><br><span class="line">  2.2 包含16个缺失值(用？标出)</span><br><span class="line"></span><br><span class="line">3.流程分析:</span><br><span class="line">  3.1 获取数据(读取时加上names)</span><br><span class="line">     3.2 数据处理(处理缺失值)</span><br><span class="line">     3.3 数据集划分</span><br><span class="line">     3.4 特征工程(无量纲化处理-标准化)</span><br><span class="line">  3.5 逻辑回归预估器</span><br><span class="line">  3.6 模型评估</span><br></pre></td></tr></table></figure>

<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">#3.1 获取数据(读取时加上names)</span><br><span class="line">path&#x3D;&quot;https:&#x2F;&#x2F;archive.ics.uci.edu&#x2F;ml&#x2F;machine-learning-databases&#x2F;breast-cancer-wisconsin&#x2F;breast-cancer-wisconsin.data&quot;</span><br><span class="line">column_name &#x3D; [&#39;Sample code number&#39;, &#39;Clump Thickness&#39;, &#39;Uniformity of Cell Size&#39;, &#39;Uniformity of Cell Shape&#39;, &#39;Marginal Adhesion&#39;, &#39;Single Epithelial Cell Size&#39;, &#39;Bare Nuclei&#39;, &#39;Bland Chromatin&#39;, &#39;Normal Nucleoli&#39;, &#39;Mitoses&#39;, &#39;Class&#39;]</span><br><span class="line">data&#x3D;pd.read_csv(path,names&#x3D;column_name)</span><br><span class="line">print(data)</span><br><span class="line">#3.2 数据处理(处理缺失值)</span><br><span class="line">data&#x3D;data.replace(to_replace&#x3D;&#39;?&#39;,value&#x3D;np.nan)  #将所有缺失值用NaN替换？</span><br><span class="line">data&#x3D;data.dropna()  #删掉所有NaN值</span><br><span class="line">#3.3 数据集划分</span><br><span class="line">x&#x3D;data[column_name[1:10]]</span><br><span class="line">y&#x3D;data[column_name[10]]</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(x,y,test_size&#x3D;0.3)</span><br><span class="line">#3.4 特征工程(无量纲化处理-标准化)</span><br><span class="line">std&#x3D;StandardScaler()</span><br><span class="line">x_train&#x3D;std.fit_transform(x_train)</span><br><span class="line">x_test&#x3D;std.transform(x_test)</span><br><span class="line">#3.5 逻辑回归预估器</span><br><span class="line">lr&#x3D;LogisticRegression()</span><br><span class="line">lr.fit(x_train,y_train)</span><br><span class="line">#3.6 模型评估</span><br><span class="line">print(&quot;得出来的权重:&quot;,lr.coef_)</span><br><span class="line">print(&quot;预测的类别:&quot;,lr.predict(x_test))</span><br><span class="line">print(&quot;预测的准确率:&quot;,lr.score(x_test,y_test))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.44.png" alt></p>
<h2 id="分类的评估方法-sklearn-metrics-classification-report"><a href="#分类的评估方法-sklearn-metrics-classification-report" class="headerlink" title="分类的评估方法(sklearn.metrics.classification_report)"></a>分类的评估方法(sklearn.metrics.classification_report)</h2><h3 id="混淆矩阵"><a href="#混淆矩阵" class="headerlink" title="混淆矩阵"></a>混淆矩阵</h3><p><strong>混淆矩阵:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.45.png" alt></p>
<h3 id="精确率-Precision-与召回率-Recall"><a href="#精确率-Precision-与召回率-Recall" class="headerlink" title="精确率(Precision)与召回率(Recall)"></a>精确率(Precision)与召回率(Recall)</h3><p><strong>精确率:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.46.png" alt></p>
<p><strong>召回率:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.47.png" alt></p>
<h3 id="F1-score"><a href="#F1-score" class="headerlink" title="F1-score"></a>F1-score</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.48.png" alt></p>
<h3 id="分类评估预测API"><a href="#分类评估预测API" class="headerlink" title="分类评估预测API"></a>分类评估预测API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.sklearn.metrics.classification_report(y_true,y_pred,labels&#x3D;[],target_names&#x3D;None)</span><br><span class="line">  1.1 y_true: 真实目标值</span><br><span class="line">	  1.2 y_pred: 估计器预测目标值</span><br><span class="line">  1.3 labels: 指定类别对应的数字</span><br><span class="line">     1.4 target_names: 目标类别名称</span><br><span class="line">     1.5 return: 每个类别精准率与召回率</span><br></pre></td></tr></table></figure>

<p><strong>上面基础上加入分类评估</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">from sklearn.metrics import classification_report</span><br><span class="line">#3.1 获取数据(读取时加上names)</span><br><span class="line">path&#x3D;&quot;https:&#x2F;&#x2F;archive.ics.uci.edu&#x2F;ml&#x2F;machine-learning-databases&#x2F;breast-cancer-wisconsin&#x2F;breast-cancer-wisconsin.data&quot;</span><br><span class="line">column_name &#x3D; [&#39;Sample code number&#39;, &#39;Clump Thickness&#39;, &#39;Uniformity of Cell Size&#39;, &#39;Uniformity of Cell Shape&#39;, &#39;Marginal Adhesion&#39;, &#39;Single Epithelial Cell Size&#39;, &#39;Bare Nuclei&#39;, &#39;Bland Chromatin&#39;, &#39;Normal Nucleoli&#39;, &#39;Mitoses&#39;, &#39;Class&#39;]</span><br><span class="line">data&#x3D;pd.read_csv(path,names&#x3D;column_name)</span><br><span class="line">#3.2 数据处理(处理缺失值)</span><br><span class="line">data&#x3D;data.replace(to_replace&#x3D;&#39;?&#39;,value&#x3D;np.nan)</span><br><span class="line">data&#x3D;data.dropna()</span><br><span class="line">#3.3 数据集划分</span><br><span class="line">x&#x3D;data[column_name[1:10]]</span><br><span class="line">y&#x3D;data[column_name[10]]</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(x,y,test_size&#x3D;0.3)</span><br><span class="line">#3.4 特征工程(无量纲化处理-标准化)</span><br><span class="line">std&#x3D;StandardScaler()</span><br><span class="line">x_train&#x3D;std.fit_transform(x_train)</span><br><span class="line">x_test&#x3D;std.transform(x_test)</span><br><span class="line">#3.5 逻辑回归预估器</span><br><span class="line">lr&#x3D;LogisticRegression()</span><br><span class="line">lr.fit(x_train,y_train)</span><br><span class="line">print(&quot;得出来的权重:&quot;,lr.coef_)</span><br><span class="line">print(&quot;预测的类别:&quot;,lr.predict(x_test))</span><br><span class="line">print(&quot;预测的准确率:&quot;,lr.score(x_test,y_test))</span><br><span class="line"></span><br><span class="line">#3.6 模型评估</span><br><span class="line">print(&quot;精确率和召回率为:&quot;,classification_report(y_test,lr.predict(x_test),labels&#x3D;[2,4],target_names&#x3D;[&#39;良性&#39;,&#39;恶性&#39;]))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.49.png" alt></p>
<h3 id="TPR和FPR"><a href="#TPR和FPR" class="headerlink" title="TPR和FPR"></a>TPR和FPR</h3><p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.50.png" alt></p>
<h3 id="ROC曲线"><a href="#ROC曲线" class="headerlink" title="ROC曲线"></a>ROC曲线</h3><p><strong>通过FPR和TPR来构成:</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.51.png" alt></p>
<h3 id="AUC指标-sklearn-metrics-roc-auc-score"><a href="#AUC指标-sklearn-metrics-roc-auc-score" class="headerlink" title="AUC指标(sklearn.metrics.roc_auc_score)"></a>AUC指标(sklearn.metrics.roc_auc_score)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.AUC的概率意义: 随机取一对正负样本,正样本得分&gt;负样本的概率</span><br><span class="line">2.AUC取值范围: 0.5-1(取值越高越好，说明TPR高)</span><br><span class="line">  2.1 0.5&lt;AUC&lt;1: 优于随机猜测</span><br><span class="line">  2.2 AUC&#x3D;1：完美分类器(不管怎么设定阈值都能完美预测)  </span><br><span class="line">3.API: sklearn.metrics.roc_auc_score(y_true,y_score)</span><br><span class="line">  3.1 计算ROC曲线面积(AUC值)</span><br><span class="line">  3.2 y_true: 每个样本的真实类别(必须为0&#x2F;1)</span><br><span class="line">  3.3 y_score: 每个样本预测的概率值</span><br></pre></td></tr></table></figure>

<p><strong>上面基础上加入auc指标</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">import numpy as np</span><br><span class="line">import pandas as pd</span><br><span class="line">from sklearn.model_selection import train_test_split</span><br><span class="line">from sklearn.preprocessing import StandardScaler</span><br><span class="line">from sklearn.linear_model import LogisticRegression</span><br><span class="line">from sklearn.metrics import classification_report</span><br><span class="line">from sklearn.metrics import roc_auc_score</span><br><span class="line">#3.1 获取数据(读取时加上names)</span><br><span class="line">path&#x3D;&quot;https:&#x2F;&#x2F;archive.ics.uci.edu&#x2F;ml&#x2F;machine-learning-databases&#x2F;breast-cancer-wisconsin&#x2F;breast-cancer-wisconsin.data&quot;</span><br><span class="line">column_name &#x3D; [&#39;Sample code number&#39;, &#39;Clump Thickness&#39;, &#39;Uniformity of Cell Size&#39;, &#39;Uniformity of Cell Shape&#39;, &#39;Marginal Adhesion&#39;, &#39;Single Epithelial Cell Size&#39;, &#39;Bare Nuclei&#39;, &#39;Bland Chromatin&#39;, &#39;Normal Nucleoli&#39;, &#39;Mitoses&#39;, &#39;Class&#39;]</span><br><span class="line">data&#x3D;pd.read_csv(path,names&#x3D;column_name)</span><br><span class="line">#3.2 数据处理(处理缺失值)</span><br><span class="line">data&#x3D;data.replace(to_replace&#x3D;&#39;?&#39;,value&#x3D;np.nan)</span><br><span class="line">data&#x3D;data.dropna()</span><br><span class="line">#3.3 数据集划分</span><br><span class="line">x&#x3D;data[column_name[1:10]]</span><br><span class="line">y&#x3D;data[column_name[10]]</span><br><span class="line">x_train,x_test,y_train,y_test&#x3D;train_test_split(x,y,test_size&#x3D;0.3)</span><br><span class="line">#3.4 特征工程(无量纲化处理-标准化)</span><br><span class="line">std&#x3D;StandardScaler()</span><br><span class="line">x_train&#x3D;std.fit_transform(x_train)</span><br><span class="line">x_test&#x3D;std.transform(x_test)</span><br><span class="line">#3.5 逻辑回归预估器</span><br><span class="line">lr&#x3D;LogisticRegression()</span><br><span class="line">lr.fit(x_train,y_train)</span><br><span class="line">print(&quot;得出来的权重:&quot;,lr.coef_)</span><br><span class="line">print(&quot;预测的类别:&quot;,lr.predict(x_test))</span><br><span class="line">print(&quot;预测的准确率:&quot;,lr.score(x_test,y_test))</span><br><span class="line"></span><br><span class="line">#3.6 模型评估</span><br><span class="line">print(&quot;精确率和召回率为:&quot;,classification_report(y_test,lr.predict(x_test),labels&#x3D;[2,4],target_names&#x3D;[&#39;良性&#39;,&#39;恶性&#39;]))</span><br><span class="line">y_test&#x3D;np.where(y_test&gt;2.5,1,0) #将2和4转换为0和1用于auc的参数</span><br><span class="line">print(&quot;auc&quot;,roc_auc_score(y_test,lr.predict(x_test)))</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/4.52.png" alt></p>
<h1 id="模型保存和加载-sklearn-externals-joblib"><a href="#模型保存和加载-sklearn-externals-joblib" class="headerlink" title="模型保存和加载(sklearn.externals.joblib)"></a>模型保存和加载(sklearn.externals.joblib)</h1><h2 id="sklearn模型API"><a href="#sklearn模型API" class="headerlink" title="sklearn模型API"></a>sklearn模型API</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.sklearn.externals.joblib</span><br><span class="line">  1.1 保存: joblib.dump(estimator,&#39;test.pkl&#39;)  #后缀为pkl文件</span><br><span class="line">  1.2 加载: estimator&#x3D;joblib.load(&#39;test.pkl&#39;)</span><br></pre></td></tr></table></figure>

<h1 id="无监督学习"><a href="#无监督学习" class="headerlink" title="无监督学习"></a>无监督学习</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.聚类: K-means算法(K均值聚类)</span><br><span class="line">2.降维: PCA</span><br></pre></td></tr></table></figure>

<h2 id="K-means算法-sklearn-cluster-KMeans"><a href="#K-means算法-sklearn-cluster-KMeans" class="headerlink" title="K-means算法(sklearn.cluster.KMeans)"></a>K-means算法(sklearn.cluster.KMeans)</h2><p><strong>四步骤示意图</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、随机设置K个特征空间内的点作为初始的聚类中心</span><br><span class="line">2、对于其他每个点计算到K个中心的距离，未知的点选择最近的一个聚类中心点作为标记类别</span><br><span class="line">3、接着对着标记的聚类中心之后，重新计算出每个聚类的新中心点（平均值）</span><br><span class="line">4、如果计算得出的新中心点与原中心点一样，那么结束，否则重新进行第二步过程</span><br></pre></td></tr></table></figure>

<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/53.png" alt></p>
<h3 id="K-means算法API"><a href="#K-means算法API" class="headerlink" title="K-means算法API"></a>K-means算法API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.API: sklearn.cluster.KMeans(n_clusters&#x3D;8,init&#x3D;&#39;k-means++&#39;)</span><br><span class="line">  1.1 k-means聚类</span><br><span class="line">  1.2 n_clusters: 开始聚类中心的数量(几个堆)</span><br><span class="line">  1.3 init: 初始方法</span><br><span class="line">  1.4 labels_：默认标记的类型(可以和真实值比较)</span><br></pre></td></tr></table></figure>

<h3 id="对Instacart-Market用户聚类"><a href="#对Instacart-Market用户聚类" class="headerlink" title="对Instacart Market用户聚类"></a>对Instacart Market用户聚类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	1.降维后的数据</span><br><span class="line">	2.k-means聚类</span><br><span class="line">	3.聚类结果显示</span><br><span class="line">km&#x3D;KMeans(n_clusters&#x3D;4)</span><br><span class="line">km.fit(data)</span><br><span class="line">pre&#x3D;km.predict(data)</span><br></pre></td></tr></table></figure>
<h3 id="Kmeans性能评估指标-sklearn-metrics-silhouette-score"><a href="#Kmeans性能评估指标-sklearn-metrics-silhouette-score" class="headerlink" title="Kmeans性能评估指标(sklearn.metrics.silhouette_score)"></a>Kmeans性能评估指标(sklearn.metrics.silhouette_score)</h3><p><strong>轮廓系数</strong></p>
<p><img src="/2022/04/01/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/54.png" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.很像高级语言程序里面的&quot;高内聚低耦合&quot;</span><br><span class="line">2.轮廓系数介于[-1,1]</span><br><span class="line">3.b_i &gt;&gt; a_i : 轮廓系数趋近于1  效果很好</span><br><span class="line">4.b_i &lt;&lt; a_i : 轮廓系数趋近于-1 效果不好</span><br></pre></td></tr></table></figure>

<h3 id="轮廓系数API"><a href="#轮廓系数API" class="headerlink" title="轮廓系数API"></a>轮廓系数API</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sklearn.metrics.silhouette_score(X,labels)</span><br><span class="line">  1.计算所有样本的平均轮廓系数</span><br><span class="line">  2.X：特征值</span><br><span class="line">  3.labels:被聚类标记的目标值</span><br></pre></td></tr></table></figure>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/8/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/28/">28</a><a class="extend next" rel="next" href="/page/10/">Next &amp;raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2024 Larkkkkkkk
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="http://bestwing.me" target="_blank">Sw'blog</a> by Swing
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>


<script src="/js/main.js"></script>


    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


    <script type="text/javascript">
      window.onload = function(){
        document.getElementById("search").onclick = function(){
            console.log("search")
            search();
        }
      }
      function search(){
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','A1Pz-LKMXbrzcFg2FWi6','2.0.0');
      }
    </script>

  </div>
</body>
</html>