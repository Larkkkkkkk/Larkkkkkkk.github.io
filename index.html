<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Larkkkkkkk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Larkkkkkkk">
<meta property="og:url" content="https://larkkkkkkk.github.io/index.html">
<meta property="og:site_name" content="Larkkkkkkk">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Larkkkkkkk">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Larkkkkkkk" type="application/atom+xml">
  
  
    <link rel="icon" href="/http://oayoilchh.bkt.clouddn.com/2016/07/27/18:05:26%20">
  
  
      
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
    
    
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- 加载特效 -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: true,
          isPost: false,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
<meta name="generator" content="Hexo 4.2.1"></head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
        <a href="/" class="profilepic">
            
            <img lazy-src="img/head.jpg" class="js-avatar">
            
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Larkkkkkkk</a></h1>
        </hgroup>
        
        
            <form>
                <input type="text" class="st-default-search-input search" id="local-search-input" placeholder="搜索一下" autocomplete="off">
            </form>
            <div id="local-search-result"></div>
        
        
            <script type="text/javascript">
                (function() {
                    'use strict';
                    function getMatchData(keyword, data) {
                        var matchData = [];
                        for(var i =0;i<data.length;i++){
                            if(data[i].title.toLowerCase().indexOf(keyword)>=0) 
                                matchData.push(data[i])
                        }
                        return matchData;
                    }
                    var $input = $('#local-search-input');
                    var $resultContent = $('#local-search-result');
                    $input.keyup(function(){
                        $.ajax({
                            url: '/search.json',
                            dataType: "json",
                            success: function( json ) {
                                var str='<ul class=\"search-result-list\">';                
                                var keyword = $input.val().trim().toLowerCase();
                                $resultContent.innerHTML = "";
                                if ($input.val().trim().length <= 0) {
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                }
                                var results = getMatchData(keyword, json);
                                if(results.length === 0){
                                    $resultContent.empty();
                                    $('#switch-area').show();
                                    return;
                                } 
                                for(var i =0; i<results.length; i++){
                                    str += "<li><a href='"+ results[i].url +"' class='search-result-title'>"+ results[i].title +"</a></li>";
                                }
                                str += "</ul>";
                                $resultContent.empty();
                                $resultContent.append(str);
                                $('#switch-area').hide();
                            }
                        });
                    });
                })();
            </script>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        
        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a  href="https://github.com/Larkkkkkkk" target="_blank" rel="noopener">博客首页</a></li>
                        
                            <li><a  href="/archives">文章归档</a></li>
                        
                            <li><a  href="/CTFStudy">学习导航</a></li>
                        
                            <li><a  href="/PWNABLE">PWNABLE</a></li>
                        
                            <li><a  href="/resume">个人简历</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl mail"  target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=U2JgZ2ZlY2VmamATIiJ9MDw_" title="mail">mail</a>
                            
                                <a class="fl github"  target="_blank" href="https://github.com/Larkkkkkkk" title="github">github</a>
                            
                                <a class="fl zhihu"  target="_blank" href="https://www.zhihu.com/people/plain-3-78/activities" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo"  target="_blank" href="https://weibo.com/5304208276/profile?topnav=1&wvr=6" title="weibo">weibo</a>
                            
                                <a class="fl rss"  target="_blank" href="/atom.xml" title="rss">rss</a>
                            
                        </ul>
                    </nav>
                </section>
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/Ajax/" style="font-size: 12px;">Ajax</a> <a href="/tags/Cookie%E5%92%8CSession/" style="font-size: 14px;">Cookie和Session</a> <a href="/tags/DBUtils/" style="font-size: 11px;">DBUtils</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/EL%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">EL表达式</a> <a href="/tags/Filter/" style="font-size: 11px;">Filter</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/HTTPServletReauest%E5%92%8CHTTPServletResponse/" style="font-size: 10px;">HTTPServletReauest和HTTPServletResponse</a> <a href="/tags/IDEA%E5%AE%89%E8%A3%85%E5%92%8C%E7%A0%B4%E8%A7%A3/" style="font-size: 10px;">IDEA安装和破解</a> <a href="/tags/JAVA/" style="font-size: 17px;">JAVA</a> <a href="/tags/JAVA-Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">JAVA-Lambda表达式</a> <a href="/tags/JAVA-Set%E9%9B%86%E5%90%88/" style="font-size: 10px;">JAVA-Set集合</a> <a href="/tags/JAVA-%E5%8F%8D%E5%B0%84/" style="font-size: 10px;">JAVA-反射</a> <a href="/tags/JAVA-%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 12px;">JAVA-多线程</a> <a href="/tags/JAVA-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">JAVA-正则表达式</a> <a href="/tags/JAVA-%E6%B3%9B%E5%9E%8B/" style="font-size: 10px;">JAVA-泛型</a> <a href="/tags/JAVA-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" style="font-size: 12px;">JAVA-网络编程</a> <a href="/tags/JAVA-%E9%9B%86%E5%90%88/" style="font-size: 12px;">JAVA-集合</a> <a href="/tags/JAVA%E7%BB%83%E4%B9%A0/" style="font-size: 11px;">JAVA练习</a> <a href="/tags/JAVA%E7%BB%83%E4%B9%A0-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 10px;">JAVA练习-动态规划</a> <a href="/tags/JQuery/" style="font-size: 13px;">JQuery</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/JVM/" style="font-size: 10px;">JVM</a> <a href="/tags/LeetCode/" style="font-size: 18px;">LeetCode</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Listener/" style="font-size: 10px;">Listener</a> <a href="/tags/Mybatis/" style="font-size: 19px;">Mybatis</a> <a href="/tags/Mysql/" style="font-size: 10px;">Mysql</a> <a href="/tags/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8CJDBC/" style="font-size: 15px;">Mysql数据库和JDBC</a> <a href="/tags/Redis/" style="font-size: 11px;">Redis</a> <a href="/tags/Servlet/" style="font-size: 11px;">Servlet</a> <a href="/tags/Spring/" style="font-size: 16px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 10px;">SpringBoot</a> <a href="/tags/SpringMVC/" style="font-size: 15px;">SpringMVC</a> <a href="/tags/Tomcat/" style="font-size: 10px;">Tomcat</a> <a href="/tags/Web%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9/" style="font-size: 20px;">Web前端知识点</a> <a href="/tags/XML/" style="font-size: 11px;">XML</a> <a href="/tags/django/" style="font-size: 10px;">django</a> <a href="/tags/flask%E6%A1%86%E6%9E%B6/" style="font-size: 10px;">flask框架</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/jsp%E6%A0%87%E5%87%86%E6%A0%87%E7%AD%BE%E5%BA%93/" style="font-size: 10px;">jsp标准标签库</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/picture/" style="font-size: 10px;">picture</a> <a href="/tags/python/" style="font-size: 12px;">python</a> <a href="/tags/pytorch/" style="font-size: 10px;">pytorch</a> <a href="/tags/ssm%E6%A1%86%E6%9E%B6%E6%A8%A1%E6%9D%BF/" style="font-size: 10px;">ssm框架模板</a> <a href="/tags/webserver%E7%BC%96%E7%A8%8B/" style="font-size: 10px;">webserver编程</a> <a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 10px;">事务</a> <a href="/tags/%E4%BA%AC%E4%B8%9C/" style="font-size: 11px;">京东</a> <a href="/tags/%E5%90%8E%E7%BC%80%E6%A0%91/" style="font-size: 10px;">后缀树</a> <a href="/tags/%E5%93%88%E5%B8%8C%E8%A1%A8/" style="font-size: 10px;">哈希表</a> <a href="/tags/%E5%9B%BE/" style="font-size: 10px;">图</a> <a href="/tags/%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90/" style="font-size: 10px;">复杂度分析</a> <a href="/tags/%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" style="font-size: 10px;">学生管理系统</a> <a href="/tags/%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F2-0/" style="font-size: 12px;">学生管理系统2.0</a> <a href="/tags/%E6%8B%BC%E5%A4%9A%E5%A4%9A/" style="font-size: 10px;">拼多多</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size: 10px;">排序</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" style="font-size: 10px;">数据分析</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0/" style="font-size: 10px;">数据库连接池</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84/" style="font-size: 10px;">数据结构-稀疏数组</a> <a href="/tags/%E6%96%87%E5%AD%97%E7%AF%87-%E8%AE%B0%E5%BD%95/" style="font-size: 10px;">文字篇-记录</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 12px;">机器学习</a> <a href="/tags/%E6%A0%88/" style="font-size: 10px;">栈</a> <a href="/tags/%E6%A0%91/" style="font-size: 12px;">树</a> <a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 10px;">注解</a> <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 14px;">深度学习</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 11px;">爬虫</a> <a href="/tags/%E7%94%9F%E7%89%A9%E4%BF%A1%E6%81%AF%E5%AD%A6/" style="font-size: 10px;">生物信息学</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" style="font-size: 12px;">知识图谱</a> <a href="/tags/%E7%A0%94%E7%A9%B6%E7%94%9F%E5%88%9D%E8%AF%95/" style="font-size: 12px;">研究生初试</a> <a href="/tags/%E7%A7%8B%E6%8B%9B/" style="font-size: 10px;">秋招</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size: 10px;">算法-动态规划</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%9B%9E%E6%BA%AF%E6%B3%95/" style="font-size: 10px;">算法-回溯法</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E8%B4%AA%E5%BF%83%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法-贪心算法</a> <a href="/tags/%E8%80%83%E7%A0%94/" style="font-size: 10px;">考研</a> <a href="/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/" style="font-size: 13px;">蓝桥杯</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E8%AF%BE%E8%AE%BE-%E8%BD%AF%E4%BB%B6%E4%B8%93%E4%B8%9A%E9%A2%98%E7%9B%AE/" style="font-size: 10px;">计算机网络课设(软件专业题目)</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12px;">设计模式</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/" style="font-size: 10px;">软件体系结构</a> <a href="/tags/%E9%80%92%E5%BD%92/" style="font-size: 10px;">递归</a> <a href="/tags/%E9%87%8D%E6%96%B0%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">重新部署</a> <a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 10px;">链表</a> <a href="/tags/%E9%98%9F%E5%88%97/" style="font-size: 10px;">队列</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 10px;">面试</a> <a href="/tags/%E9%A1%B5%E9%9D%A2%EF%BC%88H5-CSS%EF%BC%89/" style="font-size: 10px;">页面（H5+CSS）</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E4%BC%A0/" style="font-size: 10px;">项目上传</a>
                    </div>
                </section>
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://ring3.xyz/">Yllen</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://mxny.org/">麦香浓郁</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://whereisk0shl.top/">K0sh1</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.ycjcl.cc/">信鑫</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://bystudent.com/">ByStundet表哥</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://www.jarviswang.me/">汪神_Jarvis</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://sh3ll.me/">Chu</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://www.hackfun.org/">4ido10n</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/iamstudy">L3m0n</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://o0xmuhe.me/">muhe</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://blog.nuptzj.cn/">_画船听雨</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.virzz.com/index.html">Virink</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.sqlsec.com/">国光</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.bodkin.ren/">老锥</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.cizel.cn/">C1zel</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://1phan.cc">1phan</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://www.liuil.top/">liuil</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.cnblogs.com/Ox9A82/">Ox9A82</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://burnegg.com/">burnegg</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://jwrsec.cn/">jwr-sec</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://sudalover.cn/">苏打</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://blog.binklac.com">VeroFess</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.bendawang.site/">bendawang</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://weeklyalgo.codes/">hook</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.flier.net.cn/">Flier&#39;blog</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://www.mutepig.club">mutepig</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="https://blog.iret.xyz/list.aspx">Silver</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://simp1e.leanote.com/">Simple</a>
                    
                      <a target="_blank"  class="main-nav-link switch-friends-link" href="http://processor.pub/">Processor</a>
                    
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">一只淹死在二进制海洋里的二进制狗!</div>
                </section>
                
            </div>
        </div>
    </header>
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">Larkkkkkkk</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/head.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">Larkkkkkkk</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="https://github.com/Larkkkkkkk" target="_blank" rel="noopener">博客首页</a></li>
                
                    <li><a href="/archives">文章归档</a></li>
                
                    <li><a href="/CTFStudy">学习导航</a></li>
                
                    <li><a href="/PWNABLE">PWNABLE</a></li>
                
                    <li><a href="/resume">个人简历</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="mail" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=U2JgZ2ZlY2VmamATIiJ9MDw_" title="mail">mail</a>
                    
                        <a class="github" target="_blank" href="https://github.com/Larkkkkkkk" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/plain-3-78/activities" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="https://weibo.com/5304208276/profile?topnav=1&wvr=6" title="weibo">weibo</a>
                    
                        <a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap">
  
    <article id="post-JAVA-网络编程" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/11/02/JAVA-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="article-date">
      <time datetime="2023-11-02T08:51:25.000Z" itemprop="datePublished">2023-11-02</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/11/02/JAVA-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">JAVA-网络编程</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="第16章-网络编程"><a href="#第16章-网络编程" class="headerlink" title="第16章_网络编程"></a>第16章_网络编程</h1><h2 id="本章专题与脉络"><a href="#本章专题与脉络" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/%25E7%25AC%25AC3%25E9%2598%25B6%25E6%25AE%25B5%25EF%25BC%259AJava%25E9%25AB%2598%25E7%25BA%25A7%25E5%25BA%2594%25E7%2594%25A8-%25E7%25AC%25AC16%25E7%25AB%25A0.png" alt="第3阶段：Java高级应用-第16章" style="zoom: 50%;">

<hr>
<h2 id="1-网络编程概述"><a href="#1-网络编程概述" class="headerlink" title="1. 网络编程概述"></a>1. 网络编程概述</h2><p>Java是 Internet 上的语言，它从语言级上提供了对网络应用程序的支持，程序员能够很容易开发常见的网络应用程序。</p>
<p>Java提供的网络类库，可以实现无痛的网络连接，联网的底层细节被隐藏在 Java 的本机安装系统里，由 JVM 进行控制。并且 Java 实现了一个跨平台的网络库，<code>程序员面对的是一个统一的网络编程环境</code>。</p>
<h3 id="1-1-软件架构"><a href="#1-1-软件架构" class="headerlink" title="1.1 软件架构"></a>1.1 软件架构</h3><ul>
<li><strong>C/S架构</strong> ：全称为Client/Server结构，是指客户端和服务器结构。常见程序有QQ、美团app、360安全卫士等软件。</li>
</ul>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/1_cs.jpg" style="zoom:67%;">

<p><strong>B/S架构</strong> ：全称为Browser/Server结构，是指浏览器和服务器结构。常见浏览器有IE、谷歌、火狐等。</p>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/2_bs.jpg" style="zoom:67%;">

<p>两种架构各有优势，但是无论哪种架构，都离不开网络的支持。<strong>网络编程</strong>，就是在一定的协议下，实现两台计算机的通信的程序。</p>
<h3 id="1-2-网络基础"><a href="#1-2-网络基础" class="headerlink" title="1.2 网络基础"></a>1.2 网络基础</h3><ul>
<li><p><strong>计算机网络：</strong><br>把分布在不同地理区域的计算机与专门的外部设备用通信线路互连成一个规模大、功能强的网络系统，从而使众多的计算机可以方便地互相传递信息、共享硬件、软件、数据信息等资源。</p>
</li>
<li><p><strong>网络编程的目的：</strong>直接或间接地通过网络协议与其它计算机实现数据交换，进行通讯。</p>
</li>
<li><p><strong>网络编程中有三个主要的问题：</strong></p>
<ul>
<li>问题1：如何准确地定位网络上一台或多台主机</li>
<li>问题2：如何定位主机上的特定的应用</li>
<li>问题3：找到主机后，如何可靠、高效地进行数据传输</li>
</ul>
</li>
</ul>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220415001614195.png" alt="image-20220415001614195" style="zoom:67%;">

<h2 id="2-网络通信要素"><a href="#2-网络通信要素" class="headerlink" title="2. 网络通信要素"></a>2. 网络通信要素</h2><h3 id="2-1-如何实现网络中的主机互相通信"><a href="#2-1-如何实现网络中的主机互相通信" class="headerlink" title="2.1 如何实现网络中的主机互相通信"></a>2.1 如何实现网络中的主机互相通信</h3><ul>
<li>通信双方地址<ul>
<li>IP</li>
<li>端口号</li>
</ul>
</li>
<li>一定的规则：不同的硬件、操作系统之间的通信，所有的这一切都需要一种规则。而我们就把这种规则称为协议，即网络通信协议。</li>
</ul>
<p><strong>生活类比：</strong></p>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220503144420721.png" alt="image-20220503144420721" style="zoom:67%;">

<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220503144450241.png" alt="image-20220503144450241" style="zoom:67%;">

<h3 id="2-2-通信要素一：IP地址和域名"><a href="#2-2-通信要素一：IP地址和域名" class="headerlink" title="2.2 通信要素一：IP地址和域名"></a>2.2 通信要素一：IP地址和域名</h3><h4 id="2-2-1-IP地址"><a href="#2-2-1-IP地址" class="headerlink" title="2.2.1 IP地址"></a>2.2.1 IP地址</h4><p><strong>IP地址：指互联网协议地址（Internet Protocol Address）</strong>，俗称IP。IP地址用来给网络中的一台计算机设备做唯一的编号。假如我们把“个人电脑”比作“一台电话”的话，那么“IP地址”就相当于“电话号码”。</p>
<p><strong>IP地址分类方式一：</strong></p>
<ul>
<li><p><code>IPv4</code>：是一个32位的二进制数，通常被分为4个字节，表示成<code>a.b.c.d</code> 的形式，以点分<code>十进制</code>表示，例如<code>192.168.65.100</code> 。其中a、b、c、d都是0~255之间的十进制整数。</p>
<ul>
<li><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220503145929568.png" alt="image-20220503145929568" style="zoom:80%;">
</li>
<li><p>这种方式最多可以表示42亿个。其中，30亿都在北美，亚洲4亿，中国2.9亿。2011年初已经用尽。</p>
</li>
<li><p>IP地址 = 网络地址 +主机地址</p>
<ul>
<li>网络地址：标识计算机或网络设备所在的网段</li>
<li>主机地址：标识特定主机或网络设备</li>
</ul>
<p><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/20220518_101503.jpg" alt="20220518_101503"></p>
<p>其中，E类用于科研。</p>
</li>
</ul>
</li>
<li><p><code>IPv6</code>：由于互联网的蓬勃发展，IP地址的需求量愈来愈大，但是网络地址资源有限，使得IP的分配越发紧张。</p>
<p>为了扩大地址空间，拟通过IPv6重新定义地址空间，采用128位地址长度，共16个字节，写成8个无符号整数，每个整数用四个十六进制位表示，数之间用冒号（：）分开。比如：<code>ABCD:EF01:2345:6789:ABCD:EF01:2345:6789</code>，按保守方法估算IPv6实际可分配的地址，整个地球的每平方米面积上仍可分配1000多个地址，这样就解决了网络地址资源数量不够的问题。2012年6月6日，国际互联网协会举行了世界IPv6启动纪念日，这一天，全球IPv6网络正式启动。多家知名网站，如Google、Facebook和Yahoo等，于当天全球标准时间0点（北京时间8点整）开始永久性支持IPv6访问。2018年6月，三大运营商联合阿里云宣布，将全面对外提供IPv6服务，并计划在2025年前助推中国互联网真正实现“IPv6 Only”。</p>
<p>在IPv6的设计过程中除了一劳永逸地解决了地址短缺问题以外，还考虑了在IPv4中解决不好的其它问题，主要有端到端IP连接、服务质量（QoS）、安全性、多播、移动性、即插即用等。</p>
</li>
</ul>
<p><strong>IP地址分类方式二：</strong></p>
<p>公网地址( 万维网使用）和 私有地址( 局域网使用）。192.168.开头的就是私有地址，范围即为192.168.0.0–192.168.255.255，专门为组织机构内部使用。</p>
<p><strong>常用命令：</strong></p>
<ul>
<li>查看本机IP地址，在控制台输入：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ipconfig</span><br></pre></td></tr></table></figure>

<ul>
<li>检查网络是否连通，在控制台输入：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ping 空格 IP地址</span><br><span class="line">ping <span class="number">220.181</span><span class="number">.57</span><span class="number">.216</span></span><br></pre></td></tr></table></figure>

<p><strong>特殊的IP地址：</strong></p>
<ul>
<li>本地回环地址(hostAddress)：<code>127.0.0.1</code>  </li>
<li>主机名(hostName)：<code>localhost</code></li>
</ul>
<h4 id="2-2-2-域名"><a href="#2-2-2-域名" class="headerlink" title="2.2.2 域名"></a>2.2.2 域名</h4><p>Internet上的主机有两种方式表示地址：</p>
<ul>
<li>域名(hostName)：<a href="http://www.atguigu.com" target="_blank" rel="noopener">www.atguigu.com</a></li>
<li>IP 地址(hostAddress)：202.108.35.210</li>
</ul>
<p><strong>域名解析：</strong>因为IP地址数字不便于记忆，因此出现了域名。域名容易记忆，当在连接网络时输入一个主机的域名后，域名服务器(DNS，Domain Name System，域名系统)负责将域名转化成IP地址，这样才能和主机建立连接。 </p>
<p>简单理解：</p>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220415003729013.png" alt="image-20220415003729013" style="zoom:80%;">

<p>详细理解：</p>
<p><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220131125934581.png" alt="image-20220131125934581"></p>
<ol>
<li>在浏览器中输入www . qq .com 域名，操作系统会先检查自己本地的<code>hosts文件</code>是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。</li>
<li>如果hosts里没有这个域名的映射，则查找<code>本地DNS解析器缓存</code>，是否有这个网址映射关系，如果有，直接返回，完成域名解析。</li>
<li>如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器，在此我们叫它<code>本地DNS服务器</code>，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。</li>
<li>如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已<code>缓存</code>了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。</li>
<li>如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(<a href="http://qq.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找（http://qq.com)域服务器，重复上面的动作，进行查询，直至找到www.qq.com主机。" target="_blank" rel="noopener">http://qq.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找（http://qq.com)域服务器，重复上面的动作，进行查询，直至找到www.qq.com主机。</a></li>
<li>如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。</li>
</ol>
<h3 id="2-3-通信要素二：端口号"><a href="#2-3-通信要素二：端口号" class="headerlink" title="2.3 通信要素二：端口号"></a>2.3 通信要素二：端口号</h3><p>网络的通信，本质上是两个进程（应用程序）的通信。每台计算机都有很多的进程，那么在网络通信时，如何区分这些进程呢？</p>
<p>如果说<strong>IP地址</strong>可以唯一标识网络中的设备，那么<strong>端口号</strong>就可以唯一标识设备中的进程（应用程序）。</p>
<p>不同的进程，设置不同的端口号。</p>
<ul>
<li><strong>端口号：用两个字节表示的整数，它的取值范围是0~65535</strong>。<ul>
<li>公认端口：0~1023。被预先定义的服务通信占用，如：HTTP（80），FTP（21），Telnet（23）</li>
<li>注册端口：1024~49151。分配给用户进程或应用程序。如：Tomcat（8080），MySQL（3306），Oracle（1521）。</li>
<li>动态/ 私有端口：49152~65535。</li>
</ul>
</li>
</ul>
<p>如果端口号被另外一个服务或应用所占用，会导致当前程序启动失败。</p>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220415004400166.png" alt="image-20220415004400166" style="zoom:80%;">

<h3 id="2-4-通信要素三：网络通信协议"><a href="#2-4-通信要素三：网络通信协议" class="headerlink" title="2.4 通信要素三：网络通信协议"></a>2.4 通信要素三：网络通信协议</h3><p>通过计算机网络可以使多台计算机实现连接，位于同一个网络中的计算机在进行连接和通信时需要遵守一定的规则，这就好比在道路中行驶的汽车一定要遵守交通规则一样。</p>
<ul>
<li><code>网络通信协议</code>：在计算机网络中，这些连接和通信的规则被称为网络通信协议，它对数据的传输格式、传输速率、传输步骤、出错控制等做了统一规定，通信双方必须同时遵守才能完成数据交换。</li>
</ul>
<p><strong>新的问题：网络协议涉及内容太多、太复杂。如何解决？</strong></p>
<p>计算机网络通信涉及内容很多，比如指定源地址和目标地址，加密解密，压缩解压缩，差错控制，流量控制，路由控制，如何实现如此复杂的网络协议呢？<code>通信协议分层思想</code>。</p>
<p>在制定协议时，把复杂成份分解成一些简单的成份，再将它们复合起来。最常用的复合方式是层次方式，即<code>同层间可以通信、上一层可以调用下一层，而与再下一层不发生关系</code>。各层互不影响，利于系统的开发和扩展。</p>
<p>这里有两套参考模型</p>
<ul>
<li>OSI参考模型：模型过于理想化，未能在因特网上进行广泛推广</li>
<li>TCP/IP参考模型(或TCP/IP协议)：事实上的国际标准。</li>
</ul>
<p><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220514172130459.png" alt="image-20220514172130459"></p>
<p>上图中，OSI参考模型：模型<code>过于理想化</code>，未能在因特网上进行广泛推广。 TCP/IP参考模型(或TCP/IP协议)：事实上的<code>国际标准</code>。</p>
<ul>
<li><p><strong>TCP/IP协议：</strong> 传输控制协议/因特网互联协议( Transmission Control Protocol/Internet Protocol)，TCP/IP 以其两个主要协议：传输控制协议(TCP)和网络互联协议(IP)而得名，实际上是一组协议，包括多个具有不同功能且互为关联的协议。是Internet最基本、最广泛的协议。</p>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220512234904047.png" alt="image-20220512234904047" style="zoom:80%;">

</li>
</ul>
<p><strong>TCP/IP协议中的四层介绍：</strong></p>
<ul>
<li><code>应用层</code>：应用层决定了向用户提供应用服务时通信的活动。主要协议有：HTTP协议、FTP协议、SNMP（简单网络管理协议）、SMTP（简单邮件传输协议）和POP3（Post Office Protocol 3的简称,即邮局协议的第3个版）等。</li>
<li><code>传输层</code>：主要使网络程序进行通信，在进行网络通信时，可以采用TCP协议，也可以采用UDP协议。TCP（Transmission Control Protocol）协议，即传输控制协议，是一种面向连接的、可靠的、基于字节流的传输层通信协议。UDP(User Datagram Protocol，用户数据报协议)：是一个无连接的传输层协议、提供面向事务的简单不可靠的信息传送服务。</li>
<li><code>网络层</code>：网络层是整个TCP/IP协议的核心，支持网间互连的数据通信。它主要用于将传输的数据进行分组，将分组数据发送到目标计算机或者网络。而IP协议是一种非常重要的协议。IP（internet protocal）又称为互联网协议。IP的责任就是把数据从源传送到目的地。它在源地址和目的地址之间传送一种称之为数据包的东西，它还提供对数据大小的重新组装功能，以适应不同网络对包大小的要求。</li>
</ul>
<ul>
<li><code>物理+数据链路层</code>：链路层是用于定义物理传输通道，通常是对某些网络连接设备的驱动协议，例如针对光纤、网线提供的驱动。</li>
</ul>
<p><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220514172435398.png" alt="image-20220514172435398"></p>
<h2 id="2-谈传输层协议：TCP与UDP协议"><a href="#2-谈传输层协议：TCP与UDP协议" class="headerlink" title="2. 谈传输层协议：TCP与UDP协议"></a>2. 谈传输层协议：TCP与UDP协议</h2><p>通信的协议还是比较复杂的，<code>java.net</code> 包中包含的类和接口，它们提供低层次的通信细节。我们可以直接使用这些类和接口，来专注于网络程序开发，而不用考虑通信的细节。</p>
<p><code>java.net</code> 包中提供了两种常见的网络协议的支持：</p>
<ul>
<li><strong>UDP</strong>：用户数据报协议(User Datagram Protocol)。</li>
<li><strong>TCP</strong>：传输控制协议 (Transmission Control Protocol)。</li>
</ul>
<h3 id="2-1-TCP协议与UDP协议"><a href="#2-1-TCP协议与UDP协议" class="headerlink" title="2.1 TCP协议与UDP协议"></a>2.1 TCP协议与UDP协议</h3><p><strong>TCP协议：</strong></p>
<ul>
<li>TCP协议进行通信的两个应用进程：客户端、服务端。</li>
<li>使用TCP协议前，须先<code>建立TCP连接</code>，形成基于字节流的传输数据通道</li>
<li>传输前，采用“三次握手”方式，点对点通信，是<code>可靠的</code><ul>
<li>TCP协议使用<code>重发机制</code>，当一个通信实体发送一个消息给另一个通信实体后，需要收到另一个通信实体确认信息，如果没有收到另一个通信实体确认信息，则会再次重复刚才发送的消息。</li>
</ul>
</li>
<li>在连接中可进行<code>大数据量的传输</code></li>
<li>传输完毕，需<code>释放已建立的连接，效率低</code></li>
</ul>
<p><strong>UDP协议：</strong></p>
<ul>
<li>UDP协议进行通信的两个应用进程：发送端、接收端。</li>
<li>将数据、源、目的封装成数据包（传输的基本单位），<code>不需要建立连接</code></li>
<li>发送不管对方是否准备好，接收方收到也不确认，不能保证数据的完整性，故是<code>不可靠的</code></li>
<li>每个数据报的大小限制在<code>64K</code>内</li>
<li>发送数据结束时<code>无需释放资源，开销小，通信效率高</code></li>
<li>适用场景：音频、视频和普通数据的传输。例如视频会议</li>
</ul>
<blockquote>
<p>TCP生活案例：打电话</p>
<p>UDP生活案例：发送短信、发电报</p>
</blockquote>
<h3 id="2-2-三次握手"><a href="#2-2-三次握手" class="headerlink" title="2.2 三次握手"></a>2.2 三次握手</h3><p>TCP协议中，在发送数据的准备阶段，客户端与服务器之间的三次交互，以保证连接的可靠。</p>
<ul>
<li>第一次握手，客户端向服务器端发起TCP连接的请求</li>
<li>第二次握手，服务器端发送针对客户端TCP连接请求的确认</li>
<li>第三次握手，客户端发送确认的确认</li>
</ul>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220415010105484.png" alt="image-20220415010105484" style="zoom:80%;">

<blockquote>
<p>1、客户端会随机一个初始序列号seq=x，设置SYN=1 ，表示这是SYN握手报文。然后就可以把这个 SYN 报文发送给服务端了，表示向服务端发起连接，之后客户端处于<code>同步已发送</code>状态。</p>
<p>2、服务端收到客户端的 SYN 报文后，也随机一个初始序列号(seq=y)，设置ack=x+1，表示收到了客户端的x之前的数据，希望客户端下次发送的数据从x+1开始。<br>设置 SYN=1 和 ACK=1。表示这是一个SYN握手和ACK确认应答报文。最后把该报文发给客户端，该报文也不包含应用层数据，之后服务端处于<code>同步已接收</code>状态。</p>
<p>3、客户端收到服务端报文后，还要向服务端回应最后一个应答报文，将ACK置为 1 ，表示这是一个应答报文<br>ack=y+1 ，表示收到了服务器的y之前的数据，希望服务器下次发送的数据从y+1开始。<br>最后把报文发送给服务端，这次报文可以携带数据，之后客户端处于 连接已建立 状态。服务器收到客户端的应答报文后，也进入<code>连接已建立</code>状态。</p>
</blockquote>
<p>完成三次握手，连接建立后，客户端和服务器就可以开始进行数据传输了。由于这种面向连接的特性，TCP协议可以保证传输数据的安全，所以应用十分广泛，例如下载文件、浏览网页等。</p>
<h3 id="2-3-四次挥手"><a href="#2-3-四次挥手" class="headerlink" title="2.3 四次挥手"></a>2.3 四次挥手</h3><p>TCP协议中，在发送数据结束后，释放连接时需要经过四次挥手。</p>
<ul>
<li>第一次挥手：客户端向服务器端提出结束连接，<code>让服务器做最后的准备工作</code>。此时，客户端处于半关闭状态，即表示不再向服务器发送数据了，但是还可以接受数据。</li>
<li>第二次挥手：服务器接收到客户端释放连接的请求后，<code>会将最后的数据发给客户端</code>。并告知上层的应用进程不再接收数据。</li>
<li>第三次挥手：服务器发送完数据后，会给客户端<code>发送一个释放连接的报文</code>。那么客户端接收后就知道可以正式释放连接了。</li>
<li>第四次挥手：客户端接收到服务器最后的释放连接报文后，要<code>回复一个彻底断开的报文</code>。这样服务器收到后才会彻底释放连接。这里客户端，发送完最后的报文后，会等待2MSL，因为有可能服务器没有收到最后的报文，那么服务器迟迟没收到，就会再次给客户端发送释放连接的报文，此时客户端在等待时间范围内接收到，会重新发送最后的报文，并重新计时。如果等待2MSL后，没有收到，那么彻底断开。</li>
</ul>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220415010205891.png" alt="image-20220415010205891" style="zoom:80%;">

<blockquote>
<p>1、客户端打算断开连接，向服务器发送FIN报文(FIN标记位被设置为1，1表示为FIN，0表示不是)，FIN报文中会指定一个序列号，之后客户端进入FIN_WAIT_1状态。也就是客户端发出连接释放报文段(FIN报文)，指定序列号seq = u，主动关闭TCP连接，等待服务器的确认。</p>
<p>2、服务器收到连接释放报文段(FIN报文)后，就向客户端发送ACK应答报文，以客户端的FIN报文的序列号 seq+1 作为ACK应答报文段的确认序列号ack = seq+1 = u + 1。接着服务器进入CLOSE_WAIT(等待关闭)状态，此时的TCP处于半关闭状态(下面会说什么是半关闭状态)，客户端到服务器的连接释放。客户端收到来自服务器的ACK应答报文段后，进入FIN_WAIT_2状态。</p>
<p>3、服务器也打算断开连接，向客户端发送连接释放(FIN)报文段，之后服务器进入LASK_ACK(最后确认)状态，等待客户端的确认。服务器的连接释放(FIN)报文段的FIN=1，ACK=1，序列号seq=m，确认序列号ack=u+1。</p>
<p>4、客户端收到来自服务器的连接释放(FIN)报文段后，会向服务器发送一个ACK应答报文段，以连接释放(FIN)报文段的确认序号 ack 作为ACK应答报文段的序列号 seq，以连接释放(FIN)报文段的序列号 seq+1作为确认序号ack。</p>
<p>之后客户端进入TIME_WAIT(时间等待)状态，服务器收到ACK应答报文段后，服务器就进入CLOSE(关闭)状态，到此服务器的连接已经完成关闭。客户端处于TIME_WAIT状态时，此时的TCP还未释放掉，需要等待2MSL后，客户端才进入CLOSE状态。</p>
</blockquote>
<h2 id="3-网络编程API"><a href="#3-网络编程API" class="headerlink" title="3. 网络编程API"></a>3. 网络编程API</h2><h3 id="3-1-InetAddress类"><a href="#3-1-InetAddress类" class="headerlink" title="3.1 InetAddress类"></a>3.1 InetAddress类</h3><p>InetAddress类主要表示IP地址，两个子类：Inet4Address、Inet6Address。</p>
<p>InetAddress 类没有提供公共的构造器，而是提供 了 如下几个 静态方法来获取InetAddress 实例</p>
<ul>
<li>public static InetAddress getLocalHost()</li>
<li>public static InetAddress getByName(String host)</li>
<li>public static InetAddress getByAddress(byte[] addr)</li>
</ul>
<p>InetAddress 提供了如下几个常用的方法</p>
<ul>
<li>public String getHostAddress() ：返回 IP 地址字符串（以文本表现形式）</li>
<li>public String getHostName() ：获取此 IP 地址的主机名</li>
<li>public boolean isReachable(int timeout)：测试是否可以达到该地址</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.ip;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInetAddress</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> UnknownHostException</span>&#123;</span><br><span class="line">        InetAddress localHost = InetAddress.getLocalHost();</span><br><span class="line">        System.out.println(localHost);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span><span class="keyword">throws</span> UnknownHostException</span>&#123;</span><br><span class="line">        InetAddress atguigu = InetAddress.getByName(<span class="string">"www.atguigu.com"</span>);</span><br><span class="line">        System.out.println(atguigu);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span><span class="keyword">throws</span> UnknownHostException</span>&#123;</span><br><span class="line"><span class="comment">//		byte[] addr = &#123;112,54,108,98&#125;;</span></span><br><span class="line">        <span class="keyword">byte</span>[] addr = &#123;(<span class="keyword">byte</span>)<span class="number">192</span>,(<span class="keyword">byte</span>)<span class="number">168</span>,<span class="number">24</span>,<span class="number">56</span>&#125;;</span><br><span class="line">        InetAddress atguigu = InetAddress.getByAddress(addr);</span><br><span class="line">        System.out.println(atguigu);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/1564024137998.png" alt="1564024137998"></p>
<h3 id="3-2-Socket类"><a href="#3-2-Socket类" class="headerlink" title="3.2 Socket类"></a>3.2 Socket类</h3><ul>
<li>网络上具有唯一标识的IP地址和端口号组合在一起构成唯一能识别的标识符套接字（Socket）。</li>
<li>利用套接字(Socket)开发网络应用程序早已被广泛的采用，以至于成为事实上的标准。网络通信其实就是Socket间的通信。</li>
</ul>
<ul>
<li><p>通信的两端都要有Socket，是两台机器间通信的端点。</p>
</li>
<li><p>Socket允许程序把网络连接当成一个流，数据在两个Socket间通过IO传输。</p>
</li>
<li><p>一般主动发起通信的应用程序属客户端，等待通信请求的为服务端。</p>
</li>
<li><p>Socket分类：</p>
<ul>
<li>流套接字（stream socket）：使用TCP提供可依赖的字节流服务<ul>
<li>ServerSocket：此类实现TCP服务器套接字。服务器套接字等待请求通过网络传入。</li>
<li>Socket：此类实现客户端套接字（也可以就叫“套接字”）。套接字是两台机器间通信的端点。</li>
</ul>
</li>
<li>数据报套接字（datagram socket）：使用UDP提供“尽力而为”的数据报服务<ul>
<li>DatagramSocket：此类表示用来发送和接收UDP数据报包的套接字。 </li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-3-Socket相关类API"><a href="#3-3-Socket相关类API" class="headerlink" title="3.3 Socket相关类API"></a>3.3 Socket相关类API</h3><h4 id="3-3-1-ServerSocket类"><a href="#3-3-1-ServerSocket类" class="headerlink" title="3.3.1 ServerSocket类"></a>3.3.1 ServerSocket类</h4><p><strong>ServerSocket类的构造方法：</strong></p>
<ul>
<li>ServerSocket(int port) ：创建绑定到特定端口的服务器套接字。</li>
</ul>
<p><strong>ServerSocket类的常用方法：</strong></p>
<ul>
<li>Socket accept()：侦听并接受到此套接字的连接。 </li>
</ul>
<h4 id="3-3-2-Socket类"><a href="#3-3-2-Socket类" class="headerlink" title="3.3.2 Socket类"></a>3.3.2 Socket类</h4><p><strong>Socket类的常用构造方法</strong>：</p>
<ul>
<li>public Socket(InetAddress address,int port)：创建一个流套接字并将其连接到指定 IP 地址的指定端口号。</li>
<li>public Socket(String host,int port)：创建一个流套接字并将其连接到指定主机上的指定端口号。</li>
</ul>
<p><strong>Socket类的常用方法</strong>：</p>
<ul>
<li>public InputStream getInputStream()：返回此套接字的输入流，可以用于接收消息</li>
<li>public OutputStream getOutputStream()：返回此套接字的输出流，可以用于发送消息</li>
<li>public InetAddress getInetAddress()：此套接字连接到的远程 IP 地址；如果套接字是未连接的，则返回 null。</li>
<li>public InetAddress getLocalAddress()：获取套接字绑定的本地地址。</li>
<li>public int getPort()：此套接字连接到的远程端口号；如果尚未连接套接字，则返回 0。</li>
<li>public int getLocalPort()：返回此套接字绑定到的本地端口。如果尚未绑定套接字，则返回 -1。</li>
<li>public void close()：关闭此套接字。套接字被关闭后，便不可在以后的网络连接中使用（即无法重新连接或重新绑定）。需要创建新的套接字对象。 关闭此套接字也将会关闭该套接字的 InputStream 和 OutputStream。 </li>
<li>public void shutdownInput()：如果在套接字上调用 shutdownInput() 后从套接字输入流读取内容，则流将返回 EOF（文件结束符）。 即不能在从此套接字的输入流中接收任何数据。</li>
<li>public void shutdownOutput()：禁用此套接字的输出流。对于 TCP 套接字，任何以前写入的数据都将被发送，并且后跟 TCP 的正常连接终止序列。 如果在套接字上调用 shutdownOutput() 后写入套接字输出流，则该流将抛出 IOException。 即不能通过此套接字的输出流发送任何数据。</li>
</ul>
<p><strong>注意：</strong>先后调用Socket的shutdownInput()和shutdownOutput()方法，仅仅关闭了输入流和输出流，并不等于调用Socket的close()方法。在通信结束后，仍然要调用Scoket的close()方法，因为只有该方法才会释放Socket占用的资源，比如占用的本地端口号等。</p>
<h4 id="3-3-3-DatagramSocket类"><a href="#3-3-3-DatagramSocket类" class="headerlink" title="3.3.3 DatagramSocket类"></a>3.3.3 DatagramSocket类</h4><p><strong>DatagramSocket 类的常用方法：</strong></p>
<ul>
<li>public DatagramSocket(int port)创建数据报套接字并将其绑定到本地主机上的指定端口。套接字将被绑定到通配符地址，IP 地址由内核来选择。</li>
<li>public DatagramSocket(int port,InetAddress laddr)创建数据报套接字，将其绑定到指定的本地地址。本地端口必须在 0 到 65535 之间（包括两者）。如果 IP 地址为 0.0.0.0，套接字将被绑定到通配符地址，IP 地址由内核选择。 </li>
<li>public void close()关闭此数据报套接字。 </li>
<li>public void send(DatagramPacket p)从此套接字发送数据报包。DatagramPacket 包含的信息指示：将要发送的数据、其长度、远程主机的 IP 地址和远程主机的端口号。 </li>
<li>public void receive(DatagramPacket p)从此套接字接收数据报包。当此方法返回时，DatagramPacket 的缓冲区填充了接收的数据。数据报包也包含发送方的 IP 地址和发送方机器上的端口号。 此方法在接收到数据报前一直阻塞。数据报包对象的 length 字段包含所接收信息的长度。如果信息比包的长度长，该信息将被截短。 </li>
<li>public InetAddress getLocalAddress()获取套接字绑定的本地地址。</li>
<li>public int getLocalPort()返回此套接字绑定的本地主机上的端口号。 </li>
<li>public InetAddress getInetAddress()返回此套接字连接的地址。如果套接字未连接，则返回 null。</li>
<li>public int getPort()返回此套接字的端口。如果套接字未连接，则返回 -1。</li>
</ul>
<h4 id="3-3-4-DatagramPacket类"><a href="#3-3-4-DatagramPacket类" class="headerlink" title="3.3.4 DatagramPacket类"></a>3.3.4 DatagramPacket类</h4><p><strong>DatagramPacket类的常用方法：</strong></p>
<ul>
<li>public DatagramPacket(byte[] buf,int length)构造 DatagramPacket，用来接收长度为 length 的数据包。 length 参数必须小于等于 buf.length。</li>
<li>public DatagramPacket(byte[] buf,int length,InetAddress address,int port)构造数据报包，用来将长度为 length 的包发送到指定主机上的指定端口号。length 参数必须小于等于 buf.length。</li>
<li>public InetAddress getAddress()返回某台机器的 IP 地址，此数据报将要发往该机器或者是从该机器接收到的。</li>
<li>public int getPort()返回某台远程主机的端口号，此数据报将要发往该主机或者是从该主机接收到的。</li>
<li><code>public byte[] getData()</code>返回数据缓冲区。接收到的或将要发送的数据从缓冲区中的偏移量 offset 处开始，持续 length 长度。</li>
<li><code>public int getLength()</code>返回将要发送或接收到的数据的长度。</li>
</ul>
<h2 id="4-TCP网络编程"><a href="#4-TCP网络编程" class="headerlink" title="4. TCP网络编程"></a>4. TCP网络编程</h2><h3 id="4-1-通信模型"><a href="#4-1-通信模型" class="headerlink" title="4.1 通信模型"></a>4.1 通信模型</h3><p>Java语言的基于套接字TCP编程分为服务端编程和客户端编程，其通信模型如图所示：</p>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220514172833216.png" alt="image-20220514172833216" style="zoom:67%;">

<h3 id="4-2-开发步骤"><a href="#4-2-开发步骤" class="headerlink" title="4.2 开发步骤"></a>4.2 开发步骤</h3><p><strong>客户端程序包含以下四个基本的步骤 ：</strong></p>
<ul>
<li>创建 Socket ：根据指定服务端的 IP 地址或端口号构造 Socket 类对象。若服务器端响应，则建立客户端到服务器的通信线路。若连接失败，会出现异常。</li>
<li>打开连接到 Socket  的输入/ 出流： 使用 getInputStream()方法获得输入流，使用getOutputStream()方法获得输出流，进行数据传输</li>
<li>按照一定的协议对 Socket 进行读/ 写操作：通过输入流读取服务器放入线路的信息（但不能读取自己放入线路的信息），通过输出流将信息写入线路。</li>
<li>关闭 Socket ：断开客户端到服务器的连接，释放线路</li>
</ul>
<p><strong>服务器端程序包含以下四个基本的 步骤：</strong></p>
<ul>
<li>调用 ServerSocket(int port)  ：创建一个服务器端套接字，并绑定到指定端口上。用于监听客户端的请求。</li>
<li>调用 accept() ：监听连接请求，如果客户端请求连接，则接受连接，返回通信套接字对象。</li>
<li>调用  该Socket 类对象的 getOutputStream()  和 getInputStream () ：获取输出流和输入流，开始网络数据的发送和接收。</li>
<li>关闭Socket 对象：客户端访问结束，关闭通信套接字。</li>
</ul>
<h3 id="4-3-例题与练习"><a href="#4-3-例题与练习" class="headerlink" title="4.3 例题与练习"></a>4.3 例题与练习</h3><blockquote>
<p>例题1：客户端发送内容给服务端，服务端将内容打印到控制台上。</p>
<p>例题2：客户端发送文件给服务端，服务端将文件保存在本地。</p>
<p>例题3：从客户端发送文件给服务端，服务端保存到本地。并返回“发送成功”给客户端。并关闭相应的连接。</p>
</blockquote>
<p>练习1：服务端读取图片并发送给客户端，客户端保存图片到本地</p>
<p>练习2：客户端给服务端发送文本，服务端会将文本转成大写在返回给客户端。</p>
<p><strong>演示单个客户端与服务器单次通信：</strong></p>
<p>需求：客户端连接服务器，连接成功后给服务发送“lalala”，服务器收到消息后，给客户端返回“欢迎登录”，客户端接收消息后，断开连接</p>
<p><strong>1、服务器端示例代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.tcp.one;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//1、准备一个ServerSocket对象，并绑定8888端口</span></span><br><span class="line">        ServerSocket server =  <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">"等待连接...."</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2、在8888端口监听客户端的连接，该方法是个阻塞的方法，如果没有客户端连接，将一直等待</span></span><br><span class="line">        Socket socket = server.accept();</span><br><span class="line">        InetAddress inetAddress = socket.getInetAddress();</span><br><span class="line">        System.out.println(inetAddress.getHostAddress() + <span class="string">"客户端连接成功！！"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3、获取输入流，用来接收该客户端发送给服务器的数据</span></span><br><span class="line">        InputStream input = socket.getInputStream();</span><br><span class="line">        <span class="comment">//接收数据</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            s.append(<span class="keyword">new</span> String(data, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(inetAddress.getHostAddress() + <span class="string">"客户端发送的消息是："</span> + s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、获取输出流，用来发送数据给该客户端</span></span><br><span class="line">        OutputStream out = socket.getOutputStream();</span><br><span class="line">        <span class="comment">//发送数据</span></span><br><span class="line">        out.write(<span class="string">"欢迎登录"</span>.getBytes());</span><br><span class="line">        out.flush();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5、关闭socket，不再与该客户端通信</span></span><br><span class="line">        <span class="comment">//socket关闭，意味着InputStream和OutputStream也关闭了</span></span><br><span class="line">        socket.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6、如果不再接收任何客户端通信，可以关闭ServerSocket</span></span><br><span class="line">        server.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、客户端示例代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.tcp.one;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1、准备Socket，连接服务器，需要指定服务器的IP地址和端口号</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>, <span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、获取输出流，用来发送数据给服务器</span></span><br><span class="line">        OutputStream out = socket.getOutputStream();</span><br><span class="line">        <span class="comment">// 发送数据</span></span><br><span class="line">        out.write(<span class="string">"lalala"</span>.getBytes());</span><br><span class="line">        <span class="comment">//会在流末尾写入一个“流的末尾”标记，对方才能读到-1，否则对方的读取方法会一致阻塞</span></span><br><span class="line">        socket.shutdownOutput();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3、获取输入流，用来接收服务器发送给该客户端的数据</span></span><br><span class="line">        InputStream input = socket.getInputStream();</span><br><span class="line">        <span class="comment">// 接收数据</span></span><br><span class="line">        <span class="keyword">byte</span>[] data = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = input.read(data)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            s.append(<span class="keyword">new</span> String(data, <span class="number">0</span>, len));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"服务器返回的消息是："</span> + s);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、关闭socket，不再与服务器通信，即断开与服务器的连接</span></span><br><span class="line">        <span class="comment">//socket关闭，意味着InputStream和OutputStream也关闭了</span></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>演示多个客户端与服务器之间的多次通信：</strong></p>
<p>通常情况下，服务器不应该只接受一个客户端请求，而应该不断地接受来自客户端的所有请求，所以Java程序通常会通过循环，不断地调用ServerSocket的accept()方法。</p>
<p>如果服务器端要“同时”处理多个客户端的请求，因此服务器端需要为<strong>每一个客户端单独分配一个线程</strong>来处理，否则无法实现“同时”。</p>
<p>咱们之前学习IO流的时候，提到过装饰者设计模式，该设计使得不管底层IO流是怎样的节点流：文件流也好，网络Socket产生的流也好，程序都可以将其包装成处理流，甚至可以多层包装，从而提供更多方便的处理。</p>
<p>案例需求：多个客户端连接服务器，并进行多次通信</p>
<ul>
<li>每一个客户端连接成功后，从键盘输入英文单词或中国成语，并发送给服务器</li>
<li>服务器收到客户端的消息后，把词语“反转”后返回给客户端</li>
<li>客户端接收服务器返回的“词语”，打印显示</li>
<li>当客户端输入“stop”时断开与服务器的连接</li>
<li>多个客户端可以同时给服务器发送“词语”，服务器可以“同时”处理多个客户端的请求</li>
</ul>
<img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220514173031651.png" alt="image-20220514173031651" style="zoom:80%;">

<p><strong>1、服务器端示例代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.tcp.many;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1、准备一个ServerSocket</span></span><br><span class="line">        ServerSocket server = <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">        System.out.println(<span class="string">"等待连接..."</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">// 2、监听一个客户端的连接</span></span><br><span class="line">            Socket socket = server.accept();</span><br><span class="line">            System.out.println(<span class="string">"第"</span> + ++count + <span class="string">"个客户端"</span>+socket.getInetAddress().getHostAddress()+<span class="string">"连接成功！！"</span>);</span><br><span class="line"></span><br><span class="line">            ClientHandlerThread ct = <span class="keyword">new</span> ClientHandlerThread(socket);</span><br><span class="line">            ct.start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//这里没有关闭server，永远监听</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientHandlerThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Socket socket;</span><br><span class="line">        <span class="keyword">private</span> String ip;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">ClientHandlerThread</span><span class="params">(Socket socket)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">super</span>();</span><br><span class="line">            <span class="keyword">this</span>.socket = socket;</span><br><span class="line">            ip = socket.getInetAddress().getHostAddress();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="comment">//（1）获取输入流，用来接收该客户端发送给服务器的数据</span></span><br><span class="line">                BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">                <span class="comment">//（2）获取输出流，用来发送数据给该客户端</span></span><br><span class="line">                PrintStream ps = <span class="keyword">new</span> PrintStream(socket.getOutputStream());</span><br><span class="line">                String str;</span><br><span class="line">                <span class="comment">// （3）接收数据</span></span><br><span class="line">                <span class="keyword">while</span> ((str = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">//（4）反转</span></span><br><span class="line">                    StringBuilder word = <span class="keyword">new</span> StringBuilder(str);</span><br><span class="line">                    word.reverse();</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//（5）返回给客户端</span></span><br><span class="line">                    ps.println(word);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(<span class="string">"客户端"</span> + ip+<span class="string">"正常退出"</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span>(Exception  e)&#123;</span><br><span class="line">                System.out.println(<span class="string">"客户端"</span> + ip+<span class="string">"意外退出"</span>);</span><br><span class="line">            &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//（6）断开连接</span></span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、客户端示例代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.tcp.many;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// 1、准备Socket，连接服务器，需要指定服务器的IP地址和端口号</span></span><br><span class="line">        Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>, <span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、获取输出流，用来发送数据给服务器</span></span><br><span class="line">        OutputStream out = socket.getOutputStream();</span><br><span class="line">        PrintStream ps = <span class="keyword">new</span> PrintStream(out);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、获取输入流，用来接收服务器发送给该客户端的数据</span></span><br><span class="line">        InputStream input = socket.getInputStream();</span><br><span class="line">        BufferedReader br;</span><br><span class="line">        <span class="keyword">if</span>(args!= <span class="keyword">null</span> &amp;&amp; args.length&gt;<span class="number">0</span>) &#123;</span><br><span class="line">            String encoding = args[<span class="number">0</span>];</span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(input,encoding));</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(input));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">"输入发送给服务器的单词或成语："</span>);</span><br><span class="line">            String message = scanner.nextLine();</span><br><span class="line">            <span class="keyword">if</span>(message.equals(<span class="string">"stop"</span>))&#123;</span><br><span class="line">                socket.shutdownOutput();</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 4、 发送数据</span></span><br><span class="line">            ps.println(message);</span><br><span class="line">            <span class="comment">// 接收数据</span></span><br><span class="line">            String feedback  = br.readLine();</span><br><span class="line">            System.out.println(<span class="string">"从服务器收到的反馈是："</span> + feedback);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5、关闭socket，断开与服务器的连接</span></span><br><span class="line">        scanner.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-案例：聊天室"><a href="#4-4-案例：聊天室" class="headerlink" title="4.4 案例：聊天室"></a>4.4 案例：聊天室</h3><p>服务端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.tcp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestChatServer</span> </span>&#123;</span><br><span class="line">	<span class="comment">//这个集合用来存储所有在线的客户端</span></span><br><span class="line">	<span class="keyword">static</span> ArrayList&lt;Socket&gt; online = <span class="keyword">new</span>  ArrayList&lt;Socket&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">//1、启动服务器，绑定端口号</span></span><br><span class="line">		ServerSocket server = <span class="keyword">new</span> ServerSocket(<span class="number">8989</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2、接收n多的客户端同时连接</span></span><br><span class="line">		<span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">			Socket accept = server.accept();</span><br><span class="line">			</span><br><span class="line">			online.add(accept);<span class="comment">//把新连接的客户端添加到online列表中</span></span><br><span class="line">			</span><br><span class="line">			MessageHandler mh = <span class="keyword">new</span> MessageHandler(accept);</span><br><span class="line">			mh.start();<span class="comment">//</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MessageHandler</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">		<span class="keyword">private</span> Socket socket;</span><br><span class="line">		<span class="keyword">private</span> String ip;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">MessageHandler</span><span class="params">(Socket socket)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">super</span>();</span><br><span class="line">			<span class="keyword">this</span>.socket = socket;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				ip = socket.getInetAddress().getHostAddress();</span><br><span class="line">				</span><br><span class="line">				<span class="comment">//插入：给其他客户端转发“我上线了”</span></span><br><span class="line">				sendToOther(ip+<span class="string">"上线了"</span>);</span><br><span class="line">				</span><br><span class="line">				<span class="comment">//(1)接收该客户端的发送的消息</span></span><br><span class="line">				InputStream input = socket.getInputStream();</span><br><span class="line">				InputStreamReader reader = <span class="keyword">new</span> InputStreamReader(input);</span><br><span class="line">				BufferedReader br = <span class="keyword">new</span> BufferedReader(reader);</span><br><span class="line">				</span><br><span class="line">				String str;</span><br><span class="line">				<span class="keyword">while</span>((str = br.readLine())!=<span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="comment">//(2)给其他在线客户端转发</span></span><br><span class="line">					sendToOther(ip+<span class="string">":"</span>+str);</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">				sendToOther(ip+<span class="string">"下线了"</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				<span class="keyword">try</span> &#123;</span><br><span class="line">					sendToOther(ip+<span class="string">"掉线了"</span>);</span><br><span class="line">				&#125; <span class="keyword">catch</span> (IOException e1) &#123;</span><br><span class="line">					e1.printStackTrace();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">				<span class="comment">//从在线人员中移除我</span></span><br><span class="line">				online.remove(socket);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//封装一个方法：给其他客户端转发xxx消息</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendToOther</span><span class="params">(String message)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">			<span class="comment">//遍历所有的在线客户端，一一转发</span></span><br><span class="line">			<span class="keyword">for</span> (Socket on : online) &#123;</span><br><span class="line">				OutputStream every = on.getOutputStream();</span><br><span class="line">				<span class="comment">//为什么用PrintStream？目的用它的println方法，按行打印</span></span><br><span class="line">				PrintStream ps = <span class="keyword">new</span> PrintStream(every);</span><br><span class="line">				</span><br><span class="line">				ps.println(message);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>客户端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.tcp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestChatClient</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">//1、连接服务器</span></span><br><span class="line">		Socket socket = <span class="keyword">new</span> Socket(<span class="string">"127.0.0.1"</span>,<span class="number">8989</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//2、开启两个线程</span></span><br><span class="line">		<span class="comment">//(1)一个线程负责看别人聊，即接收服务器转发的消息</span></span><br><span class="line">		Receive receive = <span class="keyword">new</span> Receive(socket);</span><br><span class="line">		receive.start();</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//(2)一个线程负责发送自己的话</span></span><br><span class="line">		Send send = <span class="keyword">new</span> Send(socket);</span><br><span class="line">		send.start();</span><br><span class="line">		</span><br><span class="line">		send.join();<span class="comment">//等我发送线程结束了，才结束整个程序</span></span><br><span class="line">		</span><br><span class="line">		socket.close();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Send</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Socket socket;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Send</span><span class="params">(Socket socket)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.socket = socket;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">			<span class="comment">//按行打印</span></span><br><span class="line">			PrintStream ps = <span class="keyword">new</span> PrintStream(outputStream);</span><br><span class="line">			</span><br><span class="line">			Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">			</span><br><span class="line">			<span class="comment">//从键盘不断的输入自己的话，给服务器发送，由服务器给其他人转发</span></span><br><span class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">				System.out.print(<span class="string">"自己的话："</span>);</span><br><span class="line">				String str = input.nextLine();</span><br><span class="line">				<span class="keyword">if</span>(<span class="string">"bye"</span>.equals(str))&#123;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				ps.println(str);</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			input.close();</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Receive</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Socket socket;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Receive</span><span class="params">(Socket socket)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.socket = socket;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			InputStream inputStream = socket.getInputStream();</span><br><span class="line">			Scanner input = <span class="keyword">new</span> Scanner(inputStream);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">while</span>(input.hasNextLine())&#123;</span><br><span class="line">				String line = input.nextLine();</span><br><span class="line">				System.out.println(line);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="4-5-理解客户端、服务端"><a href="#4-5-理解客户端、服务端" class="headerlink" title="4.5 理解客户端、服务端"></a>4.5 理解客户端、服务端</h3><ul>
<li><p>客户端：</p>
<ul>
<li>自定义</li>
<li>浏览器(browser — server)</li>
</ul>
</li>
<li><p>服务端：</p>
<ul>
<li>自定义</li>
<li>Tomcat服务器</li>
</ul>
</li>
</ul>
<h2 id="5-UDP网络编程"><a href="#5-UDP网络编程" class="headerlink" title="5. UDP网络编程"></a>5. UDP网络编程</h2><p>UDP(User Datagram Protocol，用户数据报协议)：是一个无连接的传输层协议、提供面向事务的简单不可靠的信息传送服务，类似于短信。</p>
<h3 id="5-1-通信模型"><a href="#5-1-通信模型" class="headerlink" title="5.1 通信模型"></a>5.1 通信模型</h3><p>UDP协议是一种<strong>面向非连接</strong>的协议，面向非连接指的是在正式通信前不必与对方先建立连接，不管对方状态就直接发送，至于对方是否可以接收到这些数据内容，UDP协议无法控制，因此说，UDP协议是一种<strong>不可靠的</strong>协议。无连接的好处就是快，省内存空间和流量，因为维护连接需要创建大量的数据结构。UDP会尽最大努力交付数据，但不保证可靠交付，没有TCP的确认机制、重传机制，如果因为网络原因没有传送到对端，UDP也不会给应用层返回错误信息。</p>
<p>UDP协议是面向数据报文的信息传送服务。UDP在发送端没有缓冲区，对于应用层交付下来的报文在添加了首部之后就直接交付于ip层，不会进行合并，也不会进行拆分，而是一次交付一个完整的报文。比如我们要发送100个字节的报文，我们调用一次send()方法就会发送100字节，接收方也需要用receive()方法一次性接收100字节，不能使用循环每次获取10个字节，获取十次这样的做法。</p>
<p>UDP协议没有拥塞控制，所以当网络出现的拥塞不会导致主机发送数据的速率降低。虽然UDP的接收端有缓冲区，但是这个缓冲区只负责接收，并不会保证UDP报文的到达顺序是否和发送的顺序一致。因为网络传输的时候，由于网络拥塞的存在是很大的可能导致先发的报文比后发的报文晚到达。如果此时缓冲区满了，后面到达的报文将直接被丢弃。这个对实时应用来说很重要，比如：视频通话、直播等应用。</p>
<p>因此UDP适用于一次只传送少量数据、对可靠性要求不高的应用环境，数据报大小限制在64K以下。</p>
<p><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220131144712460.png" alt="image-20220131144712460"></p>
<p>类 DatagramSocket 和 DatagramPacket 实现了基于 UDP 协议网络程序。</p>
<p> UDP数据报通过数据报套接字 DatagramSocket 发送和接收，系统不保证  UDP数据报一定能够安全送到目的地，也不能确定什么时候可以抵达。</p>
<p> DatagramPacket 对象封装了UDP数据报，在数据报中包含了发送端的IP地址和端口号以及接收端的IP地址和端口号。</p>
<p> UDP协议中每个数据报都给出了完整的地址信息，因此无须建立发送方和接收方的连接。如同发快递包裹一样。</p>
<h3 id="5-2-开发步骤"><a href="#5-2-开发步骤" class="headerlink" title="5.2 开发步骤"></a>5.2 开发步骤</h3><p><strong>发送端程序包含以下四个基本的步骤：</strong></p>
<ul>
<li>创建DatagramSocket ：默认使用系统随机分配端口号。</li>
<li>创建DatagramPacket：将要发送的数据用字节数组表示，并指定要发送的数据长度，接收方的IP地址和端口号。</li>
<li>调用  该DatagramSocket 类对象的 send方法 ：发送数据报DatagramPacket对象。</li>
<li>关闭DatagramSocket 对象：发送端程序结束，关闭通信套接字。</li>
</ul>
<p><strong>接收端程序包含以下四个基本的步骤 ：</strong></p>
<ul>
<li>创建DatagramSocket ：指定监听的端口号。</li>
<li>创建DatagramPacket：指定接收数据用的字节数组，起到临时数据缓冲区的效果，并指定最大可以接收的数据长度。</li>
<li>调用  该DatagramSocket 类对象的receive方法 ：接收数据报DatagramPacket对象。。</li>
<li>关闭DatagramSocket ：接收端程序结束，关闭通信套接字。</li>
</ul>
<h3 id="5-3-演示发送和接收消息"><a href="#5-3-演示发送和接收消息" class="headerlink" title="5.3 演示发送和接收消息"></a>5.3 演示发送和接收消息</h3><p>基于UDP协议的网络编程仍然需要在通信实例的两端各建立一个Socket，但这两个Socket之间并没有虚拟链路，这两个Socket只是发送、接收数据报的对象，Java提供了DatagramSocket对象作为基于UDP协议的Socket，使用DatagramPacket代表DatagramSocket发送、接收的数据报。</p>
<h4 id="举例1："><a href="#举例1：" class="headerlink" title="举例1："></a>举例1：</h4><p>发送端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">DatagramSocket ds = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    ds = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line">    <span class="keyword">byte</span>[] by = <span class="string">"hello,atguigu.com"</span>.getBytes();</span><br><span class="line">    DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(by, <span class="number">0</span>, by.length,     InetAddress.getByName(<span class="string">"127.0.0.1"</span>), <span class="number">10000</span>);</span><br><span class="line">    ds.send(dp);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (ds != <span class="keyword">null</span>)</span><br><span class="line">        ds.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接收端：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DatagramSocket ds = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    ds = <span class="keyword">new</span> DatagramSocket(<span class="number">10000</span>);</span><br><span class="line">    <span class="keyword">byte</span>[] by = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>*<span class="number">64</span>];</span><br><span class="line">    DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(by, by.length);</span><br><span class="line">    ds.receive(dp);</span><br><span class="line">    String str = <span class="keyword">new</span> String(dp.getData(), <span class="number">0</span>, dp.getLength());</span><br><span class="line">    System.out.println(str + <span class="string">"--"</span> + dp.getAddress());</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (ds != <span class="keyword">null</span>)</span><br><span class="line">        ds.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="举例2："><a href="#举例2：" class="headerlink" title="举例2："></a>举例2：</h4><p><strong>发送端：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.udp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Send</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="comment">//		1、建立发送端的DatagramSocket</span></span><br><span class="line">        DatagramSocket ds = <span class="keyword">new</span> DatagramSocket();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//要发送的数据</span></span><br><span class="line">        ArrayList&lt;String&gt; all = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        all.add(<span class="string">"尚硅谷让天下没有难学的技术！"</span>);</span><br><span class="line">        all.add(<span class="string">"学高端前沿的IT技术来尚硅谷！"</span>);</span><br><span class="line">        all.add(<span class="string">"尚硅谷让你的梦想变得更具体！"</span>);</span><br><span class="line">        all.add(<span class="string">"尚硅谷让你的努力更有价值！"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//接收方的IP地址</span></span><br><span class="line">        InetAddress ip = InetAddress.getByName(<span class="string">"127.0.0.1"</span>);</span><br><span class="line">        <span class="comment">//接收方的监听端口号</span></span><br><span class="line">        <span class="keyword">int</span> port = <span class="number">9999</span>;</span><br><span class="line">        <span class="comment">//发送多个数据报</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; all.size(); i++) &#123;</span><br><span class="line"><span class="comment">//			2、建立数据包DatagramPacket</span></span><br><span class="line">            <span class="keyword">byte</span>[] data = all.get(i).getBytes();</span><br><span class="line">            DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(data, <span class="number">0</span>, data.length, ip, port);</span><br><span class="line"><span class="comment">//			3、调用Socket的发送方法</span></span><br><span class="line">            ds.send(dp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//		4、关闭Socket</span></span><br><span class="line">        ds.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>接收端：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.udp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Receive</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="comment">//		1、建立接收端的DatagramSocket，需要指定本端的监听端口号</span></span><br><span class="line">        DatagramSocket ds = <span class="keyword">new</span> DatagramSocket(<span class="number">9999</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//一直监听数据</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            <span class="comment">//2、建立数据包DatagramPacket</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>*<span class="number">64</span>];</span><br><span class="line">            DatagramPacket dp = <span class="keyword">new</span> DatagramPacket(buffer,buffer.length);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//3、调用Socket的接收方法</span></span><br><span class="line">            ds.receive(dp);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//4、拆封数据</span></span><br><span class="line">            String str = <span class="keyword">new</span> String(dp.getData(),<span class="number">0</span>,dp.getLength());</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        ds.close();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-URL编程"><a href="#6-URL编程" class="headerlink" title="6. URL编程"></a>6. URL编程</h2><h3 id="6-1-URL类"><a href="#6-1-URL类" class="headerlink" title="6.1 URL类"></a>6.1 URL类</h3><ul>
<li><p>URL(Uniform Resource Locator)：统一资源定位符，它表示 Internet 上某一资源的地址。</p>
</li>
<li><p>通过 URL 我们可以访问 Internet 上的各种网络资源，比如最常见的 www，ftp 站点。浏览器通过解析给定的 URL 可以在网络上查找相应的文件或其他资源。 </p>
</li>
<li><p>URL的基本结构由5部分组成：</p>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;传输协议&gt;://&lt;主机名&gt;:&lt;端口号&gt;/&lt;文件名&gt;#片段名?参数列表</span><br></pre></td></tr></table></figure>

<ul>
<li><p>例如: <a href="http://192.168.1.100:8080/helloworld/index.jsp#a?username=shkstart&amp;password=123" target="_blank" rel="noopener">http://192.168.1.100:8080/helloworld/index.jsp#a?username=shkstart&amp;password=123</a></p>
<ul>
<li>片段名：即锚点，例如看小说，直接定位到章节</li>
<li>参数列表格式：参数名=参数值&amp;参数名=参数值….</li>
</ul>
</li>
<li><p>为了表示URL，java.net 中实现了类 URL。我们可以通过下面的构造器来初始化一个 URL 对象：</p>
<ul>
<li><p>public URL (String spec)：通过一个表示URL地址的字符串可以构造一个URL对象。例如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URL url = new URL("http://www. atguigu.com/");</span><br></pre></td></tr></table></figure>
</li>
<li><p>public URL(URL context, String spec)：通过基 URL 和相对 URL 构造一个 URL 对象。例如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URL downloadUrl = new URL(url, “download.html")</span><br></pre></td></tr></table></figure>

<p>public URL(String protocol, String host, String file); 例如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URL url = new URL("http", "www.atguigu.com", “download. html");</span><br></pre></td></tr></table></figure>
</li>
<li><p>public URL(String protocol, String host, int port, String file); 例如: </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">URL gamelan = <span class="keyword">new</span> URL(<span class="string">"http"</span>, <span class="string">"www.atguigu.com"</span>, <span class="number">80</span>, “download.html<span class="string">");</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>URL类的构造器都声明抛出非运行时异常，必须要对这一异常进行处理，通常是用 try-catch 语句进行捕获。</p>
</li>
</ul>
<p><img src="F:/JAVA%25E8%25B7%25AF%25E7%25BA%25BF%25E8%25AF%25BE%25E7%25A8%258B%25E8%25B5%2584%25E6%2596%2599/JAVA2023%25E5%259F%25BA%25E7%25A1%2580%25E5%2585%25A8%25E5%25A5%2597/01_%25E8%25AF%25BE%25E4%25BB%25B6%25E4%25B8%258E%25E7%2594%25B5%25E5%25AD%2590%25E6%2595%2599%25E6%259D%2590/%25E5%25B0%259A%25E7%25A1%2585%25E8%25B0%25B7_%25E7%25AC%25AC16%25E7%25AB%25A0_%25E7%25BD%2591%25E7%25BB%259C%25E7%25BC%2596%25E7%25A8%258B/images/image-20220415013546074.png" alt="image-20220415013546074"></p>
<h3 id="6-2-URL类常用方法"><a href="#6-2-URL类常用方法" class="headerlink" title="6.2 URL类常用方法"></a>6.2 URL类常用方法</h3><p>一个URL对象生成后，其属性是不能被改变的，但可以通过它给定的方法来获取这些属性：</p>
<ul>
<li><p>public String getProtocol( )   获取该URL的协议名</p>
</li>
<li><p>public String getHost( )      获取该URL的主机名</p>
</li>
<li><p>public String getPort( )      获取该URL的端口号</p>
</li>
<li><p>public String getPath( )      获取该URL的文件路径</p>
</li>
<li><p>public String getFile( )       获取该URL的文件名</p>
</li>
<li><p>public String getQuery(  )    获取该URL的查询名</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">URL url = <span class="keyword">new</span> URL(<span class="string">"http://localhost:8080/examples/myTest.txt"</span>);</span><br><span class="line">System.out.println(<span class="string">"getProtocol() :"</span>+url.getProtocol());</span><br><span class="line">System.out.println(<span class="string">"getHost() :"</span>+url.getHost());</span><br><span class="line">System.out.println(<span class="string">"getPort() :"</span>+url.getPort());</span><br><span class="line">System.out.println(<span class="string">"getPath() :"</span>+url.getPath());</span><br><span class="line">System.out.println(<span class="string">"getFile() :"</span>+url.getFile());</span><br><span class="line">System.out.println(<span class="string">"getQuery() :"</span>+url.getQuery());</span><br></pre></td></tr></table></figure>

<h3 id="6-3-针对HTTP协议的URLConnection类"><a href="#6-3-针对HTTP协议的URLConnection类" class="headerlink" title="6.3 针对HTTP协议的URLConnection类"></a>6.3 针对HTTP协议的URLConnection类</h3><ul>
<li><p>URL的方法 openStream()：能从网络上读取数据</p>
</li>
<li><p>若希望输出数据，例如向服务器端的 CGI （公共网关接口-Common Gateway Interface-的简称，是用户浏览器和服务器端的应用程序进行连接的接口）程序发送一些数据，则必须先与URL建立连接，然后才能对其进行读写，此时需要使用 URLConnection 。</p>
</li>
<li><p>URLConnection：表示到URL所引用的远程对象的连接。当与一个URL建立连接时，首先要在一个 URL 对象上通过方法 openConnection() 生成对应的 URLConnection 对象。如果连接过程失败，将产生IOException. </p>
<ul>
<li>URL netchinaren = new URL (“<a href="http://www.atguigu.com/index.shtml&quot;" target="_blank" rel="noopener">http://www.atguigu.com/index.shtml&quot;</a>); </li>
<li>URLConnectonn u = netchinaren.openConnection( ); </li>
</ul>
</li>
<li><p>通过URLConnection对象获取的输入流和输出流，即可以与现有的CGI程序进行交互。</p>
<ul>
<li><p>public Object getContent( ) throws IOException</p>
</li>
<li><p>public int getContentLength( )</p>
</li>
<li><p>public String getContentType( )</p>
</li>
<li><p>public long getDate( )</p>
</li>
<li><p>public long getLastModified( )</p>
</li>
<li><p><strong>public InputStream getInputStream ( ) throws IOException</strong></p>
</li>
<li><p>public OutputSteram getOutputStream( )throws IOException</p>
</li>
</ul>
</li>
</ul>
<h3 id="6-4-小结"><a href="#6-4-小结" class="headerlink" title="6.4 小结"></a>6.4 小结</h3><ul>
<li><p>位于网络中的计算机具有唯一的IP地址，这样不同的主机可以互相区分。</p>
</li>
<li><p>客户端－服务器是一种最常见的网络应用程序模型。服务器是一个为其客户端提供某种特定服务的硬件或软件。客户机是一个用户应用程序，用于访问某台服务器提供的服务。端口号是对一个服务的访问场所，它用于区分同一物理计算机上的多个服务。套接字用于连接客户端和服务器，客户端和服务器之间的每个通信会话使用一个不同的套接字。TCP协议用于实现面向连接的会话。</p>
</li>
<li><p>Java 中有关网络方面的功能都定义在 java.net 程序包中。Java 用 InetAddress 对象表示 IP 地址，该对象里有两个字段：主机名(String) 和 IP 地址(int)。</p>
</li>
<li><p>类 Socket 和 ServerSocket 实现了基于TCP协议的客户端－服务器程序。Socket是客户端和服务器之间的一个连接，连接创建的细节被隐藏了。这个连接提供了一个安全的数据传输通道，这是因为 TCP 协议可以解决数据在传送过程中的丢失、损坏、重复、乱序以及网络拥挤等问题，它保证数据可靠的传送。</p>
</li>
<li><p>类 URL 和 URLConnection 提供了最高级网络应用。URL 的网络资源的位置来同一表示 Internet 上各种网络资源。通过URL对象可以创建当前应用程序和 URL 表示的网络资源之间的连接，这样当前程序就可以读取网络资源数据，或者把自己的数据传送到网络上去。</p>
</li>
</ul>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JAVA-File类和IO流" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/31/JAVA-File%E7%B1%BB%E5%92%8CIO%E6%B5%81/" class="article-date">
      <time datetime="2023-10-31T13:35:08.000Z" itemprop="datePublished">2023-10-31</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/31/JAVA-File%E7%B1%BB%E5%92%8CIO%E6%B5%81/">JAVA-File类和IO流</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="第15章-File类与IO流"><a href="#第15章-File类与IO流" class="headerlink" title="第15章_File类与IO流"></a>第15章_File类与IO流</h1><h2 id="本章专题与脉络"><a href="#本章专题与脉络" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010935879.png" alt="第3阶段：Java高级应用-第15章" style="zoom:67%;">

<hr>
<h2 id="1-java-io-File类的使用"><a href="#1-java-io-File类的使用" class="headerlink" title="1. java.io.File类的使用"></a>1. java.io.File类的使用</h2><h3 id="1-1-概述"><a href="#1-1-概述" class="headerlink" title="1.1 概述"></a>1.1 概述</h3><ul>
<li>File类及本章下的各种流，都定义在<strong>java.io</strong>包下。</li>
<li>一个File对象  —-代表—-&gt;  硬盘或网络中可能存在的一个文件/文件目录（俗称文件夹），与平台无关。（体会万事万物皆对象）</li>
<li>File 能新建、删除、重命名文件和目录，但 File 不能访问文件内容本身。如果需要访问文件内容本身，则需要使用输入/输出流。<ul>
<li>File对象可以作为参数传递给流的构造器。</li>
</ul>
</li>
<li>想要在Java程序中表示一个真实存在的文件或目录，那么必须有一个File对象，但是Java程序中的一个File对象，可能没有一个真实存在的文件或目录。</li>
</ul>
<h3 id="1-2-构造器"><a href="#1-2-构造器" class="headerlink" title="1.2 构造器"></a>1.2 构造器</h3><ul>
<li><code>public File(String pathname)</code> ：以pathname为路径创建File对象，可以是绝对路径或者相对路径，如果pathname是相对路径，则默认的当前路径在系统属性user.dir中存储。</li>
<li><code>public File(String parent, String child)</code> ：以parent为父路径，child为子路径创建File对象。</li>
<li><code>public File(File parent, String child)</code> ：根据一个父File对象和子文件路径创建File对象</li>
</ul>
<p>关于路径：</p>
<ul>
<li><strong>绝对路径：</strong>从盘符开始的路径，这是一个完整的路径。</li>
<li><strong>相对路径：</strong>相对于<code>项目目录</code>的路径，这是一个便捷的路径，开发中经常使用。<ul>
<li>IDEA中，main中的文件的相对路径，是相对于”<code>当前工程project</code>“</li>
<li>IDEA中，单元测试方法中的文件的相对路径，是相对于”<code>当前模块module</code>“</li>
</ul>
</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileObjectTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//1.File(String pathname)</span></span><br><span class="line">        File file1 = <span class="keyword">new</span> File(<span class="string">"D:\\javacode\\test\\abc"</span>);</span><br><span class="line">        System.out.println(file1.getAbsoluteFile());  <span class="comment">// D:\javacode\test\abc</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.File(String parent,String child) 以parent为父路径，child为子路径创建File对象</span></span><br><span class="line">        <span class="comment">//参数1：一定是一个文件目录</span></span><br><span class="line">        <span class="comment">//参数2：可以是一个文件，也可以是一个文件目录</span></span><br><span class="line">        String parent = <span class="string">"D:\\aaa"</span>;</span><br><span class="line">        String child = <span class="string">"bbb.txt"</span>;</span><br><span class="line">        File file2 = <span class="keyword">new</span> File(parent, child);</span><br><span class="line">        System.out.println(file2.getAbsoluteFile());   <span class="comment">// D:\aaa\bbb.txt </span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.File(File parent,String child)  根据一个父File对象和子文件路径创建File对象</span></span><br><span class="line">        <span class="comment">// 参数1：一定是一个文件目录</span></span><br><span class="line">        <span class="comment">//参数2：可以是一个文件，也可以是一个文件目录</span></span><br><span class="line">        File parentDir = <span class="keyword">new</span> File(<span class="string">"D:\\aaa"</span>);</span><br><span class="line">        String childFile = <span class="string">"bbb.txt"</span>;</span><br><span class="line">        File file3 = <span class="keyword">new</span> File(parentDir, childFile);</span><br><span class="line">        System.out.println(file3.getAbsoluteFile());  <span class="comment">// D:\aaa\bbb.txt </span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        File f1 = <span class="keyword">new</span> File(<span class="string">"d:\\atguigu\\javase\\HelloIO.java"</span>); <span class="comment">//绝对路径</span></span><br><span class="line">        System.out.println(<span class="string">"文件/目录的名称："</span> + f1.getName());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的构造路径名："</span> + f1.getPath());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的绝对路径名："</span> + f1.getAbsolutePath());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的父目录名："</span> + f1.getParent());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        File f2 = <span class="keyword">new</span> File(<span class="string">"/HelloIO.java"</span>);<span class="comment">//绝对路径，从根路径开始</span></span><br><span class="line">        System.out.println(<span class="string">"文件/目录的名称："</span> + f2.getName());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的构造路径名："</span> + f2.getPath());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的绝对路径名："</span> + f2.getAbsolutePath());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的父目录名："</span> + f2.getParent());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        File f3 = <span class="keyword">new</span> File(<span class="string">"HelloIO.java"</span>);<span class="comment">//相对路径</span></span><br><span class="line">        System.out.println(<span class="string">"user.dir ="</span> + System.getProperty(<span class="string">"user.dir"</span>));</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的名称："</span> + f3.getName());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的构造路径名："</span> + f3.getPath());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的绝对路径名："</span> + f3.getAbsolutePath());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的父目录名："</span> + f3.getParent());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        File f5 = <span class="keyword">new</span> File(<span class="string">"HelloIO.java"</span>);<span class="comment">//相对路径</span></span><br><span class="line">        System.out.println(<span class="string">"user.dir ="</span> + System.getProperty(<span class="string">"user.dir"</span>));</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的名称："</span> + f5.getName());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的构造路径名："</span> + f5.getPath());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的绝对路径名："</span> + f5.getAbsolutePath());</span><br><span class="line">        System.out.println(<span class="string">"文件/目录的父目录名："</span> + f5.getParent());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：</p>
<ol>
<li><p>无论该路径下是否存在文件或者目录，都不影响File对象的创建。</p>
</li>
<li><p>window的路径分隔符使用“\”，而Java程序中的“\”表示转义字符，所以在Windows中表示路径，需要用“\”。或者直接使用“/”也可以，Java程序支持将“/”当成平台无关的<code>路径分隔符</code>。或者直接使用File.separator常量值表示。比如：</p>
<p>File file2 = new File(“d:” + File.separator + “atguigu” + File.separator + “info.txt”);</p>
</li>
<li><p>当构造路径是绝对路径时，那么getPath和getAbsolutePath结果一样</p>
<p>当构造路径是相对路径时，那么getAbsolutePath的路径 = user.dir的路径 + 构造路径</p>
</li>
</ol>
</blockquote>
<h3 id="1-3-常用方法"><a href="#1-3-常用方法" class="headerlink" title="1.3 常用方法"></a>1.3 常用方法</h3><h4 id="1、获取文件和目录基本信息"><a href="#1、获取文件和目录基本信息" class="headerlink" title="1、获取文件和目录基本信息"></a>1、获取文件和目录基本信息</h4><ul>
<li>public String getName() ：获取名称</li>
<li>public String getPath() ：获取路径</li>
<li><code>public String getAbsolutePath()</code>：获取绝对路径</li>
<li>public File getAbsoluteFile()：获取绝对路径表示的文件</li>
<li><code>public String getParent()</code>：获取上层文件目录路径。若无，返回null</li>
<li>public long length() ：获取文件长度（即：字节数）。不能获取目录的长度。</li>
<li>public long lastModified() ：获取最后一次的修改时间，毫秒值</li>
</ul>
<blockquote>
<p>如果File对象代表的文件或目录存在，则File对象实例初始化时，就会用硬盘中对应文件或目录的属性信息（例如，时间、类型等）为File对象的属性赋值，否则除了路径和名称，File对象的其他属性将会保留默认值。</p>
</blockquote>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010936470.png" alt="image-20220412215446368" style="zoom:80%;">

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//文件存在</span></span><br><span class="line">    File file=<span class="keyword">new</span> File(<span class="string">"E:\\宋亚翔-学业奖材料\\宋亚翔.docx"</span>);</span><br><span class="line">    System.out.println(<span class="string">"文件名称:"</span>+file.getName());</span><br><span class="line">    System.out.println(<span class="string">"文件路径:"</span>+file.getPath());</span><br><span class="line">    System.out.println(<span class="string">"文件绝对路径:"</span>+file.getAbsoluteFile());</span><br><span class="line">    System.out.println(<span class="string">"绝对路径的文件:"</span>+file.getAbsoluteFile());</span><br><span class="line">    System.out.println(<span class="string">"上层文件目录路径:"</span>+file.getParent());</span><br><span class="line">    System.out.println(<span class="string">"文件大小(字节数):"</span>+file.length());</span><br><span class="line">    System.out.println(<span class="string">"足迹后一次修改时间(毫秒值):"</span>+file.lastModified());</span><br><span class="line">    System.out.println(<span class="string">"-----------------------------------------------------------------"</span>);</span><br><span class="line">    <span class="comment">//文件不存在</span></span><br><span class="line">    File file1=<span class="keyword">new</span> File(<span class="string">"E:\\宋亚翔-学业奖材料\\李四.docx"</span>);</span><br><span class="line">    System.out.println(<span class="string">"文件名称:"</span>+file1.getName());</span><br><span class="line">    System.out.println(<span class="string">"文件路径:"</span>+file1.getPath());</span><br><span class="line">    System.out.println(<span class="string">"文件绝对路径:"</span>+file1.getAbsoluteFile());</span><br><span class="line">    System.out.println(<span class="string">"绝对路径的文件:"</span>+file1.getAbsoluteFile());</span><br><span class="line">    System.out.println(<span class="string">"上层文件目录路径:"</span>+file1.getParent());</span><br><span class="line">    <span class="comment">//其他属性保留默认值</span></span><br><span class="line">    System.out.println(<span class="string">"文件大小(字节数):"</span>+file1.length());</span><br><span class="line">    System.out.println(<span class="string">"足迹后一次修改时间(毫秒值):"</span>+file1.lastModified());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311011034030.png" alt="image-20231101103403951"></p>
<h4 id="2、列出目录的下一级"><a href="#2、列出目录的下一级" class="headerlink" title="2、列出目录的下一级"></a>2、列出目录的下一级</h4><ul>
<li>public String[] list() ：返回一个String数组，表示该File目录中的所有子文件或目录。</li>
<li>public File[] listFiles() ：返回一个File数组，表示该File目录中的所有的子文件或目录。 </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//文件存在</span></span><br><span class="line">    File file=<span class="keyword">new</span> File(<span class="string">"E:\\宋亚翔-学业奖材料"</span>);</span><br><span class="line">    String[] strs=file.list();</span><br><span class="line">    <span class="keyword">for</span>(String temp:strs)&#123;</span><br><span class="line">        System.out.println(temp);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"--------------------------------------"</span>);</span><br><span class="line">    File[] files = file.listFiles();</span><br><span class="line">    <span class="keyword">for</span>(File temp:files)&#123;</span><br><span class="line">        System.out.println(temp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311011102588.png" alt="image-20231101110256535"></p>
<h4 id="3、File类的重命名功能"><a href="#3、File类的重命名功能" class="headerlink" title="3、File类的重命名功能"></a>3、File类的重命名功能</h4><ul>
<li>public boolean renameTo(File dest):把文件重命名为指定的文件路径。</li>
</ul>
<h4 id="4、判断功能的方法"><a href="#4、判断功能的方法" class="headerlink" title="4、判断功能的方法"></a>4、判断功能的方法</h4><ul>
<li><code>public boolean exists()</code> ：此File表示的文件或目录是否实际存在。</li>
<li><code>public boolean isDirectory()</code> ：此File表示的是否为目录。</li>
<li><code>public boolean isFile()</code> ：此File表示的是否为文件。</li>
<li>public boolean canRead() ：判断是否可读</li>
<li>public boolean canWrite() ：判断是否可写</li>
<li>public boolean isHidden() ：判断是否隐藏</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//文件存在</span></span><br><span class="line">    File file=<span class="keyword">new</span> File(<span class="string">"E:\\宋亚翔-学业奖材料\\宋亚翔.docx"</span>);</span><br><span class="line">    System.out.println(<span class="string">"文件是否存在:"</span>+file.exists());</span><br><span class="line">    System.out.println(<span class="string">"file是否为目录:"</span>+file.isDirectory());</span><br><span class="line">    System.out.println(<span class="string">"file是否为文件:"</span>+file.isFile());</span><br><span class="line">    System.out.println(<span class="string">"file是否可读:"</span>+file.canRead());</span><br><span class="line">    System.out.println(<span class="string">"file是否可写:"</span>+file.canWrite());</span><br><span class="line">    System.out.println(<span class="string">"file是否隐藏:"</span>+file.isHidden());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311011107117.png" alt="image-20231101110745077"></p>
<blockquote>
<p>如果文件或目录不存在，那么exists()、isFile()和isDirectory()都是返回true</p>
</blockquote>
<h4 id="5、创建、删除功能"><a href="#5、创建、删除功能" class="headerlink" title="5、创建、删除功能"></a>5、创建、删除功能</h4><ul>
<li><code>public boolean createNewFile()</code> ：创建文件。若文件存在，则不创建，返回false。</li>
<li><code>public boolean mkdir()</code> ：创建文件目录。如果此文件目录存在，就不创建了。如果此文件目录的上层目录不存在，也不创建。</li>
<li><code>public boolean mkdirs()</code> ：创建文件目录。如果上层文件目录不存在，一并创建。</li>
<li><code>public boolean delete()</code> ：删除文件或者文件夹<br>删除注意事项：① Java中的删除不走回收站。② 要删除一个文件目录，请注意该文件目录内不能包含文件或者文件目录。</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileCreateDelete</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 文件的创建</span></span><br><span class="line">        File f = <span class="keyword">new</span> File(<span class="string">"aaa.txt"</span>);</span><br><span class="line">        System.out.println(<span class="string">"aaa.txt是否存在:"</span>+f.exists()); </span><br><span class="line">        System.out.println(<span class="string">"aaa.txt是否创建:"</span>+f.createNewFile()); </span><br><span class="line">        System.out.println(<span class="string">"aaa.txt是否存在:"</span>+f.exists()); </span><br><span class="line"></span><br><span class="line">        <span class="comment">// 目录的创建</span></span><br><span class="line">        File f2= <span class="keyword">new</span> File(<span class="string">"newDir"</span>);</span><br><span class="line">        System.out.println(<span class="string">"newDir是否存在:"</span>+f2.exists());</span><br><span class="line">        System.out.println(<span class="string">"newDir是否创建:"</span>+f2.mkdir());</span><br><span class="line">        System.out.println(<span class="string">"newDir是否存在:"</span>+f2.exists());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建一级目录</span></span><br><span class="line">        File f3= <span class="keyword">new</span> File(<span class="string">"newDira\\newDirb"</span>);</span><br><span class="line">        System.out.println(<span class="string">"newDira\\newDirb创建："</span> + f3.mkdir());</span><br><span class="line">        File f4= <span class="keyword">new</span> File(<span class="string">"newDir\\newDirb"</span>);</span><br><span class="line">        System.out.println(<span class="string">"newDir\\newDirb创建："</span> + f4.mkdir());</span><br><span class="line">        <span class="comment">// 创建多级目录</span></span><br><span class="line">        File f5= <span class="keyword">new</span> File(<span class="string">"newDira\\newDirb"</span>);</span><br><span class="line">        System.out.println(<span class="string">"newDira\\newDirb创建："</span> + f5.mkdirs());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 文件的删除</span></span><br><span class="line">        System.out.println(<span class="string">"aaa.txt删除："</span> + f.delete());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 目录的删除   delete方法，如果此File表示目录，则目录必须为空才能删除</span></span><br><span class="line">        System.out.println(<span class="string">"newDir删除："</span> + f2.delete());</span><br><span class="line">        System.out.println(<span class="string">"newDir\\newDirb删除："</span> + f4.delete()); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">运行结果：</span><br><span class="line">aaa.txt是否存在:<span class="keyword">false</span></span><br><span class="line">aaa.txt是否创建:<span class="keyword">true</span></span><br><span class="line">aaa.txt是否存在:<span class="keyword">true</span></span><br><span class="line">newDir是否存在:<span class="keyword">false</span></span><br><span class="line">newDir是否创建:<span class="keyword">true</span></span><br><span class="line">newDir是否存在:<span class="keyword">true</span></span><br><span class="line">newDira\newDirb创建：<span class="keyword">false</span></span><br><span class="line">newDir\newDirb创建：<span class="keyword">true</span></span><br><span class="line">newDira\newDirb创建：<span class="keyword">true</span></span><br><span class="line">aaa.txt删除：<span class="keyword">true</span></span><br><span class="line">newDir删除：<span class="keyword">false</span></span><br><span class="line">newDir\newDirb删除：<span class="keyword">true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>API中说明：delete方法，如果此File表示目录，则目录必须为空才能删除。</p>
</blockquote>
<h3 id="1-4-练习"><a href="#1-4-练习" class="headerlink" title="1.4 练习"></a>1.4 练习</h3><p>练习1：利用File构造器，new 一个文件目录file</p>
<p>​      1) 在其中创建多个文件和目录</p>
<pre><code>2) 编写方法，实现删除file中指定文件的操作</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test6() throws IOException &#123;</span><br><span class="line">    File file&#x3D;new File(&quot;F:\\test1&quot;);</span><br><span class="line">    File file1&#x3D;new File(&quot;F:\\test1\\abc.txt&quot;);</span><br><span class="line">    File file2&#x3D;new File(&quot;F:\\test1\\aaa.txt&quot;);</span><br><span class="line">    File file3&#x3D;new File(&quot;F:\\test1\\test1mulu&quot;);</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;创建一个文件目录</span><br><span class="line">    System.out.println(file.mkdir());  &#x2F;&#x2F;创建一个test1目录</span><br><span class="line">    &#x2F;&#x2F;创建多个文件和目录</span><br><span class="line">    System.out.println(file1.createNewFile());   &#x2F;&#x2F;新增abc.txt文件</span><br><span class="line">    System.out.println(file2.createNewFile());   &#x2F;&#x2F;新增aaa.txt文件</span><br><span class="line">    System.out.println(file3.mkdir());  &#x2F;&#x2F;新增test1mulu文件</span><br><span class="line">    &#x2F;&#x2F;删除file中指定文件</span><br><span class="line">    System.out.println(file1.delete());  &#x2F;&#x2F;删除abc.txt文件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311011433250.png" alt="image-20231101143332206"></p>
<p>练习2：判断指定目录下是否有后缀名为.jpg的文件。如果有，就输出该文件名称</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindJPGFileTest</span> </span>&#123;</span><br><span class="line">	<span class="comment">//方法1：</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">		File srcFile = <span class="keyword">new</span> File(<span class="string">"d:\\code"</span>);</span><br><span class="line">		</span><br><span class="line">		String[] fileNames = srcFile.list();  <span class="comment">//将code目录下所有文件转为字符串数组</span></span><br><span class="line">		<span class="keyword">for</span>(String fileName : fileNames)&#123;</span><br><span class="line">			<span class="keyword">if</span>(fileName.endsWith(<span class="string">".jpg"</span>))&#123;  <span class="comment">//查看是否以.jpg文件名结束</span></span><br><span class="line">				System.out.println(fileName);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//方法2：</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">		File srcFile = <span class="keyword">new</span> File(<span class="string">"d:\\code"</span>);</span><br><span class="line">		</span><br><span class="line">		File[] listFiles = srcFile.listFiles();</span><br><span class="line">		<span class="keyword">for</span>(File file : listFiles)&#123;</span><br><span class="line">			<span class="keyword">if</span>(file.getName().endsWith(<span class="string">".jpg"</span>))&#123;</span><br><span class="line">				System.out.println(file.getAbsolutePath());</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//方法3：</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * File类提供了两个文件过滤器方法</span></span><br><span class="line"><span class="comment">	 * public String[] list(FilenameFilter filter)</span></span><br><span class="line"><span class="comment">	 * public File[] listFiles(FileFilter filter)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">		File srcFile = <span class="keyword">new</span> File(<span class="string">"d:\\code"</span>);</span><br><span class="line">		</span><br><span class="line">		File[] subFiles = srcFile.listFiles(<span class="keyword">new</span> FilenameFilter() &#123;</span><br><span class="line">			</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir, String name)</span> </span>&#123;</span><br><span class="line">				<span class="keyword">return</span> name.endsWith(<span class="string">".jpg"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(File file : subFiles)&#123;</span><br><span class="line">			System.out.println(file.getAbsolutePath());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习3：遍历指定目录所有文件名称，包括子文件目录中的文件。</p>
<p>  拓展1：并计算指定目录占用空间的大小</p>
<p>  拓展2：删除指定文件目录及其下的所有文件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListFilesTest</span> </span>&#123;</span><br><span class="line">	<span class="comment">//练习3：(方式1)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printSubFile</span><span class="params">(File dir)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 打印目录的子文件</span></span><br><span class="line">        File[] subfiles = dir.listFiles();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (File f : subfiles) &#123;</span><br><span class="line">            <span class="keyword">if</span> (f.isDirectory()) &#123;<span class="comment">// 文件目录</span></span><br><span class="line">                printSubFile(f);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;<span class="comment">// 文件</span></span><br><span class="line">                System.out.println(f.getAbsolutePath());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// //练习3：(方式2)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">listAllSubFiles</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">            System.out.println(file);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            File[] all = file.listFiles();</span><br><span class="line">            <span class="comment">// 如果all[i]是文件，直接打印</span></span><br><span class="line">            <span class="comment">// 如果all[i]是目录，接着再获取它的下一级</span></span><br><span class="line">            <span class="keyword">for</span> (File f : all) &#123;</span><br><span class="line">                listAllSubFiles(f);<span class="comment">// 递归调用：自己调用自己就叫递归</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testListAllFiles</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 1.创建目录对象</span></span><br><span class="line">        File dir = <span class="keyword">new</span> File(<span class="string">"E:\\teach\\01_javaSE\\_尚硅谷Java编程语言\\3_软件"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.打印目录的子文件</span></span><br><span class="line">        printSubFile(dir);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拓展1：求指定目录所在空间的大小</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getDirectorySize</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// file是文件，那么直接返回file.length()</span></span><br><span class="line">        <span class="comment">// file是目录，把它的下一级的所有file大小加起来就是它的总大小</span></span><br><span class="line">        <span class="keyword">long</span> size = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">            size = file.length();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            File[] all = file.listFiles();<span class="comment">// 获取file的下一级</span></span><br><span class="line">            <span class="comment">// 累加all[i]的大小</span></span><br><span class="line">            <span class="keyword">for</span> (File f : all) &#123;</span><br><span class="line">                size += getDirectorySize(f);<span class="comment">// f的大小;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拓展2：删除指定的目录</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteDirectory</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 如果file是文件，直接delete</span></span><br><span class="line">        <span class="comment">// 如果file是目录，先把它的下一级干掉，然后删除自己</span></span><br><span class="line">        <span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">            File[] all = file.listFiles();</span><br><span class="line">            <span class="comment">// 循环删除的是file的下一级</span></span><br><span class="line">            <span class="keyword">for</span> (File f : all) &#123;<span class="comment">// f代表file的每一个下级</span></span><br><span class="line">                deleteDirectory(f);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 删除自己</span></span><br><span class="line">        file.delete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-IO流原理及流的分类"><a href="#2-IO流原理及流的分类" class="headerlink" title="2. IO流原理及流的分类"></a>2. IO流原理及流的分类</h2><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010937721.png" alt="image-20220412224132724"></p>
<h3 id="2-1-Java-IO原理"><a href="#2-1-Java-IO原理" class="headerlink" title="2.1 Java IO原理"></a>2.1 Java IO原理</h3><ul>
<li><p>Java程序中，<strong>数据的输入/输出操作</strong>以“<code>流(stream)</code>” 的方式进行，可以看做是一种数据的流动。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010937428.png" alt="image-20220503123117300" style="zoom: 80%;">
</li>
<li><p>I/O流中的I/O是<code>Input/Output</code>的缩写， I/O技术是非常实用的技术，用于处理设备之间的数据传输。如读/写文件，网络通讯等。</p>
<ul>
<li><code>输入input</code>：读取外部数据（磁盘、光盘等存储设备的数据）到程序（内存）中。</li>
<li><code>输出output</code>：将程序（内存）数据输出到磁盘、光盘等存储设备中。</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010937530.png" alt="image-20220412224700133"></p>
<h3 id="2-2-流的分类"><a href="#2-2-流的分类" class="headerlink" title="2.2 流的分类"></a>2.2 流的分类</h3><p><code>java.io</code>包下提供了各种“流”类和接口，用以获取不同种类的数据，并通过<code>标准的方法</code>输入或输出数据。</p>
<ul>
<li><p>按<strong>数据的流向不同</strong>  —-&gt; ：<strong>输入流</strong>和<strong>输出流</strong>。</p>
<ul>
<li><strong>输入流</strong> ：把数据从<code>其他设备</code>上读取到<code>内存</code>中的流。 <ul>
<li>以InputStream、Reader结尾</li>
</ul>
</li>
<li><strong>输出流</strong> ：把数据从<code>内存</code> 中写出到<code>其他设备</code>上的流。<ul>
<li>以OutputStream、Writer结尾</li>
</ul>
</li>
</ul>
</li>
<li><p>按<strong>操作数据单位的不同 ** —-&gt; ：</strong>字节流（8bit）<strong>和</strong>字符流（16bit）**。</p>
<ul>
<li><strong>字节流</strong> ：以字节为单位，读写数据的流。<ul>
<li>以InputStream、OutputStream结尾</li>
</ul>
</li>
<li><strong>字符流</strong> ：以字符为单位，读写数据的流。<ul>
<li>以Reader、Writer结尾</li>
</ul>
</li>
</ul>
</li>
<li><p>根据<strong>IO流的角色不同</strong> —-&gt; ：<strong>节点流</strong>和<strong>处理流</strong>。</p>
<ul>
<li><p><strong>节点流</strong>：直接从数据源或目的地读写数据</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010937732.png" alt="image-20220412230745170"></p>
</li>
<li><p><strong>处理流</strong>：不直接连接到数据源或目的地，而是“连接”在已存在的流（节点流或处理流）之上，通过对数据的处理为程序提供更为强大的读写功能。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010937489.png" alt="image-20220412230751461"></p>
</li>
</ul>
</li>
</ul>
<p>小结：图解</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010937159.png" alt="image-20220412225253349" style="zoom:67%;">

<h3 id="2-3-流的API"><a href="#2-3-流的API" class="headerlink" title="2.3 流的API"></a>2.3 流的API</h3><ul>
<li>Java的IO流共涉及40多个类，实际上非常规则，都是从如下4个抽象基类派生的。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">（抽象基类）</th>
<th align="center">输入流</th>
<th align="center">输出流</th>
</tr>
</thead>
<tbody><tr>
<td align="center">字节流(以字节为单位，读写数据)</td>
<td align="center">InputStream</td>
<td align="center">OutputStream</td>
</tr>
<tr>
<td align="center">字符流(以字符为单位，读写数据)</td>
<td align="center">Reader</td>
<td align="center">Writer</td>
</tr>
</tbody></table>
<ul>
<li>由这四个类派生出来的子类名称都是以其父类名作为子类名后缀。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010938499.png" alt="image-20220412230501953"></p>
<p><strong>常用节点流：</strong> 　</p>
<ul>
<li>文件流： FileInputStream、FileOutputStrean、FileReader、FileWriter </li>
<li>字节/字符数组流： ByteArrayInputStream、ByteArrayOutputStream、CharArrayReader、CharArrayWriter <ul>
<li>对数组进行处理的节点流（对应的不再是文件，而是内存中的一个数组）。</li>
</ul>
</li>
</ul>
<p><strong>常用处理流：</strong></p>
<ul>
<li>缓冲流：BufferedInputStream、BufferedOutputStream、BufferedReader、BufferedWriter<ul>
<li>作用：增加缓冲功能，避免频繁读写硬盘，进而提升读写效率。</li>
</ul>
</li>
<li>转换流：InputStreamReader、OutputStreamReader<ul>
<li>作用：实现字节流和字符流之间的转换。</li>
</ul>
</li>
<li>对象流：ObjectInputStream、ObjectOutputStream<ul>
<li>作用：提供直接读写Java对象功能</li>
</ul>
</li>
</ul>
<h2 id="3-节点流之一：FileReader-FileWriter"><a href="#3-节点流之一：FileReader-FileWriter" class="headerlink" title="3. 节点流之一：FileReader\FileWriter"></a>3. 节点流之一：FileReader\FileWriter</h2><h3 id="3-1-Reader与Writer"><a href="#3-1-Reader与Writer" class="headerlink" title="3.1 Reader与Writer"></a>3.1 Reader与Writer</h3><p>Java提供一些字符流类，以字符为单位读写数据，专门用于处理文本文件。不能操作图片，视频等非文本文件。</p>
<blockquote>
<p>常见的文本文件有如下的格式：.txt、.java、.c、.cpp、.py等</p>
<p>注意：.doc、.xls、.ppt这些都不是文本文件。</p>
</blockquote>
<h4 id="3-1-1-字符输入流：Reader"><a href="#3-1-1-字符输入流：Reader" class="headerlink" title="3.1.1 字符输入流：Reader"></a>3.1.1 字符输入流：Reader</h4><p><code>java.io.Reader</code>抽象类是表示用于读取字符流的所有类的父类，可以读取字符信息到内存中。它定义了字符输入流的基本共性功能方法。</p>
<ul>
<li><code>public int read()</code>： 从输入流读取一个字符。 虽然读取了一个字符，但是会自动提升为int类型。返回该字符的Unicode编码值。如果已经到达流末尾了，则返回-1。</li>
<li><code>public int read(char[] cbuf)</code>： 从输入流中读取一些字符，并将它们存储到字符数组 cbuf中 。每次最多读取cbuf.length个字符。返回实际读取的字符个数。如果已经到达流末尾，没有数据可读，则返回-1。 </li>
<li><code>public int read(char[] cbuf,int off,int len)</code>：从输入流中读取一些字符，并将它们存储到字符数组 cbuf中，从cbuf[off]开始的位置存储。每次最多读取len个字符。返回实际读取的字符个数。如果已经到达流末尾，没有数据可读，则返回-1。 </li>
<li><code>public void close()</code> ：关闭此流并释放与此流相关联的任何系统资源。    </li>
</ul>
<blockquote>
<p>注意：当完成流的操作时，必须调用close()方法，释放系统资源，否则会造成内存泄漏。</p>
</blockquote>
<h4 id="3-1-2-字符输出流：Writer"><a href="#3-1-2-字符输出流：Writer" class="headerlink" title="3.1.2 字符输出流：Writer"></a>3.1.2 字符输出流：Writer</h4><p><code>java.io.Writer</code>抽象类是表示用于写出字符流的所有类的超类，将指定的字符信息写出到目的地。它定义了字节输出流的基本共性功能方法。</p>
<ul>
<li><code>public void write(int c)</code> ：写出单个字符。</li>
<li><code>public void write(char[] cbuf)</code>：写出字符数组。 </li>
<li><code>public void write(char[] cbuf, int off, int len)</code>：写出字符数组的某一部分。off：数组的开始索引；len：写出的字符个数。 </li>
<li><code>public void write(String str)</code>：写出字符串。 </li>
<li><code>public void write(String str, int off, int len)</code> ：写出字符串的某一部分。off：字符串的开始索引；len：写出的字符个数。</li>
<li><code>public void flush()</code>：刷新该流的缓冲。  </li>
<li><code>public void close()</code> ：关闭此流。</li>
</ul>
<blockquote>
<p>注意：当完成流的操作时，必须调用close()方法，释放系统资源，否则会造成内存泄漏。</p>
</blockquote>
<h3 id="3-2-FileReader-与-FileWriter"><a href="#3-2-FileReader-与-FileWriter" class="headerlink" title="3.2 FileReader 与 FileWriter"></a>3.2 FileReader 与 FileWriter</h3><h4 id="3-2-1-FileReader"><a href="#3-2-1-FileReader" class="headerlink" title="3.2.1 FileReader"></a>3.2.1 FileReader</h4><p><code>java.io.FileReader</code>类用于读取字符文件，构造时使用系统默认的字符编码和默认字节缓冲区。</p>
<ul>
<li><code>FileReader(File file)</code>： 创建一个新的 FileReader ，给定要读取的File对象。   </li>
<li><code>FileReader(String fileName)</code>： 创建一个新的 FileReader ，给定要读取的文件的名称。  </li>
</ul>
<p><strong>举例：</strong>读取hello.txt文件中的字符数据，并显示在控制台上</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileReaderWriterTest</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//实现方式1</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">//1. 创建File类的对象，对应着物理磁盘上的某个文件</span></span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"hello.txt"</span>);</span><br><span class="line">        <span class="comment">//2. 创建FileReader流对象，将File类的对象作为参数传递到FileReader的构造器中</span></span><br><span class="line">        FileReader fr = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">        <span class="comment">//3. 通过相关流的方法，读取文件中的数据</span></span><br><span class="line"><span class="comment">//        int data = fr.read(); //每调用一次读取一个字符</span></span><br><span class="line"><span class="comment">//        while (data != -1) &#123;</span></span><br><span class="line"><span class="comment">//            System.out.print((char) data);</span></span><br><span class="line"><span class="comment">//            data = fr.read();</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line">        <span class="keyword">int</span> data;</span><br><span class="line">        <span class="keyword">while</span> ((data = fr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>) data);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 关闭相关的流资源，避免出现内存泄漏</span></span><br><span class="line">        fr.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现方式2：在方式1的基础上改进，使用try-catch-finally处理异常。保证流是可以关闭的</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FileReader fr = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1. 创建File类的对象，对应着物理磁盘上的某个文件</span></span><br><span class="line">            File file = <span class="keyword">new</span> File(<span class="string">"hello.txt"</span>);</span><br><span class="line">            <span class="comment">//2. 创建FileReader流对象，将File类的对象作为参数传递到FileReader的构造器中</span></span><br><span class="line">            fr = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">            <span class="comment">//3. 通过相关流的方法，读取文件中的数据</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * read():每次从对接的文件中读取一个字符。并将此字符返回。</span></span><br><span class="line"><span class="comment">             * 如果返回值为-1,则表示文件到了末尾，可以不再读取。</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line"><span class="comment">//            int data = fr.read();</span></span><br><span class="line"><span class="comment">//            while(data != -1)&#123;</span></span><br><span class="line"><span class="comment">//                System.out.print((char)data);</span></span><br><span class="line"><span class="comment">//                data = fr.read();</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> data;</span><br><span class="line">            <span class="keyword">while</span> ((data = fr.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println((<span class="keyword">char</span>) data);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//4. 关闭相关的流资源，避免出现内存泄漏</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fr != <span class="keyword">null</span>)</span><br><span class="line">                    fr.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实现方式3：调用read(char[] cbuf),每次从文件中读取多个字符</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FileReader fr = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1. 创建File类的对象，对应着物理磁盘上的某个文件</span></span><br><span class="line">            File file = <span class="keyword">new</span> File(<span class="string">"hello.txt"</span>);</span><br><span class="line">            <span class="comment">//2. 创建FileReader流对象，将File类的对象作为参数传递到FileReader的构造器中</span></span><br><span class="line">            fr = <span class="keyword">new</span> FileReader(file);</span><br><span class="line">            <span class="comment">//3. 通过相关流的方法，读取文件中的数据</span></span><br><span class="line">            <span class="keyword">char</span>[] cbuf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">5</span>];</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * read(char[] cbuf) : 每次将文件中的数据读入到cbuf数组中，并返回读入到数组中的</span></span><br><span class="line"><span class="comment">             * 字符的个数。</span></span><br><span class="line"><span class="comment">             * */</span></span><br><span class="line">            <span class="keyword">int</span> len; <span class="comment">//记录每次读入的字符的个数</span></span><br><span class="line">            <span class="keyword">while</span> ((len = fr.read(cbuf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">//处理char[]数组即可</span></span><br><span class="line">                <span class="comment">//错误：</span></span><br><span class="line"><span class="comment">//                for(int i = 0;i &lt; cbuf.length;i++)&#123;</span></span><br><span class="line"><span class="comment">//                    System.out.print(cbuf[i]);</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line">                <span class="comment">//错误：</span></span><br><span class="line"><span class="comment">//                String str = new String(cbuf);</span></span><br><span class="line"><span class="comment">//                System.out.print(str);</span></span><br><span class="line">                <span class="comment">//正确：</span></span><br><span class="line"><span class="comment">//                for(int i = 0;i &lt; len;i++)&#123;</span></span><br><span class="line"><span class="comment">//                    System.out.print(cbuf[i]);</span></span><br><span class="line"><span class="comment">//                &#125;</span></span><br><span class="line">                <span class="comment">//正确：</span></span><br><span class="line">                String str = <span class="keyword">new</span> String(cbuf, <span class="number">0</span>, len);</span><br><span class="line">                System.out.print(str);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//4. 关闭相关的流资源，避免出现内存泄漏</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fr != <span class="keyword">null</span>)</span><br><span class="line">                    fr.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不同实现方式的类比：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010938769.png" alt="image-20220518095907714"></p>
<h4 id="3-2-2-FileWriter"><a href="#3-2-2-FileWriter" class="headerlink" title="3.2.2 FileWriter"></a>3.2.2 FileWriter</h4><p><code>java.io.FileWriter</code>类用于写出字符到文件，构造时使用系统默认的字符编码和默认字节缓冲区。</p>
<ul>
<li><code>FileWriter(File file)</code>： 创建一个新的 FileWriter，给定要读取的File对象。   </li>
<li><code>FileWriter(String fileName)</code>： 创建一个新的 FileWriter，给定要读取的文件的名称。  </li>
<li><code>FileWriter(File file,boolean append)</code>： 创建一个新的 FileWriter，指明是否在现有文件末尾追加内容。</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FWWrite</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注意：应该使用try-catch-finally处理异常。这里出于方便阅读代码，使用了throws的方式</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span><span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="keyword">new</span> File(<span class="string">"fw.txt"</span>));</span><br><span class="line">        <span class="comment">// 写出数据</span></span><br><span class="line">        fw.write(<span class="number">97</span>); <span class="comment">// 写出第1个字符</span></span><br><span class="line">        fw.write(<span class="string">'b'</span>); <span class="comment">// 写出第2个字符</span></span><br><span class="line">        fw.write(<span class="string">'C'</span>); <span class="comment">// 写出第3个字符</span></span><br><span class="line">        fw.write(<span class="number">30000</span>); <span class="comment">// 写出第4个字符，中文编码表中30000对应一个汉字。</span></span><br><span class="line">		</span><br><span class="line">        <span class="comment">//关闭资源</span></span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//注意：应该使用try-catch-finally处理异常。这里出于方便阅读代码，使用了throws的方式</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span><span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="keyword">new</span> File(<span class="string">"fw.txt"</span>));</span><br><span class="line">        <span class="comment">// 字符串转换为字节数组</span></span><br><span class="line">        <span class="keyword">char</span>[] chars = <span class="string">"尚硅谷"</span>.toCharArray();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写出字符数组</span></span><br><span class="line">        fw.write(chars); <span class="comment">// 尚硅谷</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写出从索引1开始，2个字符。</span></span><br><span class="line">        fw.write(chars,<span class="number">1</span>,<span class="number">2</span>); <span class="comment">// 硅谷</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//注意：应该使用try-catch-finally处理异常。这里出于方便阅读代码，使用了throws的方式</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span><span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"fw.txt"</span>);</span><br><span class="line">        <span class="comment">// 字符串</span></span><br><span class="line">        String msg = <span class="string">"尚硅谷"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写出字符数组</span></span><br><span class="line">        fw.write(msg); <span class="comment">//尚硅谷</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写出从索引1开始，2个字符。</span></span><br><span class="line">        fw.write(msg,<span class="number">1</span>,<span class="number">2</span>);	<span class="comment">// 硅谷</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span></span>&#123;</span><br><span class="line">        FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1. 创建File的对象</span></span><br><span class="line">            File file = <span class="keyword">new</span> File(<span class="string">"personinfo.txt"</span>);</span><br><span class="line">            <span class="comment">//2. 创建FileWriter的对象，将File对象作为参数传递到FileWriter的构造器中</span></span><br><span class="line">            <span class="comment">//如果输出的文件已存在，则会对现有的文件进行覆盖</span></span><br><span class="line">            fw = <span class="keyword">new</span> FileWriter(file);</span><br><span class="line"><span class="comment">//            fw = new FileWriter(file,false);</span></span><br><span class="line">            <span class="comment">//如果输出的文件已存在，则会在现有的文件末尾写入数据</span></span><br><span class="line"><span class="comment">//            fw = new FileWriter(file,true);</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//3. 调用相关的方法，实现数据的写出操作</span></span><br><span class="line">            <span class="comment">//write(String str) / write(char[] cbuf)</span></span><br><span class="line">            fw.write(<span class="string">"I love you,"</span>);</span><br><span class="line">            fw.write(<span class="string">"you love him."</span>);</span><br><span class="line">            fw.write(<span class="string">"so sad"</span>.toCharArray());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//4. 关闭资源，避免内存泄漏</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fw != <span class="keyword">null</span>)</span><br><span class="line">                    fw.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-3-小结"><a href="#3-2-3-小结" class="headerlink" title="3.2.3 小结"></a>3.2.3 小结</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">① 因为出现流资源的调用，为了避免内存泄漏，需要使用try-catch-finally处理异常</span><br><span class="line">② 对于输入流来说，File类的对象必须在物理磁盘上存在，否则执行就会报FileNotFoundException。如果传入的是一个目录，则会报IOException异常。</span><br><span class="line">对于输出流来说，File类的对象是可以不存在的。</span><br><span class="line">   &gt; 如果File类的对象不存在，则可以在输出的过程中，自动创建File类的对象</span><br><span class="line">   &gt; 如果File类的对象存在，</span><br><span class="line">      &gt; 如果调用FileWriter(File file)或FileWriter(File file,false)，输出时会新建File文件覆盖已有的文件</span><br><span class="line">      &gt; 如果调用FileWriter(File file,true)构造器，则在现有的文件末尾追加写出内容。</span><br></pre></td></tr></table></figure>

<h3 id="3-3-关于flush（刷新）"><a href="#3-3-关于flush（刷新）" class="headerlink" title="3.3  关于flush（刷新）"></a>3.3  关于flush（刷新）</h3><p>因为内置缓冲区的原因，如果FileWriter不关闭输出流，无法写出字符到文件中。但是关闭的流对象，是无法继续写出数据的。如果我们既想写出数据，又想继续使用流，就需要<code>flush()</code> 方法了。</p>
<ul>
<li><code>flush()</code> ：刷新缓冲区，流对象可以继续使用。</li>
<li><code>close()</code>：先刷新缓冲区，然后通知系统释放资源。流对象不可以再被使用了。</li>
</ul>
<p>注意：即便是flush()方法写出了数据，操作的最后还是要调用close方法，释放系统资源。</p>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FWWriteFlush</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注意：应该使用try-catch-finally处理异常。这里出于方便阅读代码，使用了throws的方式</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"fw.txt"</span>);</span><br><span class="line">        <span class="comment">// 写出数据，通过flush</span></span><br><span class="line">        fw.write(<span class="string">'刷'</span>); <span class="comment">// 写出第1个字符</span></span><br><span class="line">        fw.flush();</span><br><span class="line">        fw.write(<span class="string">'新'</span>); <span class="comment">// 继续写出第2个字符，写出成功</span></span><br><span class="line">        fw.flush();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写出数据，通过close</span></span><br><span class="line">        fw.write(<span class="string">'关'</span>); <span class="comment">// 写出第1个字符</span></span><br><span class="line">        fw.close();</span><br><span class="line">        fw.write(<span class="string">'闭'</span>); <span class="comment">// 继续写出第2个字符,【报错】java.io.IOException: Stream closed</span></span><br><span class="line">        fw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-节点流之二：FileInputStream-FileOutputStream"><a href="#4-节点流之二：FileInputStream-FileOutputStream" class="headerlink" title="4. 节点流之二：FileInputStream\FileOutputStream"></a>4. 节点流之二：FileInputStream\FileOutputStream</h2><p>如果我们读取或写出的数据是非文本文件，则Reader、Writer就无能为力了，必须使用字节流。</p>
<h3 id="4-1-InputStream和OutputStream"><a href="#4-1-InputStream和OutputStream" class="headerlink" title="4.1 InputStream和OutputStream"></a>4.1 InputStream和OutputStream</h3><h4 id="4-1-1-字节输入流：InputStream"><a href="#4-1-1-字节输入流：InputStream" class="headerlink" title="4.1.1 字节输入流：InputStream"></a>4.1.1 字节输入流：InputStream</h4><p><code>java.io.InputStream</code>抽象类是表示字节输入流的所有类的超类，可以读取字节信息到内存中。它定义了字节输入流的基本共性功能方法。</p>
<ul>
<li><code>public int read()</code>： 从输入流读取一个字节。返回读取的字节值。虽然读取了一个字节，但是会自动提升为int类型。如果已经到达流末尾，没有数据可读，则返回-1。 </li>
<li><code>public int read(byte[] b)</code>： 从输入流中读取一些字节数，并将它们存储到字节数组 b中 。每次最多读取b.length个字节。返回实际读取的字节个数。如果已经到达流末尾，没有数据可读，则返回-1。 </li>
<li><code>public int read(byte[] b,int off,int len)</code>：从输入流中读取一些字节数，并将它们存储到字节数组 b中，从b[off]开始存储，每次最多读取len个字节 。返回实际读取的字节个数。如果已经到达流末尾，没有数据可读，则返回-1。 </li>
<li><code>public void close()</code> ：关闭此输入流并释放与此流相关联的任何系统资源。    </li>
</ul>
<blockquote>
<p>说明：close()方法，当完成流的操作时，必须调用此方法，释放系统资源。</p>
</blockquote>
<h4 id="4-1-2-字节输出流：OutputStream"><a href="#4-1-2-字节输出流：OutputStream" class="headerlink" title="4.1.2 字节输出流：OutputStream"></a>4.1.2 字节输出流：OutputStream</h4><p><code>java.io.OutputStream</code>抽象类是表示字节输出流的所有类的超类，将指定的字节信息写出到目的地。它定义了字节输出流的基本共性功能方法。</p>
<ul>
<li><code>public void write(int b)</code> ：将指定的字节输出流。虽然参数为int类型四个字节，但是只会保留一个字节的信息写出。</li>
<li><code>public void write(byte[] b)</code>：将 b.length字节从指定的字节数组写入此输出流。  </li>
<li><code>public void write(byte[] b, int off, int len)</code> ：从指定的字节数组写入 len字节，从偏移量 off开始输出到此输出流。  </li>
<li><code>public void flush()</code> ：刷新此输出流并强制任何缓冲的输出字节被写出。  </li>
<li><code>public void close()</code> ：关闭此输出流并释放与此流相关联的任何系统资源。  </li>
</ul>
<blockquote>
<p>说明：close()方法，当完成流的操作时，必须调用此方法，释放系统资源。</p>
</blockquote>
<h3 id="4-2-FileInputStream-与-FileOutputStream"><a href="#4-2-FileInputStream-与-FileOutputStream" class="headerlink" title="4.2 FileInputStream 与 FileOutputStream"></a>4.2 FileInputStream 与 FileOutputStream</h3><h4 id="4-2-1-FileInputStream"><a href="#4-2-1-FileInputStream" class="headerlink" title="4.2.1 FileInputStream"></a>4.2.1 FileInputStream</h4><p><code>java.io.FileInputStream</code>类是文件输入流，从文件中读取字节。</p>
<ul>
<li><code>FileInputStream(File file)</code>： 通过打开与实际文件的连接来创建一个 FileInputStream ，该文件由文件系统中的 File对象 file命名。 </li>
<li><code>FileInputStream(String name)</code>： 通过打开与实际文件的连接来创建一个 FileInputStream ，该文件由文件系统中的路径名 name命名。  </li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//read.txt文件中的内容如下：</span></span><br><span class="line">abcde</span><br></pre></td></tr></table></figure>

<p>读取操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FISRead</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注意：应该使用try-catch-finally处理异常。这里出于方便阅读代码，使用了throws的方式</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"read.txt"</span>);</span><br><span class="line">        <span class="comment">// 读取数据，返回一个字节</span></span><br><span class="line">        <span class="keyword">int</span> read = fis.read();</span><br><span class="line">        System.out.println((<span class="keyword">char</span>) read);</span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println((<span class="keyword">char</span>) read);</span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println((<span class="keyword">char</span>) read);</span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println((<span class="keyword">char</span>) read);</span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println((<span class="keyword">char</span>) read);</span><br><span class="line">        <span class="comment">// 读取到末尾,返回-1</span></span><br><span class="line">        read = fis.read();</span><br><span class="line">        System.out.println(read);</span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fis.close();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        文件内容：abcde</span></span><br><span class="line"><span class="comment">        输出结果：</span></span><br><span class="line"><span class="comment">        a</span></span><br><span class="line"><span class="comment">        b</span></span><br><span class="line"><span class="comment">        c</span></span><br><span class="line"><span class="comment">        d</span></span><br><span class="line"><span class="comment">        e</span></span><br><span class="line"><span class="comment">        -1</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"read.txt"</span>);</span><br><span class="line">        <span class="comment">// 定义变量，保存数据</span></span><br><span class="line">        <span class="keyword">int</span> b;</span><br><span class="line">        <span class="comment">// 循环读取</span></span><br><span class="line">        <span class="keyword">while</span> ((b = fis.read())!=-<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.println((<span class="keyword">char</span>)b);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象.</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"read.txt"</span>); <span class="comment">// 文件中为abcde</span></span><br><span class="line">        <span class="comment">// 定义变量，作为有效个数</span></span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="comment">// 定义字节数组，作为装字节数据的容器</span></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// 循环读取</span></span><br><span class="line">        <span class="keyword">while</span> (( len= fis.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 每次读取后,把数组变成字符串打印</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(b));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fis.close();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        输出结果：</span></span><br><span class="line"><span class="comment">        ab</span></span><br><span class="line"><span class="comment">        cd</span></span><br><span class="line"><span class="comment">        ed</span></span><br><span class="line"><span class="comment">        最后错误数据`d`，是由于最后一次读取时，只读取一个字节`e`，数组中，</span></span><br><span class="line"><span class="comment">        上次读取的数据没有被完全替换，所以要通过`len` ，获取有效的字节</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象.</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"read.txt"</span>); <span class="comment">// 文件中为abcde</span></span><br><span class="line">        <span class="comment">// 定义变量，作为有效个数</span></span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="comment">// 定义字节数组，作为装字节数据的容器</span></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="comment">// 循环读取</span></span><br><span class="line">        <span class="keyword">while</span> (( len= fis.read(b))!=-<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// 每次读取后,把数组的有效字节部分，变成字符串打印</span></span><br><span class="line">            System.out.println(<span class="keyword">new</span> String(b,<span class="number">0</span>,len));<span class="comment">//  len 每次读取的有效字节个数</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fis.close();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        输出结果：</span></span><br><span class="line"><span class="comment">        ab</span></span><br><span class="line"><span class="comment">        cd</span></span><br><span class="line"><span class="comment">        e</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-FileOutputStream"><a href="#4-2-2-FileOutputStream" class="headerlink" title="4.2.2 FileOutputStream"></a>4.2.2 FileOutputStream</h4><p><code>java.io.FileOutputStream</code>类是文件输出流，用于将数据写出到文件。</p>
<ul>
<li><code>public FileOutputStream(File file)</code>：创建文件输出流，写出由指定的 File对象表示的文件。 </li>
<li><code>public FileOutputStream(String name)</code>： 创建文件输出流，指定的名称为写出文件。</li>
<li><code>public FileOutputStream(File file, boolean append)</code>：  创建文件输出流，指明是否在现有文件末尾追加内容。</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FOSWrite</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注意：应该使用try-catch-finally处理异常。这里出于方便阅读代码，使用了throws的方式</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"fos.txt"</span>);</span><br><span class="line">        <span class="comment">// 写出数据</span></span><br><span class="line">        fos.write(<span class="number">97</span>); <span class="comment">// 写出第1个字节</span></span><br><span class="line">        fos.write(<span class="number">98</span>); <span class="comment">// 写出第2个字节</span></span><br><span class="line">        fos.write(<span class="number">99</span>); <span class="comment">// 写出第3个字节</span></span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fos.close();</span><br><span class="line">      <span class="comment">/*  输出结果：abc*/</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span><span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"fos.txt"</span>);</span><br><span class="line">        <span class="comment">// 字符串转换为字节数组</span></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="string">"abcde"</span>.getBytes();</span><br><span class="line">        <span class="comment">// 写出从索引2开始，2个字节。索引2是c，两个字节，也就是cd。</span></span><br><span class="line">        fos.write(b,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//这段程序如果多运行几次，每次都会在原来文件末尾追加abcde</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span><span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 使用文件名称创建流对象</span></span><br><span class="line">        FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"fos.txt"</span>,<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// 字符串转换为字节数组</span></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="string">"abcde"</span>.getBytes();</span><br><span class="line">        fos.write(b);</span><br><span class="line">        <span class="comment">// 关闭资源</span></span><br><span class="line">        fos.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//使用FileInputStream\FileOutputStream，实现对文件的复制</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test05</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//1. 造文件-造流</span></span><br><span class="line">            <span class="comment">//复制图片：成功</span></span><br><span class="line"><span class="comment">//            fis = new FileInputStream(new File("pony.jpg"));</span></span><br><span class="line"><span class="comment">//            fos = new FileOutputStream(new File("pony_copy1.jpg"));</span></span><br><span class="line">            <span class="comment">//复制文本文件：成功</span></span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(<span class="string">"hello.txt"</span>));</span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"hello1.txt"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//2. 复制操作（读、写）</span></span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len;<span class="comment">//每次读入到buffer中字节的个数</span></span><br><span class="line">            <span class="keyword">while</span> ((len = fis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                fos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"复制成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">//3. 关闭资源</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fos != <span class="keyword">null</span>)</span><br><span class="line">                    fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (fis != <span class="keyword">null</span>)</span><br><span class="line">                    fis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-练习"><a href="#4-3-练习" class="headerlink" title="4.3 练习"></a>4.3 练习</h3><p><strong>练习：</strong>实现图片加密操作。</p>
<p>提示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010939433.png" alt="image-20220413002723838"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileSecretTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//图片的加密  </span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            File file1 = <span class="keyword">new</span> File(<span class="string">"pony.jpg"</span>);</span><br><span class="line">            File file2 = <span class="keyword">new</span> File(<span class="string">"pony_secret.jpg"</span>);</span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(file1);</span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(file2);</span><br><span class="line">            <span class="comment">//方式2：每次读入一个字节数组，效率高</span></span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; len;i++)&#123;</span><br><span class="line">                    buffer[i] = (<span class="keyword">byte</span>) (buffer[i] ^ <span class="number">5</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"加密成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//图片的解密</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            File file1 = <span class="keyword">new</span> File(<span class="string">"pony_secret.jpg"</span>);</span><br><span class="line">            File file2 = <span class="keyword">new</span> File(<span class="string">"pony_unsecret.jpg"</span>);</span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(file1);</span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(file2);</span><br><span class="line">            <span class="comment">//方式2：每次读入一个字节数组，效率高</span></span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">while</span>((len = fis.read(buffer)) != -<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; len;i++)&#123;</span><br><span class="line">                    buffer[i] = (<span class="keyword">byte</span>) (buffer[i] ^ <span class="number">5</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"解密成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-处理流之一：缓冲流"><a href="#5-处理流之一：缓冲流" class="headerlink" title="5. 处理流之一：缓冲流"></a>5. 处理流之一：缓冲流</h2><ul>
<li><p><code>为了提高数据读写的速度</code>，Java API提供了带缓冲功能的流类：缓冲流。</p>
</li>
<li><p>缓冲流要“套接”在相应的节点流之上，根据数据操作单位可以把缓冲流分为：</p>
<ul>
<li><strong>字节缓冲流</strong>：<code>BufferedInputStream</code>，<code>BufferedOutputStream</code> </li>
<li><strong>字符缓冲流</strong>：<code>BufferedReader</code>，<code>BufferedWriter</code></li>
</ul>
</li>
<li><p>缓冲流的基本原理：在创建流对象时，内部会创建一个缓冲区数组（缺省使用<code>8192个字节(8Kb)</code>的缓冲区），通过缓冲区读写，减少系统IO次数，从而提高读写的效率。</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010939538.png" alt="image-20220413002314063"></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010939697.png" alt="image-20220514183413011" style="zoom:80%;">

<h3 id="5-1-构造器"><a href="#5-1-构造器" class="headerlink" title="5.1 构造器"></a>5.1 构造器</h3><ul>
<li><code>public BufferedInputStream(InputStream in)</code> ：创建一个 新的字节型的缓冲输入流。 </li>
<li><code>public BufferedOutputStream(OutputStream out)</code>： 创建一个新的字节型的缓冲输出流。</li>
</ul>
<p>代码举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建字节缓冲输入流</span></span><br><span class="line">BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"abc.jpg"</span>));</span><br><span class="line"><span class="comment">// 创建字节缓冲输出流</span></span><br><span class="line">BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"abc_copy.jpg"</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li><code>public BufferedReader(Reader in)</code> ：创建一个 新的字符型的缓冲输入流。 </li>
<li><code>public BufferedWriter(Writer out)</code>： 创建一个新的字符型的缓冲输出流。</li>
</ul>
<p>代码举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建字符缓冲输入流</span></span><br><span class="line">BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"br.txt"</span>));</span><br><span class="line"><span class="comment">// 创建字符缓冲输出流</span></span><br><span class="line">BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"bw.txt"</span>));</span><br></pre></td></tr></table></figure>

<h3 id="5-2-效率测试"><a href="#5-2-效率测试" class="headerlink" title="5.2 效率测试"></a>5.2 效率测试</h3><p>查询API，缓冲流读写方法与基本的流是一致的，我们通过复制大文件（375MB），测试它的效率。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法1：使用FileInputStream\FileOutputStream实现非文本文件的复制</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">copyFileWithFileStream</span><span class="params">(String srcPath,String destPath)</span></span>&#123;</span><br><span class="line">    FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">    FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1. 造文件-造流</span></span><br><span class="line">        fis = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(srcPath));</span><br><span class="line">        fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(destPath));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. 复制操作（读、写）</span></span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">int</span> len;<span class="comment">//每次读入到buffer中字节的个数</span></span><br><span class="line">        <span class="keyword">while</span> ((len = fis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            fos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"复制成功"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//3. 关闭资源</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (fos != <span class="keyword">null</span>)</span><br><span class="line">                fos.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (fis != <span class="keyword">null</span>)</span><br><span class="line">                fis.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    String srcPath = <span class="string">"C:\\Users\\shkstart\\Desktop\\01-复习.mp4"</span>;</span><br><span class="line">    String destPath = <span class="string">"C:\\Users\\shkstart\\Desktop\\01-复习2.mp4"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    copyFileWithFileStream(srcPath,destPath);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"花费的时间为："</span> + (end - start));<span class="comment">//7677毫秒</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法2：使用BufferedInputStream\BufferedOuputStream实现非文本文件的复制</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">copyFileWithBufferedStream</span><span class="params">(String srcPath,String destPath)</span></span>&#123;</span><br><span class="line">    FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">    FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">    BufferedInputStream bis = <span class="keyword">null</span>;</span><br><span class="line">    BufferedOutputStream bos = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1. 造文件</span></span><br><span class="line">        File srcFile = <span class="keyword">new</span> File(srcPath);</span><br><span class="line">        File destFile = <span class="keyword">new</span> File(destPath);</span><br><span class="line">        <span class="comment">//2. 造流</span></span><br><span class="line">        fis = <span class="keyword">new</span> FileInputStream(srcFile);</span><br><span class="line">        fos = <span class="keyword">new</span> FileOutputStream(destFile);</span><br><span class="line"></span><br><span class="line">        bis = <span class="keyword">new</span> BufferedInputStream(fis);</span><br><span class="line">        bos = <span class="keyword">new</span> BufferedOutputStream(fos);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. 读写操作</span></span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len = bis.read(buffer)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            bos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"复制成功"</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4. 关闭资源(如果有多个流，我们需要先关闭外面的流，再关闭内部的流)</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (bos != <span class="keyword">null</span>)</span><br><span class="line">                bos.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (bis != <span class="keyword">null</span>)</span><br><span class="line">                bis.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    String srcPath = <span class="string">"C:\\Users\\shkstart\\Desktop\\01-复习.mp4"</span>;</span><br><span class="line">    String destPath = <span class="string">"C:\\Users\\shkstart\\Desktop\\01-复习2.mp4"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    copyFileWithBufferedStream(srcPath,destPath);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"花费的时间为："</span> + (end - start));<span class="comment">//415毫秒</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-字符缓冲流特有方法"><a href="#5-3-字符缓冲流特有方法" class="headerlink" title="5.3 字符缓冲流特有方法"></a>5.3 字符缓冲流特有方法</h3><p>字符缓冲流的基本方法与普通字符流调用方式一致，不再阐述，我们来看它们具备的特有方法。</p>
<ul>
<li>BufferedReader：<code>public String readLine()</code>: 读一行文字。 </li>
<li>BufferedWriter：<code>public void newLine()</code>: 写一行行分隔符,由系统属性定义符号。 </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BufferedIOLine</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testReadLine</span><span class="params">()</span><span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建流对象</span></span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="string">"in.txt"</span>));</span><br><span class="line">        <span class="comment">// 定义字符串,保存读取的一行文字</span></span><br><span class="line">        String line;</span><br><span class="line">        <span class="comment">// 循环读取,读取到最后返回null</span></span><br><span class="line">        <span class="keyword">while</span> ((line = br.readLine())!=<span class="keyword">null</span>) &#123;</span><br><span class="line">            System.out.println(line);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        br.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testNewLine</span><span class="params">()</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        <span class="comment">// 创建流对象</span></span><br><span class="line">        BufferedWriter bw = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> FileWriter(<span class="string">"out.txt"</span>));</span><br><span class="line">        <span class="comment">// 写出数据</span></span><br><span class="line">        bw.write(<span class="string">"尚"</span>);</span><br><span class="line">        <span class="comment">// 写出换行</span></span><br><span class="line">        bw.newLine();</span><br><span class="line">        bw.write(<span class="string">"硅"</span>);</span><br><span class="line">        bw.newLine();</span><br><span class="line">        bw.write(<span class="string">"谷"</span>);</span><br><span class="line">        bw.newLine();</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        bw.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：</p>
<ol>
<li><p>涉及到嵌套的多个流时，如果都显式关闭的话，需要先关闭外层的流，再关闭内层的流</p>
</li>
<li><p>其实在开发中，只需要关闭最外层的流即可，因为在关闭外层流时，内层的流也会被关闭。</p>
</li>
</ol>
</blockquote>
<h3 id="5-4-练习"><a href="#5-4-练习" class="headerlink" title="5.4 练习"></a>5.4 练习</h3><p><strong>练习1：</strong>分别使用节点流：FileInputStream、FileOutputStream和缓冲流：BufferedInputStream、BufferedOutputStream实现文本文件/图片/视频文件的复制。并比较二者在数据复制方面的效率。</p>
<p><strong>练习2：</strong></p>
<p>姓氏统计：一个文本文件中存储着北京所有高校在校生的姓名，格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">每行一个名字，姓与名以空格分隔：</span><br><span class="line">张 三</span><br><span class="line">李 四</span><br><span class="line">王 小五</span><br></pre></td></tr></table></figure>

<p>现在想统计所有的姓氏在文件中出现的次数，请描述一下你的解决方案。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">       BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">try</span> &#123;</span><br><span class="line">           br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(<span class="keyword">new</span> File(<span class="string">"e:/name.txt"</span>)));</span><br><span class="line">           String value = <span class="keyword">null</span>; <span class="comment">// 临时接收文件中的字符串变量</span></span><br><span class="line">           StringBuffer buffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">           flag:</span><br><span class="line">           <span class="keyword">while</span> ((value = br.readLine()) != <span class="keyword">null</span>) &#123; <span class="comment">// 开始读取文件中的字符</span></span><br><span class="line">               <span class="keyword">char</span>[] c = value.toCharArray();</span><br><span class="line">               <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; c.length; i++) &#123;</span><br><span class="line">                   <span class="keyword">if</span> (c[i] != <span class="string">' '</span>) &#123;</span><br><span class="line">                       buffer.append(String.valueOf(c[i]));</span><br><span class="line">                   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                       <span class="keyword">if</span> (map.containsKey(buffer.toString())) &#123;</span><br><span class="line">                           <span class="keyword">int</span> count = map.get(buffer.toString());</span><br><span class="line">                           map.put(buffer.toString(), count + <span class="number">1</span>);</span><br><span class="line">                       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                           map.put(buffer.toString(), <span class="number">1</span>);</span><br><span class="line">                       &#125;</span><br><span class="line">                       buffer.delete(<span class="number">0</span>, buffer.length());</span><br><span class="line">                       <span class="keyword">continue</span> flag;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">           e.printStackTrace();</span><br><span class="line">       &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">           <span class="keyword">if</span> (br != <span class="keyword">null</span>) &#123;</span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   br.close();</span><br><span class="line">               &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                   e.printStackTrace();</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       Set&lt;Map.Entry&lt;String, Integer&gt;&gt; set = map.entrySet();</span><br><span class="line">       Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; it = set.iterator();</span><br><span class="line">       <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">           Map.Entry&lt;String, Integer&gt; end = (Map.Entry&lt;String, Integer&gt;) it.next();</span><br><span class="line">           System.out.println(end);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-处理流之二：转换流"><a href="#6-处理流之二：转换流" class="headerlink" title="6. 处理流之二：转换流"></a>6. 处理流之二：转换流</h2><h3 id="6-1-问题引入"><a href="#6-1-问题引入" class="headerlink" title="6.1 问题引入"></a>6.1 问题引入</h3><p><strong>引入情况1：</strong></p>
<p>使用<code>FileReader</code> 读取项目中的文本文件。由于IDEA设置中针对项目设置了UTF-8编码，当读取Windows系统中创建的文本文件时，如果Windows系统默认的是GBK编码，则读入内存中会出现乱码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Problem</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        FileReader fileReader = <span class="keyword">new</span> FileReader(<span class="string">"E:\\File_GBK.txt"</span>);</span><br><span class="line">        <span class="keyword">int</span> data;</span><br><span class="line">        <span class="keyword">while</span> ((data = fileReader.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>)data);</span><br><span class="line">        &#125;</span><br><span class="line">        fileReader.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">���</span><br></pre></td></tr></table></figure>

<p>那么如何读取GBK编码的文件呢？ </p>
<p><strong>引入情况2：</strong></p>
<p>针对文本文件，现在使用一个字节流进行数据的读入，希望将数据显示在控制台上。此时针对包含中文的文本数据，可能会出现乱码。</p>
<h3 id="6-2-转换流的理解"><a href="#6-2-转换流的理解" class="headerlink" title="6.2 转换流的理解"></a>6.2 转换流的理解</h3><p><strong>作用：转换流是字节与字符间的桥梁！</strong></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010939362.jpg" style="zoom: 67%;">

<p>具体来说：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010939208.png" alt="image-20220412231533768" style="zoom:85%;">

<h3 id="6-3-InputStreamReader-与-OutputStreamWriter"><a href="#6-3-InputStreamReader-与-OutputStreamWriter" class="headerlink" title="6.3 InputStreamReader 与 OutputStreamWriter"></a>6.3 InputStreamReader 与 OutputStreamWriter</h3><ul>
<li><p><strong>InputStreamReader</strong> </p>
<ul>
<li><p>转换流<code>java.io.InputStreamReader</code>，是Reader的子类，是从字节流到字符流的桥梁。它读取字节，并使用指定的字符集将其解码为字符。它的字符集可以由名称指定，也可以接受平台的默认字符集。 </p>
</li>
<li><p>构造器</p>
<ul>
<li><code>InputStreamReader(InputStream in)</code>: 创建一个使用默认字符集的字符流。 </li>
<li><code>InputStreamReader(InputStream in, String charsetName)</code>: 创建一个指定字符集的字符流。</li>
</ul>
</li>
<li><p>举例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用默认字符集</span></span><br><span class="line">InputStreamReader isr1 = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"in.txt"</span>));</span><br><span class="line"><span class="comment">//使用指定字符集</span></span><br><span class="line">InputStreamReader isr2 = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"in.txt"</span>) , <span class="string">"GBK"</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.transfer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputStreamReaderDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 定义文件路径,文件为gbk编码</span></span><br><span class="line">        String fileName = <span class="string">"E:\\file_gbk.txt"</span>;</span><br><span class="line">        <span class="comment">//方式1：</span></span><br><span class="line">        <span class="comment">// 创建流对象,默认UTF8编码</span></span><br><span class="line">        InputStreamReader isr1 = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(fileName));</span><br><span class="line">        <span class="comment">// 定义变量,保存字符</span></span><br><span class="line">        <span class="keyword">int</span> charData;</span><br><span class="line">        <span class="comment">// 使用默认编码字符流读取,乱码</span></span><br><span class="line">        <span class="keyword">while</span> ((charData = isr1.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>)charData); <span class="comment">// ��Һ�</span></span><br><span class="line">        &#125;</span><br><span class="line">        isr1.close();</span><br><span class="line">		</span><br><span class="line">        <span class="comment">//方式2：</span></span><br><span class="line">        <span class="comment">// 创建流对象,指定GBK编码</span></span><br><span class="line">        InputStreamReader isr2 = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(fileName) , <span class="string">"GBK"</span>);</span><br><span class="line">        <span class="comment">// 使用指定编码字符流读取,正常解析</span></span><br><span class="line">        <span class="keyword">while</span> ((charData = isr2.read()) != -<span class="number">1</span>) &#123;</span><br><span class="line">            System.out.print((<span class="keyword">char</span>)charData);<span class="comment">// 大家好</span></span><br><span class="line">        &#125;</span><br><span class="line">        isr2.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>OutputStreamWriter</strong></p>
<ul>
<li><p>转换流<code>java.io.OutputStreamWriter</code> ，是Writer的子类，是从字符流到字节流的桥梁。使用指定的字符集将字符编码为字节。它的字符集可以由名称指定，也可以接受平台的默认字符集。 </p>
</li>
<li><p>构造器</p>
<ul>
<li><code>OutputStreamWriter(OutputStream in)</code>: 创建一个使用默认字符集的字符流。 </li>
<li><code>OutputStreamWriter(OutputStream in,String charsetName)</code>: 创建一个指定字符集的字符流。</li>
</ul>
</li>
<li><p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用默认字符集</span></span><br><span class="line">OutputStreamWriter isr = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"out.txt"</span>));</span><br><span class="line"><span class="comment">//使用指定的字符集</span></span><br><span class="line">OutputStreamWriter isr2 = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"out.txt"</span>) , <span class="string">"GBK"</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.transfer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OutputStreamWriterDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 定义文件路径</span></span><br><span class="line">        String FileName = <span class="string">"E:\\out_utf8.txt"</span>;</span><br><span class="line">        <span class="comment">// 创建流对象,默认UTF8编码</span></span><br><span class="line">        OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(FileName));</span><br><span class="line">        <span class="comment">// 写出数据</span></span><br><span class="line">        osw.write(<span class="string">"你好"</span>); <span class="comment">// 保存为6个字节</span></span><br><span class="line">        osw.close();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义文件路径</span></span><br><span class="line">        String FileName2 = <span class="string">"E:\\out_gbk.txt"</span>;</span><br><span class="line">        <span class="comment">// 创建流对象,指定GBK编码</span></span><br><span class="line">        OutputStreamWriter osw2 = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span>                     </span><br><span class="line">                                                FileOutputStream(FileName2),<span class="string">"GBK"</span>);</span><br><span class="line">        <span class="comment">// 写出数据</span></span><br><span class="line">        osw2.write(<span class="string">"你好"</span>);<span class="comment">// 保存为4个字节</span></span><br><span class="line">        osw2.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
<h3 id="6-4-字符编码和字符集"><a href="#6-4-字符编码和字符集" class="headerlink" title="6.4 字符编码和字符集"></a>6.4 字符编码和字符集</h3><h4 id="6-4-1-编码与解码"><a href="#6-4-1-编码与解码" class="headerlink" title="6.4.1 编码与解码"></a>6.4.1 编码与解码</h4><p>计算机中储存的信息都是用<code>二进制数</code>表示的，而我们在屏幕上看到的数字、英文、标点符号、汉字等字符是二进制数转换之后的结果。按照某种规则，将字符存储到计算机中，称为<strong>编码</strong> 。反之，将存储在计算机中的二进制数按照某种规则解析显示出来，称为<strong>解码</strong> 。</p>
<p><strong>字符编码（Character Encoding）</strong> : 就是一套自然语言的字符与二进制数之间的对应规则。</p>
<p><strong>编码表</strong>：生活中文字和计算机中二进制的对应规则</p>
<p><strong>乱码的情况</strong>：按照A规则存储，同样按照A规则解析，那么就能显示正确的文本符号。反之，按照A规则存储，再按照B规则解析，就会导致乱码现象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">编码:字符(人能看懂的)--字节(人看不懂的)</span><br><span class="line"></span><br><span class="line">解码:字节(人看不懂的)--&gt;字符(人能看懂的)</span><br></pre></td></tr></table></figure>

<h4 id="6-4-2-字符集"><a href="#6-4-2-字符集" class="headerlink" title="6.4.2 字符集"></a>6.4.2 字符集</h4><ul>
<li><strong>字符集Charset</strong>：也叫编码表。是一个系统支持的所有字符的集合，包括各国家文字、标点符号、图形符号、数字等。</li>
</ul>
<ul>
<li>计算机要准确的存储和识别各种字符集符号，需要进行字符编码，一套字符集必然至少有一套字符编码。常见字符集有ASCII字符集、GBK字符集、Unicode字符集等。</li>
</ul>
<p>可见，当指定了<strong>编码</strong>，它所对应的<strong>字符集</strong>自然就指定了，所以<strong>编码</strong>才是我们最终要关心的。</p>
<ul>
<li><p><strong>ASCII字符集</strong> ：</p>
<ul>
<li>ASCII码（American Standard Code for Information Interchange，美国信息交换标准代码）：上个世纪60年代，美国制定了一套字符编码，对<code>英语字符</code>与二进制位之间的关系，做了统一规定。这被称为ASCII码。</li>
<li>ASCII码用于显示现代英语，主要包括控制字符（回车键、退格、换行键等）和可显示字符（英文大小写字符、阿拉伯数字和西文符号）。</li>
<li>基本的ASCII字符集，使用7位（bits）表示一个字符（最前面的1位统一规定为0），共<code>128个</code>字符。比如：空格“SPACE”是32（二进制00100000），大写的字母A是65（二进制01000001）。</li>
<li>缺点：不能表示所有字符。</li>
</ul>
</li>
<li><p><strong>ISO-8859-1字符集</strong>：</p>
<ul>
<li>拉丁码表，别名Latin-1，用于显示欧洲使用的语言，包括荷兰语、德语、意大利语、葡萄牙语等</li>
<li>ISO-8859-1使用单字节编码，兼容ASCII编码。</li>
</ul>
</li>
<li><p><strong>GBxxx字符集</strong>：</p>
<ul>
<li>GB就是国标的意思，是为了<code>显示中文</code>而设计的一套字符集。</li>
<li><strong>GB2312</strong>：简体中文码表。一个小于127的字符的意义与原来相同，即向下兼容ASCII码。但两个大于127的字符连在一起时，就表示一个汉字，这样大约可以组合了包含<code>7000多个简体汉字</code>，此外数学符号、罗马希腊的字母、日文的假名们都编进去了，这就是常说的”全角”字符，而原来在127号以下的那些符号就叫”半角”字符了。</li>
<li><strong>GBK</strong>：最常用的中文码表。是在GB2312标准基础上的扩展规范，使用了<code>双字节</code>编码方案，共收录了<code>21003个</code>汉字，完全兼容GB2312标准，同时支持<code>繁体汉字</code>以及日韩汉字等。</li>
<li><strong>GB18030</strong>：最新的中文码表。收录汉字<code>70244个</code>，采用<code>多字节</code>编码，每个字可以由1个、2个或4个字节组成。支持中国国内少数民族的文字，同时支持繁体汉字以及日韩汉字等。</li>
</ul>
</li>
<li><p><strong>Unicode字符集</strong> ：</p>
<ul>
<li>Unicode编码为表达<code>任意语言的任意字符</code>而设计，也称为统一码、标准万国码。Unicode 将世界上所有的文字用<code>2个字节</code>统一进行编码，为每个字符设定唯一的二进制编码，以满足跨语言、跨平台进行文本处理的要求。</li>
</ul>
<ul>
<li>Unicode 的缺点：这里有三个问题：<ul>
<li>第一，英文字母只用一个字节表示就够了，如果用更多的字节存储是<code>极大的浪费</code>。</li>
<li>第二，如何才能<code>区别Unicode和ASCII</code>？计算机怎么知道两个字节表示一个符号，而不是分别表示两个符号呢？</li>
<li>第三，如果和GBK等双字节编码方式一样，用最高位是1或0表示两个字节和一个字节，就少了很多值无法用于表示字符，<code>不够表示所有字符</code>。</li>
</ul>
</li>
<li>Unicode在很长一段时间内无法推广，直到互联网的出现，为解决Unicode如何在网络上传输的问题，于是面向传输的众多 UTF（UCS Transfer Format）标准出现。具体来说，有三种编码方案，UTF-8、UTF-16和UTF-32。</li>
</ul>
</li>
<li><p><strong>UTF-8字符集</strong>：</p>
<ul>
<li>Unicode是字符集，UTF-8、UTF-16、UTF-32是三种<code>将数字转换到程序数据</code>的编码方案。顾名思义，UTF-8就是每次8个位传输数据，而UTF-16就是每次16个位。其中，UTF-8 是在互联网上<code>使用最广</code>的一种 Unicode 的实现方式。</li>
<li>互联网工程工作小组（IETF）要求所有互联网协议都必须支持UTF-8编码。所以，我们开发Web应用，也要使用UTF-8编码。UTF-8 是一种<code>变长的编码方式</code>。它使用1-4个字节为每个字符编码，编码规则：<ol>
<li>128个US-ASCII字符，只需一个字节编码。</li>
<li>拉丁文等字符，需要二个字节编码。 </li>
<li>大部分常用字（含中文），使用三个字节编码。</li>
<li>其他极少使用的Unicode辅助字符，使用四字节编码。</li>
</ol>
</li>
</ul>
</li>
</ul>
<ul>
<li>举例</li>
</ul>
<p>Unicode符号范围  | UTF-8编码方式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(十六进制)           | （二进制）</span><br><span class="line"></span><br><span class="line">————————————————————|—–—–—–—–—–—–—–—–—–—–—–—–—–—–</span><br><span class="line"></span><br><span class="line">0000 0000-0000 007F | 0xxxxxxx（兼容原来的ASCII）</span><br><span class="line"></span><br><span class="line">0000 0080-0000 07FF | 110xxxxx 10xxxxxx</span><br><span class="line"></span><br><span class="line">0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx</span><br><span class="line"></span><br><span class="line">0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010940486.png" alt="image-20220525164636164"></p>
<ul>
<li>小结</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010940230.jpg" alt="字符集"></p>
<blockquote>
<p>注意：在中文操作系统上，ANSI（美国国家标准学会、AMERICAN NATIONAL STANDARDS INSTITUTE: ANSI）编码即为GBK；在英文操作系统上，ANSI编码即为ISO-8859-1。</p>
</blockquote>
<h3 id="6-5-练习"><a href="#6-5-练习" class="headerlink" title="6.5 练习"></a>6.5 练习</h3><p>把当前module下的《康师傅的话.txt》字符编码为GBK，复制到电脑桌面目录下的《寄语.txt》，<br>字符编码为UTF-8。</p>
<p>在当前module下的文本内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">六项精进：</span><br><span class="line">（一）付出不亚于任何人的努力</span><br><span class="line">（二）要谦虚，不要骄傲</span><br><span class="line">（三）要每天反省</span><br><span class="line">（四）活着，就要感谢</span><br><span class="line">（五）积善行、思利他</span><br><span class="line">（六）不要有感性的烦恼</span><br></pre></td></tr></table></figure>

<p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputStreamReaderDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        InputStreamReader isr = <span class="keyword">null</span>;</span><br><span class="line">        OutputStreamWriter osw = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            isr = <span class="keyword">new</span> InputStreamReader(<span class="keyword">new</span> FileInputStream(<span class="string">"康师傅的话.txt"</span>),<span class="string">"gbk"</span>);</span><br><span class="line">            osw = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">new</span> FileOutputStream(<span class="string">"C:\\Users\\shkstart\\Desktop\\寄语.txt"</span>),<span class="string">"utf-8"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">char</span>[] cbuf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="keyword">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = isr.read(cbuf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                osw.write(cbuf, <span class="number">0</span>, len);</span><br><span class="line">                osw.flush();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"文件复制完成"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (isr != <span class="keyword">null</span>)</span><br><span class="line">                    isr.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (osw != <span class="keyword">null</span>)</span><br><span class="line">                    osw.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-处理流之三-四：数据流、对象流"><a href="#7-处理流之三-四：数据流、对象流" class="headerlink" title="7. 处理流之三/四：数据流、对象流"></a>7. 处理流之三/四：数据流、对象流</h2><h3 id="7-1-数据流与对象流说明"><a href="#7-1-数据流与对象流说明" class="headerlink" title="7.1 数据流与对象流说明"></a>7.1 数据流与对象流说明</h3><p>如果需要将内存中定义的变量（包括基本数据类型或引用数据类型）保存在文件中，那怎么办呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> age = <span class="number">300</span>;</span><br><span class="line"><span class="keyword">char</span> gender = <span class="string">'男'</span>;</span><br><span class="line"><span class="keyword">int</span> energy = <span class="number">5000</span>;</span><br><span class="line"><span class="keyword">double</span> price = <span class="number">75.5</span>;</span><br><span class="line"><span class="keyword">boolean</span> relive = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">String name = <span class="string">"巫师"</span>;</span><br><span class="line">Student stu = <span class="keyword">new</span> Student(<span class="string">"张三"</span>,<span class="number">23</span>,<span class="number">89</span>);</span><br></pre></td></tr></table></figure>

<p>Java提供了数据流和对象流来处理这些类型的数据：</p>
<ul>
<li><p><strong>数据流：DataOutputStream、DataInputStream</strong></p>
<ul>
<li><p>DataOutputStream：允许应用程序将基本数据类型、String类型的变量写入输出流中</p>
</li>
<li><p>DataInputStream：允许应用程序以与机器无关的方式从底层输入流中读取基本数据类型、String类型的变量。</p>
</li>
</ul>
</li>
<li><p>对象流DataInputStream中的方法：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">byte</span> <span class="title">readByte</span><span class="params">()</span>                <span class="keyword">short</span> <span class="title">readShort</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">readInt</span><span class="params">()</span>                  <span class="keyword">long</span> <span class="title">readLong</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">readFloat</span><span class="params">()</span>              <span class="keyword">double</span> <span class="title">readDouble</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">readChar</span><span class="params">()</span>				 <span class="keyword">boolean</span> <span class="title">readBoolean</span><span class="params">()</span>					</span></span><br><span class="line"><span class="function">String <span class="title">readUTF</span><span class="params">()</span>               <span class="keyword">void</span> <span class="title">readFully</span><span class="params">(<span class="keyword">byte</span>[] b)</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>对象流DataOutputStream中的方法：将上述的方法的read改为相应的write即可。</li>
<li>数据流的弊端：只支持Java基本数据类型和字符串的读写，而不支持其它Java对象的类型。而ObjectOutputStream和ObjectInputStream既支持Java基本数据类型的数据读写，又支持Java对象的读写，所以重点介绍对象流ObjectOutputStream和ObjectInputStream。</li>
<li><strong>对象流：ObjectOutputStream、ObjectInputStream</strong><ul>
<li>ObjectOutputStream：将 Java 基本数据类型和对象写入字节输出流中。通过在流中使用文件可以实现Java各种基本数据类型的数据以及对象的持久存储。</li>
<li>ObjectInputStream：ObjectInputStream 对以前使用 ObjectOutputStream 写出的基本数据类型的数据和对象进行读入操作，保存在内存中。</li>
</ul>
</li>
</ul>
<blockquote>
<p>说明：对象流的强大之处就是可以把Java中的对象写入到数据源中，也能把对象从数据源中还原回来。</p>
</blockquote>
<h3 id="7-2-对象流API"><a href="#7-2-对象流API" class="headerlink" title="7.2 对象流API"></a>7.2 对象流API</h3><p><strong>ObjectOutputStream中的构造器：</strong></p>
<p><code>public ObjectOutputStream(OutputStream out)</code>： 创建一个指定的ObjectOutputStream。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"game.dat"</span>);</span><br><span class="line">ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(fos);</span><br></pre></td></tr></table></figure>

<p><strong>ObjectOutputStream中的方法：</strong></p>
<ul>
<li>public void writeBoolean(boolean val)：写出一个 boolean 值。</li>
<li>public void writeByte(int val)：写出一个8位字节</li>
<li>public void writeShort(int val)：写出一个16位的 short 值</li>
<li>public void writeChar(int val)：写出一个16位的 char 值</li>
<li>public void writeInt(int val)：写出一个32位的 int 值</li>
<li>public void writeLong(long val)：写出一个64位的 long 值</li>
<li>public void writeFloat(float val)：写出一个32位的 float 值。</li>
<li>public void writeDouble(double val)：写出一个64位的 double 值</li>
<li>public void writeUTF(String str)：将表示长度信息的两个字节写入输出流，后跟字符串 s 中每个字符的 UTF-8 修改版表示形式。根据字符的值，将字符串 s 中每个字符转换成一个字节、两个字节或三个字节的字节组。注意，将 String 作为基本数据写入流中与将它作为 Object 写入流中明显不同。 如果 s 为 null，则抛出 NullPointerException。</li>
<li><code>public void writeObject(Object obj)</code>：写出一个obj对象</li>
<li>public void close() ：关闭此输出流并释放与此流相关联的任何系统资源</li>
</ul>
<p><strong>ObjectInputStream中的构造器：</strong></p>
<p><code>public ObjectInputStream(InputStream in)</code>： 创建一个指定的ObjectInputStream。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"game.dat"</span>);</span><br><span class="line">ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(fis);</span><br></pre></td></tr></table></figure>

<p><strong>ObjectInputStream中的方法：</strong></p>
<ul>
<li>public boolean readBoolean()：读取一个 boolean 值</li>
<li>public byte readByte()：读取一个 8 位的字节</li>
<li>public short readShort()：读取一个 16 位的 short 值</li>
<li>public char readChar()：读取一个 16 位的 char 值</li>
<li>public int readInt()：读取一个 32 位的 int 值</li>
<li>public long readLong()：读取一个 64 位的 long 值</li>
<li>public float readFloat()：读取一个 32 位的 float 值</li>
<li>public double readDouble()：读取一个 64 位的 double 值</li>
<li>public String readUTF()：读取 UTF-8 修改版格式的 String</li>
<li><code>public void readObject(Object obj)</code>：读入一个obj对象</li>
<li>public void close() ：关闭此输入流并释放与此流相关联的任何系统资源</li>
</ul>
<h3 id="7-3-认识对象序列化机制"><a href="#7-3-认识对象序列化机制" class="headerlink" title="7.3 认识对象序列化机制"></a>7.3 认识对象序列化机制</h3><p><strong>1、何为对象序列化机制？</strong></p>
<p><code>对象序列化机制</code>允许把内存中的Java对象转换成平台无关的二进制流，从而允许把这种二进制流持久地保存在磁盘上，或通过网络将这种二进制流传输到另一个网络节点。//当其它程序获取了这种二进制流，就可以恢复成原来的Java对象。</p>
<ul>
<li>序列化过程：用一个字节序列可以表示一个对象，该字节序列包含该<code>对象的类型</code>和<code>对象中存储的属性</code>等信息。字节序列写出到文件之后，相当于文件中<code>持久保存</code>了一个对象的信息。 </li>
</ul>
<ul>
<li>反序列化过程：该字节序列还可以从文件中读取回来，重构对象，对它进行<code>反序列化</code>。<code>对象的数据</code>、<code>对象的类型</code>和<code>对象中存储的数据</code>信息，都可以用来在内存中创建对象。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010940645.png" alt></p>
<p><strong>2、序列化机制的重要性</strong></p>
<p>序列化是 RMI（Remote Method Invoke、远程方法调用）过程的参数和返回值都必须实现的机制，而 RMI 是 JavaEE 的基础。因此序列化机制是 JavaEE 平台的基础。</p>
<p>序列化的好处，在于可将任何实现了Serializable接口的对象转化为<strong>字节数据</strong>，使其在保存和传输时可被还原。</p>
<p><strong>3、实现原理</strong></p>
<ul>
<li><p>序列化：用ObjectOutputStream类保存基本类型数据或对象的机制。方法为：</p>
<ul>
<li><code>public final void writeObject (Object obj)</code> : 将指定的对象写出。</li>
</ul>
</li>
<li><p>反序列化：用ObjectInputStream类读取基本类型数据或对象的机制。方法为：</p>
<ul>
<li><code>public final Object readObject ()</code> : 读取一个对象。</li>
</ul>
</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010940008.jpg" style="zoom:70%;">

<h3 id="7-4-如何实现序列化机制"><a href="#7-4-如何实现序列化机制" class="headerlink" title="7.4 如何实现序列化机制"></a>7.4 如何实现序列化机制</h3><p>如果需要让某个对象支持序列化机制，则必须让对象所属的类及其属性是可序列化的，为了让某个类是可序列化的，该类必须实现<code>java.io.Serializable</code> 接口。<code>Serializable</code> 是一个<code>标记接口</code>，不实现此接口的类将不会使任何状态序列化或反序列化，会抛出<code>NotSerializableException</code> 。</p>
<ul>
<li>如果对象的某个属性也是引用数据类型，那么如果该属性也要序列化的话，也要实现<code>Serializable</code> 接口</li>
<li>该类的所有属性必须是可序列化的。如果有一个属性不需要可序列化的，则该属性必须注明是瞬态的，使用<code>transient</code> 关键字修饰。</li>
<li><code>静态（static）变量</code>的值不会序列化。因为静态变量的值不属于某个对象。</li>
</ul>
<p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadWriteDataOfAnyType</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        String name = <span class="string">"巫师"</span>;</span><br><span class="line">        <span class="keyword">int</span> age = <span class="number">300</span>;</span><br><span class="line">        <span class="keyword">char</span> gender = <span class="string">'男'</span>;</span><br><span class="line">        <span class="keyword">int</span> energy = <span class="number">5000</span>;</span><br><span class="line">        <span class="keyword">double</span> price = <span class="number">75.5</span>;</span><br><span class="line">        <span class="keyword">boolean</span> relive = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"game.dat"</span>));</span><br><span class="line">        oos.writeUTF(name);</span><br><span class="line">        oos.writeInt(age);</span><br><span class="line">        oos.writeChar(gender);</span><br><span class="line">        oos.writeInt(energy);</span><br><span class="line">        oos.writeDouble(price);</span><br><span class="line">        oos.writeBoolean(relive);</span><br><span class="line">        oos.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reload</span><span class="params">()</span><span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">        ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"game.dat"</span>));</span><br><span class="line">        String name = ois.readUTF();</span><br><span class="line">        <span class="keyword">int</span> age = ois.readInt();</span><br><span class="line">        <span class="keyword">char</span> gender = ois.readChar();</span><br><span class="line">        <span class="keyword">int</span> energy = ois.readInt();</span><br><span class="line">        <span class="keyword">double</span> price = ois.readDouble();</span><br><span class="line">        <span class="keyword">boolean</span> relive = ois.readBoolean();</span><br><span class="line"></span><br><span class="line">        System.out.println(name+<span class="string">","</span> + age + <span class="string">","</span> + gender + <span class="string">","</span> + energy + <span class="string">","</span> + price + <span class="string">","</span> + relive);</span><br><span class="line"></span><br><span class="line">        ois.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="comment">//static final long serialVersionUID = 23234234234L;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String company; <span class="comment">//static修饰的类变量，不会被序列化</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> String address;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">transient</span> <span class="keyword">int</span> age; <span class="comment">// transient瞬态修饰成员,不会被序列化</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, String address, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getCompany</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> company;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setCompany</span><span class="params">(String company)</span> </span>&#123;</span><br><span class="line">        Employee.company = company;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Employee&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", address='"</span> + address + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", company="</span> + company +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadWriteObject</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Employee.setCompany(<span class="string">"尚硅谷"</span>);</span><br><span class="line">        Employee e = <span class="keyword">new</span> Employee(<span class="string">"小谷姐姐"</span>, <span class="string">"宏福苑"</span>, <span class="number">23</span>);</span><br><span class="line">        <span class="comment">// 创建序列化流对象</span></span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"employee.dat"</span>));</span><br><span class="line">        <span class="comment">// 写出对象</span></span><br><span class="line">        oos.writeObject(e);</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        oos.close();</span><br><span class="line">        System.out.println(<span class="string">"Serialized data is saved"</span>); <span class="comment">// 姓名，地址被序列化，年龄没有被序列化。</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reload</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建反序列化流</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"employee.dat"</span>);</span><br><span class="line">        ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(fis);</span><br><span class="line">        <span class="comment">// 读取一个对象</span></span><br><span class="line">        Employee e = (Employee) ois.readObject();</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        ois.close();</span><br><span class="line">        fis.close();</span><br><span class="line"></span><br><span class="line">        System.out.println(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例3：如果有多个对象需要序列化，则可以将对象放到集合中，再序列化集合对象即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadWriteCollection</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ArrayList&lt;Employee&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"张三"</span>, <span class="string">"宏福苑"</span>, <span class="number">23</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"李四"</span>, <span class="string">"白庙"</span>, <span class="number">24</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Employee(<span class="string">"王五"</span>, <span class="string">"平西府"</span>, <span class="number">25</span>));</span><br><span class="line">        <span class="comment">// 创建序列化流对象</span></span><br><span class="line">        ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"employees.dat"</span>));</span><br><span class="line">        <span class="comment">// 写出对象</span></span><br><span class="line">        oos.writeObject(list);</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        oos.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reload</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// 创建反序列化流</span></span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"employees.dat"</span>);</span><br><span class="line">        ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(fis);</span><br><span class="line">        <span class="comment">// 读取一个对象</span></span><br><span class="line">        ArrayList&lt;Employee&gt; list = (ArrayList&lt;Employee&gt;) ois.readObject();</span><br><span class="line">        <span class="comment">// 释放资源</span></span><br><span class="line">        ois.close();</span><br><span class="line">        fis.close();</span><br><span class="line"></span><br><span class="line">        System.out.println(list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-5-反序列化失败问题"><a href="#7-5-反序列化失败问题" class="headerlink" title="7.5 反序列化失败问题"></a>7.5 反序列化失败问题</h3><p><strong>问题1：</strong></p>
<p>对于JVM可以反序列化对象，它必须是能够找到class文件的类。如果找不到该类的class文件，则抛出一个 <code>ClassNotFoundException</code> 异常。  </p>
<p><strong>问题2：</strong></p>
<p>当JVM反序列化对象时，能找到class文件，但是class文件在序列化对象之后发生了修改，那么反序列化操作也会失败，抛出一个<code>InvalidClassException</code>异常。发生这个异常的原因如下：</p>
<ul>
<li>该类的序列版本号与从流中读取的类描述符的版本号不匹配 </li>
<li>该类包含未知数据类型  </li>
</ul>
<p>解决办法：</p>
<p><code>Serializable</code> 接口给需要序列化的类，提供了一个序列版本号：<code>serialVersionUID</code> 。凡是实现 Serializable接口的类都应该有一个表示序列化版本标识符的静态变量：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">234242343243L</span>; <span class="comment">//它的值由程序员随意指定即可。</span></span><br></pre></td></tr></table></figure>

<ul>
<li>serialVersionUID用来表明类的不同版本间的兼容性。简单来说，Java的序列化机制是通过在运行时判断类的serialVersionUID来验证版本一致性的。在进行反序列化时，JVM会把传来的字节流中的serialVersionUID与本地相应实体类的serialVersionUID进行比较，如果相同就认为是一致的，可以进行反序列化，否则就会出现序列化版本不一致的异常(InvalidCastException)。</li>
<li>如果类没有显示定义这个静态常量，它的值是Java运行时环境根据类的内部细节<code>自动生成</code>的。若类的实例变量做了修改，serialVersionUID <code>可能发生变化</code>。因此，建议显式声明。</li>
<li>如果声明了serialVersionUID，即使在序列化完成之后修改了类导致类重新编译，则原来的数据也能正常反序列化，只是新增的字段值是默认值而已。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1324234L</span>; <span class="comment">//增加serialVersionUID</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//其它结构：略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-6-面试题-amp-练习"><a href="#7-6-面试题-amp-练习" class="headerlink" title="7.6 面试题&amp;练习"></a>7.6 面试题&amp;练习</h3><p>面试题：谈谈你对java.io.Serializable接口的理解，我们知道它用于序列化，是空方法接口，还有其它认识吗？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">实现了Serializable接口的对象，可将它们转换成一系列字节，并可在以后完全恢复回原来的样子。这一过程亦可通过网络进行。这意味着序列化机制能自动补偿操作系统间的差异。换句话说，可以先在Windows机器上创建一个对象，对其序列化，然后通过网络发给一台Unix机器，然后在那里准确无误地重新“装配”。不必关心数据在不同机器上如何表示，也不必关心字节的顺序或者其他任何细节。</span><br><span class="line">    </span><br><span class="line">由于大部分作为参数的类如String、Integer等都实现了java.io.Serializable的接口，也可以利用多态的性质，作为参数使接口更灵活。</span><br></pre></td></tr></table></figure>

<p>练习：</p>
<ul>
<li><p>需求说明：</p>
<ul>
<li>网上购物时某用户填写订单，订单内容为产品列表，保存在“save.bin”中。</li>
<li>运行时，如果不存在“save.bin”，则进行新订单录入，如果存在，则显示并计算客户所需付款。</li>
</ul>
</li>
<li><p>分析：</p>
<ul>
<li>编写Save()方法保存对象到“save.bin”</li>
<li>编写Load()方法获得对象，计算客户所需付款</li>
</ul>
</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010941076.png" alt="image-20220503123603551" style="zoom:80%;">

<h2 id="8-其他流的使用"><a href="#8-其他流的使用" class="headerlink" title="8. 其他流的使用"></a>8. 其他流的使用</h2><h3 id="8-1-标准输入、输出流"><a href="#8-1-标准输入、输出流" class="headerlink" title="8.1 标准输入、输出流"></a>8.1 标准输入、输出流</h3><ul>
<li>System.in和System.out分别代表了系统标准的输入和输出设备</li>
<li>默认输入设备是：键盘，输出设备是：显示器</li>
<li>System.in的类型是InputStream</li>
<li>System.out的类型是PrintStream，其是OutputStream的子类FilterOutputStream 的子类</li>
<li>重定向：通过System类的setIn，setOut方法对默认设备进行改变。<ul>
<li>public static void setIn(InputStream in)</li>
<li>public static void setOut(PrintStream out)</li>
</ul>
</li>
</ul>
<p><strong>举例：</strong></p>
<p>从键盘输入字符串，要求将读取到的整行字符串转成大写输出。然后继续进行输入操作，直至当输入“e”或者“exit”时，退出程序。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"请输入信息(退出输入e或exit):"</span>);</span><br><span class="line"><span class="comment">// 把"标准"输入流(键盘输入)这个字节流包装成字符流,再包装成缓冲流</span></span><br><span class="line">BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">String s = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> ((s = br.readLine()) != <span class="keyword">null</span>) &#123; <span class="comment">// 读取用户输入的一行数据 --&gt; 阻塞程序</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"e"</span>.equalsIgnoreCase(s) || <span class="string">"exit"</span>.equalsIgnoreCase(s)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"安全退出!!"</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 将读取到的整行字符串转成大写输出</span></span><br><span class="line">        System.out.println(<span class="string">"--&gt;:"</span> + s.toUpperCase());</span><br><span class="line">        System.out.println(<span class="string">"继续输入信息"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (br != <span class="keyword">null</span>) &#123;</span><br><span class="line">            br.close(); <span class="comment">// 关闭过滤流时,会自动关闭它包装的底层节点流</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>拓展：</strong></p>
<p>System类中有三个常量对象：System.out、System.in、System.err</p>
<p>查看System类中这三个常量对象的声明：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> InputStream in = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> PrintStream out = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> PrintStream err = <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p>奇怪的是，</p>
<ul>
<li>这三个常量对象有final声明，但是却初始化为null。final声明的常量一旦赋值就不能修改，那么null不会空指针异常吗？</li>
<li>这三个常量对象为什么要小写？final声明的常量按照命名规范不是应该大写吗？</li>
<li>这三个常量的对象有set方法？final声明的常量不是不能修改值吗？set方法是如何修改它们的值的？</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span>声明的常量，表示在Java的语法体系中它们的值是不能修改的，而这三个常量对象的值是由C/C++等系统函数进行初始化和修改值的，所以它们故意没有用大写，也有set方法。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setOut</span><span class="params">(PrintStream out)</span> </span>&#123;</span><br><span class="line">    checkIO();</span><br><span class="line">    setOut0(out);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setErr</span><span class="params">(PrintStream err)</span> </span>&#123;</span><br><span class="line">    checkIO();</span><br><span class="line">    setErr0(err);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setIn</span><span class="params">(InputStream in)</span> </span>&#123;</span><br><span class="line">    checkIO();</span><br><span class="line">    setIn0(in);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">checkIO</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    SecurityManager sm = getSecurityManager();</span><br><span class="line">    <span class="keyword">if</span> (sm != <span class="keyword">null</span>) &#123;</span><br><span class="line">        sm.checkPermission(<span class="keyword">new</span> RuntimePermission(<span class="string">"setIO"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">setIn0</span><span class="params">(InputStream in)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">setOut0</span><span class="params">(PrintStream out)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">setErr0</span><span class="params">(PrintStream err)</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>练习：</strong></p>
<p>Create a program named MyInput.java: Contain the methods for reading int, double, float, boolean, short, byte and String values from the keyboard.</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010941969.png" alt="image-20220412232254819" style="zoom:80%;">

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.java;</span><br><span class="line"><span class="comment">// MyInput.java: Contain the methods for reading int, double, float, boolean, short, byte and</span></span><br><span class="line"><span class="comment">// string values from the keyboard</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInput</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Read a string from the keyboard</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">readString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Declare and initialize the string</span></span><br><span class="line">        String string = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Get the string from the keyboard</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            string = br.readLine();</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">            System.out.println(ex);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Return the string obtained from the keyboard</span></span><br><span class="line">        <span class="keyword">return</span> string;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read an int value from the keyboard</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">readInt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.parseInt(readString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read a double value from the keyboard</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readDouble</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Double.parseDouble(readString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read a byte value from the keyboard</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readByte</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Byte.parseByte(readString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read a short value from the keyboard</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readShort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Short.parseShort(readString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read a long value from the keyboard</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readLong</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Long.parseLong(readString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Read a float value from the keyboard</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">readFloat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Float.parseFloat(readString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-2-打印流"><a href="#8-2-打印流" class="headerlink" title="8.2 打印流"></a>8.2 打印流</h3><ul>
<li>实现将基本数据类型的数据格式转化为字符串输出。</li>
</ul>
<ul>
<li><p>打印流：<code>PrintStream</code>和<code>PrintWriter</code></p>
<ul>
<li><p>提供了一系列重载的print()和println()方法，用于多种数据类型的输出</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010941752.png" alt="image-20220131021502089"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010941994.png" alt="image-20220131021528397"></p>
</li>
<li><p>PrintStream和PrintWriter的输出不会抛出IOException异常</p>
</li>
<li><p>PrintStream和PrintWriter有自动flush功能</p>
</li>
<li><p>PrintStream 打印的所有字符都使用平台的默认字符编码转换为字节。在需要写入字符而不是写入字节的情况下，应该使用 PrintWriter 类。</p>
</li>
<li><p>System.out返回的是PrintStream的实例</p>
</li>
</ul>
</li>
<li><p>构造器</p>
<ul>
<li>PrintStream(File file) ：创建具有指定文件且不带自动行刷新的新打印流。 </li>
<li>PrintStream(File file, String csn)：创建具有指定文件名称和字符集且不带自动行刷新的新打印流。 </li>
<li>PrintStream(OutputStream out) ：创建新的打印流。 </li>
<li>PrintStream(OutputStream out, boolean autoFlush)：创建新的打印流。 autoFlush如果为 true，则每当写入 byte 数组、调用其中一个 println 方法或写入换行符或字节 (‘\n’) 时都会刷新输出缓冲区。</li>
<li>PrintStream(OutputStream out, boolean autoFlush, String encoding) ：创建新的打印流。 </li>
<li>PrintStream(String fileName)：创建具有指定文件名称且不带自动行刷新的新打印流。 </li>
<li>PrintStream(String fileName, String csn) ：创建具有指定文件名称和字符集且不带自动行刷新的新打印流。</li>
</ul>
</li>
<li><p>代码举例1</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPrintStream</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        PrintStream ps = <span class="keyword">new</span> PrintStream(<span class="string">"io.txt"</span>);</span><br><span class="line">        ps.println(<span class="string">"hello"</span>);</span><br><span class="line">        ps.println(<span class="number">1</span>);</span><br><span class="line">        ps.println(<span class="number">1.5</span>);</span><br><span class="line">        ps.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>代码举例2</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">PrintStream ps = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(<span class="string">"D:\\IO\\text.txt"</span>));</span><br><span class="line">    <span class="comment">// 创建打印输出流,设置为自动刷新模式(写入换行符或字节 '\n' 时都会刷新输出缓冲区)</span></span><br><span class="line">    ps = <span class="keyword">new</span> PrintStream(fos, <span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">if</span> (ps != <span class="keyword">null</span>) &#123;<span class="comment">// 把标准输出流(控制台输出)改成文件</span></span><br><span class="line">        System.setOut(ps);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">255</span>; i++) &#123; <span class="comment">// 输出ASCII字符</span></span><br><span class="line">        System.out.print((<span class="keyword">char</span>) i);</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">50</span> == <span class="number">0</span>) &#123; <span class="comment">// 每50个数据一行</span></span><br><span class="line">            System.out.println(); <span class="comment">// 换行</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (ps != <span class="keyword">null</span>) &#123;</span><br><span class="line">        ps.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>代码举例3：自定义一个日志工具</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">日志工具</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Logger</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    记录日志的方法。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">log</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 指向一个日志文件</span></span><br><span class="line">            PrintStream out = <span class="keyword">new</span> PrintStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"log.txt"</span>, <span class="keyword">true</span>));</span><br><span class="line">            <span class="comment">// 改变输出方向</span></span><br><span class="line">            System.setOut(out);</span><br><span class="line">            <span class="comment">// 日期当前时间</span></span><br><span class="line">            Date nowTime = <span class="keyword">new</span> Date();</span><br><span class="line">            SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss SSS"</span>);</span><br><span class="line">            String strTime = sdf.format(nowTime);</span><br><span class="line"></span><br><span class="line">            System.out.println(strTime + <span class="string">": "</span> + msg);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//测试工具类是否好用</span></span><br><span class="line">        Logger.log(<span class="string">"调用了System类的gc()方法，建议启动垃圾回收"</span>);</span><br><span class="line">        Logger.log(<span class="string">"调用了TeamView的addMember()方法"</span>);</span><br><span class="line">        Logger.log(<span class="string">"用户尝试进行登录，验证失败"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-Scanner类"><a href="#8-3-Scanner类" class="headerlink" title="8.3 Scanner类"></a>8.3 Scanner类</h3><p>构造方法</p>
<ul>
<li>Scanner(File source) ：构造一个新的 Scanner，它生成的值是从指定文件扫描的。 </li>
<li>Scanner(File source, String charsetName) ：构造一个新的 Scanner，它生成的值是从指定文件扫描的。 </li>
<li>Scanner(InputStream source) ：构造一个新的 Scanner，它生成的值是从指定的输入流扫描的。 </li>
<li>Scanner(InputStream source, String charsetName) ：构造一个新的 Scanner，它生成的值是从指定的输入流扫描的。</li>
</ul>
<p>常用方法：</p>
<ul>
<li>boolean hasNextXxx()： 通过nextXxx()，此扫描器输入信息中的下一个标记可以解释为默认基数中的一个 Xxx 值，则返回 true。</li>
<li>Xxx nextXxx()： 将输入信息的下一个标记扫描为一个Xxx</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestScanner</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        PrintStream ps = <span class="keyword">new</span> PrintStream(<span class="string">"1.txt"</span>);</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            System.out.print(<span class="string">"请输入一个单词："</span>);</span><br><span class="line">            String str = input.nextLine();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">"stop"</span>.equals(str))&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ps.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">        ps.close();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(<span class="keyword">new</span> FileInputStream(<span class="string">"1.txt"</span>));</span><br><span class="line">        <span class="keyword">while</span>(input.hasNextLine())&#123;</span><br><span class="line">            String str = input.nextLine();</span><br><span class="line">            System.out.println(str);</span><br><span class="line">        &#125;</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-apache-common包的使用"><a href="#9-apache-common包的使用" class="headerlink" title="9. apache-common包的使用"></a>9. apache-common包的使用</h2><h3 id="9-1-介绍"><a href="#9-1-介绍" class="headerlink" title="9.1 介绍"></a>9.1 介绍</h3><p>IO技术开发中，代码量很大，而且代码的重复率较高，为此Apache软件基金会，开发了IO技术的工具类<code>commonsIO</code>，大大简化了IO开发。</p>
<p>Apahce软件基金会属于第三方，（Oracle公司第一方，我们自己第二方，其他都是第三方）我们要使用第三方开发好的工具，需要添加jar包。</p>
<h3 id="9-2-导包及举例"><a href="#9-2-导包及举例" class="headerlink" title="9.2 导包及举例"></a>9.2 导包及举例</h3><ul>
<li><p>在导入commons-io-2.5.jar包之后，内部的API都可以使用。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202311010942399.png" alt="image-20220416004246436"></p>
</li>
<li><p>IOUtils类的使用</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- 静态方法：IOUtils.copy(InputStream in,OutputStream out)传递字节流，实现文件复制。</span><br><span class="line">- 静态方法：IOUtils.closeQuietly(任意流对象)悄悄的释放资源，自动处理close()方法抛出的异常。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test01</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span><span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//- 静态方法：IOUtils.copy(InputStream in,OutputStream out)传递字节流，实现文件复制。</span></span><br><span class="line">        IOUtils.copy(<span class="keyword">new</span> FileInputStream(<span class="string">"E:\\Idea\\io\\1.jpg"</span>),<span class="keyword">new</span> FileOutputStream(<span class="string">"E:\\Idea\\io\\file\\柳岩.jpg"</span>));</span><br><span class="line">        <span class="comment">//- 静态方法：IOUtils.closeQuietly(任意流对象)悄悄的释放资源，自动处理close()方法抛出的异常。</span></span><br><span class="line">       <span class="comment">/* FileWriter fw = null;</span></span><br><span class="line"><span class="comment">        try &#123;</span></span><br><span class="line"><span class="comment">            fw = new FileWriter("day21\\io\\writer.txt");</span></span><br><span class="line"><span class="comment">            fw.write("hahah");</span></span><br><span class="line"><span class="comment">        &#125; catch (IOException e) &#123;</span></span><br><span class="line"><span class="comment">            e.printStackTrace();</span></span><br><span class="line"><span class="comment">        &#125;finally &#123;</span></span><br><span class="line"><span class="comment">           IOUtils.closeQuietly(fw);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>FileUtils类的使用</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- 静态方法：<span class="function"><span class="keyword">void</span> <span class="title">copyDirectoryToDirectory</span><span class="params">(File src,File dest)</span>：整个目录的复制，自动进行递归遍历</span></span><br><span class="line"><span class="function">          参数:</span></span><br><span class="line"><span class="function">          src:要复制的文件夹路径</span></span><br><span class="line"><span class="function">          dest:要将文件夹粘贴到哪里去</span></span><br><span class="line"><span class="function">             </span></span><br><span class="line"><span class="function">- 静态方法：<span class="keyword">void</span> <span class="title">writeStringToFile</span><span class="params">(File file,String content)</span>：将内容content写入到file中</span></span><br><span class="line"><span class="function">- 静态方法：String <span class="title">readFileToString</span><span class="params">(File file)</span>：读取文件内容，并返回一个String</span></span><br><span class="line"><span class="function">- 静态方法：<span class="keyword">void</span> <span class="title">copyFile</span><span class="params">(File srcFile,File destFile)</span>：文件复制</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//- 静态方法：void copyDirectoryToDirectory(File src,File dest);</span></span><br><span class="line">            FileUtils.copyDirectoryToDirectory(<span class="keyword">new</span> File(<span class="string">"E:\\Idea\\io\\aa"</span>),<span class="keyword">new</span> File(<span class="string">"E:\\Idea\\io\\file"</span>));</span><br><span class="line"></span><br><span class="line">            <span class="comment">//- 静态方法：writeStringToFile(File file,String str)</span></span><br><span class="line">            FileUtils.writeStringToFile(<span class="keyword">new</span> File(<span class="string">"day21\\io\\commons.txt"</span>),<span class="string">"柳岩你好"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//- 静态方法：String readFileToString(File file)</span></span><br><span class="line">            String s = FileUtils.readFileToString(<span class="keyword">new</span> File(<span class="string">"day21\\io\\commons.txt"</span>));</span><br><span class="line">            System.out.println(s);</span><br><span class="line">            <span class="comment">//- 静态方法：void copyFile(File srcFile,File destFile)</span></span><br><span class="line">            FileUtils.copyFile(<span class="keyword">new</span> File(<span class="string">"io\\yangm.png"</span>),<span class="keyword">new</span> File(<span class="string">"io\\yangm2.png"</span>));</span><br><span class="line">            System.out.println(<span class="string">"复制成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JAVA-数据结构与集合源码" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/30/JAVA-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E9%9B%86%E5%90%88%E6%BA%90%E7%A0%81/" class="article-date">
      <time datetime="2023-10-30T01:59:16.000Z" itemprop="datePublished">2023-10-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/30/JAVA-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E9%9B%86%E5%90%88%E6%BA%90%E7%A0%81/">JAVA-数据结构与集合源码</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="第14章-数据结构与集合源码"><a href="#第14章-数据结构与集合源码" class="headerlink" title="第14章_数据结构与集合源码"></a>第14章_数据结构与集合源码</h1><h2 id="本章专题与脉络"><a href="#本章专题与脉络" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301642553.png" alt="第3阶段：Java高级应用-第14章"></p>
<h2 id="1-数据结构剖析"><a href="#1-数据结构剖析" class="headerlink" title="1. 数据结构剖析"></a>1. 数据结构剖析</h2><p>我们举一个形象的例子来理解数据结构的作用：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301650556.png" alt="image-20220412011531879"></p>
<blockquote>
<p><strong>战场：</strong>程序运行所需的软件、硬件环境</p>
<p><strong>敌人：</strong>项目或模块的功能需求</p>
<p><strong>指挥官：</strong>编写程序的程序员</p>
<p><strong>士兵和装备：</strong>一行一行的代码</p>
<p><strong>战术和策略：</strong>数据结构</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301642664.png" alt="image-20220412011555025"></p>
<p>上图：没有战术，打仗事倍功半</p>
<p> <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301645208.png" alt="image-20220412011600845"></p>
<p>上图：有战术，打仗事半功倍</p>
<p> 总结：简单来说，数据结构，就是一种程序设计优化的方法论，研究数据的<code>逻辑结构</code>和<code>物理结构</code>以及它们之间相互关系，并对这种结构定义相应的<code>运算</code>，<strong>目的是加快程序的执行速度、减少内存占用的空间。</strong></p>
<p>具体研究对象如下：</p>
<h3 id="1-1-研究对象一：数据间逻辑关系"><a href="#1-1-研究对象一：数据间逻辑关系" class="headerlink" title="1.1 研究对象一：数据间逻辑关系"></a>1.1 研究对象一：数据间逻辑关系</h3><p>数据的逻辑结构指反映数据元素之间的逻辑关系，而与数据的存储无关，是独立于计算机的。</p>
<ul>
<li><strong>集合结构</strong>：数据结构中的元素之间除了“<code>同属一个集合</code>” 的相互关系外，别无其他关系。集合元素之间没有逻辑关系。</li>
<li><strong>线性结构</strong>：数据结构中的元素存在<code>一对一</code>的相互关系。比如：排队。结构中必须存在唯一的首元素和唯一的尾元素。体现为：一维数组、链表、栈、队列</li>
<li><strong>树形结构</strong>：数据结构中的元素存在<code>一对多</code>的相互关系。比如：家谱、文件系统、组织架构</li>
<li><strong>图形结构</strong>：数据结构中的元素存在<code>多对多</code>的相互关系。比如：全国铁路网、地铁图</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301642975.png" alt="image-20220824011022664" style="zoom:67%;">

<h3 id="1-2-研究对象二：数据的存储结构（或物理结构）"><a href="#1-2-研究对象二：数据的存储结构（或物理结构）" class="headerlink" title="1.2 研究对象二：数据的存储结构（或物理结构）"></a>1.2 研究对象二：数据的存储结构（或物理结构）</h3><p>数据的物理结构/存储结构：包括<code>数据元素的表示</code>和<code>关系的表示</code>。数据的存储结构是逻辑结构用计算机语言的实现，它依赖于计算机语言。</p>
<p><strong>结构1：顺序结构</strong></p>
<ul>
<li><p>顺序结构就是使用一组连续的存储单元依次存储逻辑上相邻的各个元素。</p>
</li>
<li><p>优点： 只需要申请存放数据本身的内存空间即可，支持下标访问，也可以实现随机访问。</p>
</li>
<li><p>缺点： 必须静态分配连续空间，内存空间的利用率比较低。插入或删除可能需要移动大量元素，效率比较低</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301645811.png" alt="image-20220521100746910"></p>
<p><strong>结构2：链式结构</strong></p>
<ul>
<li>不使用连续的存储空间存放结构的元素，而是为每一个元素构造一个节点。节点中除了存放数据本身以外，还需要存放指向下一个节点的指针。</li>
<li>优点：不采用连续的存储空间导致内存空间利用率比较高，克服顺序存储结构中预知元素个数的缺点。插入或删除元素时，不需要移动大量的元素。</li>
<li>缺点：需要额外的空间来表达数据之间的逻辑关系，不支持下标访问和随机访问。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301642610.png" alt="image-20220521103734742"></p>
<p><strong>结构3：索引结构</strong></p>
<ul>
<li><p>除建立存储节点信息外，还建立附加的<code>索引表</code>来记录每个元素节点的地址。索引表由若干索引项组成。索引项的一般形式是：（关键字，地址）。</p>
</li>
<li><p>优点：用节点的索引号来确定结点存储地址，检索速度快。</p>
</li>
<li><p>缺点： 增加了附加的索引表，会占用较多的存储空间。在增加和删除数据时要修改索引表，因而会花费较多的时间。</p>
<p>&lt;img src=”F:/JAVA%25E8%25B7%25A<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301642003.png" alt="image-20220521115200921" style="zoom:67%;"></p>
</li>
</ul>
<p><strong>结构4：散列结构</strong></p>
<ul>
<li>根据元素的关键字直接计算出该元素的存储地址，又称为Hash存储。</li>
<li>优点：检索、增加和删除结点的操作都很快。</li>
<li>缺点：不支持排序，一般比用线性表存储需要更多的空间，并且记录的关键字不能重复。</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301642883.png" alt="image-20220521115734571" style="zoom:67%;">

<h3 id="1-3-研究对象三：运算结构"><a href="#1-3-研究对象三：运算结构" class="headerlink" title="1.3 研究对象三：运算结构"></a>1.3 研究对象三：运算结构</h3><p>施加在数据上的运算包括运算的定义和实现。运算的定义是针对逻辑结构的，指出运算的功能；运算的实现是针对存储结构的，指出运算的具体操作步骤。</p>
<ul>
<li>分配资源，建立结构，释放资源</li>
<li>插入和删除</li>
<li>获取和遍历</li>
<li>修改和排序</li>
</ul>
<h3 id="1-4-小结"><a href="#1-4-小结" class="headerlink" title="1.4 小结"></a>1.4 小结</h3><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301642641.png" alt="数据结构" style="zoom: 40%;">

<h2 id="2-一维数组"><a href="#2-一维数组" class="headerlink" title="2. 一维数组"></a>2. 一维数组</h2><h3 id="2-1-数组的特点"><a href="#2-1-数组的特点" class="headerlink" title="2.1 数组的特点"></a>2.1 数组的特点</h3><ul>
<li>在Java中，数组是用来存放同一种数据类型的集合，注意只能存放同一种数据类型。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只声明了类型和长度</span></span><br><span class="line">数据类型[]  数组名称 = <span class="keyword">new</span> 数据类型[数组长度];</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明了类型，初始化赋值，大小由元素个数决定</span></span><br><span class="line">数据类型[] 数组名称 = &#123;数组元素<span class="number">1</span>，数组元素<span class="number">2</span>，......&#125;</span><br></pre></td></tr></table></figure>

<p>例如：整型数组</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301642171.png" alt="1563432676234" style="zoom: 80%;">

<p>例如：对象数组</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643134.png" alt="1563432696340" style="zoom:80%;">

<ul>
<li>物理结构特点：<ul>
<li>申请内存：一次申请一大段连续的空间，一旦申请到了，内存就固定了。</li>
<li>不能动态扩展(初始化给大了，浪费；给小了，不够用)，插入快，删除和查找慢。</li>
<li>存储特点：所有数据存储在这个连续的空间中，数组中的每一个元素都是一个具体的数据（或对象），所有数据都紧密排布，不能有间隔。</li>
</ul>
</li>
<li>具体的，如下图：</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643978.png" alt="数据结构-一维数组" style="zoom: 50%;">

<h3 id="2-2-自定义数组"><a href="#2-2-自定义数组" class="headerlink" title="2.2 自定义数组"></a>2.2 自定义数组</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu01.overview.array;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 尚硅谷-宋红康</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 14:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] elementData;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Array</span><span class="params">(<span class="keyword">int</span> capacity)</span></span>&#123;</span><br><span class="line">        elementData = <span class="keyword">new</span> Object[capacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 添加元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(Object value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(size &gt;= elementData.length)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"数组已满，不可添加"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        elementData[size] = value;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 查询元素value在数组中的索引位置</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(Object value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(elementData[i].equals(value))&#123;</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 从当前数组中移除首次出现的value元素</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">delete</span><span class="params">(Object value)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = find(value);</span><br><span class="line">        <span class="keyword">if</span>(index == -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = index;i &lt; size - <span class="number">1</span>;i++)&#123;</span><br><span class="line">            elementData[i] = elementData[i + <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        elementData[size - <span class="number">1</span>] = <span class="keyword">null</span>;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 将数组中首次出现的oldValue替换为newValue</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> oldValue</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> newValue</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">update</span><span class="params">(Object oldValue,Object newValue)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> index = find(oldValue);</span><br><span class="line">        <span class="keyword">if</span>(index == -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        elementData[index] = newValue;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 遍历数组中所有数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"&#123;"</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i == size - <span class="number">1</span>)&#123;</span><br><span class="line">                System.out.println(elementData[i] + <span class="string">"&#125;"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.print(elementData[i] + <span class="string">","</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Array arr = <span class="keyword">new</span> Array(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        arr.add(<span class="number">123</span>);</span><br><span class="line">        arr.add(<span class="string">"AA"</span>);</span><br><span class="line">        arr.add(<span class="number">345</span>);</span><br><span class="line">        arr.add(<span class="number">345</span>);</span><br><span class="line">        arr.add(<span class="string">"BB"</span>);</span><br><span class="line"></span><br><span class="line">        arr.delete(<span class="number">345</span>);</span><br><span class="line"></span><br><span class="line">        arr.update(<span class="number">345</span>,<span class="number">444</span>);</span><br><span class="line"></span><br><span class="line">        arr.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-链表"><a href="#3-链表" class="headerlink" title="3. 链表"></a>3. 链表</h2><h3 id="3-1-链表的特点"><a href="#3-1-链表的特点" class="headerlink" title="3.1 链表的特点"></a>3.1 链表的特点</h3><ul>
<li>逻辑结构：线性结构</li>
</ul>
<ul>
<li>物理结构：不要求连续的存储空间</li>
</ul>
<ul>
<li>存储特点：链表由一系列结点node（链表中每一个元素称为结点）组成，结点可以在代码执行过程中动态创建。每个结点包括两个部分：一个是存储数据元素的<code>数据域</code>，另一个是存储下一个结点地址的<code>指针域</code>。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301711548.png" alt="image-20220511113744772"></p>
<ul>
<li>常见的链表结构有如下的形式：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301712340.png" alt="1563448858180"></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643798.png" alt="数据结构-链表" style="zoom:50%;">

<h3 id="3-2-自定义链表"><a href="#3-2-自定义链表" class="headerlink" title="3.2 自定义链表"></a>3.2 自定义链表</h3><h4 id="3-2-1-自定义单向链表"><a href="#3-2-1-自定义单向链表" class="headerlink" title="3.2.1 自定义单向链表"></a>3.2.1 自定义单向链表</h4><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301712869.png" alt="image-20221028195106363"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">单链表中的节点。</span></span><br><span class="line"><span class="comment">节点是单向链表中基本的单元。</span></span><br><span class="line"><span class="comment">每一个节点Node都有两个属性：</span></span><br><span class="line"><span class="comment">    一个属性：是存储的数据。</span></span><br><span class="line"><span class="comment">    另一个属性：是下一个节点的内存地址。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存储的数据</span></span><br><span class="line">    Object data;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 下一个节点的内存地址</span></span><br><span class="line">    Node next;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(Object data, Node next)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">链表类(单向链表)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Link</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 头节点</span></span><br><span class="line">    Node header;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 向链表中添加元素的方法（向末尾添加）</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E data)</span></span>&#123;</span><br><span class="line">    <span class="comment">//public void add(Object data)&#123;</span></span><br><span class="line">        <span class="comment">// 创建一个新的节点对象</span></span><br><span class="line">        <span class="comment">// 让之前单链表的末尾节点next指向新节点对象。</span></span><br><span class="line">        <span class="comment">// 有可能这个元素是第一个，也可能是第二个，也可能是第三个。</span></span><br><span class="line">        <span class="keyword">if</span>(header == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">// 说明还没有节点。</span></span><br><span class="line">            <span class="comment">// new一个新的节点对象，作为头节点对象。</span></span><br><span class="line">            <span class="comment">// 这个时候的头节点既是一个头节点，又是一个末尾节点。</span></span><br><span class="line">            header = <span class="keyword">new</span> Node(data, <span class="keyword">null</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 说明头不是空！</span></span><br><span class="line">            <span class="comment">// 头节点已经存在了！</span></span><br><span class="line">            <span class="comment">// 找出当前末尾节点，让当前末尾节点的next是新节点。</span></span><br><span class="line">            Node currentLastNode = findLast(header);</span><br><span class="line">            currentLastNode.next = <span class="keyword">new</span> Node(data, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 专门查找末尾节点的方法。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">findLast</span><span class="params">(Node node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(node.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 如果一个节点的next是null</span></span><br><span class="line">            <span class="comment">// 说明这个节点就是末尾节点。</span></span><br><span class="line">            <span class="keyword">return</span> node;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 程序能够到这里说明：node不是末尾节点。</span></span><br><span class="line">        <span class="keyword">return</span> findLast(node.next); <span class="comment">// 递归算法！</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*// 删除链表中某个数据的方法</span></span><br><span class="line"><span class="comment">    public void remove(Object obj)&#123;</span></span><br><span class="line"><span class="comment">        //略</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    // 修改链表中某个数据的方法</span></span><br><span class="line"><span class="comment">    public void modify(Object newObj)&#123;</span></span><br><span class="line"><span class="comment">        //略</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    // 查找链表中某个元素的方法。</span></span><br><span class="line"><span class="comment">    public int find(Object obj)&#123;</span></span><br><span class="line"><span class="comment">        //略</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-2-自定义双向链表"><a href="#3-2-2-自定义双向链表" class="headerlink" title="3.2.2 自定义双向链表"></a>3.2.2 自定义双向链表</h4><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643307.png" alt="image-20220514165707977"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">双向链表中的节点。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    Node prev;</span><br><span class="line">    E data;</span><br><span class="line">    Node next;</span><br><span class="line"></span><br><span class="line">    Node(Node prev, E data, Node next) &#123;</span><br><span class="line">        <span class="keyword">this</span>.prev = prev;</span><br><span class="line">        <span class="keyword">this</span>.data = data;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 链表类(双向链表)</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 尚硅谷-宋红康</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 15:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLinkedList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node first;  <span class="comment">//链表的首元素</span></span><br><span class="line">    <span class="keyword">private</span> Node last;   <span class="comment">//链表的尾元素</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> total;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(E e)</span></span>&#123;</span><br><span class="line">        Node newNode = <span class="keyword">new</span> Node(last, e, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(first == <span class="keyword">null</span>)&#123;</span><br><span class="line">            first = newNode;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            last.next = newNode;</span><br><span class="line">        &#125;</span><br><span class="line">        last = newNode;</span><br><span class="line">        total++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">        Node find = findNode(obj);</span><br><span class="line">        <span class="keyword">if</span>(find != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(find.prev != <span class="keyword">null</span>)&#123;</span><br><span class="line">                find.prev.next = find.next;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                first = find.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(find.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">                find.next.prev = find.prev;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                last = find.prev;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            find.prev = <span class="keyword">null</span>;</span><br><span class="line">            find.next = <span class="keyword">null</span>;</span><br><span class="line">            find.data = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">            total--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">findNode</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">        Node node = first;</span><br><span class="line">        Node find = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(obj == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span>(node != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(node.data == <span class="keyword">null</span>)&#123;</span><br><span class="line">                    find = node;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">while</span>(node != <span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span>(obj.equals(node.data))&#123;</span><br><span class="line">                    find = node;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                node = node.next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> find;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> findNode(obj) != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(E old, E value)</span></span>&#123;</span><br><span class="line">        Node find = findNode(old);</span><br><span class="line">        <span class="keyword">if</span>(find != <span class="keyword">null</span>)&#123;</span><br><span class="line">            find.data = value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Itr();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Itr</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Node&lt;E&gt; node = first;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> node!=<span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> E <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            E value = node.data;</span><br><span class="line">            node = node.next;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>自定义双链表测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.list;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyLinkedListTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyLinkedList&lt;String&gt; my = <span class="keyword">new</span> MyLinkedList&lt;&gt;();</span><br><span class="line">        my.add(<span class="string">"hello"</span>);</span><br><span class="line">        my.add(<span class="string">"world"</span>);</span><br><span class="line">        my.add(<span class="keyword">null</span>);</span><br><span class="line">        my.add(<span class="keyword">null</span>);</span><br><span class="line">        my.add(<span class="string">"java"</span>);</span><br><span class="line">        my.add(<span class="string">"java"</span>);</span><br><span class="line">        my.add(<span class="string">"atguigu"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"一共有："</span> + my.size());</span><br><span class="line">        System.out.println(<span class="string">"所有元素："</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s : my) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"-------------------------------------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"查找java,null,haha的结果："</span>);</span><br><span class="line">        System.out.println(my.contains(<span class="string">"java"</span>));</span><br><span class="line">        System.out.println(my.contains(<span class="keyword">null</span>));</span><br><span class="line">        System.out.println(my.contains(<span class="string">"haha"</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"-------------------------------------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"替换java,null后："</span>);</span><br><span class="line">        my.update(<span class="string">"java"</span>,<span class="string">"JAVA"</span>);</span><br><span class="line">        my.update(<span class="keyword">null</span>,<span class="string">"songhk"</span>);</span><br><span class="line">        System.out.println(<span class="string">"所有元素："</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s : my) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"-------------------------------------"</span>);</span><br><span class="line">        System.out.println(<span class="string">"删除hello，JAVA,null，atguigu后："</span>);</span><br><span class="line">        my.delete(<span class="string">"hello"</span>);</span><br><span class="line">        my.delete(<span class="string">"JAVA"</span>);</span><br><span class="line">        my.delete(<span class="keyword">null</span>);</span><br><span class="line">        my.delete(<span class="string">"atguigu"</span>);</span><br><span class="line">        System.out.println(<span class="string">"所有元素："</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s : my) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-栈"><a href="#4-栈" class="headerlink" title="4. 栈"></a>4. 栈</h2><h3 id="4-1-栈的特点"><a href="#4-1-栈的特点" class="headerlink" title="4.1 栈的特点"></a>4.1 栈的特点</h3><ul>
<li><p>栈（Stack）又称为堆栈或堆叠，是限制仅在表的一端进行插入和删除运算的线性表。</p>
</li>
<li><p>栈按照<code>先进后出(FILO,first in last out)</code>的原则存储数据，先进入的数据被压入栈底，最后的数据在栈顶。每次删除（退栈）的总是删除当前栈中最后插入（进栈）的元素，而最先插入的是被放在栈的底部，要到最后才能删除。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301713793.png" alt></p>
</li>
<li><p>核心类库中的栈结构有Stack和LinkedList。</p>
<ul>
<li>Stack就是顺序栈，它是Vector的子类。</li>
<li>LinkedList是链式栈。</li>
</ul>
</li>
<li><p>体现栈结构的操作方法：</p>
<ul>
<li>peek()方法：查看栈顶元素，不弹出</li>
<li>pop()方法：弹出栈</li>
<li>push(E e)方法：压入栈 </li>
</ul>
</li>
<li><p>时间复杂度:</p>
<ul>
<li>索引: <code>O(n)</code></li>
<li>搜索: <code>O(n)</code></li>
<li>插入: <code>O(1)</code></li>
<li>移除: <code>O(1)</code></li>
</ul>
</li>
<li><p>图示：</p>
</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301713801.png" alt="image-20220826010258638" style="zoom:80%;">

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643070.png" alt="数据结构-栈" style="zoom:50%;">

<h3 id="4-2-Stack使用举例"><a href="#4-2-Stack使用举例" class="headerlink" title="4.2 Stack使用举例"></a>4.2 Stack使用举例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 尚硅谷-宋红康</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 15:44</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStack</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 测试Stack</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Stack&lt;Integer&gt; list = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        list.push(<span class="number">1</span>);</span><br><span class="line">        list.push(<span class="number">2</span>);</span><br><span class="line">        list.push(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"list = "</span> + list);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"list.peek()="</span> + list.peek());</span><br><span class="line">        System.out.println(<span class="string">"list.peek()="</span> + list.peek());</span><br><span class="line">        System.out.println(<span class="string">"list.peek()="</span> + list.peek());</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">		System.out.println("list.pop() =" + list.pop());</span></span><br><span class="line"><span class="comment">		System.out.println("list.pop() =" + list.pop());</span></span><br><span class="line"><span class="comment">		System.out.println("list.pop() =" + list.pop());</span></span><br><span class="line"><span class="comment">		System.out.println("list.pop() =" + list.pop());//java.util.NoSuchElementException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(!list.empty())&#123;</span><br><span class="line">            System.out.println(<span class="string">"list.pop() ="</span> + list.pop());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 测试LinkedList</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        LinkedList&lt;Integer&gt; list = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        list.push(<span class="number">1</span>);</span><br><span class="line">        list.push(<span class="number">2</span>);</span><br><span class="line">        list.push(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"list = "</span> + list);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"list.peek()="</span> + list.peek());</span><br><span class="line">        System.out.println(<span class="string">"list.peek()="</span> + list.peek());</span><br><span class="line">        System.out.println(<span class="string">"list.peek()="</span> + list.peek());</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">		System.out.println("list.pop() =" + list.pop());</span></span><br><span class="line"><span class="comment">		System.out.println("list.pop() =" + list.pop());</span></span><br><span class="line"><span class="comment">		System.out.println("list.pop() =" + list.pop());</span></span><br><span class="line"><span class="comment">		System.out.println("list.pop() =" + list.pop());//java.util.NoSuchElementException</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">        <span class="keyword">while</span>(!list.isEmpty())&#123;</span><br><span class="line">            System.out.println(<span class="string">"list.pop() ="</span> + list.pop());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-自定义栈"><a href="#4-3-自定义栈" class="headerlink" title="4.3 自定义栈"></a>4.3 自定义栈</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStack</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 向栈当中存储元素，我们这里使用一维数组模拟。存到栈中，就表示存储到数组中。</span></span><br><span class="line">    <span class="comment">// 为什么选择Object类型数组？因为这个栈可以存储java中的任何引用类型的数据</span></span><br><span class="line">    <span class="keyword">private</span> Object[] elements;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 栈帧，永远指向栈顶部元素</span></span><br><span class="line">    <span class="comment">// 那么这个默认初始值应该是多少。注意：最初的栈是空的，一个元素都没有。</span></span><br><span class="line">    <span class="comment">//private int index = 0; // 如果index采用0，表示栈帧指向了顶部元素的上方。</span></span><br><span class="line">    <span class="comment">//private int index = -1; // 如果index采用-1，表示栈帧指向了顶部元素。</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> index;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 无参数构造方法。默认初始化栈容量10.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyStack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 一维数组动态初始化</span></span><br><span class="line">        <span class="comment">// 默认初始化容量是10.</span></span><br><span class="line">        <span class="keyword">this</span>.elements = <span class="keyword">new</span> Object[<span class="number">10</span>];</span><br><span class="line">        <span class="comment">// 给index初始化</span></span><br><span class="line">        <span class="keyword">this</span>.index = -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 压栈的方法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj 被压入的元素</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(index &gt;= elements.length - <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">//方式1：</span></span><br><span class="line">            <span class="comment">//System.out.println("压栈失败，栈已满！");</span></span><br><span class="line">            <span class="comment">//return;</span></span><br><span class="line">            <span class="comment">//方式2：</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"压栈失败，栈已满！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 程序能够走到这里，说明栈没满</span></span><br><span class="line">        <span class="comment">// 向栈中加1个元素，栈帧向上移动一个位置。</span></span><br><span class="line">        index++;</span><br><span class="line">        elements[index] = obj;</span><br><span class="line">        System.out.println(<span class="string">"压栈"</span> + obj + <span class="string">"元素成功，栈帧指向"</span> + index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 弹栈的方法，从数组中往外取元素。每取出一个元素，栈帧向下移动一位。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">pop</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//方式1：</span></span><br><span class="line">            <span class="comment">//System.out.println("弹栈失败，栈已空！");</span></span><br><span class="line">            <span class="comment">//return;</span></span><br><span class="line">            <span class="comment">//方式2：</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"弹栈失败，栈已空！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 程序能够执行到此处说明栈没有空。</span></span><br><span class="line">        Object obj = elements[index];</span><br><span class="line">        System.out.print(<span class="string">"弹栈"</span> + obj + <span class="string">"元素成功，"</span>);</span><br><span class="line">        elements[index] = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">// 栈帧向下移动一位。</span></span><br><span class="line">        index--;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set和get也许用不上，但是你必须写上，这是规矩。你使用IDEA生成就行了。</span></span><br><span class="line">    <span class="comment">// 封装：第一步：属性私有化，第二步：对外提供set和get方法。</span></span><br><span class="line">    <span class="keyword">public</span> Object[] getElements() &#123;</span><br><span class="line">        <span class="keyword">return</span> elements;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setElements</span><span class="params">(Object[] elements)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.elements = elements;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getIndex</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> index;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIndex</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.index = index;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-队列"><a href="#5-队列" class="headerlink" title="5. 队列"></a>5. 队列</h2><ul>
<li>队列（Queue）是只允许在一端进行插入，而在另一端进行删除的运算受限的线性表。</li>
</ul>
<ul>
<li>队列是逻辑结构，其物理结构可以是数组，也可以是链表。</li>
</ul>
<ul>
<li><p>队列的修改原则：队列的修改是依<code>先进先出（FIFO）的原则</code>进行的。新来的成员总是加入队尾（即不允许”加塞”），每次离开的成员总是队列头上的（不允许中途离队），即当前”最老的”成员离队。</p>
</li>
<li><p>图示：</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301714100.png" alt="image-20220826010241172"></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643371.png" alt="数据结构-队列" style="zoom:50%;">

<h2 id="6-树与二叉树"><a href="#6-树与二叉树" class="headerlink" title="6. 树与二叉树"></a>6. 树与二叉树</h2><h3 id="6-1-树的理解"><a href="#6-1-树的理解" class="headerlink" title="6.1 树的理解"></a>6.1 树的理解</h3><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643466.png" alt="image-20220521111904272" style="zoom:67%;">

<p><strong>专有名词解释：</strong></p>
<p><code>结点</code>：树中的数据元素都称之为结点</p>
<p><code>根节点</code>：最上面的结点称之为根，一颗树只有一个根且由根发展而来，从另外一个角度来说，每个结点都可以认为是其子树的根</p>
<p><code>父节点</code>：结点的上层结点，如图中，结点K的父节点是E、结点L的父节点是G</p>
<p><code>子节点</code>：节点的下层结点，如图中，节点E的子节点是K节点、节点G的子节点是L节点</p>
<p><code>兄弟节点</code>：具有相同父节点的结点称为兄弟节点，图中F、G、H互为兄弟节点</p>
<p><code>结点的度数</code>：每个结点所拥有的子树的个数称之为结点的度，如结点B的度为3</p>
<p><code>树叶</code>：度数为0的结点，也叫作终端结点，图中D、K、F、L、H、I、J都是树叶</p>
<p><code>非终端节点（或分支节点）</code>：树叶以外的节点，或度数不为0的节点。图中根、A、B、C、E、G都是</p>
<p><code>树的深度（或高度）</code>：树中结点的最大层次数，图中树的深度为4</p>
<p><code>结点的层数</code>：从根节点到树中某结点所经路径上的分支树称为该结点的层数，根节点的层数规定为1，其余结点的层数等于其父亲结点的层数+1</p>
<p><code>同代</code>：在同一棵树中具有相同层数的节点</p>
<h3 id="6-2-二叉树的基本概念"><a href="#6-2-二叉树的基本概念" class="headerlink" title="6.2 二叉树的基本概念"></a>6.2 二叉树的基本概念</h3><p>二叉树（Binary tree）是树形结构的一个重要类型。二叉树特点是每个结点最多只能有两棵子树，且有左右之分。许多实际问题抽象出来的数据结构往往是二叉树形式，二叉树的存储结构及其算法都较为简单，因此二叉树显得特别重要。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643352.png" alt="1563449427345"></p>
<h3 id="6-3-二叉树的遍历"><a href="#6-3-二叉树的遍历" class="headerlink" title="6.3 二叉树的遍历"></a>6.3 二叉树的遍历</h3><ul>
<li><p><strong>前序遍历：中左右（根左右）</strong></p>
<p>即先访问根结点，再前序遍历左子树，最后再前序遍历右子 树。前序遍历运算访问二叉树各结点是以根、左、右的顺序进行访问的。</p>
</li>
<li><p><strong>中序遍历：左中右（左根右）</strong></p>
<p>即先中前序遍历左子树，然后再访问根结点，最后再中序遍 历右子树。中序遍历运算访问二叉树各结点是以左、根、右的顺序进行访问的。</p>
</li>
<li><p><strong>后序遍历：左右中（左右根）</strong></p>
<p>即先后序遍历左子树，然后再后序遍历右子树，最后访问根 结点。后序遍历运算访问二叉树各结点是以左、右、根的顺序进行访问的。</p>
</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643871.png" alt="1574575739236" style="zoom:80%;">

<p>前序遍历：ABDHIECFG</p>
<p>中序遍历：HDIBEAFCG</p>
<p>后序遍历：HIDEBFGCA</p>
<h3 id="6-4-经典二叉树"><a href="#6-4-经典二叉树" class="headerlink" title="6.4 经典二叉树"></a>6.4 经典二叉树</h3><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301643322.png" alt="image-20220521153016348" style="zoom: 67%;">

<p>1、<code>满二叉树</code>： 除最后一层无任何子节点外，每一层上的所有结点都有两个子结点的二叉树。 第n层的结点数是2的n-1次方，总的结点个数是2的n次方-1</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301714493.png" alt="1574575163883"></p>
<p>2、<code>完全二叉树</code>： 叶结点只能出现在最底层的两层，且最底层叶结点均处于次底层叶结点的左侧。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644057.png" alt="1574575180247"></p>
<p>3、<code>二叉排序/查找/搜索树</code>：即为BST  (binary search/sort tree)。满足如下性质：<br>（1）若它的左子树不为空，则左子树上所有结点的值均小于它的根节点的值；<br>（2）若它的右子树上所有结点的值均大于它的根节点的值；<br>（3）它的左、右子树也分别为二叉排序/查找/搜索树。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644570.png" alt="image-20220521145208018" style="zoom: 67%;">

<blockquote>
<p>对二叉查找树进行中序遍历，得到有序集合。便于检索。</p>
</blockquote>
<p>4、<code>平衡二叉树</code>：（Self-balancing binary search tree，AVL）首先是二叉排序树，此外具有以下性质：<br>（1）它是一棵空树或它的左右两个子树的高度差的绝对值不超过1<br>（2）并且左右两个子树也都是一棵平衡二叉树<br>（3）不要求非叶节点都有两个子结点 </p>
<blockquote>
<p>平衡二叉树的目的是为了减少二叉查找树的层次，提高查找速度。平衡二叉树的常用实现有红黑树、AVL、替罪羊树、Treap、伸展树等。</p>
</blockquote>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644350.png" alt="image-20220521150151219" style="zoom: 50%;">



<p>6、<code>红黑树</code>：即Red-Black Tree。红黑树的每个节点上都有存储位表示节点的颜色，可以是红(Red)或黑(Black)。 </p>
<p>红黑树是一种自平衡二叉查找树，是在计算机科学中用到的一种数据结构，它是在 1972 年由 Rudolf Bayer 发明的。红黑树是复杂的，但它的操作有着<code>良好的最坏情况运行时间</code>，并且在<code>实践中是高效的</code>：它可以在 O(log n)时间内做查找，插入和删除， 这里的 n 是树中元素的数目。</p>
<p>红黑树的特性：</p>
<ul>
<li><p>每个节点是红色或者黑色</p>
</li>
<li><p>根节点是黑色</p>
</li>
<li><p>每个叶子节点（NIL）是黑色。（注意：这里叶子节点，是指为空(NIL或NULL)的叶子节点）</p>
</li>
<li><p>每个红色节点的两个子节点都是黑色的。(从每个叶子到根的所有路径上不能有两个连续的红色节点) </p>
</li>
<li><p>从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点（确保没有一条路径会比其他路径长出2倍）</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301715933.jpeg" alt></p>
<p>当我们插入或删除节点时，可能会破坏已有的红黑树，使得它不满足以上5个要求，那么此时就需要进行处理，使得它继续满足以上的5个要求：</p>
<p>1、<code>recolor</code> ：将某个节点变红或变黑</p>
<p>2、<code>rotation</code> ：将红黑树某些结点分支进行旋转（左旋或右旋）</p>
<p> <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301715944.png" alt="image-20221208212053079"></p>
<blockquote>
<p>红黑树可以通过红色节点和黑色节点尽可能的保证二叉树的平衡。主要是用它来存储有序的数据，它的时间复杂度是O(logN)，效率非常之高。</p>
</blockquote>
<h3 id="6-5-二叉树及其结点的表示"><a href="#6-5-二叉树及其结点的表示" class="headerlink" title="6.5 二叉树及其结点的表示"></a>6.5 二叉树及其结点的表示</h3><p>普通二叉树：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinaryTree</span>&lt;<span class="title">E</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> TreeNode root; <span class="comment">//二叉树的根结点</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> total;<span class="comment">//结点总个数</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span></span>&#123;</span><br><span class="line">        <span class="comment">//至少有以下几个部分</span></span><br><span class="line">        TreeNode parent;</span><br><span class="line">        TreeNode left;</span><br><span class="line">        E data;</span><br><span class="line">        TreeNode right;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">TreeNode</span><span class="params">(TreeNode parent, TreeNode left, E data, TreeNode right)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.parent = parent;</span><br><span class="line">            <span class="keyword">this</span>.left = left;</span><br><span class="line">            <span class="keyword">this</span>.data = data;</span><br><span class="line">            <span class="keyword">this</span>.right = right;</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TreeMap红黑树：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;K,V&gt; root;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        K key;</span><br><span class="line">        V value;</span><br><span class="line">        Entry&lt;K,V&gt; left;</span><br><span class="line">        Entry&lt;K,V&gt; right;</span><br><span class="line">        Entry&lt;K,V&gt; parent;</span><br><span class="line">        <span class="keyword">boolean</span> color = BLACK;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Make a new cell with given key, value, and parent, and with</span></span><br><span class="line"><span class="comment">         * &#123;<span class="doctag">@code</span> null&#125; child links, and BLACK color.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Entry(K key, V value, Entry&lt;K,V&gt; parent) &#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.parent = parent;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-List接口分析"><a href="#7-List接口分析" class="headerlink" title="7. List接口分析"></a>7. List接口分析</h2><h3 id="7-1-List接口特点"><a href="#7-1-List接口特点" class="headerlink" title="7.1 List接口特点"></a>7.1 List接口特点</h3><ul>
<li>List集合所有的元素是以一种<code>线性方式</code>进行存储的，例如，存元素的顺序是11、22、33。那么集合中，元素的存储就是按照11、22、33的顺序完成的）。</li>
<li>它是一个元素<code>存取有序</code>的集合。即元素的存入顺序和取出顺序有保证。</li>
<li>它是一个<code>带有索引</code>的集合，通过索引就可以精确的操作集合中的元素（与数组的索引是一个道理）。</li>
<li>集合中可以有<code>重复</code>的元素，通过元素的equals方法，来比较是否为重复的元素。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301715795.png" alt="1563549818689"></p>
<blockquote>
<p>注意：</p>
<p>List集合关心元素是否有序，而不关心是否重复，请大家记住这个原则。例如“张三”可以领取两个号。</p>
</blockquote>
<ul>
<li>List接口的主要实现类<ul>
<li>ArrayList：动态数组</li>
<li>Vector：动态数组</li>
<li>LinkedList：双向链表</li>
<li>Stack：栈</li>
</ul>
</li>
</ul>
<h3 id="7-2-动态数组ArrayList与Vector"><a href="#7-2-动态数组ArrayList与Vector" class="headerlink" title="7.2 动态数组ArrayList与Vector"></a>7.2 动态数组ArrayList与Vector</h3><p>Java的List接口的实现类中有两个动态数组的实现：ArrayList 和 Vector。</p>
<h4 id="7-2-1-ArrayList与Vector的区别"><a href="#7-2-1-ArrayList与Vector的区别" class="headerlink" title="7.2.1 ArrayList与Vector的区别"></a>7.2.1 ArrayList与Vector的区别</h4><p>它们的底层物理结构都是数组，我们称为动态数组。</p>
<ul>
<li>ArrayList是新版的动态数组，线程不安全，效率高，Vector是旧版的动态数组，线程安全，效率低。</li>
<li>动态数组的扩容机制不同，ArrayList默认扩容为原来的1.5倍，Vector默认扩容增加为原来的2倍。</li>
<li>数组的初始化容量，如果在构建ArrayList与Vector的集合对象时，没有显式指定初始化容量，那么Vector的内部数组的初始容量默认为10，而ArrayList在JDK 6.0 及之前的版本也是10，JDK8.0 之后的版本ArrayList初始化为长度为0的空数组，之后在添加第一个元素时，再创建长度为10的数组。原因：<ul>
<li>用的时候，再创建数组，避免浪费。因为很多方法的返回值是ArrayList类型，需要返回一个ArrayList的对象，例如：后期从数据库查询对象的方法，返回值很多就是ArrayList。有可能你要查询的数据不存在，要么返回null，要么返回一个没有元素的ArrayList对象。</li>
</ul>
</li>
</ul>
<h4 id="7-2-2-ArrayList部分源码分析"><a href="#7-2-2-ArrayList部分源码分析" class="headerlink" title="7.2.2 ArrayList部分源码分析"></a>7.2.2 ArrayList部分源码分析</h4><p><strong>JDK1.7.0_07中：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//属性</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> Object[] elementData; <span class="comment">//存储底层数组元素</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> size; <span class="comment">//记录数组中存储的元素的个数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(<span class="number">10</span>); <span class="comment">//指定初始容量为10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="comment">//检查初始容量的合法性</span></span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Capacity: "</span>+ initialCapacity);</span><br><span class="line">    <span class="comment">//数组初始化为长度为initialCapacity的数组</span></span><br><span class="line">    <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity]; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：add()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">//查看当前数组是否够多存一个元素</span></span><br><span class="line">    elementData[size++] = e; <span class="comment">//将元素e添加到elementData数组中</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">// 如果if条件满足，则进行数组的扩容</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length; <span class="comment">//当前数组容量</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>); <span class="comment">//新数组容量是旧数组容量的1.5倍</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)  <span class="comment">//判断旧数组的1.5倍是否够</span></span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="comment">//判断旧数组的1.5倍是否超过最大数组限制</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">//复制一个新数组</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：remove()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index); <span class="comment">//判断index是否在有效的范围内</span></span><br><span class="line"></span><br><span class="line">    modCount++; <span class="comment">//修改次数加1</span></span><br><span class="line">    <span class="comment">//取出[index]位置的元素，[index]位置的元素就是要被删除的元素，用于最后返回被删除的元素</span></span><br><span class="line">    E oldValue = elementData(index); </span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> numMoved = size - index - <span class="number">1</span>; <span class="comment">//确定要移动的次数</span></span><br><span class="line">    <span class="comment">//如果需要移动元素，就用System.arraycopy移动元素</span></span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">        System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index, numMoved);</span><br><span class="line">    <span class="comment">//将elementData[size-1]位置置空，让GC回收空间，元素个数减少</span></span><br><span class="line">    elementData[--size] = <span class="keyword">null</span>; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">rangeCheck</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= size) <span class="comment">//index不合法的情况</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(outOfBoundsMsg(index));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">E <span class="title">elementData</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123; <span class="comment">//返回指定位置的元素</span></span><br><span class="line">    <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：set()方法相关</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">set</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index); <span class="comment">//检验index是否合法</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">//取出[index]位置的元素，[index]位置的元素就是要被替换的元素，用于最后返回被替换的元素</span></span><br><span class="line">    E oldValue = elementData(index);</span><br><span class="line">    <span class="comment">//用element替换[index]位置的元素</span></span><br><span class="line">    elementData[index] = element;</span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：get()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    rangeCheck(index); <span class="comment">//检验index是否合法</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> elementData(index); <span class="comment">//返回[index]位置的元素</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：indexOf()</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//分为o是否为空两种情况</span></span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//从前往后找</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[i]==<span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：lastIndexOf()</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lastIndexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//分为o是否为空两种情况</span></span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//从后往前找</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">            <span class="keyword">if</span> (elementData[i]==<span class="keyword">null</span>)</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))</span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>jdk1.8.0_271中：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//属性</span></span><br><span class="line"><span class="keyword">transient</span> Object[] elementData;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> size;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;  <span class="comment">//初始化为空数组</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法:add()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//查看当前数组是否够多存一个元素</span></span><br><span class="line">    ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// Increments modCount!!</span></span><br><span class="line">    <span class="comment">//存入新元素到[size]位置，然后size自增1</span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">calculateCapacity</span><span class="params">(Object[] elementData, <span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//如果当前数组还是空数组</span></span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        <span class="comment">//那么minCapacity取DEFAULT_CAPACITY与minCapacity的最大值</span></span><br><span class="line">        <span class="keyword">return</span> Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minCapacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//查看是否需要扩容</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureExplicitCapacity</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    modCount++;  <span class="comment">//修改次数加1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果需要的最小容量比当前数组的长度大，即当前数组不够存，就扩容</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length; <span class="comment">//当前数组容量</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>); <span class="comment">//新数组容量是旧数组容量的1.5倍</span></span><br><span class="line">    <span class="comment">//看旧数组的1.5倍是否够</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="comment">//看旧数组的1.5倍是否超过最大数组限制</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">//复制一个新数组</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-2-3-ArrayList相关方法图示"><a href="#7-2-3-ArrayList相关方法图示" class="headerlink" title="7.2.3 ArrayList相关方法图示"></a>7.2.3 ArrayList相关方法图示</h4><ul>
<li><strong>ArrayList采用数组作为底层实现</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644871.png" alt="image-20221029112037297" style="zoom:80%;">

<ul>
<li><strong>ArrayList自动扩容过程</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301716803.png" alt></p>
<ul>
<li><strong>ArrayList的add(E e)方法</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301716318.png" alt></p>
<ul>
<li><strong>ArrayList的add(int index,E e)方法</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301716896.png" alt="image-20221029112157007" style="zoom:80%;">

<h4 id="7-2-4-Vector部分源码分析"><a href="#7-2-4-Vector部分源码分析" class="headerlink" title="7.2.4 Vector部分源码分析"></a>7.2.4 Vector部分源码分析</h4><p><strong>jdk1.8.0_271中：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//属性</span></span><br><span class="line"><span class="keyword">protected</span> Object[] elementData;</span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">int</span> elementCount;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>(<span class="number">10</span>); <span class="comment">//指定初始容量initialCapacity为10</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>(initialCapacity, <span class="number">0</span>); <span class="comment">//指定capacityIncrement增量为0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Vector</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">int</span> capacityIncrement)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="comment">//判断了形参初始容量initialCapacity的合法性</span></span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal Capacity: "</span>+ initialCapacity);</span><br><span class="line">    <span class="comment">//创建了一个Object[]类型的数组</span></span><br><span class="line">    <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">    <span class="comment">//增量，默认是0，如果是0，后面就按照2倍增加，如果不是0，后面就按照你指定的增量进行增量</span></span><br><span class="line">    <span class="keyword">this</span>.capacityIncrement = capacityIncrement;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：add()相关方法</span></span><br><span class="line"><span class="comment">//synchronized意味着线程安全的   </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//看是否需要扩容</span></span><br><span class="line">    ensureCapacityHelper(elementCount + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//把新的元素存入[elementCount]，存入后，elementCount元素的个数增1</span></span><br><span class="line">    elementData[elementCount++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityHelper</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">     <span class="comment">//看是否超过了当前数组的容量</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">        grow(minCapacity); <span class="comment">//扩容</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">grow</span><span class="params">(<span class="keyword">int</span> minCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// overflow-conscious code</span></span><br><span class="line">    <span class="keyword">int</span> oldCapacity = elementData.length; <span class="comment">//获取目前数组的长度</span></span><br><span class="line">    <span class="comment">//如果capacityIncrement增量是0，新容量 = oldCapacity的2倍</span></span><br><span class="line">    <span class="comment">//如果capacityIncrement增量是不是0，新容量 = oldCapacity + capacityIncrement增量;</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = oldCapacity + ((capacityIncrement &gt; <span class="number">0</span>) ?</span><br><span class="line">                                     capacityIncrement : oldCapacity);</span><br><span class="line">    <span class="comment">//如果按照上面计算的新容量还不够，就按照你指定的需要的最小容量来扩容minCapacity</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = minCapacity;</span><br><span class="line">    <span class="comment">//如果新容量超过了最大数组限制，那么单独处理</span></span><br><span class="line">    <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">        newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">    <span class="comment">//把旧数组中的数据复制到新数组中，新数组的长度为newCapacity</span></span><br><span class="line">    elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：remove()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> removeElement(o);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> <span class="title">removeElement</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//查找obj在当前Vector中的下标</span></span><br><span class="line">    <span class="keyword">int</span> i = indexOf(obj);</span><br><span class="line">    <span class="comment">//如果i&gt;=0，说明存在，删除[i]位置的元素</span></span><br><span class="line">    <span class="keyword">if</span> (i &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        removeElementAt(i);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：indexOf()</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> indexOf(o, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">indexOf</span><span class="params">(Object o, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;<span class="comment">//要查找的元素是null值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = index ; i &lt; elementCount ; i++)</span><br><span class="line">            <span class="keyword">if</span> (elementData[i]==<span class="keyword">null</span>)<span class="comment">//如果是null值，用==null判断</span></span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//要查找的元素是非null值</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = index ; i &lt; elementCount ; i++)</span><br><span class="line">            <span class="keyword">if</span> (o.equals(elementData[i]))<span class="comment">//如果是非null值，用equals判断</span></span><br><span class="line">                <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：removeElementAt()</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">removeElementAt</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//判断下标的合法性</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt;= elementCount) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException(index + <span class="string">" &gt;= "</span> +</span><br><span class="line">                                                 elementCount);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ArrayIndexOutOfBoundsException(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//j是要移动的元素的个数</span></span><br><span class="line">    <span class="keyword">int</span> j = elementCount - index - <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//如果需要移动元素，就调用System.arraycopy进行移动</span></span><br><span class="line">    <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//把index+1位置以及后面的元素往前移动</span></span><br><span class="line">        <span class="comment">//index+1的位置的元素移动到index位置，依次类推</span></span><br><span class="line">        <span class="comment">//一共移动j个</span></span><br><span class="line">        System.arraycopy(elementData, index + <span class="number">1</span>, elementData, index, j);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//元素的总个数减少</span></span><br><span class="line">    elementCount--;</span><br><span class="line">    <span class="comment">//将elementData[elementCount]这个位置置空，用来添加新元素，位置的元素等着被GC回收</span></span><br><span class="line">    elementData[elementCount] = <span class="keyword">null</span>; <span class="comment">/* to let gc do its work */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-链表LinkedList"><a href="#7-3-链表LinkedList" class="headerlink" title="7.3 链表LinkedList"></a>7.3 链表LinkedList</h3><p>Java中有双链表的实现：LinkedList，它是List接口的实现类。</p>
<p>LinkedList是一个<strong>双向链表</strong>，如图所示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301717818.png" alt="image-20220514165707977"></p>
<h4 id="7-3-1-链表与动态数组的区别"><a href="#7-3-1-链表与动态数组的区别" class="headerlink" title="7.3.1 链表与动态数组的区别"></a>7.3.1 链表与动态数组的区别</h4><p>动态数组底层的物理结构是数组，因此根据索引访问的效率 非常高。但是非末尾位置的插入和删除效率不高，因为涉及到移动元素。另外添加操作时涉及到扩容问题，就会增加时空消耗。</p>
<p>链表底层的物理结构是链表，因此根据索引访问的效率不高，即查找元素慢。但是插入和删除不需要移动元素，只需要修改前后元素的指向关系即可，所以插入、删除元素快。而且链表的添加不会涉及到扩容问题。</p>
<h4 id="7-3-2-LinkedList源码分析"><a href="#7-3-2-LinkedList源码分析" class="headerlink" title="7.3.2 LinkedList源码分析"></a>7.3.2 LinkedList源码分析</h4><p><strong>jdk1.8.0_271中：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//属性</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; first; <span class="comment">//记录第一个结点的位置</span></span><br><span class="line"><span class="keyword">transient</span> Node&lt;E&gt; last; <span class="comment">//记录当前链表的尾元素</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>; <span class="comment">//记录最后一个结点的位置</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：add()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    linkLast(e); <span class="comment">//默认把新元素链接到链表尾部</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">linkLast</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last; <span class="comment">//用 l 记录原来的最后一个结点</span></span><br><span class="line">    <span class="comment">//创建新结点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(l, e, <span class="keyword">null</span>);  <span class="comment">//新节点链接到前一个节点 新节点没有链接到后一个节点</span></span><br><span class="line">    <span class="comment">//现在的新结点是最后一个结点了</span></span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="comment">//如果l==null，说明原来的链表是空的</span></span><br><span class="line">    <span class="keyword">if</span> (l == <span class="keyword">null</span>)</span><br><span class="line">        <span class="comment">//那么新结点同时也是第一个结点</span></span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment">//否则把新结点链接到原来的最后一个结点的next中</span></span><br><span class="line">        l.next = newNode;</span><br><span class="line">    <span class="comment">//元素个数增加</span></span><br><span class="line">    size++;</span><br><span class="line">    <span class="comment">//修改次数增加</span></span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//其中，Node类定义如下</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    E item; <span class="comment">//元素数据</span></span><br><span class="line">    Node&lt;E&gt; next; <span class="comment">//下一个结点</span></span><br><span class="line">    Node&lt;E&gt; prev; <span class="comment">//前一个结点</span></span><br><span class="line"></span><br><span class="line">    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">        <span class="keyword">this</span>.item = element;</span><br><span class="line">        <span class="keyword">this</span>.next = next;</span><br><span class="line">        <span class="keyword">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//方法：获取get()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">get</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> node(index).item;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：插入add()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> index, E element)</span> </span>&#123;</span><br><span class="line">    checkPositionIndex(index);<span class="comment">//检查index范围</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (index == size)<span class="comment">//如果index==size，连接到当前链表的尾部</span></span><br><span class="line">        linkLast(element);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        linkBefore(element, node(index));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Node&lt;E&gt; <span class="title">node</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert isElementIndex(index);</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	index &lt; (size &gt;&gt; 1)采用二分思想，先将index与长度size的一半比较，如果index&lt;size/2，就只从位置0</span></span><br><span class="line"><span class="comment">	往后遍历到位置index处，而如果index&gt;size/2，就只从位置size往前遍历到位置index处。这样可以减少一部</span></span><br><span class="line"><span class="comment">	分不必要的遍历。</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">    <span class="comment">//如果index&lt;size/2，就从前往后找目标结点</span></span><br><span class="line">    <span class="keyword">if</span> (index &lt; (size &gt;&gt; <span class="number">1</span>)) &#123;</span><br><span class="line">        Node&lt;E&gt; x = first;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; index; i++)</span><br><span class="line">            x = x.next;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//否则从后往前找目标结点</span></span><br><span class="line">        Node&lt;E&gt; x = last;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = size - <span class="number">1</span>; i &gt; index; i--)</span><br><span class="line">            x = x.prev;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//把新结点插入到[index]位置的结点succ前面</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">linkBefore</span><span class="params">(E e, Node&lt;E&gt; succ)</span> </span>&#123;<span class="comment">//succ是[index]位置对应的结点</span></span><br><span class="line">    <span class="comment">// assert succ != null;</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; pred = succ.prev; <span class="comment">//[index]位置的前一个结点</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//新结点的prev是原来[index]位置的前一个结点</span></span><br><span class="line">    <span class="comment">//新结点的next是原来[index]位置的结点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> Node&lt;&gt;(pred, e, succ);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//[index]位置对应的结点的prev指向新结点</span></span><br><span class="line">    succ.prev = newNode;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果原来[index]位置对应的结点是第一个结点，那么现在新结点是第一个结点</span></span><br><span class="line">    <span class="keyword">if</span> (pred == <span class="keyword">null</span>)</span><br><span class="line">        first = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        pred.next = newNode;<span class="comment">//原来[index]位置的前一个结点的next指向新结点</span></span><br><span class="line">    size++;</span><br><span class="line">    modCount++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方法：remove()相关方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">remove</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//分o是否为空两种情况</span></span><br><span class="line">    <span class="keyword">if</span> (o == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//找到o对应的结点x</span></span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="keyword">null</span>) &#123;</span><br><span class="line">                unlink(x);<span class="comment">//删除x结点</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//找到o对应的结点x</span></span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="keyword">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                unlink(x);<span class="comment">//删除x结点</span></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">E <span class="title">unlink</span><span class="params">(Node&lt;E&gt; x)</span> </span>&#123;<span class="comment">//x是要被删除的结点</span></span><br><span class="line">    <span class="comment">// assert x != null;</span></span><br><span class="line">    <span class="keyword">final</span> E element = x.item;<span class="comment">//被删除结点的数据</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = x.next;<span class="comment">//被删除结点的下一个结点</span></span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;<span class="comment">//被删除结点的上一个结点</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果被删除结点的前面没有结点，说明被删除结点是第一个结点</span></span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//那么被删除结点的下一个结点变为第一个结点</span></span><br><span class="line">        first = next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//被删除结点不是第一个结点</span></span><br><span class="line">        <span class="comment">//被删除结点的上一个结点的next指向被删除结点的下一个结点</span></span><br><span class="line">        prev.next = next;</span><br><span class="line">        <span class="comment">//断开被删除结点与上一个结点的链接</span></span><br><span class="line">        x.prev = <span class="keyword">null</span>;<span class="comment">//使得GC回收</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果被删除结点的后面没有结点，说明被删除结点是最后一个结点</span></span><br><span class="line">    <span class="keyword">if</span> (next == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//那么被删除结点的上一个结点变为最后一个结点</span></span><br><span class="line">        last = prev;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;<span class="comment">//被删除结点不是最后一个结点</span></span><br><span class="line">        <span class="comment">//被删除结点的下一个结点的prev执行被删除结点的上一个结点</span></span><br><span class="line">        next.prev = prev;</span><br><span class="line">        <span class="comment">//断开被删除结点与下一个结点的连接</span></span><br><span class="line">        x.next = <span class="keyword">null</span>;<span class="comment">//使得GC回收</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//把被删除结点的数据也置空，使得GC回收</span></span><br><span class="line">    x.item = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//元素个数减少</span></span><br><span class="line">    size--;</span><br><span class="line">    <span class="comment">//修改次数增加</span></span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//返回被删除结点的数据</span></span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> E <span class="title">remove</span><span class="params">(<span class="keyword">int</span> index)</span> </span>&#123; <span class="comment">//index是要删除元素的索引位置</span></span><br><span class="line">    checkElementIndex(index);</span><br><span class="line">    <span class="keyword">return</span> unlink(node(index));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-3-LinkedList相关方法图示"><a href="#7-3-3-LinkedList相关方法图示" class="headerlink" title="7.3.3 LinkedList相关方法图示"></a>7.3.3 LinkedList相关方法图示</h4><ul>
<li><strong>只有1个元素的LinkedList</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644840.png" alt="image-20221029134437888" style="zoom:80%;">

<ul>
<li><strong>包含4个元素的LinkedList</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644847.png" alt="image-20221029134534198" style="zoom:80%;">

<ul>
<li><strong>add(E e)方法</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644929.png" alt="image-20221029135013377" style="zoom:80%;">

<ul>
<li><strong>add(int index,E e)方法</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301717972.png" alt="image-20221029135045120" style="zoom:80%;">

<ul>
<li><strong>remove(Object obj)方法</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644602.png" alt="image-20221029134721089" style="zoom:80%;">

<ul>
<li><strong>remove(int index)方法</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301718657.png" alt="image-20221029134807613" style="zoom:80%;">



<h2 id="8-Map接口分析"><a href="#8-Map接口分析" class="headerlink" title="8. Map接口分析"></a>8. Map接口分析</h2><h3 id="8-1-哈希表的物理结构"><a href="#8-1-哈希表的物理结构" class="headerlink" title="8.1 哈希表的物理结构"></a>8.1 哈希表的物理结构</h3><p>HashMap和Hashtable底层都是哈希表（也称散列表），其中维护了一个长度为<strong>2^幂次方</strong>的Entry类型的数组table，数组的每一个索引位置被称为一个桶(bucket)，你添加的映射关系(key,value)最终都被封装为一个Map.Entry类型的对象，放到某个table[index]桶中。</p>
<p>使用数组的目的是查询和添加的效率高，可以根据索引直接定位到某个table[index]。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644546.png" alt="image-20221029144811305" style="zoom:80%;">

<h3 id="8-2-HashMap中数据添加过程"><a href="#8-2-HashMap中数据添加过程" class="headerlink" title="8.2 HashMap中数据添加过程"></a>8.2 HashMap中数据添加过程</h3><h4 id="8-2-1-JDK7中过程分析"><a href="#8-2-1-JDK7中过程分析" class="headerlink" title="8.2.1 JDK7中过程分析"></a>8.2.1 JDK7中过程分析</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在底层创建了长度为16的Entry[] table的数组</span></span><br><span class="line">HashMap map = <span class="keyword">new</span> HashMap(); </span><br><span class="line">map.put(key1,value1);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">分析过程如下：</span></span><br><span class="line"><span class="comment">将(key1,value1)添加到当前hashmap的对象中。首先会调用key1所在类的hashCode()方法，计算key1的哈希值1，</span></span><br><span class="line"><span class="comment">此哈希值1再经过某种运算(hash())，得到哈希值2。此哈希值2再经过某种运算(indexFor())，确定在底层table数组中的索引位置i。</span></span><br><span class="line"><span class="comment">   （1）如果数组索引为i上的数据为空，则(key1,value1)直接添加成功   ------位置1</span></span><br><span class="line"><span class="comment">   （2）如果数组索引为i上的数据不为空，有(key2,value2)，则需要进一步判断：</span></span><br><span class="line"><span class="comment">       判断key1的哈希值2与key2的哈希值是否相同：</span></span><br><span class="line"><span class="comment">         （3） 如果哈希值不同，则(key1,value1)直接添加成功   ------位置2</span></span><br><span class="line"><span class="comment">              如果哈希值相同，则需要继续调用key1所在类的equals()方法，将key2放入equals()形参进行判断</span></span><br><span class="line"><span class="comment">                （4） equals方法返回false : 则(key1,value1)直接添加成功   ------位置3</span></span><br><span class="line"><span class="comment">                      equals方法返回true : 默认情况下，value1会覆盖value2。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">位置1：直接将(key1,value1)以Entry对象的方式存放到table数组索引i的位置。</span></span><br><span class="line"><span class="comment">位置2、位置3：(key1,value1) 与现有的元素以链表的方式存储在table数组索引i的位置，新添加的元素指向旧添加的元素。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">在不断的添加的情况下，满足如下条件的情况下，会进行扩容:</span></span><br><span class="line"><span class="comment">if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) :</span></span><br><span class="line"><span class="comment">默认情况下，当要添加的元素个数超过12(即：数组的长度 * loadFactor得到的结果)时，就要考虑扩容。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">补充：jdk7源码中定义的：</span><br><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">map</span>.<span class="title">get</span>(<span class="title">key1</span>)</span>;</span><br><span class="line">① 计算key1的hash值，用这个方法hash(key1)</span><br><span class="line">② 找index = table.length-<span class="number">1</span> &amp; hash;</span><br><span class="line">③ 如果table[index]不为空，那么就挨个比较哪个Entry的key与它相同，就返回它的value</span><br><span class="line">map.remove(key1);</span><br><span class="line">① 计算key1的hash值，用这个方法hash(key1)</span><br><span class="line">② 找index = table.length-<span class="number">1</span> &amp; hash;</span><br><span class="line">③ 如果table[index]不为空，那么就挨个比较哪个Entry的key与它相同，就删除它，把它前面的Entry的next的值修改为被删除Entry的next</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310311950091.png" alt="image-20231031195051986"></p>
<h4 id="8-2-2-JDK8中过程分析"><a href="#8-2-2-JDK8中过程分析" class="headerlink" title="8.2.2 JDK8中过程分析"></a>8.2.2 JDK8中过程分析</h4><p>下面说明是JDK8相较于JDK7的不同之处：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">①使用HashMap()的构造器创建对象时，并没有在底层初始化长度为<span class="number">16</span>的table数组。</span><br><span class="line">②jdk8中添加的key,value封装到了HashMap.Node类的对象中。而非jdk7中的HashMap.Entry。</span><br><span class="line">③jdk8中新增的元素所在的索引位置如果有其他元素。在经过一系列判断后，如果能添加，则是旧的元素指向新的元素。而非jdk7中的新的元素指向旧的元素。“七上八下”</span><br><span class="line">④jdk7时底层的数据结构是：数组+单向链表。 而jdk8时，底层的数据结构是：数组+单向链表+红黑树。</span><br><span class="line">红黑树出现的时机：当某个索引位置i上的链表的长度达到<span class="number">8</span>，且数组的长度超过<span class="number">64</span>时，此索引位置上的元素要从单向链表改为红黑树。</span><br><span class="line">如果索引i位置是红黑树的结构，当不断删除元素的情况下，当前索引i位置上的元素的个数低于<span class="number">6</span>时，要从红黑树改为单向链表。</span><br></pre></td></tr></table></figure>

<h3 id="8-3-HashMap源码剖析"><a href="#8-3-HashMap源码剖析" class="headerlink" title="8.3 HashMap源码剖析"></a>8.3 HashMap源码剖析</h3><h4 id="8-3-1-JDK1-7-0-07中源码"><a href="#8-3-1-JDK1-7-0-07中源码" class="headerlink" title="8.3.1 JDK1.7.0_07中源码"></a>8.3.1 JDK1.7.0_07中源码</h4><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644235.png" alt="image-20220514190849626"></p>
<h5 id="1、Entry"><a href="#1、Entry" class="headerlink" title="1、Entry"></a><strong>1、Entry</strong></h5><p>key-value被封装为HashMap.Entry类型，而这个类型实现了Map.Entry接口。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">transient</span> Entry&lt;K,V&gt;[] table;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        Entry&lt;K,V&gt; next;</span><br><span class="line">        <span class="keyword">int</span> hash;    <span class="comment">//使用key得到的哈希值2进行赋值。</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Creates new entry.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Entry(<span class="keyword">int</span> h, K k, V v, Entry&lt;K,V&gt; n) &#123;</span><br><span class="line">            value = v;</span><br><span class="line">            next = n;</span><br><span class="line">            key = k;</span><br><span class="line">            hash = h;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//略</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、属性"><a href="#2、属性" class="headerlink" title="2、属性"></a><strong>2、属性</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//table数组的默认初始化长度</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">16</span>;  <span class="comment">// default_initial_capacity=16</span></span><br><span class="line"><span class="comment">//哈希表</span></span><br><span class="line"><span class="keyword">transient</span> Entry&lt;K,V&gt;[] table; <span class="comment">//table数组默认大小为16</span></span><br><span class="line"><span class="comment">//哈希表中key-value的个数</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size;</span><br><span class="line"><span class="comment">//临界值、阈值（扩容的临界值）</span></span><br><span class="line"><span class="keyword">int</span> threshold;</span><br><span class="line"><span class="comment">//加载因子</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">float</span> loadFactor;</span><br><span class="line"><span class="comment">//默认加载因子</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;   <span class="comment">// default_load_factor=0.75</span></span><br></pre></td></tr></table></figure>

<h5 id="3、构造器"><a href="#3、构造器" class="headerlink" title="3、构造器"></a><strong>3、构造器</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//DEFAULT_INITIAL_CAPACITY：默认初始容量16</span></span><br><span class="line">  	<span class="comment">//DEFAULT_LOAD_FACTOR：默认加载因子0.75</span></span><br><span class="line">    <span class="keyword">this</span>(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//校验initialCapacity合法性</span></span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal initial capacity: "</span> + initialCapacity);</span><br><span class="line">    <span class="comment">//校验initialCapacity合法性 </span></span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="comment">//校验loadFactor合法性</span></span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal load factor: "</span> + loadFactor);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//计算得到table数组的长度（保证capacity是2的整次幂）</span></span><br><span class="line">    <span class="keyword">int</span> capacity = <span class="number">1</span>;</span><br><span class="line">     <span class="comment">//通过此循环，得到capacity的最终值，此最终值决定了Entry数组的长度。此时的capacity一定是2的整数倍</span></span><br><span class="line">    <span class="keyword">while</span> (capacity &lt; initialCapacity)</span><br><span class="line">        <span class="comment">//保证数组长度一致是2的整次幂</span></span><br><span class="line">        capacity &lt;&lt;= <span class="number">1</span>;  <span class="comment">//通过不停的左移相当于放大2倍 --直到capacity=16</span></span><br><span class="line">	<span class="comment">//加载因子，初始化为0.75</span></span><br><span class="line">    <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="comment">// threshold 初始为默认容量</span></span><br><span class="line">    threshold = (<span class="keyword">int</span>)Math.min(capacity * loadFactor, MAXIMUM_CAPACITY + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//初始化table数组</span></span><br><span class="line">    table = <span class="keyword">new</span> Entry[capacity];  <span class="comment">//初始化table大小为16</span></span><br><span class="line">    useAltHashing = sun.misc.VM.isBooted() &amp;&amp;</span><br><span class="line">                                       (capacity &gt;= Holder.ALTERNATIVE_HASHING_THRESHOLD);</span><br><span class="line">    init();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、put-方法"><a href="#4、put-方法" class="headerlink" title="4、put()方法"></a><strong>4、put()方法</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//如果key是null，单独处理，存储到table[0]中，如果有另一个key为null，value覆盖</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> putForNullKey(value);</span><br><span class="line">    <span class="comment">//对key的hashCode进行干扰，算出一个hash值</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      hashCode值        xxxxxxxxxx</span></span><br><span class="line"><span class="comment">      table.length-1    000001111</span></span><br><span class="line"><span class="comment">   </span></span><br><span class="line"><span class="comment">      hashCode值 xxxxxxxxxx  无符号右移几位和原来的hashCode值做^运算，使得hashCode高位二进制值参与计算，</span></span><br><span class="line"><span class="comment">                            也发挥作用，降低index冲突的概率。</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">int</span> hash = hash(key);</span><br><span class="line">    <span class="comment">//计算新的映射关系应该存到table[i]位置，</span></span><br><span class="line">    <span class="comment">//i = hash &amp; table.length-1，可以保证i在[0,table.length-1]范围内</span></span><br><span class="line">    <span class="keyword">int</span> i = indexFor(hash, table.length);</span><br><span class="line">    <span class="comment">//检查table[i]下面有没有key与我新的映射关系的key重复，如果重复替换value</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">        Object k;</span><br><span class="line">        <span class="comment">//如果hash不相同，就不进入if语句，那样就一直e=e.next然后调用addEntry()最终使用头插法  --情况2</span></span><br><span class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;  <span class="comment">//左边false那就情况2  左边true就判断后面的就是情况3</span></span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> oldValue;  <span class="comment">//如果put是修改操作，会返回原有旧的value值。</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">//如果当前索引位置i没有元素 e==null   --情况1</span></span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//添加新的映射关系 </span></span><br><span class="line">    addEntry(hash, key, value, i); <span class="comment">//将key,value封装为一个Entry对象，并将此对象保存在索引i位置。</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;   <span class="comment">//如果put是添加操作，会返回null.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果key是null，直接存入[0]的位置</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> V <span class="title">putForNullKey</span><span class="params">(V value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//判断是否有重复的key，如果有重复的，就替换value</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[<span class="number">0</span>]; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">        <span class="keyword">if</span> (e.key == <span class="keyword">null</span>) &#123;</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    modCount++;</span><br><span class="line">    <span class="comment">//把新的映射关系存入[0]的位置，而且key的hash值用0表示</span></span><br><span class="line">    addEntry(<span class="number">0</span>, <span class="keyword">null</span>, value, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (useAltHashing) &#123;</span><br><span class="line">        <span class="keyword">if</span> (k <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">            <span class="keyword">return</span> sun.misc.Hashing.stringHash32((String) k);</span><br><span class="line">        &#125;</span><br><span class="line">        h = hashSeed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    h ^= k.hashCode();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This function ensures that hashCodes that differ only by</span></span><br><span class="line">    <span class="comment">// constant multiples at each bit position have a bounded</span></span><br><span class="line">    <span class="comment">// number of collisions (approximately 8 at default load factor).</span></span><br><span class="line">    h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</span><br><span class="line">    <span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">indexFor</span><span class="params">(<span class="keyword">int</span> h, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h &amp; (length-<span class="number">1</span>); <span class="comment">//相当于用哈希值2&amp;15 那只考虑最低四位&amp;1111 效率要比整体取模要高很多  --&gt;得到0-15的值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//判断是否需要库容</span></span><br><span class="line">    <span class="comment">//扩容：（1）size达到阈值（2）table[i]正好非空</span></span><br><span class="line">    <span class="keyword">if</span> ((size &gt;= threshold) &amp;&amp; (<span class="keyword">null</span> != table[bucketIndex])) &#123;</span><br><span class="line">        <span class="comment">//table扩容为原来的2倍，并且扩容后，会重新调整所有key-value的存储位置</span></span><br><span class="line">        resize(<span class="number">2</span> * table.length); </span><br><span class="line">        <span class="comment">//新的key-value的hash和index也会重新计算</span></span><br><span class="line">        hash = (<span class="keyword">null</span> != key) ? hash(key) : <span class="number">0</span>; </span><br><span class="line">        bucketIndex = indexFor(hash, table.length);  <span class="comment">//重新计算索引位置</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//存入table中</span></span><br><span class="line">    createEntry(hash, key, value, bucketIndex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createEntry</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">int</span> bucketIndex)</span> </span>&#123;</span><br><span class="line">    Entry&lt;K,V&gt; e = table[bucketIndex];   <span class="comment">//将现有位置的元素取出来给e</span></span><br><span class="line">    <span class="comment">//原来table[i]下面的映射关系作为新的映射关系next</span></span><br><span class="line">    table[bucketIndex] = <span class="keyword">new</span> Entry&lt;&gt;(hash, key, value, e); <span class="comment">//现有位置存放新元素 新的元素指向原来的元素e 【头插法】</span></span><br><span class="line">    <span class="comment">//个数增加</span></span><br><span class="line">    size++; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-3-2-JDK1-8-0-271中源码"><a href="#8-3-2-JDK1-8-0-271中源码" class="headerlink" title="8.3.2 JDK1.8.0_271中源码"></a>8.3.2 JDK1.8.0_271中源码</h4><h5 id="1、Node"><a href="#1、Node" class="headerlink" title="1、Node"></a><strong>1、Node</strong></h5><p>key-value被封装为HashMap.Node类型或HashMap.TreeNode类型，它俩都直接或间接的实现了Map.Entry接口。</p>
<p>存储到table数组的可能是Node结点对象，也可能是TreeNode结点对象，它们也是Map.Entry接口的实现类。即table[index]下的映射关系可能串起来一个链表或一棵红黑树。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644865.png" alt="image-20220514190904009"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Node类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        Node&lt;K,V&gt; next;</span><br><span class="line"></span><br><span class="line">        Node(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">            <span class="keyword">this</span>.hash = hash;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="keyword">this</span>.next = next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 其它结构：略</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//TreeNode类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">LinkedHashMap</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        TreeNode&lt;K,V&gt; parent;</span><br><span class="line">        TreeNode&lt;K,V&gt; left;</span><br><span class="line">        TreeNode&lt;K,V&gt; right;</span><br><span class="line">        TreeNode&lt;K,V&gt; prev;</span><br><span class="line">        <span class="keyword">boolean</span> red; <span class="comment">//是红结点还是黑结点</span></span><br><span class="line">        TreeNode(<span class="keyword">int</span> hash, K key, V val, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">            <span class="keyword">super</span>(hash, key, val, next);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2、属性-1"><a href="#2、属性-1" class="headerlink" title="2、属性"></a><strong>2、属性</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// 默认的初始容量 16</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>; <span class="comment">//最大容量  1 &lt;&lt; 30</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;  <span class="comment">//默认加载因子</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>; <span class="comment">//默认树化阈值8，当链表的长度达到这个值后，要考虑树化</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> UNTREEIFY_THRESHOLD = <span class="number">6</span>;<span class="comment">//默认反树化阈值6，当树中结点的个数达到此阈值后，要考虑变为链表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//当单个的链表的结点个数达到8，并且table的长度达到64，才会树化。</span></span><br><span class="line"><span class="comment">//当单个的链表的结点个数达到8，但是table的长度未达到64，会先扩容</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TREEIFY_CAPACITY = <span class="number">64</span>; <span class="comment">//最小树化容量64</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table; <span class="comment">//数组</span></span><br><span class="line"><span class="keyword">transient</span> <span class="keyword">int</span> size;  <span class="comment">//记录有效映射关系的对数，也是Entry对象的个数</span></span><br><span class="line"><span class="keyword">int</span> threshold; <span class="comment">//阈值，当size达到阈值时，考虑扩容</span></span><br><span class="line"><span class="keyword">final</span> <span class="keyword">float</span> loadFactor; <span class="comment">//加载因子，影响扩容的频率</span></span><br></pre></td></tr></table></figure>

<h5 id="3、构造器-1"><a href="#3、构造器-1" class="headerlink" title="3、构造器"></a><strong>3、构造器</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted (其他字段都是默认值)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、put-方法-1"><a href="#4、put-方法-1" class="headerlink" title="4、put()方法"></a><strong>4、put()方法</strong></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public V put(K key, V value) &#123;</span><br><span class="line">    return putVal(hash(key), key, value, false, true);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    <span class="comment">//如果key是null，hash是0</span></span><br><span class="line">	<span class="comment">//如果key非null，用key的hashCode值 与 key的hashCode值高16进行异或</span></span><br><span class="line">	<span class="comment">//		即就是用key的hashCode值高16位与低16位进行了异或的干扰运算</span></span><br><span class="line">		</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	index = hash &amp; table.length-1</span></span><br><span class="line"><span class="comment">	如果用key的原始的hashCode值  与 table.length-1 进行按位与，那么基本上高16没机会用上。</span></span><br><span class="line"><span class="comment">	这样就会增加冲突的概率，为了降低冲突的概率，把高16位加入到hash信息中。</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent,<span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; <span class="comment">//数组</span></span><br><span class="line">    Node&lt;K,V&gt; p;  <span class="comment">//一个结点</span></span><br><span class="line">    <span class="keyword">int</span> n, i; <span class="comment">//n是数组的长度   i是下标</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//tab和table等价</span></span><br><span class="line">	<span class="comment">//如果table是空的</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)&#123;</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">		tab = resize();</span></span><br><span class="line"><span class="comment">		n = tab.length;*/</span></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		如果table是空的，resize()完成了①创建了一个长度为16的数组②threshold = 12</span></span><br><span class="line"><span class="comment">		n = 16</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//i = (n - 1) &amp; hash ，下标 = 数组长度-1 &amp; hash</span></span><br><span class="line">	<span class="comment">//p = tab[i] 第1个结点</span></span><br><span class="line">	<span class="comment">//if(p==null) 条件满足的话说明 table[i]还没有元素</span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)&#123;</span><br><span class="line">        <span class="comment">//把新的映射关系直接放入table[i]</span></span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//newNode（）方法就创建了一个Node类型的新结点，新结点的next是null</span></span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">//p是table[i]中第一个结点</span></span><br><span class="line">		<span class="comment">//if(table[i]的第一个结点与新的映射关系的key重复)</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;<span class="comment">//用e记录这个table[i]的第一个结点</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)&#123; <span class="comment">//如果table[i]第一个结点是一个树结点</span></span><br><span class="line">            <span class="comment">//单独处理树结点</span></span><br><span class="line">            <span class="comment">//如果树结点中，有key重复的，就返回那个重复的结点用e接收，即e!=null</span></span><br><span class="line">            <span class="comment">//如果树结点中，没有key重复的，就把新结点放到树中，并且返回null，即e=null</span></span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//table[i]的第一个结点不是树结点，也与新的映射关系的key不重复</span></span><br><span class="line">			<span class="comment">//binCount记录了table[i]下面的结点的个数</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="comment">//如果p的下一个结点是空的，说明当前的p是最后一个结点</span></span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    <span class="comment">//把新的结点连接到table[i]的最后</span></span><br><span class="line">                    p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                    <span class="comment">//如果binCount&gt;=8-1，达到7个时</span></span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                        <span class="comment">//要么扩容，要么树化</span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//如果key重复了，就跳出for循环，此时e结点记录的就是那个key重复的结点</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                p = e;<span class="comment">//下一次循环，e=p.next，就类似于e=e.next，往链表下移动</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//如果这个e不是null，说明有key重复，就考虑替换原来的value</span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e); <span class="comment">//什么也没干</span></span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ++modCount;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//元素个数增加</span></span><br><span class="line">	<span class="comment">//size达到阈值</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize(); <span class="comment">//一旦扩容，重新调整所有映射关系的位置</span></span><br><span class="line">    afterNodeInsertion(evict); <span class="comment">//什么也没干</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table; <span class="comment">//oldTab原来的table</span></span><br><span class="line">    <span class="comment">//oldCap：原来数组的长度</span></span><br><span class="line">    <span class="keyword">int</span> oldCap = (oldTab == <span class="keyword">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">    <span class="comment">//oldThr：原来的阈值</span></span><br><span class="line">    <span class="keyword">int</span> oldThr = threshold;<span class="comment">//最开始threshold是0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//newCap，新容量</span></span><br><span class="line">	<span class="comment">//newThr：新阈值</span></span><br><span class="line">    <span class="keyword">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123; <span class="comment">//说明原来不是空数组</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123; <span class="comment">//是否达到数组最大限制</span></span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            <span class="comment">//newCap = 旧的容量*2 ，新容量&lt;最大数组容量限制</span></span><br><span class="line">			<span class="comment">//新容量：32,64，...</span></span><br><span class="line">			<span class="comment">//oldCap &gt;= 初始容量16</span></span><br><span class="line">			<span class="comment">//新阈值重新算 = 24，48 ....</span></span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY; <span class="comment">//新容量是默认初始化容量16</span></span><br><span class="line">        <span class="comment">//新阈值= 默认的加载因子 * 默认的初始化容量 = 0.75*16 = 12</span></span><br><span class="line">        newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">float</span> ft = (<span class="keyword">float</span>)newCap * loadFactor;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="keyword">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                  (<span class="keyword">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    threshold = newThr; <span class="comment">//阈值赋值为新阈值12，24.。。。</span></span><br><span class="line">    <span class="comment">//创建了一个新数组，长度为newCap，16，32,64.。。</span></span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(&#123;<span class="string">"rawtypes"</span>,<span class="string">"unchecked"</span>&#125;)</span><br><span class="line">    Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> Node[newCap];</span><br><span class="line">    table = newTab;</span><br><span class="line">    <span class="keyword">if</span> (oldTab != <span class="keyword">null</span>) &#123; <span class="comment">//原来不是空数组</span></span><br><span class="line">        <span class="comment">//把原来的table中映射关系，倒腾到新的table中</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            <span class="keyword">if</span> ((e = oldTab[j]) != <span class="keyword">null</span>) &#123;<span class="comment">//e是table下面的结点</span></span><br><span class="line">                oldTab[j] = <span class="keyword">null</span>; <span class="comment">//把旧的table[j]位置清空</span></span><br><span class="line">                <span class="keyword">if</span> (e.next == <span class="keyword">null</span>) <span class="comment">//如果是最后一个结点</span></span><br><span class="line">                    newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e; <span class="comment">//重新计算e的在新table中的存储位置，然后放入</span></span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode) <span class="comment">//如果e是树结点</span></span><br><span class="line">                    <span class="comment">//把原来的树拆解，放到新的table</span></span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(<span class="keyword">this</span>, newTab, j, oldCap);</span><br><span class="line">                <span class="keyword">else</span> &#123; <span class="comment">// preserve order</span></span><br><span class="line">                    Node&lt;K,V&gt; loHead = <span class="keyword">null</span>, loTail = <span class="keyword">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; hiHead = <span class="keyword">null</span>, hiTail = <span class="keyword">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    <span class="comment">//把原来table[i]下面的整个链表，重新挪到了新的table中</span></span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (loTail == <span class="keyword">null</span>)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            loTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (hiTail == <span class="keyword">null</span>)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">while</span> ((e = next) != <span class="keyword">null</span>);</span><br><span class="line">                    <span class="keyword">if</span> (loTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        loTail.next = <span class="keyword">null</span>;</span><br><span class="line">                        newTab[j] = loHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (hiTail != <span class="keyword">null</span>) &#123;</span><br><span class="line">                        hiTail.next = <span class="keyword">null</span>;</span><br><span class="line">                        newTab[j + oldCap] = hiHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newTab;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Node&lt;K,V&gt; <span class="title">newNode</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; next)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//创建一个新结点</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Node&lt;&gt;(hash, key, value, next);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">void</span> <span class="title">treeifyBin</span><span class="params">(Node&lt;K,V&gt;[] tab, <span class="keyword">int</span> hash)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, index; </span><br><span class="line">    Node&lt;K,V&gt; e;</span><br><span class="line">    <span class="comment">//MIN_TREEIFY_CAPACITY：最小树化容量64</span></span><br><span class="line">    <span class="comment">//如果table是空的，或者  table的长度没有达到64</span></span><br><span class="line">    <span class="keyword">if</span> (tab == <span class="keyword">null</span> || (n = tab.length) &lt; MIN_TREEIFY_CAPACITY)</span><br><span class="line">        resize();<span class="comment">//先扩容</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ((e = tab[index = (n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">//用e记录table[index]的结点的地址</span></span><br><span class="line">        TreeNode&lt;K,V&gt; hd = <span class="keyword">null</span>, tl = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">			do...while，把table[index]链表的Node结点变为TreeNode类型的结点</span></span><br><span class="line"><span class="comment">			*/</span></span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            TreeNode&lt;K,V&gt; p = replacementTreeNode(e, <span class="keyword">null</span>);</span><br><span class="line">            <span class="keyword">if</span> (tl == <span class="keyword">null</span>)</span><br><span class="line">                hd = p;<span class="comment">//hd记录根结点</span></span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                p.prev = tl;</span><br><span class="line">                tl.next = p;</span><br><span class="line">            &#125;</span><br><span class="line">            tl = p;</span><br><span class="line">        &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果table[index]下面不是空</span></span><br><span class="line">        <span class="keyword">if</span> ((tab[index] = hd) != <span class="keyword">null</span>)</span><br><span class="line">            hd.treeify(tab);<span class="comment">//将table[index]下面的链表进行树化</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>小结：<br><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301721742.png" alt="image-20220524142524796"></p>
<h3 id="8-4-LinkedHashMap源码剖析"><a href="#8-4-LinkedHashMap源码剖析" class="headerlink" title="8.4 LinkedHashMap源码剖析"></a>8.4 LinkedHashMap源码剖析</h3><h4 id="8-4-1-源码"><a href="#8-4-1-源码" class="headerlink" title="8.4.1 源码"></a>8.4.1 源码</h4><p>内部定义的Entry如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">HashMap</span>.<span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">	Entry&lt;K,V&gt; before, after;</span><br><span class="line">	</span><br><span class="line">	Entry(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123;</span><br><span class="line">		<span class="keyword">super</span>(hash, key, value, next);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>LinkedHashMap重写了HashMap中的newNode()方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Node&lt;K,V&gt; <span class="title">newNode</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; e)</span> </span>&#123;</span><br><span class="line">    LinkedHashMap.Entry&lt;K,V&gt; p =</span><br><span class="line">        <span class="keyword">new</span> LinkedHashMap.Entry&lt;K,V&gt;(hash, key, value, e);</span><br><span class="line">    linkNodeLast(p);</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">TreeNode&lt;K,V&gt; <span class="title">newTreeNode</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, Node&lt;K,V&gt; next)</span> </span>&#123;</span><br><span class="line">    TreeNode&lt;K,V&gt; p = <span class="keyword">new</span> TreeNode&lt;K,V&gt;(hash, key, value, next);</span><br><span class="line">    linkNodeLast(p);</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-4-2-图示"><a href="#8-4-2-图示" class="headerlink" title="8.4.2 图示"></a>8.4.2 图示</h4><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644479.png" alt="image-20221029145708224" style="zoom:80%;">

<h2 id="9-Set接口分析"><a href="#9-Set接口分析" class="headerlink" title="9. Set接口分析"></a>9. Set接口分析</h2><h3 id="9-1-Set集合与Map集合的关系"><a href="#9-1-Set集合与Map集合的关系" class="headerlink" title="9.1 Set集合与Map集合的关系"></a>9.1 Set集合与Map集合的关系</h3><p>Set的内部实现其实是一个Map，Set中的元素，存储在HashMap的key中。即HashSet的内部实现是一个HashMap，TreeSet的内部实现是一个TreeMap，LinkedHashSet的内部实现是一个LinkedHashMap。</p>
<h3 id="9-2-源码剖析"><a href="#9-2-源码剖析" class="headerlink" title="9.2 源码剖析"></a>9.2 源码剖析</h3><p><strong>HashSet源码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    map = <span class="keyword">new</span> HashMap&lt;&gt;(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这个构造器是给子类LinkedHashSet调用的</span></span><br><span class="line">HashSet(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor, <span class="keyword">boolean</span> dummy) &#123;</span><br><span class="line">    map = <span class="keyword">new</span> LinkedHashMap&lt;&gt;(initialCapacity, loadFactor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//add()方法：</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//其中，</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line"><span class="comment">//iterator()方法：</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.keySet().iterator();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>LinkedHashSet源码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//构造器</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedHashSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(<span class="number">16</span>, .<span class="number">75f</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125; </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedHashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(initialCapacity, .<span class="number">75f</span>, <span class="keyword">true</span>);<span class="comment">//调用HashSet的某个构造器</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LinkedHashSet</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>(initialCapacity, loadFactor, <span class="keyword">true</span>);<span class="comment">//调用HashSet的某个构造器</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>TreeSet源码：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TreeSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>(<span class="keyword">new</span> TreeMap&lt;E,Object&gt;());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TreeSet(NavigableMap&lt;E,Object&gt; m) &#123;</span><br><span class="line">    <span class="keyword">this</span>.m = m;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//其中，</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">transient</span> NavigableMap&lt;E,Object&gt; m;</span><br><span class="line"></span><br><span class="line"><span class="comment">//add()方法：</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> m.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//其中，</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</span><br></pre></td></tr></table></figure>

<h2 id="10-【拓展】HashMap的相关问题"><a href="#10-【拓展】HashMap的相关问题" class="headerlink" title="10. 【拓展】HashMap的相关问题"></a>10. 【拓展】HashMap的相关问题</h2><h4 id="1、说说你理解的哈希算法"><a href="#1、说说你理解的哈希算法" class="headerlink" title="1、说说你理解的哈希算法"></a>1、说说你理解的哈希算法</h4><p>hash算法是一种可以从任何数据中提取出其“指纹”的数据摘要算法，它将任意大小的数据映射到一个固定大小的序列上，这个序列被称为hash code、数据摘要或者指纹。比较出名的hash算法有MD5、SHA。hash是具有唯一性且不可逆的，唯一性是指相同的“对象”产生的hash code永远是一样的。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301722818.png" alt="1563797150134"></p>
<h4 id="2、Entry中的hash属性为什么不直接使用key的hashCode-返回值呢？"><a href="#2、Entry中的hash属性为什么不直接使用key的hashCode-返回值呢？" class="headerlink" title="2、Entry中的hash属性为什么不直接使用key的hashCode()返回值呢？"></a>2、Entry中的hash属性为什么不直接使用key的hashCode()返回值呢？</h4><p>不管是JDK1.7还是JDK1.8中，都不是直接用key的hashCode值直接与table.length-1计算求下标的，而是先对key的hashCode值进行了一个运算，JDK1.7和JDK1.8关于hash()的实现代码不一样，但是不管怎么样都是为了提高hash code值与 (table.length-1)的按位与完的结果，尽量的均匀分布。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301644916.png" alt="image-20220514190454633"></p>
<p>JDK1.7：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object k)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h = hashSeed;</span><br><span class="line">    <span class="keyword">if</span> (<span class="number">0</span> != h &amp;&amp; k <span class="keyword">instanceof</span> String) &#123;</span><br><span class="line">        <span class="keyword">return</span> sun.misc.Hashing.stringHash32((String) k);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    h ^= k.hashCode();</span><br><span class="line">    h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</span><br><span class="line">    <span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JDK1.8：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">int</span> h;</span><br><span class="line">       <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>虽然算法不同，但是思路都是将hashCode值的高位二进制与低位二进制值进行了异或，然高位二进制参与到index的计算中。</p>
<p>为什么要hashCode值的二进制的高位参与到index计算呢？</p>
<p>因为一个HashMap的table数组一般不会特别大，至少在不断扩容之前，那么table.length-1的大部分高位都是0，直接用hashCode和table.length-1进行&amp;运算的话，就会导致总是只有最低的几位是有效的，那么就算你的hashCode()实现的再好也难以避免发生碰撞，这时让高位参与进来的意义就体现出来了。它对hashcode的低位添加了随机性并且混合了高位的部分特征，显著减少了碰撞冲突的发生。</p>
<h4 id="3、HashMap是如何决定某个key-value存在哪个桶的呢？"><a href="#3、HashMap是如何决定某个key-value存在哪个桶的呢？" class="headerlink" title="3、HashMap是如何决定某个key-value存在哪个桶的呢？"></a>3、HashMap是如何决定某个key-value存在哪个桶的呢？</h4><p>因为hash值是一个整数，而数组的长度也是一个整数，有两种思路：</p>
<p>①hash 值 % table.length会得到一个[0,table.length-1]范围的值，正好是下标范围，但是用%运算效率没有位运算符&amp;高。</p>
<p>②hash 值 &amp; (table.length-1)，任何数 &amp; (table.length-1)的结果也一定在[0, table.length-1]范围。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301645978.png" alt="1563800372286"></p>
<p>JDK1.7：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">indexFor</span><span class="params">(<span class="keyword">int</span> h, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert Integer.bitCount(length) == 1 : "length must be a non-zero power of 2";</span></span><br><span class="line">    <span class="keyword">return</span> h &amp; (length-<span class="number">1</span>); <span class="comment">//此处h就是hash</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>JDK1.8：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent, <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)  <span class="comment">// i = (n - 1) &amp; hash</span></span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">    <span class="comment">//....省略大量代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4、为什么要保持table数组一直是2的n次幂呢？"><a href="#4、为什么要保持table数组一直是2的n次幂呢？" class="headerlink" title="4、为什么要保持table数组一直是2的n次幂呢？"></a>4、为什么要保持table数组一直是2的n次幂呢？</h4><p>因为如果数组的长度为2的n次幂，那么table.length-1的二进制就是一个高位全是0，低位全是1的数字，这样才能保证每一个下标位置都有机会被用到。</p>
<p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">hashCode值是   ？</span><br><span class="line">table.length是<span class="number">10</span></span><br><span class="line">table.length-<span class="number">1</span>是<span class="number">9</span></span><br><span class="line"></span><br><span class="line">？   ????????</span><br><span class="line"><span class="number">9</span>	 <span class="number">00001001</span></span><br><span class="line">&amp;_____________</span><br><span class="line">	 <span class="number">00000000</span>	[<span class="number">0</span>]</span><br><span class="line">	 <span class="number">00000001</span>	[<span class="number">1</span>]</span><br><span class="line">	 <span class="number">00001000</span>	[<span class="number">8</span>]</span><br><span class="line">	 <span class="number">00001001</span>	[<span class="number">9</span>]</span><br><span class="line">	 一定[<span class="number">0</span>]~[<span class="number">9</span>]</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">hashCode值是   ？</span><br><span class="line">table.length是<span class="number">16</span></span><br><span class="line">table.length-<span class="number">1</span>是<span class="number">15</span></span><br><span class="line"></span><br><span class="line">？   ????????</span><br><span class="line"><span class="number">15</span>	 <span class="number">00001111</span></span><br><span class="line">&amp;_____________</span><br><span class="line">	 <span class="number">00000000</span>	[<span class="number">0</span>]</span><br><span class="line">	 <span class="number">00000001</span>	[<span class="number">1</span>]</span><br><span class="line">	 <span class="number">00000010</span>	[<span class="number">2</span>]</span><br><span class="line">	 <span class="number">00000011</span>	[<span class="number">3</span>]</span><br><span class="line">	 ...</span><br><span class="line">	 <span class="number">00001111</span>    [<span class="number">15</span>]</span><br><span class="line">	 范围是[<span class="number">0</span>,<span class="number">15</span>]，一定在[<span class="number">0</span>,table.length-<span class="number">1</span>]范围内</span><br></pre></td></tr></table></figure>

<h4 id="5、解决-index-冲突问题"><a href="#5、解决-index-冲突问题" class="headerlink" title="5、解决[index]冲突问题"></a>5、解决[index]冲突问题</h4><p>虽然从设计hashCode()到上面HashMap的hash()函数，都尽量减少冲突，但是仍然存在两个不同的对象返回的hashCode值相同，或者hashCode值就算不同，通过hash()函数计算后，得到的index也会存在大量的相同，因此key分布完全均匀的情况是不存在的。那么发生碰撞冲突时怎么办？</p>
<p>JDK1.8之间使用：数组+链表的结构。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301645506.png" alt="1563802656661"></p>
<p>JDK1.8之后使用：数组+链表/红黑树的结构。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301645806.png" alt="1563802665708"></p>
<p>即hash相同或hash&amp;(table.lengt-1)的值相同，那么就存入同一个“桶”table[index]中，使用链表或红黑树连接起来。</p>
<h4 id="6、为什么JDK1-8会出现红黑树和链表共存呢？"><a href="#6、为什么JDK1-8会出现红黑树和链表共存呢？" class="headerlink" title="6、为什么JDK1.8会出现红黑树和链表共存呢？"></a>6、为什么JDK1.8会出现红黑树和链表共存呢？</h4><p>因为当冲突比较严重时，table[index]下面的链表就会很长，那么会导致查找效率大大降低，而如果此时选用二叉树可以大大提高查询效率。</p>
<p>但是二叉树的结构又过于复杂，占用内存也较多，如果结点个数比较少的时候，那么选择链表反而更简单。所以会出现红黑树和链表共存。</p>
<h4 id="7、加载因子的值大小有什么关系？"><a href="#7、加载因子的值大小有什么关系？" class="headerlink" title="7、加载因子的值大小有什么关系？"></a>7、加载因子的值大小有什么关系？</h4><p>如果太大，threshold就会很大，那么如果冲突比较严重的话，就会导致table[index]下面的结点个数很多，影响效率。</p>
<p>如果太小，threshold就会很小，那么数组扩容的频率就会提高，数组的使用率也会降低，那么会造成空间的浪费。</p>
<h4 id="8、什么时候树化？什么时候反树化？"><a href="#8、什么时候树化？什么时候反树化？" class="headerlink" title="8、什么时候树化？什么时候反树化？"></a>8、什么时候树化？什么时候反树化？</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> TREEIFY_THRESHOLD = <span class="number">8</span>;<span class="comment">//树化阈值</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> UNTREEIFY_THRESHOLD = <span class="number">6</span>;<span class="comment">//反树化阈值</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MIN_TREEIFY_CAPACITY = <span class="number">64</span>;<span class="comment">//最小树化容量</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>当某table[index]下的链表的结点个数达到8，并且table.length&gt;=64，那么如果新Entry对象还添加到该table[index]中，那么就会将table[index]的链表进行树化。</p>
</li>
<li><p>当某table[index]下的红黑树结点个数少于6个，此时，</p>
<ul>
<li>当继续删除table[index]下的树结点，最后这个根结点的左右结点有null，或根结点的左结点的左结点为null，会反树化</li>
<li>当重新添加新的映射关系到map中，导致了map重新扩容了，这个时候如果table[index]下面还是小于等于6的个数，那么会反树化</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyKey</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyKey</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(num&lt;=<span class="number">20</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span> prime = <span class="number">31</span>;</span><br><span class="line">            <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">            result = prime * result + num;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == obj)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (getClass() != obj.getClass())</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        MyKey other = (MyKey) obj;</span><br><span class="line">        <span class="keyword">if</span> (num != other.num)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestHashMapMyKey</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//这里为了演示的效果，我们造一个特殊的类，这个类的hashCode（）方法返回固定值1</span></span><br><span class="line">        <span class="comment">//因为这样就可以造成冲突问题，使得它们都存到table[1]中</span></span><br><span class="line">        HashMap&lt;MyKey, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">11</span>; i++) &#123;</span><br><span class="line">            map.put(<span class="keyword">new</span> MyKey(i), <span class="string">"value"</span>+i);<span class="comment">//树化演示</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        HashMap&lt;MyKey, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">11</span>; i++) &#123;</span><br><span class="line">            map.put(<span class="keyword">new</span> MyKey(i), <span class="string">"value"</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;=<span class="number">11</span>; i++) &#123;</span><br><span class="line">            map.remove(<span class="keyword">new</span> MyKey(i));<span class="comment">//反树化演示</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        HashMap&lt;MyKey, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">11</span>; i++) &#123;</span><br><span class="line">            map.put(<span class="keyword">new</span> MyKey(i), <span class="string">"value"</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;=<span class="number">5</span>; i++) &#123;</span><br><span class="line">            map.remove(<span class="keyword">new</span> MyKey(i));</span><br><span class="line">        &#125;<span class="comment">//table[1]下剩余6个结点</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">21</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            map.put(<span class="keyword">new</span> MyKey(i), <span class="string">"value"</span>+i);<span class="comment">//添加到扩容时，反树化</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9、key-value中的key是否可以修改？"><a href="#9、key-value中的key是否可以修改？" class="headerlink" title="9、key-value中的key是否可以修改？"></a>9、key-value中的key是否可以修改？</h4><p>key-value存储到HashMap中会存储key的hash值，这样就不用在每次查找时重新计算每一个Entry或Node（TreeNode）的hash值了，因此如果已经put到Map中的key-value，再修改key的属性，而这个属性又参与hashcode值的计算，那么会导致匹配不上。</p>
<p>这个规则也同样适用于LinkedHashMap、HashSet、LinkedHashSet、Hashtable等所有散列存储结构的集合。</p>
<h4 id="10、JDK1-7中HashMap的循环链表是怎么回事？如何解决？"><a href="#10、JDK1-7中HashMap的循环链表是怎么回事？如何解决？" class="headerlink" title="10、JDK1.7中HashMap的循环链表是怎么回事？如何解决？"></a>10、JDK1.7中HashMap的循环链表是怎么回事？如何解决？</h4><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310301645092.jpg" alt="HashMap的循环引用问题"></p>
<p>避免HashMap发生死循环的常用解决方案：</p>
<ul>
<li>多线程环境下，使用线程安全的ConcurrentHashMap替代HashMap，推荐</li>
<li>多线程环境下，使用synchronized或Lock加锁，但会影响性能，不推荐</li>
<li>多线程环境下，使用线程安全的Hashtable替代，性能低，不推荐</li>
</ul>
<p>HashMap死循环只会发生在JDK1.7版本中，主要原因：头插法+链表+多线程并发+扩容。</p>
<p>在JDK1.8中，HashMap改用尾插法，解决了链表死循环的问题。</p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JAVA-泛型" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/28/JAVA-%E6%B3%9B%E5%9E%8B/" class="article-date">
      <time datetime="2023-10-28T03:11:22.000Z" itemprop="datePublished">2023-10-28</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/28/JAVA-%E6%B3%9B%E5%9E%8B/">JAVA-泛型</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="第13章-泛型-Generic"><a href="#第13章-泛型-Generic" class="headerlink" title="第13章_泛型(Generic)"></a>第13章_泛型(Generic)</h1><h2 id="本章专题与脉络"><a href="#本章专题与脉络" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281103653.png" alt="第3阶段：Java高级应用-第13章" style="zoom: 67%;">

<hr>
<h2 id="1-泛型概述"><a href="#1-泛型概述" class="headerlink" title="1. 泛型概述"></a>1. 泛型概述</h2><h3 id="1-1-生活中的例子"><a href="#1-1-生活中的例子" class="headerlink" title="1.1 生活中的例子"></a>1.1 生活中的例子</h3><ul>
<li>举例1：中药店，每个抽屉外面贴着标签</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281116606.png" alt="image-20220411000757577"></p>
<ul>
<li>举例2：超市购物架上很多瓶子，每个瓶子装的是什么，有标签</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281103898.png" alt="image-20220918230534965" style="zoom:67%;">

<ul>
<li>举例3：家庭厨房中：<strong>就像垃圾分类一样，只有对应的垃圾才能扔进去</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281103846.png" alt="image-20220514191533296" style="zoom:67%;">

<blockquote>
<p>Java中的泛型，就类似于上述场景中的<strong>标签</strong></p>
</blockquote>
<h3 id="1-2-泛型的引入"><a href="#1-2-泛型的引入" class="headerlink" title="1.2 泛型的引入"></a>1.2 泛型的引入</h3><p>在Java中，在声明方法时如果有<code>未知的数据</code>参与，这些未知数据在调用方法时才能确定，那么我们把这样的数据通过<strong>形参</strong>表示。</p>
<p>在方法体中，用这个形参名来代表那个未知的数据，而调用者在调用时，对应的传入<code>实参</code>就可以了。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281116071.png" alt="1563414367674"></p>
<p>因此，<strong>JDK1.5</strong>设计了<strong>泛型</strong>概念，<strong>泛型 == 类型参数</strong>，这个类型参数在<strong>声明</strong>它的类、接口或方法中，代表未知的某种通用类型。</p>
<p><strong>举例1：</strong></p>
<p>集合类在设计阶段/声明阶段不能确定这个容器到底实际存的是什么类型的对象，所以<strong>在JDK5.0之前只能把元素类型设计为Object，JDK5.0时Java引入了“参数化类型（Parameterized type）”的概念，允许我们在创建集合时指定集合元素的类型</strong>。比如：<code>List&lt;String&gt;</code>，这表明该List只能保存字符串类型的对象。</p>
<p>使用集合存储数据时，除了元素的类型不确定，其他部分是确定的（例如关于这个元素如何保存，如何管理等）。</p>
<p><strong>举例2：</strong></p>
<p><code>java.lang.Comparable</code>接口和<code>java.util.Comparator</code>接口，是用于比较对象大小的接口。这两个接口只是限定了当一个对象大于另一个对象时返回正整数，小于返回负整数，等于返回0，但是并不确定是什么类型的对象比较大小。JDK5.0之前只能用Object类型表示，使用时既麻烦又不安全，因此 JDK5.0 给它们增加了泛型。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281112490.png" alt="image-20220923154058074"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281116856.png" alt="image-20220923154426871"></p>
<p>其中<code>&lt;T&gt;</code>就是类型参数，即泛型。</p>
<blockquote>
<p>所谓泛型，就是允许在定义类、接口时通过一个<code>标识</code>表示类中某个<code>属性的类型</code>或者是某个方法的<code>返回值或参数的类型</code>。这个类型参数将在使用时（例如，继承或实现这个接口、创建对象或调用方法时）确定（即传入实际的类型参数，也称为类型实参）。</p>
</blockquote>
<h2 id="2-使用泛型举例"><a href="#2-使用泛型举例" class="headerlink" title="2. 使用泛型举例"></a>2. 使用泛型举例</h2><p>自从JDK5.0引入泛型的概念之后，对之前核心类库中的API做了很大的修改，例如：JDK5.0改写了集合框架中的全部接口和类、java.lang.Comparable接口、java.util.Comparator接口、Class类等。为这些接口、类增加了泛型支持，从而可以<strong>在声明变量、创建对象时传入类型实参</strong>。</p>
<h3 id="2-1-集合中使用泛型"><a href="#2-1-集合中使用泛型" class="headerlink" title="2.1 集合中使用泛型"></a>2.1 集合中使用泛型</h3><h4 id="2-1-1-举例"><a href="#2-1-1-举例" class="headerlink" title="2.1.1 举例"></a>2.1.1 举例</h4><p><strong>集合中没有使用泛型时：</strong></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281112084.png" alt="image-20220411001522636" style="zoom:80%;">

<p><strong>集合中使用泛型时：</strong></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281103489.png" alt="image-20220411001549747" style="zoom:80%;">

<blockquote>
<p>Java泛型可以保证如果程序在编译时没有发出警告，运行时就不会产生ClassCastException异常。即，把不安全的因素在编译期间就排除了，而不是运行期；既然通过了编译，那么类型一定是符合要求的，就避免了类型转换。</p>
<p>同时，代码更加简洁、健壮。</p>
<p><strong>把一个集合中的内容限制为一个特定的数据类型，这就是generic背后的核心思想。</strong></p>
</blockquote>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//泛型在List中的使用</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//举例：将学生成绩保存在ArrayList中</span></span><br><span class="line">    <span class="comment">//标准写法：</span></span><br><span class="line">    <span class="comment">//ArrayList&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;();</span></span><br><span class="line">    <span class="comment">//jdk7的新特性：类型推断</span></span><br><span class="line">    ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    list.add(<span class="number">56</span>); <span class="comment">//自动装箱</span></span><br><span class="line">    list.add(<span class="number">76</span>);</span><br><span class="line">    list.add(<span class="number">88</span>);</span><br><span class="line">    list.add(<span class="number">89</span>);</span><br><span class="line">    <span class="comment">//当添加非Integer类型数据时，编译不通过</span></span><br><span class="line">    <span class="comment">//list.add("Tom");//编译报错</span></span><br><span class="line">    Iterator&lt;Integer&gt; iterator = list.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        <span class="comment">//不需要强转，直接可以获取添加时的元素的数据类型</span></span><br><span class="line">        Integer score = iterator.next();</span><br><span class="line">        System.out.println(score);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//泛型在Map中的使用</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    HashMap&lt;String,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    map.put(<span class="string">"Tom"</span>,<span class="number">67</span>);</span><br><span class="line">    map.put(<span class="string">"Jim"</span>,<span class="number">56</span>);</span><br><span class="line">    map.put(<span class="string">"Rose"</span>,<span class="number">88</span>);</span><br><span class="line">    <span class="comment">//编译不通过</span></span><br><span class="line">    <span class="comment">//        map.put(67,"Jack");</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历key集</span></span><br><span class="line">    Set&lt;String&gt; keySet = map.keySet();</span><br><span class="line">    <span class="keyword">for</span>(String str:keySet)&#123;</span><br><span class="line">        System.out.println(str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历value集</span></span><br><span class="line">    Collection&lt;Integer&gt; values = map.values();</span><br><span class="line">    Iterator&lt;Integer&gt; iterator = values.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        Integer value = iterator.next();</span><br><span class="line">        System.out.println(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//遍历entry集</span></span><br><span class="line">    Set&lt;Map.Entry&lt;String, Integer&gt;&gt; entrySet = map.entrySet();</span><br><span class="line">    Iterator&lt;Map.Entry&lt;String, Integer&gt;&gt; iterator1 = entrySet.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator1.hasNext())&#123;</span><br><span class="line">        Map.Entry&lt;String, Integer&gt; entry = iterator1.next();</span><br><span class="line">        String key = entry.getKey();</span><br><span class="line">        Integer value = entry.getValue();</span><br><span class="line">        System.out.println(key + <span class="string">":"</span> + value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-1-2-练习"><a href="#2-1-2-练习" class="headerlink" title="2.1.2 练习"></a>2.1.2 练习</h4><p>练习1：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">（1）创建一个ArrayList集合对象，并指定泛型为&lt;Integer&gt;</span><br><span class="line">（2）添加5个[0,100)以内的整数到集合中</span><br><span class="line">（3）使用foreach遍历输出5个整数</span><br><span class="line">（4）使用集合的removeIf方法删除偶数，为Predicate接口指定泛型&lt;Ineteger&gt;</span><br><span class="line">（5）再使用Iterator迭代器输出剩下的元素，为Iterator接口指定泛型&lt;Integer&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Predicate;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//（1）创建一个ArrayList集合对象，并指定泛型为&lt;Integer&gt;</span></span><br><span class="line">        ArrayList&lt;Integer&gt; list=<span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="comment">//（2）添加5个[0,100)以内的随机整数到集合中</span></span><br><span class="line">        Random r=<span class="keyword">new</span> Random();</span><br><span class="line">        list.add(r.nextInt(<span class="number">100</span>));</span><br><span class="line">        list.add(r.nextInt(<span class="number">100</span>));</span><br><span class="line">        list.add(r.nextInt(<span class="number">100</span>));</span><br><span class="line">        list.add(r.nextInt(<span class="number">100</span>));</span><br><span class="line">        list.add(r.nextInt(<span class="number">100</span>));</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        <span class="comment">//（3）使用foreach遍历输出5个整数</span></span><br><span class="line">        <span class="keyword">for</span>(Integer temp:list)&#123;</span><br><span class="line">            System.out.println(temp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//（4）使用集合的removeIf方法删除偶数，为Predicate接口指定泛型&lt;Ineteger&gt;</span></span><br><span class="line">        list.removeIf(<span class="keyword">new</span> Predicate&lt;Integer&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Integer integer)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(integer%<span class="number">2</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">"删除偶数之后的list:"</span>+list);</span><br><span class="line">        <span class="comment">//（5）再使用Iterator迭代器输出剩下的元素，为Iterator接口指定泛型&lt;Integer&gt;</span></span><br><span class="line">        Iterator iterator=list.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310291502888.png" alt="image-20231029145834736"></p>
<p>练习2：编写一个简单的同学通迅录</p>
<p>需求说明：</p>
<ul>
<li>查询所有通讯录的同学信息。</li>
<li>输入姓名，根据姓名查询指定同学信息。如果该姓名不存在，输出提示信息。</li>
<li>添加同学，姓名重复的不能添加。</li>
<li>根据学员姓名删除学员。</li>
<li>按姓名排序查询学员。</li>
</ul>
<p>分析：</p>
<ul>
<li>使用HashMap&lt;K,V&gt;存储同学信息，使用同学姓名做key，同学对象做value。</li>
<li>同学对象包含的属性有：姓名、年龄、住址、爱好等。</li>
</ul>
<h3 id="2-2-比较器中使用泛型"><a href="#2-2-比较器中使用泛型" class="headerlink" title="2.2 比较器中使用泛型"></a>2.2 比较器中使用泛型</h3><h4 id="2-2-1-举例"><a href="#2-2-1-举例" class="headerlink" title="2.2.1 举例"></a>2.2.1 举例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> radius;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Circle</span><span class="params">(<span class="keyword">double</span> radius)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">        <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getRadius</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> radius;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRadius</span><span class="params">(<span class="keyword">double</span> radius)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.radius = radius;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Circle [radius="</span> + radius + <span class="string">"]"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用泛型之前：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CircleComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//强制类型转换</span></span><br><span class="line">        Circle c1 = (Circle) o1;</span><br><span class="line">        Circle c2 = (Circle) o2;</span><br><span class="line">        <span class="keyword">return</span> Double.compare(c1.getRadius(), c2.getRadius());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//测试：</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestNoGeneric</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CircleComparator com = <span class="keyword">new</span> CircleComparator();</span><br><span class="line">        System.out.println(com.compare(<span class="keyword">new</span> Circle(<span class="number">1</span>), <span class="keyword">new</span> Circle(<span class="number">2</span>)));</span><br><span class="line"></span><br><span class="line">        System.out.println(com.compare(<span class="string">"圆1"</span>, <span class="string">"圆2"</span>));<span class="comment">//运行时异常：ClassCastException</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用泛型之后：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CircleComparator1</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Circle</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Circle o1, Circle o2)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//不再需要强制类型转换，代码更简洁</span></span><br><span class="line">        <span class="keyword">return</span> Double.compare(o1.getRadius(), o2.getRadius());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//测试类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestHasGeneric</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        CircleComparator1 com = <span class="keyword">new</span> CircleComparator1();</span><br><span class="line">        System.out.println(com.compare(<span class="keyword">new</span> Circle(<span class="number">1</span>), <span class="keyword">new</span> Circle(<span class="number">2</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//System.out.println(com.compare("圆1", "圆2"));</span></span><br><span class="line">        <span class="comment">//编译错误，因为"圆1", "圆2"不是Circle类型，是String类型，编译器提前报错，</span></span><br><span class="line">        <span class="comment">//而不是冒着风险在运行时再报错。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-练习"><a href="#2-2-2-练习" class="headerlink" title="2.2.2 练习"></a>2.2.2 练习</h4><p>（1）声明矩形类Rectangle，包含属性长和宽，属性私有化，提供有参构造、get/set方法、重写toString方法，提供求面积和周长的方法。</p>
<p>（2）矩形类Rectangle实现java.lang.Comparable<T>接口，并指定泛型为<Rectangle>，重写int compareTo(T t)方法，按照矩形面积比较大小，面积相等的，按照周长比较大小。</Rectangle></T></p>
<p>（3）在测试类中，创建Rectangle数组，并创建5个矩形对象</p>
<p>（4）调用Arrays的sort方法，给矩形数组排序，并显示排序前后的结果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.genericclass.use;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Rectangle</span>&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> length;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> width;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Rectangle</span><span class="params">(<span class="keyword">double</span> length, <span class="keyword">double</span> width)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">        <span class="keyword">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getLength</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLength</span><span class="params">(<span class="keyword">double</span> length)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getWidth</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setWidth</span><span class="params">(<span class="keyword">double</span> width)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//获取面积</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> length * width;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取周长</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">perimeter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * (length + width);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Rectangle&#123;"</span> +</span><br><span class="line">                <span class="string">"length="</span> + length +</span><br><span class="line">                <span class="string">", width="</span> + width +</span><br><span class="line">                <span class="string">",area ="</span> + area() +</span><br><span class="line">                <span class="string">",perimeter = "</span> + perimeter() +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Rectangle o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> compare = Double.compare(area(), o.area());</span><br><span class="line">        <span class="keyword">return</span> compare != <span class="number">0</span> ? compare : Double.compare(perimeter(),o.perimeter());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.genericclass.use;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestRectangle</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Rectangle[] arr = <span class="keyword">new</span> Rectangle[<span class="number">4</span>];</span><br><span class="line">        arr[<span class="number">0</span>] = <span class="keyword">new</span> Rectangle(<span class="number">6</span>,<span class="number">2</span>);</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="keyword">new</span> Rectangle(<span class="number">4</span>,<span class="number">3</span>);</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="keyword">new</span> Rectangle(<span class="number">12</span>,<span class="number">1</span>);</span><br><span class="line">        arr[<span class="number">3</span>] = <span class="keyword">new</span> Rectangle(<span class="number">5</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"排序之前："</span>);</span><br><span class="line">        <span class="keyword">for</span> (Rectangle rectangle : arr) &#123;</span><br><span class="line">            System.out.println(rectangle);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"排序之后："</span>);</span><br><span class="line">        <span class="keyword">for</span> (Rectangle rectangle : arr) &#123;</span><br><span class="line">            System.out.println(rectangle);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-相关使用说明"><a href="#2-3-相关使用说明" class="headerlink" title="2.3 相关使用说明"></a>2.3 相关使用说明</h3><ul>
<li><p>在创建集合对象的时候，可以指明泛型的类型。</p>
<p>具体格式为：List<Integer> list = new ArrayList<Integer>();</Integer></Integer></p>
</li>
<li><p>JDK7.0时，有新特性，可以简写为：</p>
<p>List<Integer> list = new ArrayList&lt;&gt;(); //类型推断</Integer></p>
</li>
<li><p>泛型，也称为泛型参数，即参数的类型，只能使用引用数据类型进行赋值。（不能使用基本数据类型，可以使用包装类替换）</p>
</li>
<li><p>集合声明时，声明泛型参数。在使用集合时，可以具体指明泛型的类型。一旦指明，类或接口内部，凡是使用泛型参数的位置，都指定为具体的参数类型。如果没有指明的话，看做是Object类型。</p>
</li>
</ul>
<h2 id="3-自定义泛型结构"><a href="#3-自定义泛型结构" class="headerlink" title="3. 自定义泛型结构"></a>3. 自定义泛型结构</h2><h3 id="3-1-泛型的基础说明"><a href="#3-1-泛型的基础说明" class="headerlink" title="3.1 泛型的基础说明"></a>3.1 泛型的基础说明</h3><p><strong>1、&lt;类型&gt;这种语法形式就叫泛型。</strong></p>
<ul>
<li><p><strong>&lt;类型&gt;</strong>的形式我们称为<strong>类型参数</strong>，这里的”类型”习惯上使用T表示，是Type的缩写。即：<T>。</T></p>
</li>
<li><p><T>：代表未知的数据类型，我们可以指定为<String>，<Integer>，<Circle>等。</Circle></Integer></String></T></p>
<ul>
<li>类比方法的参数的概念，我们把<T>，称为类型形参，将<Circle>称为类型实参，有助于我们理解泛型</Circle></T></li>
</ul>
</li>
<li><p>这里的T，可以替换成K，V等任意字母。</p>
</li>
</ul>
<p><strong>2、在哪里可以声明类型变量&lt;T&gt;</strong></p>
<ul>
<li>声明类或接口时，在类名或接口名后面声明泛型类型，我们把这样的类或接口称为<code>泛型类</code>或<code>泛型接口</code>。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">【修饰符】 <span class="class"><span class="keyword">class</span> 类名&lt;类型变量列表&gt; 【<span class="keyword">extends</span> 父类】 【<span class="keyword">implements</span> 接口们】</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">【修饰符】 <span class="class"><span class="keyword">interface</span> 接口名&lt;类型变量列表&gt; 【<span class="keyword">implements</span> 接口们】</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//例如：</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span>&lt;<span class="title">E</span>&gt;    </span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>声明方法时，在【修饰符】与返回值类型之间声明类型变量，我们把声明了类型变量的方法，称为泛型方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] &lt;类型变量列表&gt; 返回值类型 方法名([形参列表])[<span class="keyword">throws</span> 异常列表]&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//例如：java.util.Arrays类中的</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">List&lt;T&gt; <span class="title">asList</span><span class="params">(T... a)</span></span>&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-自定义泛型类或泛型接口"><a href="#3-2-自定义泛型类或泛型接口" class="headerlink" title="3.2 自定义泛型类或泛型接口"></a>3.2 自定义泛型类或泛型接口</h3><p>当我们在类或接口中定义某个成员时，该成员的相关类型是不确定的，而这个类型需要在使用这个类或接口时才可以确定，那么我们可以使用泛型类、泛型接口。</p>
<h4 id="3-2-1-说明"><a href="#3-2-1-说明" class="headerlink" title="3.2.1 说明"></a>3.2.1 说明</h4><p>① 我们在声明完自定义泛型类以后，可以在类的内部（比如：属性、方法、构造器中）使用类的泛型。</p>
<p>② 我们在创建自定义泛型类的对象时，可以指明泛型参数类型。一旦指明，内部凡是使用类的泛型参数的位置，都具体化为指定的类的泛型类型。</p>
<p>③ 如果在创建自定义泛型类的对象时，没有指明泛型参数类型，那么泛型将被擦除，泛型对应的类型均按照Object处理，但不等价于Object。</p>
<ul>
<li>经验：泛型要使用一路都用。要不用，一路都不要用。</li>
</ul>
<p>④ 泛型的指定中必须使用引用数据类型。不能使用基本数据类型，此时只能使用包装类替换。</p>
<p>⑤ 除创建泛型类对象外，子类继承泛型类时、实现类实现泛型接口时，也可以确定泛型结构中的泛型参数。</p>
<p>如果我们在给泛型类提供子类时，子类也不确定泛型的类型，则可以继续使用泛型参数。</p>
<p>我们还可以在现有的父类的泛型参数的基础上，新增泛型参数。</p>
<h4 id="3-2-2-注意"><a href="#3-2-2-注意" class="headerlink" title="3.2.2 注意"></a>3.2.2 注意</h4><p>① 泛型类可能有多个参数，此时应将多个参数一起放在尖括号内。比如：&lt;E1,E2,E3&gt;</p>
<p>② JDK7.0 开始，泛型的简化操作：ArrayList<Fruit> flist = new ArrayList&lt;&gt;();</Fruit></p>
<p>③ 如果泛型结构是一个接口或抽象类，则不可创建泛型类的对象。</p>
<p>④ 不能使用new E[]。但是可以：E[] elements = (E[])new Object[capacity];</p>
<p>​        参考：ArrayList源码中声明：Object[] elementData，而非泛型参数类型数组。</p>
<p>⑤ 在类/接口上声明的泛型，在本类或本接口中即代表某种类型，但不可以在静态方法中使用类的泛型。</p>
<p>⑥ 异常类不能是带泛型的。</p>
<h4 id="3-2-2-举例"><a href="#3-2-2-举例" class="headerlink" title="3.2.2 举例"></a>3.2.2 举例</h4><p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// 使用T类型定义变量</span></span><br><span class="line">    <span class="keyword">private</span> T info;</span><br><span class="line">    <span class="comment">// 使用T类型定义一般方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfo</span><span class="params">(T info)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.info = info;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 使用T类型定义构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(T info)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.info = info;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类不保留父类的泛型</span></span><br><span class="line"><span class="comment">// 1)没有类型 擦除</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son1</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;<span class="comment">// 等价于class Son extends Father&lt;Object,Object&gt;&#123;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2)具体类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son2</span> <span class="keyword">extends</span> <span class="title">Father</span>&lt;<span class="title">Integer</span>, <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类保留父类的泛型</span></span><br><span class="line"><span class="comment">// 1)全部保留</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son3</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>&gt; <span class="keyword">extends</span> <span class="title">Father</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2)部分保留</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son4</span>&lt;<span class="title">T2</span>&gt; <span class="keyword">extends</span> <span class="title">Father</span>&lt;<span class="title">Integer</span>, <span class="title">T2</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类不保留父类的泛型</span></span><br><span class="line"><span class="comment">// 1)没有类型 擦除</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span>&lt;<span class="title">A</span>, <span class="title">B</span>&gt; <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;<span class="comment">//等价于class Son extends Father&lt;Object,Object&gt;&#123;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2)具体类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son2</span>&lt;<span class="title">A</span>, <span class="title">B</span>&gt; <span class="keyword">extends</span> <span class="title">Father</span>&lt;<span class="title">Integer</span>, <span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类保留父类的泛型</span></span><br><span class="line"><span class="comment">// 1)全部保留</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son3</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>, <span class="title">A</span>, <span class="title">B</span>&gt; <span class="keyword">extends</span> <span class="title">Father</span>&lt;<span class="title">T1</span>, <span class="title">T2</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2)部分保留</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son4</span>&lt;<span class="title">T2</span>, <span class="title">A</span>, <span class="title">B</span>&gt; <span class="keyword">extends</span> <span class="title">Father</span>&lt;<span class="title">Integer</span>, <span class="title">T2</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-2-3-练习"><a href="#3-2-3-练习" class="headerlink" title="3.2.3 练习"></a>3.2.3 练习</h4><p><strong>练习1：</strong></p>
<p>声明一个学生类，该学生包含姓名、成绩，而此时学生的成绩类型不确定，为什么呢，因为，语文老师希望成绩是“优秀”、“良好”、“及格”、“不及格”，数学老师希望成绩是89.5, 65.0，英语老师希望成绩是’A’,’B’,’C’,’D’,’E’。那么我们在设计这个学生类时，就可以使用泛型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span>&lt;<span class="title">E</span>&gt; </span>&#123;  <span class="comment">//其实把E当做一个真实的类思考的话 其实和普通类一样!!</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> E grade;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, E grade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> E <span class="title">getGrade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGrade</span><span class="params">(E grade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student&#123;"</span> +<span class="string">"name='"</span> + name + <span class="string">'\''</span> +<span class="string">", grade="</span> + grade +<span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//语文老师</span></span><br><span class="line">        Student&lt;String&gt; s1=<span class="keyword">new</span> Student&lt;String&gt;(<span class="string">"宋亚翔"</span>,<span class="string">"优秀"</span>);  <span class="comment">//其实可以Student s1=new Student("xx","xx");</span></span><br><span class="line">        Student s2=<span class="keyword">new</span> Student&lt;&gt;(<span class="string">"宋亚翔"</span>,<span class="string">"优秀"</span>);</span><br><span class="line">        Student s3=<span class="keyword">new</span> Student&lt;&gt;(<span class="string">"宋亚翔"</span>,<span class="string">"优秀"</span>);</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        System.out.println(s3);</span><br><span class="line">        <span class="comment">//数学老师</span></span><br><span class="line">        Student&lt;Double&gt; s11=<span class="keyword">new</span> Student&lt;Double&gt;(<span class="string">"李四"</span>,<span class="number">88.8</span>);</span><br><span class="line">        Student&lt;Double&gt; s12=<span class="keyword">new</span> Student&lt;Double&gt;(<span class="string">"李四"</span>,<span class="number">68.5</span>);</span><br><span class="line">        Student&lt;Double&gt; s13=<span class="keyword">new</span> Student&lt;Double&gt;(<span class="string">"李四"</span>,<span class="number">65.0</span>);</span><br><span class="line">        System.out.println(s11);</span><br><span class="line">        System.out.println(s12);</span><br><span class="line">        System.out.println(s13);</span><br><span class="line">        <span class="comment">//英语老师</span></span><br><span class="line">        Student&lt;Character&gt; s21=<span class="keyword">new</span> Student&lt;Character&gt;(<span class="string">"李四"</span>,<span class="string">'A'</span>);</span><br><span class="line">        Student&lt;Character&gt; s22=<span class="keyword">new</span> Student&lt;Character&gt;(<span class="string">"李四"</span>,<span class="string">'B'</span>);</span><br><span class="line">        Student&lt;Character&gt; s23=<span class="keyword">new</span> Student&lt;Character&gt;(<span class="string">"李四"</span>,<span class="string">'C'</span>);</span><br><span class="line">        System.out.println(s21);</span><br><span class="line">        System.out.println(s22);</span><br><span class="line">        System.out.println(s23);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">Student&#123;name=<span class="string">'宋亚翔'</span>, grade=优秀&#125;</span><br><span class="line">Student&#123;name=<span class="string">'宋亚翔'</span>, grade=优秀&#125;</span><br><span class="line">Student&#123;name=<span class="string">'宋亚翔'</span>, grade=优秀&#125;</span><br><span class="line">Student&#123;name=<span class="string">'李四'</span>, grade=<span class="number">88.8</span>&#125;</span><br><span class="line">Student&#123;name=<span class="string">'李四'</span>, grade=<span class="number">68.5</span>&#125;</span><br><span class="line">Student&#123;name=<span class="string">'李四'</span>, grade=<span class="number">65.0</span>&#125;</span><br><span class="line">Student&#123;name=<span class="string">'李四'</span>, grade=A&#125;</span><br><span class="line">Student&#123;name=<span class="string">'李四'</span>, grade=B&#125;</span><br><span class="line">Student&#123;name=<span class="string">'李四'</span>, grade=C&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">定义个泛型类 DAO&lt;T&gt;，在其中定义一个Map 成员变量，Map 的键为 String 类型，值为 T 类型。</span><br><span class="line"></span><br><span class="line">分别创建以下方法：</span><br><span class="line">public void save(String id,T entity)： 保存 T 类型的对象到 Map 成员变量中</span><br><span class="line">public T get(String id)：从 map 中获取 id 对应的对象</span><br><span class="line">public void update(String id,T entity)：替换 map 中key为id的内容,改为 entity 对象</span><br><span class="line">public List&lt;T&gt; list()：返回 map 中存放的所有 T 对象</span><br><span class="line">public void delete(String id)：删除指定 id 对象</span><br><span class="line"></span><br><span class="line">定义一个 User 类：</span><br><span class="line">该类包含：private成员变量（int类型） id，age；（String 类型）name。</span><br><span class="line"></span><br><span class="line">定义一个测试类：</span><br><span class="line">创建 DAO 类的对象， 分别调用其 save、get、update、list、delete 方法来操作 User 对象，</span><br><span class="line">使用 Junit 单元测试类进行测试。</span><br></pre></td></tr></table></figure>

<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DAO</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,T&gt; map=<span class="keyword">new</span> HashMap&lt;String,T&gt;();;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//保存 T 类型的对象到 Map 成员变量中</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(String id,T entity)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!map.containsKey(id))&#123;</span><br><span class="line">            map.put(id,entity);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//从 map 中获取 id 对应的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">get</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//替换 map 中key为id的内容,改为 entity 对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(String id,T entity)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(id))&#123;</span><br><span class="line">            map.put(id,entity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回 map 中存放的所有 T 对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;T&gt; <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Collection&lt;T&gt; values = map.values();</span><br><span class="line">        ArrayList&lt;T&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(values);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//删除指定 id 对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(String id)</span></span>&#123;</span><br><span class="line">        map.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(<span class="keyword">int</span> id, <span class="keyword">int</span> age, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +<span class="string">"id="</span> + id +<span class="string">", age="</span> + age +<span class="string">", name='"</span> + name + <span class="string">'\''</span> +<span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        User user = (User) o;</span><br><span class="line">        <span class="keyword">return</span> id == user.id &amp;&amp; age == user.age &amp;&amp; Objects.equals(name, user.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(id, age, name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DAOTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//DAO传入的是一个User类</span></span><br><span class="line">        DAO&lt;User&gt; dao = <span class="keyword">new</span> DAO&lt;&gt;();</span><br><span class="line">		<span class="comment">//set方法  new User传入</span></span><br><span class="line">        dao.save(<span class="string">"1001"</span>,<span class="keyword">new</span> User(<span class="number">1</span>,<span class="number">34</span>,<span class="string">"曹操"</span>));</span><br><span class="line">        dao.save(<span class="string">"1002"</span>,<span class="keyword">new</span> User(<span class="number">2</span>,<span class="number">33</span>,<span class="string">"刘备"</span>));</span><br><span class="line">        dao.save(<span class="string">"1003"</span>,<span class="keyword">new</span> User(<span class="number">3</span>,<span class="number">24</span>,<span class="string">"孙权"</span>));</span><br><span class="line">			</span><br><span class="line">        dao.update(<span class="string">"1002"</span>,<span class="keyword">new</span> User(<span class="number">2</span>,<span class="number">23</span>,<span class="string">"刘禅"</span>));</span><br><span class="line"></span><br><span class="line">        dao.delete(<span class="string">"1003"</span>);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; list = dao.list();</span><br><span class="line">        <span class="keyword">for</span>(User u : list)&#123;</span><br><span class="line">            System.out.println(u);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310292011398.png" alt="image-20231029201142321"></p>
<h3 id="3-3-自定义泛型方法"><a href="#3-3-自定义泛型方法" class="headerlink" title="3.3 自定义泛型方法"></a>3.3 自定义泛型方法</h3><p>如果我们定义类、接口时没有使用&lt;泛型参数&gt;，但是某个方法形参类型不确定时，这个方法可以单独定义&lt;泛型参数&gt;。</p>
<h4 id="3-3-1-说明"><a href="#3-3-1-说明" class="headerlink" title="3.3.1 说明"></a>3.3.1 说明</h4><ul>
<li>泛型方法的格式：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[访问权限]  &lt;泛型&gt;  返回值类型  方法名([泛型标识 参数名称])  [抛出的异常]&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>方法，也可以被泛型化，与其所在的类是否是泛型类没有关系。</li>
<li>泛型方法中的泛型参数在方法被调用时确定。</li>
<li>泛型方法可以根据需要，声明为static的。</li>
</ul>
<h4 id="3-3-2-举例"><a href="#3-3-2-举例" class="headerlink" title="3.3.2 举例"></a>3.3.2 举例</h4><p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DAO</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> &lt;E&gt; <span class="function">E <span class="title">get</span><span class="params">(<span class="keyword">int</span> id, E e)</span> </span>&#123;</span><br><span class="line">        E result = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">fromArrayToCollection</span><span class="params">(T[] a, Collection&lt;T&gt; c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (T o : a) &#123;</span><br><span class="line">        c.add(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Object[] ao = <span class="keyword">new</span> Object[<span class="number">100</span>];</span><br><span class="line">    Collection&lt;Object&gt; co = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line">    fromArrayToCollection(ao, co);</span><br><span class="line"></span><br><span class="line">    String[] sa = <span class="keyword">new</span> String[<span class="number">20</span>];</span><br><span class="line">    Collection&lt;String&gt; cs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    fromArrayToCollection(sa, cs);</span><br><span class="line"></span><br><span class="line">    Collection&lt;Double&gt; cd = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="comment">// 下面代码中T是Double类，但sa是String类型，编译错误。</span></span><br><span class="line">    <span class="comment">// fromArrayToCollection(sa, cd);</span></span><br><span class="line">    <span class="comment">// 下面代码中T是Object类型，sa是String类型，可以赋值成功。</span></span><br><span class="line">    fromArrayToCollection(sa, co);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArrays</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(T[] arr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length-i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(((Comparable&lt;T&gt;)arr[j]).compareTo(arr[j+<span class="number">1</span>])&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    T temp = arr[j];</span><br><span class="line">                    arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                    arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyArraysTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="comment">//		MyArrays.sort(arr);//错误的，因为int[]不是对象数组</span></span><br><span class="line"></span><br><span class="line">        String[] strings = &#123;<span class="string">"hello"</span>,<span class="string">"java"</span>,<span class="string">"song"</span>&#125;;</span><br><span class="line">        MyArrays.sort(strings);</span><br><span class="line">        System.out.println(Arrays.toString(strings));</span><br><span class="line"></span><br><span class="line">        Circle[] circles = &#123;<span class="keyword">new</span> Circle(<span class="number">2.0</span>),<span class="keyword">new</span> Circle(<span class="number">1.2</span>),<span class="keyword">new</span> Circle(<span class="number">3.0</span>)&#125;;</span><br><span class="line">        MyArrays.sort(circles); <span class="comment">//编译通过，运行报错，因为Circle没有实现Comparable接口</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-3-3-练习"><a href="#3-3-3-练习" class="headerlink" title="3.3.3 练习"></a>3.3.3 练习</h4><p>练习1: 泛型方法</p>
<p>编写一个泛型方法，实现任意引用类型数组指定位置元素交换。</p>
<p>public static <E> void method1( E[] e,int a,int b)</E></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodTest1</span> </span>&#123;</span><br><span class="line">    <span class="comment">//使用泛型方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">swap</span><span class="params">(T[] arr,<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        T temp=arr[a];</span><br><span class="line">        arr[a]=arr[b];</span><br><span class="line">        arr[b]=temp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Integer[] arr=<span class="keyword">new</span> Integer[]&#123;<span class="number">123</span>,<span class="number">423</span>,<span class="number">54</span>,<span class="number">7655</span>,<span class="number">3132</span>,<span class="number">234</span>,<span class="number">12</span>,<span class="number">12</span>,<span class="number">32</span>&#125;;</span><br><span class="line">        System.out.println(<span class="string">"交换前:"</span>);</span><br><span class="line">        <span class="keyword">for</span>(Integer temp:arr)&#123;</span><br><span class="line">            System.out.print(temp+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="comment">//调用方法</span></span><br><span class="line">        swap(arr,<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line">        System.out.println(<span class="string">"交换后:"</span>);</span><br><span class="line">        <span class="keyword">for</span>(Integer temp:arr)&#123;</span><br><span class="line">            System.out.print(temp+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310292017032.png" alt="image-20231029201755987"></p>
<p>练习2: 泛型方法</p>
<p>编写一个泛型方法，接收一个任意引用类型的数组，并反转数组中的所有元素</p>
<p>public static <E> void method2( E[] e)</E></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MethodTest1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">swapAll</span><span class="params">(T[] arr)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right=arr.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            T temp=arr[left];</span><br><span class="line">            arr[left]=arr[right];</span><br><span class="line">            arr[right]=temp;</span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Integer[] arr=<span class="keyword">new</span> Integer[]&#123;<span class="number">123</span>,<span class="number">423</span>,<span class="number">54</span>,<span class="number">7655</span>,<span class="number">3132</span>,<span class="number">234</span>,<span class="number">12</span>,<span class="number">12</span>,<span class="number">32</span>&#125;;</span><br><span class="line">        System.out.println(<span class="string">"交换前:"</span>);</span><br><span class="line">        <span class="keyword">for</span>(Integer temp:arr)&#123;</span><br><span class="line">            System.out.print(temp+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="comment">//调用方法</span></span><br><span class="line">        swapAll(arr);</span><br><span class="line">        System.out.println(<span class="string">"反转所有元素:"</span>);</span><br><span class="line">        <span class="keyword">for</span>(Integer temp:arr)&#123;</span><br><span class="line">            System.out.print(temp+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310292022650.png" alt="image-20231029202242605"></p>
<h2 id="4-泛型在继承上的体现"><a href="#4-泛型在继承上的体现" class="headerlink" title="4. 泛型在继承上的体现"></a>4. 泛型在继承上的体现</h2><p>如果B是A的一个子类型（子类或者子接口），而G是具有泛型声明的类或接口，G<B>并不是G<A>的子类型！</A></B></p>
<p>比如：String是Object的子类，但是List<String>并不是List<Object>的子类。</Object></String></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281103640.png" alt="image-20220411003422259" style="zoom:67%;">

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGenericAndSubClass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Person[] persons = <span class="keyword">null</span>;</span><br><span class="line">    Man[] mans = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//Person[] 是 Man[] 的父类</span></span><br><span class="line">    persons = mans;</span><br><span class="line"></span><br><span class="line">    Person p = mans[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在泛型的集合上</span></span><br><span class="line">    List&lt;Person&gt; personList = <span class="keyword">null</span>;</span><br><span class="line">    List&lt;Man&gt; manList = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//personList = manList;(报错)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>思考：对比如下两段代码有何不同：</strong></p>
<p>片段1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printCollection</span><span class="params">(Collection c)</span> </span>&#123;</span><br><span class="line">    Iterator i = c.iterator();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; c.size(); k++) &#123;</span><br><span class="line">        System.out.println(i.next());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>片段2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printCollection</span><span class="params">(Collection&lt;Object&gt; c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Object e : c) &#123;</span><br><span class="line">        System.out.println(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-通配符的使用"><a href="#5-通配符的使用" class="headerlink" title="5. 通配符的使用"></a>5. 通配符的使用</h2><p>当我们声明一个变量/形参时，这个变量/形参的类型是一个泛型类或泛型接口，例如：Comparator<T>类型，但是我们仍然无法确定这个泛型类或泛型接口的类型变量<T>的具体类型，此时我们考虑使用类型通配符 ? 。</T></T></p>
<h3 id="5-1-通配符的理解"><a href="#5-1-通配符的理解" class="headerlink" title="5.1 通配符的理解"></a>5.1 通配符的理解</h3><p>使用类型通配符：？ </p>
<p>比如：<code>List&lt;?&gt;</code>，<code>Map&lt;?,?&gt;</code></p>
<p>​            <code>List&lt;?&gt;</code>是<code>List&lt;String&gt;</code>、<code>List&lt;Object&gt;</code>等各种泛型List的父类。</p>
<h3 id="5-2-通配符的读与写"><a href="#5-2-通配符的读与写" class="headerlink" title="5.2 通配符的读与写"></a>5.2 通配符的读与写</h3><p><strong>写操作：</strong></p>
<p>将任意元素加入到其中不是类型安全的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Collection&lt;?&gt; c = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">c.add(<span class="keyword">new</span> Object()); <span class="comment">// 编译时错误</span></span><br></pre></td></tr></table></figure>

<p>因为我们不知道c的元素类型，我们不能向其中添加对象。add方法有类型参数E作为集合的元素类型。我们传给add的任何参数都必须是一个未知类型的子类。因为我们不知道那是什么类型，所以我们无法传任何东西进去。</p>
<p>唯一可以插入的元素是null，因为它是所有引用类型的默认值。</p>
<p><strong>读操作：</strong></p>
<p>另一方面，读取List&lt;?&gt;的对象list中的元素时，永远是安全的，因为不管 list 的真实类型是什么，它包含的都是Object。</p>
<p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestWildcard</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">m4</span><span class="params">(Collection&lt;?&gt; coll)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Object o : coll) &#123;</span><br><span class="line">            System.out.println(o);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    List&lt;?&gt; list = <span class="keyword">null</span>;</span><br><span class="line">    list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    list = <span class="keyword">new</span> ArrayList&lt;Double&gt;();</span><br><span class="line">    <span class="comment">// list.add(3);//编译不通过</span></span><br><span class="line">    list.add(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;String&gt; l1 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    List&lt;Integer&gt; l2 = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    l1.add(<span class="string">"尚硅谷"</span>);</span><br><span class="line">    l2.add(<span class="number">15</span>);</span><br><span class="line">    read(l1);</span><br><span class="line">    read(l2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(List&lt;?&gt; list)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (Object o : list) &#123;</span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-使用注意点"><a href="#5-3-使用注意点" class="headerlink" title="5.3 使用注意点"></a>5.3 使用注意点</h3><p>注意点1：编译错误：不能用在泛型方法声明上，返回值类型前面&lt;&gt;不能使用?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;?&gt; <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(ArrayList&lt;?&gt; list)</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意点2：编译错误：不能用在泛型类的声明上</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GenericTypeClass</span>&lt;?&gt;</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意点3：编译错误：不能用在创建对象上，右边属于创建集合对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;?&gt; list2 = <span class="keyword">new</span> ArrayList&lt;?&gt;();</span><br></pre></td></tr></table></figure>

<h3 id="5-4-有限制的通配符"><a href="#5-4-有限制的通配符" class="headerlink" title="5.4 有限制的通配符"></a>5.4 有限制的通配符</h3><ul>
<li><p><code>&lt;?&gt;</code></p>
<ul>
<li>允许所有泛型的引用调用</li>
</ul>
</li>
<li><p>通配符指定上限：<code>&lt;? extends 类/接口 &gt;</code></p>
<ul>
<li>使用时指定的类型必须是继承某个类，或者实现某个接口，即&lt;= </li>
</ul>
</li>
<li><p>通配符指定下限：<code>&lt;? super 类/接口 &gt;</code></p>
<ul>
<li>使用时指定的类型必须是操作的类或接口，或者是操作的类的父类或接口的父接口，即&gt;=</li>
</ul>
</li>
<li><p>说明：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;? extends Number&gt;     <span class="comment">//(无穷小 , Number]</span></span><br><span class="line"><span class="comment">//只允许泛型为Number及Number子类的引用调用</span></span><br><span class="line"></span><br><span class="line">&lt;? <span class="keyword">super</span> Number&gt;      <span class="comment">//[Number , 无穷大)</span></span><br><span class="line"><span class="comment">//只允许泛型为Number及Number父类的引用调用</span></span><br><span class="line"></span><br><span class="line">&lt;? extends Comparable&gt;</span><br><span class="line"><span class="comment">//只允许泛型为实现Comparable接口的实现类的引用调用</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>举例1</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">       List&lt;? extends Father&gt; list=<span class="keyword">null</span>;    <span class="comment">// ？≤ Father</span></span><br><span class="line">       List&lt;Object&gt; list1=<span class="keyword">null</span>;</span><br><span class="line">       List&lt;Father&gt; list2=<span class="keyword">null</span>;</span><br><span class="line">       List&lt;Son&gt; list3=<span class="keyword">null</span>;</span><br><span class="line">       <span class="comment">//list=list1;</span></span><br><span class="line">       list=list2;</span><br><span class="line">       list=list3;</span><br><span class="line">   &#125;</span><br><span class="line">  </span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3_1</span><span class="params">()</span></span>&#123;</span><br><span class="line">       List&lt;? extends Father&gt; list=<span class="keyword">null</span>;    <span class="comment">// ？≤ Father</span></span><br><span class="line">       List&lt;Father&gt; list1=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       list1.add(<span class="keyword">new</span> Father());</span><br><span class="line">       list=list1;</span><br><span class="line">       <span class="comment">//读取数据</span></span><br><span class="line">       Father father = list.get(<span class="number">0</span>);  <span class="comment">//最大是Father  那我就赋值Father</span></span><br><span class="line">       <span class="comment">//写入数据</span></span><br><span class="line">       list.add(<span class="keyword">null</span>);</span><br><span class="line">       list.add(<span class="keyword">new</span> Father());  <span class="comment">//属于是有上限，但是还是不知道？是谁   有可能总有左边的类型比你当前类型的小，那就跟强制类型一样，但是不知道强制类型给谁</span></span><br><span class="line">       list.add(<span class="keyword">new</span> Son());  <span class="comment">//属于是有上限，但是还是不知道？是谁  有可能总有左边的类型比你当前类型的小，那就跟强制类型一样，但是不知道强制类型给谁</span></span><br><span class="line">  </span><br><span class="line">   &#125;</span><br><span class="line">  </span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">       List&lt;? <span class="keyword">super</span> Father&gt; list=<span class="keyword">null</span>;  <span class="comment">// ？≥ Father</span></span><br><span class="line">       List&lt;Object&gt; list1=<span class="keyword">null</span>;</span><br><span class="line">       List&lt;Father&gt; list2=<span class="keyword">null</span>;</span><br><span class="line">       List&lt;Son&gt; list3=<span class="keyword">null</span>;</span><br><span class="line">       list=list1;</span><br><span class="line">       list=list2;</span><br><span class="line">       <span class="comment">//list=list3;</span></span><br><span class="line">   &#125;</span><br><span class="line">  </span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4_1</span><span class="params">()</span></span>&#123;</span><br><span class="line">       List&lt;? <span class="keyword">super</span> Father&gt; list=<span class="keyword">null</span>;  <span class="comment">// ？≥ Father</span></span><br><span class="line">       List&lt;Father&gt; list1=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">       list1.add(<span class="keyword">new</span> Father());</span><br><span class="line">       list=list1;</span><br><span class="line">       <span class="comment">//读取数据</span></span><br><span class="line">       Object object = list.get(<span class="number">0</span>);  <span class="comment">//最大是Object  那我就赋值Object</span></span><br><span class="line">       <span class="comment">//写入数据</span></span><br><span class="line">       list.add(<span class="keyword">null</span>);</span><br><span class="line">       list.add(<span class="keyword">new</span> Object());  <span class="comment">//属于有下限 但是如果你写Object 永远可能有左边比你小的，那么就跟强制类型一样，但是不知道强制类型给谁</span></span><br><span class="line">       list.add(<span class="keyword">new</span> Father());  <span class="comment">//属于是有下限  最高就写自己，可以让左边的所有子类写他(多态)</span></span><br><span class="line">       list.add(<span class="keyword">new</span> Son());  <span class="comment">//属于是有下限  子类可以写进父类(儿子可以跟父亲借钱，父亲不可以跟儿子借钱)</span></span><br><span class="line">  </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310300933858.png" alt="image-20231030093305716"></p>
</li>
<li><p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Collection&lt;Integer&gt; list1 = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">    Collection&lt;String&gt; list2 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">    Collection&lt;Number&gt; list3 = <span class="keyword">new</span> ArrayList&lt;Number&gt;();</span><br><span class="line">    Collection&lt;Object&gt; list4 = <span class="keyword">new</span> ArrayList&lt;Object&gt;();</span><br><span class="line">    </span><br><span class="line">    getElement1(list1);</span><br><span class="line">    getElement1(list2);<span class="comment">//报错</span></span><br><span class="line">    getElement1(list3);</span><br><span class="line">    getElement1(list4);<span class="comment">//报错</span></span><br><span class="line">  </span><br><span class="line">    getElement2(list1);<span class="comment">//报错</span></span><br><span class="line">    getElement2(list2);<span class="comment">//报错</span></span><br><span class="line">    getElement2(list3);</span><br><span class="line">    getElement2(list4);</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 泛型的上限：此时的泛型?，必须是Number类型或者Number类型的子类</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getElement1</span><span class="params">(Collection&lt;? extends Number&gt; coll)</span></span>&#123;&#125;</span><br><span class="line"><span class="comment">// 泛型的下限：此时的泛型?，必须是Number类型或者Number类型的父类</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getElement2</span><span class="params">(Collection&lt;? <span class="keyword">super</span> Number&gt; coll)</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>举例3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printCollection1</span><span class="params">(Collection&lt;? extends Person&gt; coll)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Iterator只能用Iterator&lt;?&gt;或Iterator&lt;? extends Person&gt;.why?</span></span><br><span class="line">    Iterator&lt;?&gt; iterator = coll.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        Person per = iterator.next();</span><br><span class="line">        System.out.println(per);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printCollection2</span><span class="params">(Collection&lt;? <span class="keyword">super</span> Person&gt; coll)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//Iterator只能用Iterator&lt;?&gt;或Iterator&lt;? super Person&gt;.why?</span></span><br><span class="line">    Iterator&lt;?&gt; iterator = coll.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        Object obj = iterator.next();</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>举例4:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//List&lt;Object&gt; list1 = null;</span></span><br><span class="line">    List&lt;Person&gt; list2 = <span class="keyword">new</span> ArrayList&lt;Person&gt;();</span><br><span class="line">    <span class="comment">//List&lt;Student&gt; list3 = null;</span></span><br><span class="line"></span><br><span class="line">    List&lt;? extends Person&gt; list4 = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    list2.add(<span class="keyword">new</span> Person());</span><br><span class="line">    list4 = list2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读取：可以读</span></span><br><span class="line">    Person p1 = list4.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//写入：除了null之外，不能写入</span></span><br><span class="line">    list4.add(<span class="keyword">null</span>);</span><br><span class="line">    <span class="comment">//        list4.add(new Person());</span></span><br><span class="line">    <span class="comment">//        list4.add(new Student());</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//List&lt;Object&gt; list1 = null;</span></span><br><span class="line">    List&lt;Person&gt; list2 = <span class="keyword">new</span> ArrayList&lt;Person&gt;();</span><br><span class="line">    <span class="comment">//List&lt;Student&gt; list3 = null;</span></span><br><span class="line"></span><br><span class="line">    List&lt;? <span class="keyword">super</span> Person&gt; list5 = <span class="keyword">null</span>;</span><br><span class="line">    list2.add(<span class="keyword">new</span> Person());</span><br><span class="line"></span><br><span class="line">    list5 = list2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//读取：可以实现</span></span><br><span class="line">    Object obj = list5.get(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//写入:可以写入Person及Person子类的对象</span></span><br><span class="line">    list5.add(<span class="keyword">new</span> Person());</span><br><span class="line">    list5.add(<span class="keyword">new</span> Student());</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-5-泛型应用举例"><a href="#5-5-泛型应用举例" class="headerlink" title="5.5 泛型应用举例"></a>5.5 泛型应用举例</h3><p><strong>举例1：泛型嵌套</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    HashMap&lt;String, ArrayList&lt;Citizen&gt;&gt; map = <span class="keyword">new</span> HashMap&lt;String, ArrayList&lt;Citizen&gt;&gt;();</span><br><span class="line">    ArrayList&lt;Citizen&gt; list = <span class="keyword">new</span> ArrayList&lt;Citizen&gt;();</span><br><span class="line">    list.add(<span class="keyword">new</span> Citizen(<span class="string">"赵又廷"</span>));</span><br><span class="line">    list.add(<span class="keyword">new</span> Citizen(<span class="string">"高圆圆"</span>));</span><br><span class="line">    list.add(<span class="keyword">new</span> Citizen(<span class="string">"瑞亚"</span>));</span><br><span class="line">    map.put(<span class="string">"赵又廷"</span>, list);</span><br><span class="line">	<span class="comment">//对map的entrySet集合进行迭代器遍历</span></span><br><span class="line">    Set&lt;Entry&lt;String, ArrayList&lt;Citizen&gt;&gt;&gt; entrySet = map.entrySet();</span><br><span class="line">    Iterator&lt;Entry&lt;String, ArrayList&lt;Citizen&gt;&gt;&gt; iterator = entrySet.iterator();</span><br><span class="line">    <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">        Entry&lt;String, ArrayList&lt;Citizen&gt;&gt; entry = iterator.next();</span><br><span class="line">        String key = entry.getKey();</span><br><span class="line">        ArrayList&lt;Citizen&gt; value = entry.getValue();</span><br><span class="line">        System.out.println(<span class="string">"户主："</span> + key);</span><br><span class="line">        System.out.println(<span class="string">"家庭成员："</span> + value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>举例2：个人信息设计</strong></p>
<p>用户在设计类的时候往往会使用类的关联关系，例如，一个人中可以定义一个信息的属性，但是一个人可能有各种各样的信息（如联系方式、基本信息等），所以此信息属性的类型就可以通过泛型进行声明，然后只要设计相应的信息类即可。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281104400.png" alt="image-20220411004301224" style="zoom:67%;">

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Info</span></span>&#123;		<span class="comment">// 只有此接口的子类才是表示人的信息</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Contact</span> <span class="keyword">implements</span> <span class="title">Info</span></span>&#123;	<span class="comment">// 表示联系方式</span></span><br><span class="line">	<span class="keyword">private</span> String address ;	<span class="comment">// 联系地址</span></span><br><span class="line">	<span class="keyword">private</span> String telephone ;	<span class="comment">// 联系方式</span></span><br><span class="line">	<span class="keyword">private</span> String zipcode ;	<span class="comment">// 邮政编码</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Contact</span><span class="params">(String address,String telephone,String zipcode)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.address = address;</span><br><span class="line">		<span class="keyword">this</span>.telephone = telephone;</span><br><span class="line">		<span class="keyword">this</span>.zipcode = zipcode;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAddress</span><span class="params">(String address)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.address = address ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTelephone</span><span class="params">(String telephone)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.telephone = telephone ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setZipcode</span><span class="params">(String zipcode)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.zipcode = zipcode;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getAddress</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.address ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getTelephone</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.telephone ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getZipcode</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.zipcode;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Contact [address="</span> + address + <span class="string">", telephone="</span> + telephone</span><br><span class="line">				+ <span class="string">", zipcode="</span> + zipcode + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//实现Info接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Introduction</span> <span class="keyword">implements</span> <span class="title">Info</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name ;		<span class="comment">// 姓名</span></span><br><span class="line">	<span class="keyword">private</span> String sex ;		<span class="comment">// 性别</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age ;			<span class="comment">// 年龄</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Introduction</span><span class="params">(String name,String sex,<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.sex = sex;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSex</span><span class="params">(String sex)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.sex = sex ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.name ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getSex</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.sex ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.age ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Introduction [name="</span> + name + <span class="string">", sex="</span> + sex + <span class="string">", age="</span> + age</span><br><span class="line">				+ <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Info</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">private</span> T info ;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(T info)</span></span>&#123;		<span class="comment">// 通过构造器设置信息属性内容</span></span><br><span class="line">		<span class="keyword">this</span>.info = info;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfo</span><span class="params">(T info)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.info = info ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> info ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Person [info="</span> + info + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericPerson</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Person&lt;Contact&gt; per = <span class="keyword">null</span> ;		<span class="comment">// 声明Person对象</span></span><br><span class="line">		per = <span class="keyword">new</span> Person&lt;Contact&gt;(<span class="keyword">new</span> Contact(<span class="string">"北京市"</span>,<span class="string">"01088888888"</span>,<span class="string">"102206"</span>)) ;</span><br><span class="line">		System.out.println(per);</span><br><span class="line">		</span><br><span class="line">		Person&lt;Introduction&gt; per2 = <span class="keyword">null</span> ;		<span class="comment">// 声明Person对象</span></span><br><span class="line">		per2 = <span class="keyword">new</span> Person&lt;Introduction&gt;(<span class="keyword">new</span> Introduction(<span class="string">"李雷"</span>,<span class="string">"男"</span>,<span class="number">24</span>));</span><br><span class="line">		System.out.println(per2) ;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>






      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JAVA-集合框架" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/24/JAVA-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/" class="article-date">
      <time datetime="2023-10-24T11:33:56.000Z" itemprop="datePublished">2023-10-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/24/JAVA-%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6/">JAVA-集合框架</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="第12章-集合框架"><a href="#第12章-集合框架" class="headerlink" title="第12章_集合框架"></a>第12章_集合框架</h1><h2 id="本章专题与脉络"><a href="#本章专题与脉络" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241947159.png" alt="第3阶段：Java高级应用-第12章" style="zoom:50%;">

<hr>
<h2 id="1-集合框架概述"><a href="#1-集合框架概述" class="headerlink" title="1. 集合框架概述"></a>1. 集合框架概述</h2><h3 id="1-1-生活中的容器"><a href="#1-1-生活中的容器" class="headerlink" title="1.1 生活中的容器"></a>1.1 生活中的容器</h3><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241946184.png" alt="image-20220523190743146" style="zoom: 67%;">

<h3 id="1-2-数组的特点与弊端"><a href="#1-2-数组的特点与弊端" class="headerlink" title="1.2 数组的特点与弊端"></a>1.2 数组的特点与弊端</h3><ul>
<li>一方面，面向对象语言对事物的体现都是以对象的形式，为了方便对多个对象的操作，就要对对象进行存储。</li>
<li>另一方面，使用数组存储对象方面具有<code>一些弊端</code>，而Java 集合就像一种容器，可以<code>动态地</code>把多个对象的引用放入容器中。</li>
<li>数组在内存存储方面的<code>特点</code>：<ul>
<li>数组初始化以后，长度就确定了。</li>
<li>数组中的添加的元素是依次紧密排列的，有序的，可以重复的。</li>
<li>数组声明的类型，就决定了进行元素初始化时的类型。不是此类型的变量，就不能添加。</li>
<li>可以存储基本数据类型值，也可以存储引用数据类型的变量</li>
</ul>
</li>
<li>数组在存储数据方面的<code>弊端</code>：<ul>
<li>数组初始化以后，长度就不可变了，不便于扩展</li>
<li>数组中提供的属性和方法少，不便于进行添加、删除、插入、获取元素个数等操作，且效率不高。</li>
<li>数组存储数据的特点单一，只能存储有序的、可以重复的数据</li>
</ul>
</li>
<li>Java 集合框架中的类可以用于存储多个<code>对象</code>，还可用于保存具有<code>映射关系</code>的关联数组。</li>
</ul>
<h3 id="1-3-Java集合框架体系"><a href="#1-3-Java集合框架体系" class="headerlink" title="1.3 Java集合框架体系"></a>1.3 Java集合框架体系</h3><p>Java 集合可分为 Collection 和 Map 两大体系：</p>
<ul>
<li><p>Collection接口：用于存储一个一个的数据，也称<code>单列数据集合</code>。</p>
<ul>
<li>List子接口：用来存储有序的、可以重复的数据（主要用来替换数组，”动态”数组）<ul>
<li>实现类：ArrayList(主要实现类)、LinkedList、Vector</li>
</ul>
</li>
</ul>
</li>
<li><p>Set子接口：用来存储无序的、不可重复的数据（类似于高中讲的”集合”）</p>
<ul>
<li>实现类：HashSet(主要实现类)、LinkedHashSet、TreeSet</li>
</ul>
</li>
<li><p>Map接口：用于存储具有映射关系“key-value对”的集合，即一对一对的数据，也称<code>双列数据集合</code>。(类似于高中的函数、映射。(x1,y1),(x2,y2) —&gt; y = f(x) )</p>
<ul>
<li>HashMap(主要实现类)、LinkedHashMap、TreeMap、Hashtable、Properties</li>
</ul>
</li>
<li><p>JDK提供的集合API位于java.util包内</p>
</li>
<li><p>图示：集合框架全图</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242028899.png" alt></p>
<ul>
<li>简图1：<strong>Collection接口继承树</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242028810.png" alt="image-20220407203244029" style="zoom: 67%;">

<ul>
<li>简图2：<strong>Map接口继承树</strong></li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242028693.png" alt="image-20220407203412665" style="zoom: 67%;">

<h3 id="1-4-集合的使用场景"><a href="#1-4-集合的使用场景" class="headerlink" title="1.4 集合的使用场景"></a>1.4 集合的使用场景</h3><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242028236.png" alt=" "></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242028495.png" alt="第12章_集合的使用场景"></p>
<h2 id="2-Collection接口及方法"><a href="#2-Collection接口及方法" class="headerlink" title="2. Collection接口及方法"></a>2. Collection接口及方法</h2><ul>
<li>JDK不提供此接口的任何直接实现，而是提供更具体的子接口（如：Set和List）去实现。</li>
<li>Collection 接口是 List和Set接口的父接口，该接口里定义的方法既可用于操作 Set 集合，也可用于操作 List 集合。方法如下：</li>
</ul>
<h3 id="2-1-添加"><a href="#2-1-添加" class="headerlink" title="2.1 添加"></a>2.1 添加</h3><p>（1）add(E obj)：添加元素对象到当前集合中<br>（2）addAll(Collection other)：添加other集合中的所有元素对象到当前集合中，即this = this ∪ other</p>
<p>注意：add和addAll的区别</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">   Collection coll=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="comment">//添加</span></span><br><span class="line">   <span class="comment">//1.add()</span></span><br><span class="line">   coll.add(<span class="string">"AA"</span>);</span><br><span class="line">   coll.add(<span class="number">123</span>); <span class="comment">//自动装箱为包装类</span></span><br><span class="line">   coll.add(<span class="string">"桑鬼谷"</span>);</span><br><span class="line">   coll.add(<span class="string">"尚硅谷"</span>);</span><br><span class="line">   coll.add(<span class="keyword">new</span> Object());</span><br><span class="line">   System.out.println(coll);  <span class="comment">//[AA, 123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1]</span></span><br><span class="line">   <span class="comment">//2.addAll(Collection x)</span></span><br><span class="line">   Collection coll1=<span class="keyword">new</span> ArrayList();</span><br><span class="line">   coll1.add(<span class="string">"BB"</span>);</span><br><span class="line">   coll1.add(<span class="number">456</span>);</span><br><span class="line">   <span class="comment">//将coll1里面的所有元素一次性加入到coll</span></span><br><span class="line">   coll.addAll(coll1);</span><br><span class="line">   System.out.println(coll);  <span class="comment">//[AA, 123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1, BB, 456]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：coll.addAll(other);与coll.add(other);</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242028973.png" alt></p>
<h3 id="2-2-判断"><a href="#2-2-判断" class="headerlink" title="2.2 判断"></a>2.2 判断</h3><p>（3）int size()：获取当前集合中实际存储的元素个数<br>（4）boolean isEmpty()：判断当前集合是否为空集合<br>（5）boolean contains(Object obj)：判断当前集合中是否存在一个与obj对象equals返回true的元素<br>（6）boolean containsAll(Collection coll)：判断coll集合中的元素是否在当前集合中都存在。即coll集合是否是当前集合的“子集”<br>（7）boolean equals(Object obj)：判断当前集合与obj是否相等</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Collection coll=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    coll.add(<span class="string">"AA"</span>);</span><br><span class="line">    coll.add(<span class="number">123</span>); <span class="comment">//自动装箱为包装类</span></span><br><span class="line">    coll.add(<span class="string">"桑鬼谷"</span>);</span><br><span class="line">    coll.add(<span class="string">"尚硅谷"</span>);</span><br><span class="line">    coll.add(<span class="keyword">new</span> Object());</span><br><span class="line">    System.out.println(coll);  <span class="comment">//[AA, 123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1]</span></span><br><span class="line">    Collection coll1=<span class="keyword">new</span> ArrayList();</span><br><span class="line">    coll1.add(<span class="string">"AA"</span>);</span><br><span class="line">    coll1.add(<span class="number">123</span>);</span><br><span class="line">    System.out.println(coll1);</span><br><span class="line"><span class="comment">//判断</span></span><br><span class="line">    <span class="comment">//（3）int size()：获取当前集合中实际存储的元素个数</span></span><br><span class="line">    System.out.println(coll.size()); <span class="comment">//5</span></span><br><span class="line">    <span class="comment">//（4）boolean isEmpty()：判断当前集合是否为空集合</span></span><br><span class="line">    System.out.println(coll.isEmpty()); <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//比较的是值是否相等!!!!!</span></span><br><span class="line">    <span class="comment">//（5）boolean contains(Object obj)：判断当前集合中是否存在一个与obj对象equals返回true的元素</span></span><br><span class="line">    System.out.println(coll.contains(coll1)); <span class="comment">//false  就是coll1把两个元素当成一个元素了 所以匹配不到</span></span><br><span class="line">    System.out.println(coll.contains(<span class="string">"AA"</span>)); <span class="comment">//true</span></span><br><span class="line">    <span class="comment">//（6）boolean containsAll(Collection coll1)：判断coll1集合中的元素是否在当前集合中都存在。即coll1集合是否是当前集合coll的“子集”</span></span><br><span class="line">    System.out.println(coll.containsAll(coll1));  <span class="comment">//true</span></span><br><span class="line">    <span class="comment">//（7）boolean equals(Object obj)：判断当前集合与obj是否相等</span></span><br><span class="line">     System.out.println(coll.equals(coll1));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-删除"><a href="#2-3-删除" class="headerlink" title="2.3 删除"></a>2.3 删除</h3><p>（8）void clear()：清空集合元素<br>（9） boolean remove(Object obj) ：从当前集合中删除第一个找到的与obj对象equals返回true的元素。<br>（10）boolean removeAll(Collection coll)：从当前集合中删除所有与coll集合中相同的元素。即this = this - this ∩ coll<br>（11）boolean retainAll(Collection coll)：从当前集合中删除两个集合中不同的元素，使得当前集合仅保留与coll集合中的元素相同的元素，即当前集合中仅保留两个集合的交集，即this  = this ∩ coll；</p>
<p>注意几种删除方法的区别</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Collection coll=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    coll.add(<span class="string">"AA"</span>);</span><br><span class="line">    coll.add(<span class="number">123</span>); <span class="comment">//自动装箱为包装类</span></span><br><span class="line">    coll.add(<span class="string">"桑鬼谷"</span>);</span><br><span class="line">    coll.add(<span class="string">"尚硅谷"</span>);</span><br><span class="line">    coll.add(<span class="keyword">new</span> Object());</span><br><span class="line">    System.out.println(coll);  <span class="comment">//[AA, 123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1]</span></span><br><span class="line">    Collection coll1=<span class="keyword">new</span> ArrayList();</span><br><span class="line">    coll1.add(<span class="string">"AA"</span>);</span><br><span class="line">    coll1.add(<span class="number">123</span>);</span><br><span class="line">    coll1.add(<span class="string">"尚硅谷"</span>);</span><br><span class="line">    System.out.println(coll1); <span class="comment">//[AA, 123]</span></span><br><span class="line">    System.out.println(<span class="string">"-----------------------------------------"</span>);</span><br><span class="line"><span class="comment">//删除</span></span><br><span class="line">    <span class="comment">//（9） boolean remove(Object obj) ：从当前集合中删除第一个找到的与obj对象equals返回true的元素。</span></span><br><span class="line">    System.out.println(coll.remove(<span class="string">"AAA"</span>)); <span class="comment">//false</span></span><br><span class="line">    System.out.println(coll.remove(<span class="string">"AA"</span>));  <span class="comment">//true</span></span><br><span class="line">    System.out.println(coll); <span class="comment">//[123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1]</span></span><br><span class="line">    System.out.println(<span class="string">"-----------------------------------------"</span>);</span><br><span class="line">    <span class="comment">//（10）boolean removeAll(Collection coll1)：从当前集合中删除所有与coll1集合中相同的元素。即this = this - this ∩ coll1  ---删除两个集合的交集</span></span><br><span class="line">    System.out.println(coll.removeAll(coll1)); <span class="comment">//true</span></span><br><span class="line">    System.out.println(coll); <span class="comment">//[桑鬼谷, java.lang.Object@77f03bb1]</span></span><br><span class="line">    System.out.println(<span class="string">"-----------------------------------------"</span>);</span><br><span class="line">    <span class="comment">//（11）boolean retainAll(Collection coll1)：从当前集合中删除两个集合中不同的元素，使得当前集合仅保留与coll1集合中的元素相同的元素，即当前集合中仅保留两个集合的交集，即this  = this ∩ coll1；  ---保留两个集合的交集</span></span><br><span class="line">    System.out.println(coll.retainAll(coll1)); <span class="comment">//true</span></span><br><span class="line">    System.out.println(coll); <span class="comment">//[]</span></span><br><span class="line">    <span class="comment">//（8）void clear()：清空集合元素  ---底层一个一个=null清空</span></span><br><span class="line">    coll1.clear(); </span><br><span class="line">    System.out.println(coll1.size()); <span class="comment">//0</span></span><br><span class="line">    System.out.println(<span class="string">"-----------------------------------------"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-其它"><a href="#2-4-其它" class="headerlink" title="2.4 其它"></a>2.4 其它</h3><p>（12）Object[] toArray()：返回包含当前集合中所有元素的数组<br>（13）hashCode()：获取集合对象的哈希值<br>（14）iterator()：返回迭代器对象，用于集合遍历</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Collection coll=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    coll.add(<span class="string">"AA"</span>);</span><br><span class="line">    coll.add(<span class="number">123</span>); <span class="comment">//自动装箱为包装类</span></span><br><span class="line">    coll.add(<span class="string">"桑鬼谷"</span>);</span><br><span class="line">    coll.add(<span class="string">"尚硅谷"</span>);</span><br><span class="line">    coll.add(<span class="keyword">new</span> Object());</span><br><span class="line">    System.out.println(coll);  <span class="comment">//[AA, 123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1]</span></span><br><span class="line">    Collection coll1=<span class="keyword">new</span> ArrayList();</span><br><span class="line">    coll1.add(<span class="string">"AA"</span>);</span><br><span class="line">    coll1.add(<span class="number">123</span>);</span><br><span class="line">    System.out.println(coll1);</span><br><span class="line">    System.out.println(<span class="string">"-----------------------------------------"</span>);</span><br><span class="line"><span class="comment">//其他</span></span><br><span class="line">    <span class="comment">//（12）Object[] toArray()：返回包含当前集合中所有元素的数组</span></span><br><span class="line">    System.out.println(Arrays.toString(coll.toArray())); <span class="comment">//[AA, 123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1]</span></span><br><span class="line">    <span class="comment">//（13）hashCode()：获取集合对象的哈希值</span></span><br><span class="line">    System.out.println(coll.hashCode()); <span class="comment">//514809589</span></span><br><span class="line">    <span class="comment">//（14）iterator()：返回迭代器对象，用于集合遍历</span></span><br><span class="line">    System.out.println(coll.iterator()); <span class="comment">//java.util.ArrayList$Itr@326de728</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-数组和集合的转换"><a href="#2-5-数组和集合的转换" class="headerlink" title="2.5 数组和集合的转换"></a>2.5 数组和集合的转换</h3><p>（15）toArray()：集合 —&gt; 数组<br>（16）Arrays.asList(Object …objs)：数组 —&gt; 集合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public void test4()&#123;</span><br><span class="line">    Collection coll&#x3D;new ArrayList&lt;&gt;();</span><br><span class="line">    coll.add(&quot;AA&quot;);</span><br><span class="line">    coll.add(123); &#x2F;&#x2F;自动装箱为包装类</span><br><span class="line">    coll.add(&quot;桑鬼谷&quot;);</span><br><span class="line">    coll.add(&quot;尚硅谷&quot;);</span><br><span class="line">    coll.add(new Object());</span><br><span class="line">    System.out.println(coll);  &#x2F;&#x2F;[AA, 123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1]</span><br><span class="line">&#x2F;&#x2F;集合 ---&gt; 数组</span><br><span class="line">    Object[] arr1&#x3D;coll.toArray();</span><br><span class="line">    &#x2F;&#x2F;1.Arrays.toString()输出</span><br><span class="line">    System.out.println(Arrays.toString(arr1)); &#x2F;&#x2F;[AA, 123, 桑鬼谷, 尚硅谷, java.lang.Object@77f03bb1]</span><br><span class="line">    &#x2F;&#x2F;2.for循环遍历输出</span><br><span class="line">    for (int i &#x3D; 0; i &lt; arr1.length; i++) &#123;</span><br><span class="line">        System.out.print(arr1[i]+&quot; &quot;);  &#x2F;&#x2F;AA 123 桑鬼谷 尚硅谷 java.lang.Object@77f03bb1</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#x2F;&#x2F;数组 ---&gt; 集合</span><br><span class="line">    Integer[] arr &#x3D; new Integer[]&#123;1,2,3&#125;;</span><br><span class="line">    List list&#x3D; Arrays.asList(arr);</span><br><span class="line">    System.out.println(list); &#x2F;&#x2F;[1, 2, 3]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-Iterator-迭代器-接口"><a href="#3-Iterator-迭代器-接口" class="headerlink" title="3. Iterator(迭代器)接口"></a>3. Iterator(迭代器)接口</h2><h3 id="3-1-Iterator接口"><a href="#3-1-Iterator接口" class="headerlink" title="3.1 Iterator接口"></a>3.1 Iterator接口</h3><ul>
<li>在程序开发中，经常需要遍历集合中的所有元素。针对这种需求，JDK专门提供了一个接口<code>java.util.Iterator</code>。<code>Iterator</code>接口也是Java集合中的一员，但它与<code>Collection</code>、<code>Map</code>接口有所不同。<ul>
<li>Collection接口与Map接口主要用于<code>存储</code>元素</li>
<li><code>Iterator</code>，被称为迭代器接口，本身并不提供存储对象的能力，主要用于<code>遍历</code>Collection中的元素</li>
</ul>
</li>
</ul>
<ul>
<li><p>Collection接口继承了java.lang.Iterable接口，该接口有一个iterator()方法，那么所有实现了Collection接口的集合类都有一个iterator()方法，用以返回一个实现了Iterator接口的对象。</p>
<ul>
<li><code>public Iterator iterator()</code>: 获取集合对应的迭代器，用来遍历集合中的元素的。</li>
<li>集合对象每次调用iterator()方法都得到一个全新的迭代器对象，默认游标都在集合的第一个元素之前。</li>
</ul>
</li>
<li><p>Iterator接口的常用方法如下：</p>
<ul>
<li><code>public E next()</code>:返回迭代的下一个元素。</li>
<li><code>public boolean hasNext()</code>:如果仍有元素可以迭代，则返回 true。</li>
</ul>
</li>
<li><p>注意：在调用it.next()方法之前必须要调用it.hasNext()进行检测。若不调用，且下一条记录无效，直接调用it.next()会抛出<code>NoSuchElementException异常</code>。</p>
</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestIterator</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Collection coll = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        coll.add(<span class="string">"小李广"</span>);</span><br><span class="line">        coll.add(<span class="string">"扫地僧"</span>);</span><br><span class="line">        coll.add(<span class="string">"石破天"</span>);</span><br><span class="line">        Iterator iterator = coll.iterator();</span><br><span class="line">        System.out.println(iterator.next());</span><br><span class="line">        System.out.println(iterator.next());</span><br><span class="line">        System.out.println(iterator.next());</span><br><span class="line">        System.out.println(iterator.next()); <span class="comment">//报NoSuchElementException异常</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Collection coll = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        coll.add(<span class="string">"小李广"</span>);</span><br><span class="line">        coll.add(<span class="string">"扫地僧"</span>);</span><br><span class="line">        coll.add(<span class="string">"石破天"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//正确方法</span></span><br><span class="line">        Iterator iterator = coll.iterator();<span class="comment">//获取迭代器对象</span></span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext()) &#123;<span class="comment">//判断是否还有元素可迭代</span></span><br><span class="line">            System.out.println(iterator.next());<span class="comment">//取出下一个元素</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-迭代器的执行原理"><a href="#3-2-迭代器的执行原理" class="headerlink" title="3.2 迭代器的执行原理"></a>3.2 迭代器的执行原理</h3><p>Iterator迭代器对象在遍历集合时，内部采用指针的方式来跟踪集合中的元素，接下来通过一个图例来演示Iterator对象迭代元素的过程：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029138.png" alt="image-20220407235130988"></p>
<p>使用Iterator迭代器删除元素：java.util.Iterator迭代器中有一个方法：void remove() ;</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Iterator iter = coll.iterator();<span class="comment">//回到起点</span></span><br><span class="line"><span class="keyword">while</span>(iter.hasNext())&#123;</span><br><span class="line">    Object obj = iter.next();</span><br><span class="line">    <span class="keyword">if</span>(obj.equals(<span class="string">"Tom"</span>))&#123;</span><br><span class="line">        iter.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li><p>Iterator可以删除集合的元素，但是遍历过程中通过迭代器对象的remove方法，不是集合对象的remove方法。</p>
</li>
<li><p>如果还未调用next()或在上一次调用 next() 方法之后已经调用了 remove() 方法，再调用remove()都会报IllegalStateException。</p>
</li>
<li><p>Collection已经有remove(xx)方法了，为什么Iterator迭代器还要提供删除方法呢？因为迭代器的remove()可以按指定的条件进行删除。</p>
</li>
</ul>
<p>例如：要删除以下集合元素中的偶数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestIteratorRemove</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Collection coll = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        coll.add(<span class="number">1</span>);</span><br><span class="line">        coll.add(<span class="number">2</span>);</span><br><span class="line">        coll.add(<span class="number">3</span>);</span><br><span class="line">        coll.add(<span class="number">4</span>);</span><br><span class="line">        coll.add(<span class="number">5</span>);</span><br><span class="line">        coll.add(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">        Iterator iterator = coll.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            Integer element = (Integer) iterator.next();</span><br><span class="line">            <span class="keyword">if</span>(element % <span class="number">2</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                iterator.remove();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(coll);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在JDK8.0时，Collection接口有了removeIf 方法，即可以根据条件删除。（第18章中再讲）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.function.Predicate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCollectionRemoveIf</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Collection coll = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        coll.add(<span class="string">"小李广"</span>);</span><br><span class="line">        coll.add(<span class="string">"扫地僧"</span>);</span><br><span class="line">        coll.add(<span class="string">"石破天"</span>);</span><br><span class="line">        coll.add(<span class="string">"佛地魔"</span>);</span><br><span class="line">        System.out.println(<span class="string">"coll = "</span> + coll);</span><br><span class="line"></span><br><span class="line">        coll.removeIf(<span class="keyword">new</span> Predicate() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">test</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">                String str = (String) o;</span><br><span class="line">                <span class="keyword">return</span> str.contains(<span class="string">"地"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(<span class="string">"删除包含\"地\"字的元素之后coll = "</span> + coll);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-foreach循环"><a href="#3-3-foreach循环" class="headerlink" title="3.3 foreach循环"></a>3.3 foreach循环</h3><ul>
<li>foreach循环（也称增强for循环）是 JDK5.0 中定义的一个高级for循环，专门用来<code>遍历数组和集合</code>的。</li>
</ul>
<ul>
<li>foreach循环的语法格式：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(元素的数据类型 局部变量 : Collection集合或数组)&#123; </span><br><span class="line">  	<span class="comment">//操作局部变量的输出操作</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这里局部变量就是一个临时变量，自己命名就可以</span></span><br></pre></td></tr></table></figure>

<ul>
<li>举例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestForeach</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Collection coll = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        coll.add(<span class="string">"小李广"</span>);</span><br><span class="line">        coll.add(<span class="string">"扫地僧"</span>);</span><br><span class="line">        coll.add(<span class="string">"石破天"</span>);</span><br><span class="line">		<span class="comment">//foreach循环其实就是使用Iterator迭代器来完成元素的遍历的。</span></span><br><span class="line">        <span class="keyword">for</span> (Object o : coll) &#123;</span><br><span class="line">            System.out.println(o);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] nums = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> num : nums) &#123;</span><br><span class="line">            System.out.println(num);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"-----------------"</span>);</span><br><span class="line">        String[] names = &#123;<span class="string">"张三"</span>,<span class="string">"李四"</span>,<span class="string">"王五"</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>对于集合的遍历，增强for的内部原理其实是个Iterator迭代器。如下图。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029705.png" alt="image-20220128010114124"></p>
<ul>
<li>它用于遍历Collection和数组。通常只进行遍历元素，不要在遍历的过程中对集合元素进行增删操作。<ul>
<li>练习：判断输出结果为何？</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] str = <span class="keyword">new</span> String[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">for</span> (String myStr : str) &#123;</span><br><span class="line">            myStr = <span class="string">"atguigu"</span>;</span><br><span class="line">            System.out.println(myStr);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length; i++) &#123;</span><br><span class="line">            System.out.println(str[i]);  <span class="comment">//str没变化都是null</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">atguigu</span><br><span class="line">atguigu</span><br><span class="line">atguigu</span><br><span class="line">atguigu</span><br><span class="line">atguigu</span><br><span class="line"><span class="keyword">null</span></span><br><span class="line"><span class="keyword">null</span></span><br><span class="line"><span class="keyword">null</span></span><br><span class="line"><span class="keyword">null</span></span><br><span class="line"><span class="keyword">null</span></span><br></pre></td></tr></table></figure>

<h2 id="4-Collection子接口1：List"><a href="#4-Collection子接口1：List" class="headerlink" title="4. Collection子接口1：List"></a>4. Collection子接口1：List</h2><h3 id="4-1-List接口特点"><a href="#4-1-List接口特点" class="headerlink" title="4.1 List接口特点"></a>4.1 List接口特点</h3><ul>
<li><p>鉴于Java中数组用来存储数据的局限性，我们通常使用<code>java.util.List</code>替代数组</p>
</li>
<li><p>List集合类中<code>元素有序</code>、且<code>可重复</code>，集合中的每个元素都有其对应的顺序索引。</p>
<ul>
<li>举例：List集合存储数据，就像银行门口客服，给每一个来办理业务的客户分配序号：第一个来的是“张三”，客服给他分配的是0；第二个来的是“李四”，客服给他分配的1；以此类推，最后一个序号应该是“总人数-1”。</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029838.png" alt="1563549818689"></p>
<ul>
<li>JDK API中List接口的实现类常用的有：<code>ArrayList</code>、<code>LinkedList</code>和<code>Vector</code>。</li>
</ul>
<h3 id="4-2-List接口方法"><a href="#4-2-List接口方法" class="headerlink" title="4.2 List接口方法"></a>4.2 List接口方法</h3><p>List除了从Collection集合继承的方法外，List 集合里添加了一些<code>根据索引</code>来操作集合元素的方法。</p>
<ul>
<li><p>插入元素</p>
<ul>
<li><code>void add(int index, Object ele)</code>:在index位置插入ele元素</li>
<li>boolean addAll(int index, Collection eles):从index位置开始将eles中的所有元素添加进来</li>
</ul>
</li>
<li><p>获取元素</p>
<ul>
<li><code>Object get(int index)</code>:获取指定index位置的元素</li>
<li>List subList(int fromIndex, int toIndex):返回从fromIndex到toIndex位置的子集合</li>
</ul>
</li>
<li><p>获取元素索引</p>
<ul>
<li>int indexOf(Object obj):返回obj在集合中首次出现的位置</li>
<li>int lastIndexOf(Object obj):返回obj在当前集合中末次出现的位置</li>
</ul>
</li>
<li><p>删除和替换元素</p>
<ul>
<li><p><code>Object remove(int index)</code>:移除指定index位置的元素，并返回此元素</p>
</li>
<li><p><code>Object set(int index, Object ele)</code>:设置指定index位置的元素为ele</p>
</li>
</ul>
</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestListMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 创建List集合对象</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 往 尾部添加 指定元素</span></span><br><span class="line">        list.add(<span class="string">"图图"</span>);</span><br><span class="line">        list.add(<span class="string">"小美"</span>);</span><br><span class="line">        list.add(<span class="string">"不高兴"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(list);</span><br><span class="line">        <span class="comment">// add(int index,String s) 往指定位置添加</span></span><br><span class="line">        list.add(<span class="number">1</span>,<span class="string">"没头脑"</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(list);</span><br><span class="line">        <span class="comment">// String remove(int index) 删除指定位置元素  返回被删除元素</span></span><br><span class="line">        <span class="comment">// 删除索引位置为2的元素</span></span><br><span class="line">        System.out.println(<span class="string">"删除索引位置为2的元素"</span>);</span><br><span class="line">        System.out.println(list.remove(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(list);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// String set(int index,String s)</span></span><br><span class="line">        <span class="comment">// 在指定位置 进行 元素替代（改）</span></span><br><span class="line">        <span class="comment">// 修改指定位置元素</span></span><br><span class="line">        list.set(<span class="number">0</span>, <span class="string">"三毛"</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// String get(int index)  获取指定位置元素</span></span><br><span class="line">        <span class="comment">// 跟size() 方法一起用  来 遍历的</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;list.size();i++)&#123;</span><br><span class="line">            System.out.println(list.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//还可以使用增强for</span></span><br><span class="line">        <span class="keyword">for</span> (String string : list) &#123;</span><br><span class="line">            System.out.println(string);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：在JavaSE中List名称的类型有两个，一个是java.util.List集合接口，一个是java.awt.List图形界面的组件，别导错包了。</p>
</blockquote>
<h3 id="4-3-List接口主要实现类：ArrayList"><a href="#4-3-List接口主要实现类：ArrayList" class="headerlink" title="4.3 List接口主要实现类：ArrayList"></a>4.3 List接口主要实现类：ArrayList</h3><ul>
<li><p>ArrayList 是 List 接口的<code>主要实现类</code></p>
</li>
<li><p>本质上，ArrayList是对象引用的一个”变长”数组</p>
</li>
<li><p>Arrays.asList(…) 方法返回的 List 集合，既不是 ArrayList 实例，也不是 Vector 实例。 Arrays.asList(…) 返回值是一个固定长度的 List 集合</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029135.png" alt="image-20220408210743342"></p>
</li>
</ul>
<h3 id="4-4-List的实现类之二：LinkedList"><a href="#4-4-List的实现类之二：LinkedList" class="headerlink" title="4.4 List的实现类之二：LinkedList"></a>4.4 List的实现类之二：LinkedList</h3><ul>
<li>对于频繁的插入或删除元素的操作，建议使用LinkedList类，效率较高。这是由底层采用链表（双向链表）结构存储数据决定的。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029543.png" alt="image-20220408225615829"></p>
<ul>
<li>特有方法：<ul>
<li>void addFirst(Object obj)</li>
<li>void addLast(Object obj)    </li>
<li>Object getFirst()</li>
<li>Object getLast()</li>
<li>Object removeFirst()</li>
<li>Object removeLast()</li>
</ul>
</li>
</ul>
<h3 id="4-5-List的实现类之三：Vector"><a href="#4-5-List的实现类之三：Vector" class="headerlink" title="4.5 List的实现类之三：Vector"></a>4.5 List的实现类之三：Vector</h3><ul>
<li>Vector 是一个<code>古老</code>的集合，JDK1.0就有了。大多数操作与ArrayList相同，区别之处在于Vector是<code>线程安全</code>的。</li>
<li>在各种List中，最好把<code>ArrayList作为默认选择</code>。当插入、删除频繁时，使用LinkedList；Vector总是比ArrayList慢，所以尽量避免使用。</li>
<li>特有方法：<ul>
<li>void addElement(Object obj)</li>
<li>void insertElementAt(Object obj,int index)</li>
<li>void setElementAt(Object obj,int index)</li>
<li>void removeElement(Object obj)</li>
<li>void removeAllElements()</li>
</ul>
</li>
</ul>
<h3 id="4-6-练习"><a href="#4-6-练习" class="headerlink" title="4.6 练习"></a>4.6 练习</h3><p><strong>面试题：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testListRemove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建一个arraylist实现类对象</span></span><br><span class="line">        <span class="comment">//多态</span></span><br><span class="line">        List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="comment">//添加集合元素</span></span><br><span class="line">        list.add(<span class="number">1</span>);</span><br><span class="line">        list.add(<span class="number">2</span>);</span><br><span class="line">        list.add(<span class="number">3</span>);</span><br><span class="line">        System.out.println(list); <span class="comment">//[1,2,3]</span></span><br><span class="line">        updateList(list);  <span class="comment">//调用updateList方法</span></span><br><span class="line">        System.out.println(list);<span class="comment">//[1,2]</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">updateList</span><span class="params">(List list)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//移除下标为2的值</span></span><br><span class="line">        list.remove(<span class="number">2</span>); <span class="comment">//list=[1,2]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习1：</strong></p>
<ul>
<li>定义学生类，属性为姓名、年龄，提供必要的getter、setter方法，构造器，toString()，equals()方法。</li>
<li>使用ArrayList集合，保存录入的多个学生对象。</li>
<li>循环录入的方式，1：继续录入，0：结束录入。</li>
<li>录入结束后，用foreach遍历集合。</li>
</ul>
<ul>
<li><p>代码实现，效果如图所示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029861.png" alt="1559890098509"></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList list=<span class="keyword">new</span> ArrayList();</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"宋亚翔"</span>,<span class="number">12</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"宋亚翔2"</span>,<span class="number">121</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"宋亚翔3"</span>,<span class="number">11222</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"宋亚翔4"</span>,<span class="number">13122</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"宋亚翔5"</span>,<span class="number">112</span>));</span><br><span class="line">        list.add(<span class="keyword">new</span> Student(<span class="string">"宋亚翔6"</span>,<span class="number">1122</span>));</span><br><span class="line">        <span class="comment">//增强for循环</span></span><br><span class="line">        <span class="keyword">for</span>(Object stu:list)&#123;</span><br><span class="line">            System.out.println(stu);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="comment">//迭代器</span></span><br><span class="line">        Iterator iterator=list.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Objects;</span><br><span class="line">public class Student &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Student(String name, int age) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object o) &#123;</span><br><span class="line">        if (this &#x3D;&#x3D; o) return true;</span><br><span class="line">        if (!(o instanceof Student student)) return false;</span><br><span class="line">        return getAge() &#x3D;&#x3D; student.getAge() &amp;&amp; Objects.equals(getName(), student.getName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Student&#123;&quot; +&quot;name&#x3D;&#39;&quot; + name + &#39;\&#39;&#39; +&quot;, age&#x3D;&quot; + age +&#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310251529194.png" alt="image-20231025152940101"></p>
<p><strong>练习2：</strong></p>
<p>​    1、请定义方法public static int listTest(Collection list,String s)统计集合中指定元素出现的次数</p>
<p>​    2、创建集合，集合存放随机生成的30个小写字母</p>
<p>​    3、用listTest统计，a、b、c、x元素的出现次数</p>
<p>​    4、效果如下</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029370.png" alt="1559896150606"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList list=<span class="keyword">new</span> ArrayList();</span><br><span class="line">        Random random=<span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> temp= random.nextInt(<span class="number">26</span>);  <span class="comment">//获取0-26范围的整数</span></span><br><span class="line">            <span class="keyword">char</span> tempchar= (<span class="keyword">char</span>) (<span class="string">'a'</span>+temp); <span class="comment">//在a基础上加0-26 因为char会自动类型转换为int，要char就要强转</span></span><br><span class="line">            list.add(tempchar);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"随机小写字母为:"</span>);</span><br><span class="line">        System.out.println(list);</span><br><span class="line">        System.out.println(<span class="string">"a"</span>+<span class="string">":"</span>+listTest(list,<span class="string">"a"</span>));</span><br><span class="line">        System.out.println(<span class="string">"b"</span>+<span class="string">":"</span>+listTest(list,<span class="string">"b"</span>));</span><br><span class="line">        System.out.println(<span class="string">"c"</span>+<span class="string">":"</span>+listTest(list,<span class="string">"c"</span>));</span><br><span class="line">        System.out.println(<span class="string">"x"</span>+<span class="string">":"</span>+listTest(list,<span class="string">"x"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//统计集合中指定元素出现的次数</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">listTest</span><span class="params">(Collection list,String s)</span></span>&#123;</span><br><span class="line">        <span class="comment">//s转为字符</span></span><br><span class="line">        <span class="keyword">char</span>[] arr=s.toCharArray();</span><br><span class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(Object temp:list)&#123;</span><br><span class="line">            <span class="keyword">if</span>(arr[<span class="number">0</span>]==(<span class="keyword">char</span>)temp)&#123;  <span class="comment">//arr[0]就是要判断的字符 依次和list元素匹配</span></span><br><span class="line">                sum++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310251548428.png" alt="image-20231025154852384"></p>
<p><strong>练习3：KTV点歌系统</strong></p>
<p><strong>描述</strong></p>
<p>分别使用ArrayList和LinkedList集合，编写一个<strong><code>KTV点歌系统</code></strong>的程序。在程序中：</p>
<ul>
<li>指令1代表添加歌曲</li>
<li>指令2代表将所选歌曲置顶</li>
<li>指令3代表将所选歌曲提前一位</li>
<li>指令4代表退出该系统</li>
</ul>
<p>要求根据用户输入的指令和歌曲名展现歌曲列表。例如输入指令1，输入歌曲名”爱你一万年”，则输出“当前歌曲列表：[爱你一万年]”。</p>
<p><strong>提示</strong></p>
<ul>
<li><p>为了指引用户操作，首先要将各个指令所表示的含义打印到控制台</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"-------------欢迎来到点歌系统------------"</span>);</span><br><span class="line">System.out.println(<span class="string">"1.添加歌曲至列表"</span>);</span><br><span class="line">System.out.println(<span class="string">"2.将歌曲置顶"</span>);</span><br><span class="line">System.out.println(<span class="string">"3.将歌曲前移一位"</span>);</span><br><span class="line">System.out.println(<span class="string">"4.退出"</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>程序中需要创建一个集合作为歌曲列表，并向其添加一部分歌曲</p>
</li>
<li><p>通过ArrayList或LinkedList集合定义的方法操作歌曲列表</p>
</li>
</ul>
<p><strong>代码</strong></p>
<ul>
<li><p>使用ArrayList集合模拟点歌系统的实现代码，如下所示：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 尚硅谷-宋红康</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 20:26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KTVByArrayList</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ArrayList musicList = <span class="keyword">new</span> ArrayList();<span class="comment">// 创建歌曲列表</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        addMusicList();<span class="comment">// 添加一部分歌曲至歌曲列表</span></span><br><span class="line">        <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">while</span> (flag) &#123;</span><br><span class="line">            System.out.println(<span class="string">"当前歌曲列表："</span> + musicList);</span><br><span class="line">            System.out.println(<span class="string">"-------------欢迎来到点歌系统------------"</span>);</span><br><span class="line">            System.out.println(<span class="string">"1.添加歌曲至列表"</span>);</span><br><span class="line">            System.out.println(<span class="string">"2.将歌曲置顶"</span>);</span><br><span class="line">            System.out.println(<span class="string">"3.将歌曲前移一位"</span>);</span><br><span class="line">            System.out.println(<span class="string">"4.退出"</span>);</span><br><span class="line">            System.out.print(<span class="string">"请输入操作序号："</span>);</span><br><span class="line">            <span class="keyword">int</span> key = sc.nextInt();<span class="comment">// //接收键盘输入的功能选项序号</span></span><br><span class="line">            <span class="comment">// 执行序号对应的功能</span></span><br><span class="line">            <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:<span class="comment">// 添加歌曲至列表</span></span><br><span class="line">                    addMusic();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:<span class="comment">// 将歌曲置顶</span></span><br><span class="line">                    setTop();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:<span class="comment">// 将歌曲前移一位</span></span><br><span class="line">                    setBefore();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:<span class="comment">// 退出</span></span><br><span class="line">                    System.out.println(<span class="string">"----------------退出---------------"</span>);</span><br><span class="line">                    System.out.println(<span class="string">"您已退出系统"</span>);</span><br><span class="line">                    flag = <span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    System.out.println(<span class="string">"----------------------------------"</span>);</span><br><span class="line">                    System.out.println(<span class="string">"功能选择有误，请输入正确的功能序号!"</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 初始时添加歌曲名称</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addMusicList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        musicList.add(<span class="string">"本草纲目"</span>);</span><br><span class="line">        musicList.add(<span class="string">"你是我的眼"</span>);</span><br><span class="line">        musicList.add(<span class="string">"老男孩"</span>);</span><br><span class="line">        musicList.add(<span class="string">"白月光与朱砂痣"</span>);</span><br><span class="line">        musicList.add(<span class="string">"不谓侠"</span>);</span><br><span class="line">        musicList.add(<span class="string">"爱你"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行添加歌曲</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">addMusic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"请输入要添加的歌曲名称："</span>);</span><br><span class="line">        String musicName = sc.next();<span class="comment">// 获取键盘输入内容</span></span><br><span class="line">        musicList.add(musicName);<span class="comment">// 添加歌曲到列表的最后</span></span><br><span class="line">        System.out.println(<span class="string">"已添加歌曲："</span> + musicName);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行将歌曲置顶</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setTop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"请输入要置顶的歌曲名称："</span>);</span><br><span class="line">        String musicName = sc.next();<span class="comment">// 获取键盘输入内容</span></span><br><span class="line">        <span class="keyword">int</span> musicIndex = musicList.indexOf(musicName);<span class="comment">// 查找指定歌曲位置</span></span><br><span class="line">        <span class="keyword">if</span> (musicIndex &lt; <span class="number">0</span>) &#123;<span class="comment">// 判断输入歌曲是否存在</span></span><br><span class="line">            System.out.println(<span class="string">"当前列表中没有输入的歌曲！"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(musicIndex == <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">"当前歌曲默认已置顶！"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            musicList.remove(musicName);<span class="comment">// 移除指定的歌曲</span></span><br><span class="line">            musicList.add(<span class="number">0</span>, musicName);<span class="comment">// 将指定的歌曲放到第一位</span></span><br><span class="line">            System.out.println(<span class="string">"已将歌曲《"</span> + musicName + <span class="string">"》置顶"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 执行将歌曲置前一位</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setBefore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.print(<span class="string">"请输入要置前的歌曲名称："</span>);</span><br><span class="line">        String musicName = sc.next();<span class="comment">// 获取键盘输入内容</span></span><br><span class="line">        <span class="keyword">int</span> musicIndex = musicList.indexOf(musicName);<span class="comment">// 查找指定歌曲位置</span></span><br><span class="line">        <span class="keyword">if</span> (musicIndex &lt; <span class="number">0</span>) &#123;<span class="comment">// 判断输入歌曲是否存在</span></span><br><span class="line">            System.out.println(<span class="string">"当前列表中没有输入的歌曲！"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (musicIndex == <span class="number">0</span>) &#123;<span class="comment">// 判断歌曲是否已在第一位</span></span><br><span class="line">            System.out.println(<span class="string">"当前歌曲已在最顶部！"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            musicList.remove(musicName);<span class="comment">// 移除指定的歌曲</span></span><br><span class="line">            musicList.add(musicIndex - <span class="number">1</span>, musicName);<span class="comment">// 将指定的歌曲放到前一位</span></span><br><span class="line">            System.out.println(<span class="string">"已将歌曲《"</span> + musicName + <span class="string">"》置前一位"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="5-Collection子接口2：Set"><a href="#5-Collection子接口2：Set" class="headerlink" title="5. Collection子接口2：Set"></a>5. Collection子接口2：Set</h2><h3 id="5-1-Set接口概述"><a href="#5-1-Set接口概述" class="headerlink" title="5.1 Set接口概述"></a>5.1 Set接口概述</h3><ul>
<li>Set接口是Collection的子接口，Set接口相较于Collection接口<strong>没有提供额外的方法</strong>【list接口有自己的增删查改】</li>
<li>Set 集合存储<strong>不相同的元素</strong>，如果试把两个相同的元素加入同一个 Set 集合中，则添加操作失败。</li>
<li>Set集合支持的遍历方式和Collection集合一样：foreach和Iterator。</li>
<li>Set的常用实现类有：HashSet、TreeSet、LinkedHashSet。</li>
</ul>
<h3 id="5-2-Set主要实现类：HashSet"><a href="#5-2-Set主要实现类：HashSet" class="headerlink" title="5.2 Set主要实现类：HashSet"></a>5.2 Set主要实现类：HashSet</h3><h4 id="5-2-1-HashSet概述"><a href="#5-2-1-HashSet概述" class="headerlink" title="5.2.1 HashSet概述"></a>5.2.1 HashSet概述</h4><ul>
<li><p>HashSet 是 Set 接口的主要实现类，大多数时候使用 Set 集合时都使用这个实现类。</p>
</li>
<li><p>HashSet 按 <strong>Hash 算法</strong>来存储集合中的元素，因此具有很好的存储、查找、删除性能。</p>
</li>
<li><p>HashSet 具有以下<code>特点</code>：</p>
<ul>
<li>不能保证元素的排列顺序【假设用取余法，那本身存放位置相同(都是放在下标为1)，如果冲突的话可能存放在其他位置，】</li>
<li>HashSet 不是线程安全的</li>
<li>集合元素可以是 null</li>
</ul>
</li>
<li><p>HashSet 集合<code>判断两个元素相等的标准</code>：两个对象通过 <code>hashCode()</code> 方法得到的哈希值相等，并且两个对象的 <code>equals()</code>方法返回值为true。</p>
</li>
<li><p>对于存放在Set容器中的对象，<strong>对应的类一定要重写hashCode()和equals(Object obj)方法</strong>，以实现对象相等规则。即：“相等的对象必须具有相等的散列码”。</p>
</li>
<li><p>HashSet集合中元素的无序性，不等同于随机性。这里的无序性与元素的添加位置有关。具体来说：我们在添加每一个元素到数组中时，具体的存储位置是由元素的hashCode()调用后返回的hash值决定的。导致在数组中每个元素不是依次紧密存放的，表现出一定的无序性。</p>
</li>
</ul>
<h4 id="5-2-2-HashSet中添加元素的过程："><a href="#5-2-2-HashSet中添加元素的过程：" class="headerlink" title="5.2.2 HashSet中添加元素的过程："></a>5.2.2 HashSet中添加元素的过程：</h4><ul>
<li><p>第1步：当向 HashSet 集合中存入一个元素时，HashSet 会调用该对象的 hashCode() 方法得到该对象的 hashCode值，然后根据 hashCode值，通过某个散列函数决定该对象在 HashSet 底层数组中的存储位置。</p>
</li>
<li><p>第2步：如果要在数组中存储的位置上没有元素，则直接添加成功。</p>
</li>
<li><p>第3步：如果要在数组中存储的位置上有元素，则继续比较：</p>
<ul>
<li>如果两个元素的hashCode值不相等，则添加成功；</li>
<li>如果两个元素的hashCode()值相等，则会继续调用equals()方法：<ul>
<li>如果equals()方法结果为false，则添加成功。</li>
<li>如果equals()方法结果为true，则添加失败。</li>
</ul>
</li>
</ul>
<blockquote>
<p>第2步添加成功，元素会保存在底层数组中。</p>
<p>第3步两种添加成功的操作，由于该底层数组的位置已经有元素了，则会通过<code>链表</code>的方式继续链接，存储。</p>
</blockquote>
</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDate</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> year;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> month;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> day;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDate</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">        <span class="keyword">this</span>.month = month;</span><br><span class="line">        <span class="keyword">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        MyDate myDate = (MyDate) o;</span><br><span class="line">        <span class="keyword">return</span> year == myDate.year &amp;&amp;</span><br><span class="line">                month == myDate.month &amp;&amp;</span><br><span class="line">                day == myDate.day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(year, month, day);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"MyDate&#123;"</span> +</span><br><span class="line">                <span class="string">"year="</span> + year +</span><br><span class="line">                <span class="string">", month="</span> + month +</span><br><span class="line">                <span class="string">", day="</span> + day +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestHashSet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        HashSet set = <span class="keyword">new</span> HashSet();</span><br><span class="line">        set.add(<span class="string">"张三"</span>);</span><br><span class="line">        set.add(<span class="string">"张三"</span>);</span><br><span class="line">        set.add(<span class="string">"李四"</span>);</span><br><span class="line">        set.add(<span class="string">"王五"</span>);</span><br><span class="line">        set.add(<span class="string">"王五"</span>);</span><br><span class="line">        set.add(<span class="string">"赵六"</span>);</span><br><span class="line">        System.out.println(<span class="string">"set = "</span> + set);<span class="comment">//不允许重复，无序</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        HashSet set = <span class="keyword">new</span> HashSet();</span><br><span class="line">        set.add(<span class="keyword">new</span> MyDate(<span class="number">2021</span>,<span class="number">1</span>,<span class="number">1</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> MyDate(<span class="number">2021</span>,<span class="number">1</span>,<span class="number">1</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> MyDate(<span class="number">2022</span>,<span class="number">2</span>,<span class="number">4</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> MyDate(<span class="number">2022</span>,<span class="number">2</span>,<span class="number">4</span>));</span><br><span class="line">        System.out.println(<span class="string">"set = "</span> + set);<span class="comment">//不允许重复，无序</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-3-重写-hashCode-方法的基本原则"><a href="#5-2-3-重写-hashCode-方法的基本原则" class="headerlink" title="5.2.3 重写 hashCode() 方法的基本原则"></a>5.2.3 重写 hashCode() 方法的基本原则</h4><ul>
<li>在程序运行时，同一个对象多次调用 hashCode() 方法应该返回相同的值。</li>
<li>当两个对象的 equals() 方法比较返回 true 时，这两个对象的 hashCode() 方法的返回值也应相等。</li>
<li>对象中用作 equals() 方法比较的 Field，都应该用来计算 hashCode 值。</li>
</ul>
<blockquote>
<p>注意：如果两个元素的 equals() 方法返回 true，但它们的 hashCode() 返回值不相等，hashSet 将会把它们存储在不同的位置，但依然可以添加成功。</p>
</blockquote>
<h4 id="5-2-4-重写equals-方法的基本原则"><a href="#5-2-4-重写equals-方法的基本原则" class="headerlink" title="5.2.4 重写equals()方法的基本原则"></a>5.2.4 重写equals()方法的基本原则</h4><ul>
<li><p>重写equals方法的时候一般都需要同时复写hashCode方法。通常参与计算hashCode的对象的属性也应该参与到equals()中进行计算。</p>
</li>
<li><p>推荐：开发中直接调用Eclipse/IDEA里的快捷键自动重写equals()和hashCode()方法即可。</p>
<ul>
<li>为什么用Eclipse/IDEA复写hashCode方法，有31这个数字？</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">首先，选择系数的时候要选择尽量大的系数。因为如果计算出来的hash地址越大，所谓的“冲突”就越少，查找起来效率也会提高。（减少冲突）</span><br><span class="line"></span><br><span class="line">其次，31只占用5bits,相乘造成数据溢出的概率较小。</span><br><span class="line"></span><br><span class="line">再次，31可以 由i*31&#x3D;&#x3D; (i&lt;&lt;5)-1来表示,现在很多虚拟机里面都有做相关优化。（提高算法效率）</span><br><span class="line"></span><br><span class="line">最后，31是一个素数，素数作用就是如果我用一个数字来乘以这个素数，那么最终出来的结果只能被素数本身和被乘数还有1来整除！(减少冲突)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="5-2-5-练习"><a href="#5-2-5-练习" class="headerlink" title="5.2.5 练习"></a>5.2.5 练习</h4><p><strong>练习1：</strong>在List内去除重复数字值，要求尽量简单</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List list=<span class="keyword">new</span> ArrayList();</span><br><span class="line">        list.add(<span class="number">123</span>);</span><br><span class="line">        list.add(<span class="number">123</span>);</span><br><span class="line">        list.add(<span class="number">123</span>);</span><br><span class="line">        list.add(<span class="number">123</span>);</span><br><span class="line">        list.add(<span class="number">123</span>);</span><br><span class="line">        list.add(<span class="number">123</span>);</span><br><span class="line">        list.add(<span class="number">1234234</span>);</span><br><span class="line">        list=delete(list);</span><br><span class="line">        System.out.println(list); <span class="comment">//[123,1234234]</span></span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//去重方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List <span class="title">delete</span><span class="params">(List list)</span></span>&#123;</span><br><span class="line">        ArrayList arrayList=<span class="keyword">new</span> ArrayList();</span><br><span class="line">        HashSet set=<span class="keyword">new</span> HashSet();</span><br><span class="line">        <span class="comment">//增强for循环</span></span><br><span class="line">        <span class="keyword">for</span>(Object temp:list)&#123;</span><br><span class="line">            set.add(temp); <span class="comment">//set自带不能存储相同元素的功能</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ArrayList(set); <span class="comment">//使用ArrayList构造器创建</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong>获取随机数</p>
<p>编写一个程序，获取10个1至20的随机数，要求随机数不能重复。并把最终的随机数输出到控制台。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//如果使用ArrayList的话就用for循环</span></span><br><span class="line">        <span class="comment">//如果使用HashSet的话就要考虑每次的不一定存进去，就要使用while</span></span><br><span class="line">        HashSet set=<span class="keyword">new</span> HashSet();</span><br><span class="line">        Random random=<span class="keyword">new</span> Random();</span><br><span class="line">        <span class="comment">//生成10个</span></span><br><span class="line">        <span class="keyword">while</span>(set.size()&lt;<span class="number">10</span>)&#123;</span><br><span class="line">            <span class="keyword">int</span> temp=random.nextInt(<span class="number">20</span>); <span class="comment">//生成随机数</span></span><br><span class="line">            set.add(temp);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(set);  <span class="comment">//[17, 1, 3, 19, 8, 10, 12, 13, 14, 15]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习3：</strong>去重</p>
<p>使用Scanner从键盘读取一行输入，去掉其中重复字符，打印出不同的那些字符。比如：aaaabbbcccddd</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input=<span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="comment">//输入一行字符串</span></span><br><span class="line">        String str=input.next();</span><br><span class="line">        <span class="comment">//转为字符数组(一位一位判断)</span></span><br><span class="line">        <span class="keyword">char</span>[] arr=str.toCharArray();</span><br><span class="line">        <span class="comment">//去重</span></span><br><span class="line">        HashSet set=<span class="keyword">new</span> HashSet();</span><br><span class="line">        <span class="comment">//增强for循环进行添加</span></span><br><span class="line">        <span class="keyword">for</span>(Object temp:arr)&#123;</span><br><span class="line">            set.add(temp);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(set);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习4：</strong>面试题</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//存储不重复的元素</span></span><br><span class="line">        HashSet set = <span class="keyword">new</span> HashSet();</span><br><span class="line">        Person p1 = <span class="keyword">new</span> Person(<span class="string">"AA"</span>, <span class="number">1001</span>);</span><br><span class="line">        Person p2 = <span class="keyword">new</span> Person(<span class="string">"BB"</span>, <span class="number">1002</span>);  <span class="comment">//其中Person类中重写了hashCode()和equal()方法  --&gt;啥都相同也可添加！</span></span><br><span class="line">        set.add(p1);</span><br><span class="line">        set.add(p2);</span><br><span class="line">        System.out.println(<span class="string">"set里的元素:"</span>+set);</span><br><span class="line">        System.out.println(<span class="string">"---------------------------------------------------------------------------------------------"</span>);</span><br><span class="line">        <span class="comment">//将元素p1更改姓名</span></span><br><span class="line">        p1.name = <span class="string">"CC"</span>;</span><br><span class="line">        System.out.println(<span class="string">"set里的元素更改信息之后:"</span>+set);</span><br><span class="line">        System.out.println(<span class="string">"---------------------------------------------------------------------------------------------"</span>);</span><br><span class="line">        <span class="comment">//移除元素</span></span><br><span class="line">        set.remove(p1);</span><br><span class="line">        System.out.println(<span class="string">"set移除完元素如下:"</span>+set);</span><br><span class="line">        System.out.println(<span class="string">"---------------------------------------------------------------------------------------------"</span>);</span><br><span class="line">        <span class="comment">//添加元素</span></span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="string">"CC"</span>, <span class="number">1001</span>));</span><br><span class="line">        System.out.println(<span class="string">"set里添加元素:"</span>+set);</span><br><span class="line">        System.out.println(<span class="string">"---------------------------------------------------------------------------------------------"</span>);</span><br><span class="line">        <span class="comment">//添加元素</span></span><br><span class="line">        set.add(<span class="keyword">new</span> Person(<span class="string">"AA"</span>, <span class="number">1001</span>));</span><br><span class="line">        System.out.println(<span class="string">"set里添加元素:"</span>+set);</span><br><span class="line">        System.out.println(<span class="string">"---------------------------------------------------------------------------------------------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">set里的元素:[Person&#123;name=<span class="string">'BB'</span>, age=<span class="number">1002</span>&#125;, Person&#123;name=<span class="string">'AA'</span>, age=<span class="number">1001</span>&#125;]</span><br><span class="line">---------------------------------------------------------------------------------------------</span><br><span class="line">set里的元素更改信息之后:[Person&#123;name=<span class="string">'BB'</span>, age=<span class="number">1002</span>&#125;, Person&#123;name=<span class="string">'CC'</span>, age=<span class="number">1001</span>&#125;]</span><br><span class="line">---------------------------------------------------------------------------------------------</span><br><span class="line">set移除完元素如下:[Person&#123;name=<span class="string">'BB'</span>, age=<span class="number">1002</span>&#125;, Person&#123;name=<span class="string">'CC'</span>, age=<span class="number">1001</span>&#125;]</span><br><span class="line">---------------------------------------------------------------------------------------------</span><br><span class="line">set里添加元素:[Person&#123;name=<span class="string">'BB'</span>, age=<span class="number">1002</span>&#125;, Person&#123;name=<span class="string">'CC'</span>, age=<span class="number">1001</span>&#125;, Person&#123;name=<span class="string">'CC'</span>, age=<span class="number">1001</span>&#125;]</span><br><span class="line">---------------------------------------------------------------------------------------------</span><br><span class="line"><span class="function">Person <span class="title">equals</span><span class="params">()</span>...</span></span><br><span class="line"><span class="function">set里添加元素:[Person</span>&#123;name=<span class="string">'BB'</span>, age=<span class="number">1002</span>&#125;, Person&#123;name=<span class="string">'CC'</span>, age=<span class="number">1001</span>&#125;, Person&#123;name=<span class="string">'CC'</span>, age=<span class="number">1001</span>&#125;, Person&#123;name=<span class="string">'AA'</span>, age=<span class="number">1001</span>&#125;]</span><br><span class="line">---------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>

<h3 id="5-3-Set实现类之二：LinkedHashSet"><a href="#5-3-Set实现类之二：LinkedHashSet" class="headerlink" title="5.3 Set实现类之二：LinkedHashSet"></a>5.3 Set实现类之二：LinkedHashSet</h3><ul>
<li><p>LinkedHashSet 是 HashSet 的子类，不允许集合元素重复。</p>
</li>
<li><p>LinkedHashSet 根据元素的 hashCode 值来决定元素的存储位置，但它同时使用<code>双向链表</code>维护元素的次序，这使得元素看起来是以<code>添加顺序</code>保存的。</p>
</li>
<li><p>LinkedHashSet<code>插入性能略低</code>于 HashSet，但在<code>迭代访问</code> Set 里的全部元素时有很好的性能。</p>
</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029222.png" alt="image-20220408235936404" style="zoom:67%;"> 

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashSet;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLinkedHashSet</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        LinkedHashSet set = <span class="keyword">new</span> LinkedHashSet();</span><br><span class="line">        set.add(<span class="string">"张三"</span>);</span><br><span class="line">        set.add(<span class="string">"张三"</span>);</span><br><span class="line">        set.add(<span class="string">"李四"</span>);</span><br><span class="line">        set.add(<span class="string">"王五"</span>);</span><br><span class="line">        set.add(<span class="string">"王五"</span>);</span><br><span class="line">        set.add(<span class="string">"赵六"</span>);</span><br><span class="line">        System.out.println(<span class="string">"set = "</span> + set);<span class="comment">//不允许重复，体现添加顺序  set = [张三, 李四, 王五, 赵六]</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-4-Set实现类之三：TreeSet"><a href="#5-4-Set实现类之三：TreeSet" class="headerlink" title="5.4 Set实现类之三：TreeSet"></a>5.4 Set实现类之三：TreeSet</h3><h4 id="5-4-1-TreeSet概述"><a href="#5-4-1-TreeSet概述" class="headerlink" title="5.4.1 TreeSet概述"></a>5.4.1 TreeSet概述</h4><ul>
<li>TreeSet 是 SortedSet 接口的实现类，TreeSet 可以按照添加的元素的指定的属性的大小<strong>顺序进行遍历</strong>。</li>
<li>TreeSet底层使用<code>红黑树</code>结构存储数据</li>
<li>新增的方法如下： (了解)<ul>
<li>Comparator comparator()</li>
<li>Object first()</li>
<li>Object last()</li>
<li>Object lower(Object e)</li>
<li>Object higher(Object e)</li>
<li>SortedSet subSet(fromElement, toElement)</li>
<li>SortedSet headSet(toElement)</li>
<li>SortedSet tailSet(fromElement)</li>
</ul>
</li>
<li>TreeSet特点：不允许重复、实现排序（自然排序或定制排序）</li>
<li>TreeSet 两种排序方法：<code>自然排序</code>和<code>定制排序</code>。默认情况下，TreeSet 采用自然排序。<ul>
<li><code>自然排序</code>：TreeSet 会调用集合元素的 compareTo(Object obj) 方法来比较元素之间的大小关系，然后将集合元素按升序(默认情况)排列。<ul>
<li>如果试图把一个对象添加到 TreeSet 时，则该对象的类必须实现 Comparable 接口。</li>
<li>实现 Comparable 的类必须实现 compareTo(Object obj) 方法，两个对象即通过 compareTo(Object obj) 方法的返回值来比较大小。</li>
</ul>
</li>
<li><code>定制排序</code>：如果元素所属的类没有实现Comparable接口，或不希望按照升序(默认情况)的方式排列元素或希望按照其它属性大小进行排序，则考虑使用定制排序。定制排序，通过Comparator接口来实现。需要重写compare(T o1,T o2)方法。<ul>
<li>利用int compare(T o1,T o2)方法，比较o1和o2的大小：如果方法返回正整数，则表示o1大于o2；如果返回0，表示相等；返回负整数，表示o1小于o2。</li>
<li>要实现定制排序，需要将实现Comparator接口的实例作为形参传递给TreeSet的构造器。</li>
</ul>
</li>
</ul>
</li>
<li>因为只有相同类的两个实例才会比较大小，所以向 TreeSet 中添加的应该是<code>同一个类的对象</code>。</li>
<li>对于 TreeSet 集合而言，它判断<code>两个对象是否相等的唯一标准</code>是：两个对象通过 <code>compareTo(Object obj) 或compare(Object o1,Object o2)</code>方法比较返回值。返回值为0，则认为两个对象相等。</li>
</ul>
<h4 id="5-4-2-举例"><a href="#5-4-2-举例" class="headerlink" title="5.4.2 举例"></a>5.4.2 举例</h4><p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeSetTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 自然排序：针对String类的对象</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        TreeSet set = <span class="keyword">new</span> TreeSet();</span><br><span class="line"></span><br><span class="line">        set.add(<span class="string">"MM"</span>);</span><br><span class="line">        set.add(<span class="string">"CC"</span>);</span><br><span class="line">        set.add(<span class="string">"AA"</span>);</span><br><span class="line">        set.add(<span class="string">"DD"</span>);</span><br><span class="line">        set.add(<span class="string">"ZZ"</span>);</span><br><span class="line">        <span class="comment">//set.add(123);  //报ClassCastException的异常</span></span><br><span class="line"></span><br><span class="line">        Iterator iterator = set.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 自然排序：针对User类的对象</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        TreeSet set = <span class="keyword">new</span> TreeSet();</span><br><span class="line"></span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Tom"</span>,<span class="number">12</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Rose"</span>,<span class="number">23</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Jerry"</span>,<span class="number">2</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Eric"</span>,<span class="number">18</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Tommy"</span>,<span class="number">44</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Jim"</span>,<span class="number">23</span>));</span><br><span class="line">        set.add(<span class="keyword">new</span> User(<span class="string">"Maria"</span>,<span class="number">18</span>));</span><br><span class="line">        <span class="comment">//set.add("Tom");</span></span><br><span class="line"></span><br><span class="line">        Iterator iterator = set.iterator();</span><br><span class="line">        <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(set.contains(<span class="keyword">new</span> User(<span class="string">"Jack"</span>, <span class="number">23</span>))); <span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其中，User类定义如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    举例：按照age从小到大的顺序排列，如果age相同，则按照name从大到小的顺序排列</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span> == o)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">            User user = (User)o;</span><br><span class="line">            <span class="keyword">int</span> value = <span class="keyword">this</span>.age - user.age;</span><br><span class="line">            <span class="keyword">if</span>(value != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> -<span class="keyword">this</span>.name.compareTo(user.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"输入的类型不匹配"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 定制排序</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//按照User的姓名的从小到大的顺序排列</span></span><br><span class="line">    Comparator comparator = <span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(o1 <span class="keyword">instanceof</span> User &amp;&amp; o2 <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">                User u1 = (User)o1;</span><br><span class="line">                User u2 = (User)o2;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> u1.name.compareTo(u2.name);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"输入的类型不匹配"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    TreeSet set = <span class="keyword">new</span> TreeSet(comparator);</span><br><span class="line"></span><br><span class="line">    set.add(<span class="keyword">new</span> User(<span class="string">"Tom"</span>,<span class="number">12</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> User(<span class="string">"Rose"</span>,<span class="number">23</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> User(<span class="string">"Jerry"</span>,<span class="number">2</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> User(<span class="string">"Eric"</span>,<span class="number">18</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> User(<span class="string">"Tommy"</span>,<span class="number">44</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> User(<span class="string">"Jim"</span>,<span class="number">23</span>));</span><br><span class="line">    set.add(<span class="keyword">new</span> User(<span class="string">"Maria"</span>,<span class="number">18</span>));</span><br><span class="line">    <span class="comment">//set.add(new User("Maria",28));</span></span><br><span class="line"></span><br><span class="line">    Iterator iterator = set.iterator();</span><br><span class="line">    <span class="keyword">while</span>(iterator.hasNext())&#123;</span><br><span class="line">        System.out.println(iterator.next());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-4-3-练习"><a href="#5-4-3-练习" class="headerlink" title="5.4.3 练习"></a>5.4.3 练习</h4><p><strong>练习1：</strong>在一个List集合中存储了多个无大小顺序并且有重复的字符串，定义一个方法，让其有序(从小到大排序)，并且不能去除重复元素。</p>
<p>提示：考查ArrayList、TreeSet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test11</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        list.add(<span class="string">"ccc"</span>);</span><br><span class="line">        list.add(<span class="string">"ccc"</span>);</span><br><span class="line">        list.add(<span class="string">"aaa"</span>);</span><br><span class="line">        list.add(<span class="string">"aaa"</span>);</span><br><span class="line">        list.add(<span class="string">"bbb"</span>);</span><br><span class="line">        list.add(<span class="string">"ddd"</span>);</span><br><span class="line">        list.add(<span class="string">"ddd"</span>);</span><br><span class="line">        System.out.println(<span class="string">"排序前:"</span>+list);</span><br><span class="line">        sort(list);</span><br><span class="line">        System.out.println(<span class="string">"排序后:"</span>+list);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(ArrayList list)</span></span>&#123;</span><br><span class="line">        TreeSet set=<span class="keyword">new</span> TreeSet(<span class="keyword">new</span> Comparator() &#123;  <span class="comment">//实现Comparator接口，重写compare方法，然后传入构造器内</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">                String s1 = (String)o1;</span><br><span class="line">                String s2 = (String)o2;</span><br><span class="line">                <span class="keyword">int</span> num = s1.compareTo(s2); <span class="comment">// 调用字符串重写的compareTo()方法</span></span><br><span class="line">                <span class="keyword">return</span> num == <span class="number">0</span> ? <span class="number">1</span> : num; <span class="comment">// 如果内容一样返回一个不为0的数字即可</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        set.addAll(list); <span class="comment">// 将list集合中的所有元素添加到set中</span></span><br><span class="line">        list.clear(); <span class="comment">// 清空list</span></span><br><span class="line">        list.addAll(set); <span class="comment">// 将set中排序并保留重复的结果返回到list中</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">排序前:[ccc, ccc, aaa, aaa, bbb, ddd, ddd]</span><br><span class="line">排序后:[aaa, aaa, bbb, ccc, ccc, ddd, ddd]</span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong>TreeSet的自然排序和定制排序</p>
<ol>
<li><p>定义一个Employee类。<br>该类包含：private成员变量name,age,birthday，其中 birthday 为 MyDate 类的对象；<br>并为每一个属性定义 getter, setter 方法；<br>并重写 toString 方法输出 name, age, birthday</p>
</li>
<li><p>MyDate类包含:<br>private成员变量year,month,day；并为每一个属性定义 getter, setter 方法；</p>
</li>
<li><p>创建该类的 5 个对象，并把这些对象放入 TreeSet 集合中（下一章：TreeSet 需使用泛型来定义）</p>
</li>
<li><p>分别按以下两种方式对集合中的元素进行排序，并遍历输出：</p>
<p>1). 使Employee 实现 Comparable 接口，并按 name 排序[Employee类就要实现Comparable接口]<br>2). 创建 TreeSet 时传入 Comparator对象，按生日日期的先后排序。[MyDate类就要实现Comparable接口]</p>
</li>
</ol>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span>&#123;  <span class="comment">//实现自然排序  必须实现Comparable接口</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> MyDate birthday;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, <span class="keyword">int</span> age, MyDate birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Employee&#123;"</span> +<span class="string">"name='"</span> + name + <span class="string">'\''</span> +<span class="string">", age="</span> + age +<span class="string">", birthday="</span> + birthday +<span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyDate <span class="title">getBirthday</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(MyDate birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(o==<span class="keyword">this</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> Employee)&#123;</span><br><span class="line">            Employee temp=(Employee) o;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.getName().compareTo(temp.getName());  <span class="comment">//根据年龄排序</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"传入的类型不匹配"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDate</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span>&#123;  <span class="comment">//实现自然排序  必须实现Comparable接口</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> year;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> month;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> day;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDate</span><span class="params">(<span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">        <span class="keyword">this</span>.month = month;</span><br><span class="line">        <span class="keyword">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getYear</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setYear</span><span class="params">(<span class="keyword">int</span> year)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.year = year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMonth</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMonth</span><span class="params">(<span class="keyword">int</span> month)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.month = month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDay</span><span class="params">(<span class="keyword">int</span> day)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.day = day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"MyDate&#123;"</span> +<span class="string">"year="</span> + year +<span class="string">", month="</span> + month +<span class="string">", day="</span> + day +<span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span> == o)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> MyDate)&#123;</span><br><span class="line">            MyDate myDate = (MyDate) o;</span><br><span class="line">            <span class="keyword">int</span> yearDistance = <span class="keyword">this</span>.getYear() - myDate.getYear();</span><br><span class="line">            <span class="keyword">if</span>(yearDistance != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> yearDistance;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> monthDistance = <span class="keyword">this</span>.getMonth() - myDate.getMonth();</span><br><span class="line">            <span class="keyword">if</span>(monthDistance != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> monthDistance;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.getDay() - myDate.getDay();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"输入的类型不匹配"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeSet;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//自然排序  --Employee实现Comparable接口 重写CompareTo方法</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        TreeSet set = <span class="keyword">new</span> TreeSet();</span><br><span class="line">        Employee e1 = <span class="keyword">new</span> Employee(<span class="string">"Tom"</span>, <span class="number">23</span>, <span class="keyword">new</span> MyDate(<span class="number">1999</span>, <span class="number">7</span>, <span class="number">9</span>));</span><br><span class="line">        Employee e2 = <span class="keyword">new</span> Employee(<span class="string">"Rose"</span>, <span class="number">43</span>, <span class="keyword">new</span> MyDate(<span class="number">1999</span>, <span class="number">7</span>, <span class="number">19</span>));</span><br><span class="line">        Employee e3 = <span class="keyword">new</span> Employee(<span class="string">"Jack"</span>, <span class="number">54</span>, <span class="keyword">new</span> MyDate(<span class="number">1998</span>, <span class="number">12</span>, <span class="number">21</span>));</span><br><span class="line">        Employee e4 = <span class="keyword">new</span> Employee(<span class="string">"Jerry"</span>, <span class="number">12</span>, <span class="keyword">new</span> MyDate(<span class="number">2002</span>, <span class="number">4</span>, <span class="number">21</span>));</span><br><span class="line">        Employee e5 = <span class="keyword">new</span> Employee(<span class="string">"Tony"</span>, <span class="number">22</span>, <span class="keyword">new</span> MyDate(<span class="number">2001</span>, <span class="number">9</span>, <span class="number">12</span>));</span><br><span class="line">        set.add(e1);</span><br><span class="line">        set.add(e2);</span><br><span class="line">        set.add(e3);</span><br><span class="line">        set.add(e4);</span><br><span class="line">        set.add(e5);</span><br><span class="line">        <span class="comment">//遍历</span></span><br><span class="line">        Iterator iterator = set.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//输出: 根据名字</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Jack', age=54, birthday=MyDate&#123;year=1998, month=12, day=21&#125;&#125;</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Jerry', age=12, birthday=MyDate&#123;year=2002, month=4, day=21&#125;&#125;</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Rose', age=43, birthday=MyDate&#123;year=1999, month=7, day=19&#125;&#125;</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Tom', age=23, birthday=MyDate&#123;year=1999, month=7, day=9&#125;&#125;</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Tony', age=22, birthday=MyDate&#123;year=2001, month=9, day=12&#125;&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//定制排序  --匿名内部类方式实现Comparator接口 重写compare方法</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        TreeSet set = <span class="keyword">new</span> TreeSet(<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(o1 <span class="keyword">instanceof</span> Employee &amp;&amp; o2 <span class="keyword">instanceof</span> Employee)&#123;</span><br><span class="line">                    Employee e1 = (Employee) o1;</span><br><span class="line">                    Employee e2 = (Employee) o2;</span><br><span class="line">                    <span class="comment">//对比两个employee的生日的大小</span></span><br><span class="line">                    MyDate birth1 = e1.getBirthday();</span><br><span class="line">                    MyDate birth2 = e2.getBirthday();</span><br><span class="line">                    <span class="comment">//方式2：</span></span><br><span class="line">                    <span class="keyword">return</span> birth1.compareTo(birth2);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"输入的类型不匹配"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        Employee e1 = <span class="keyword">new</span> Employee(<span class="string">"Tom"</span>, <span class="number">23</span>, <span class="keyword">new</span> MyDate(<span class="number">1999</span>, <span class="number">7</span>, <span class="number">9</span>));</span><br><span class="line">        Employee e2 = <span class="keyword">new</span> Employee(<span class="string">"Rose"</span>, <span class="number">43</span>, <span class="keyword">new</span> MyDate(<span class="number">1999</span>, <span class="number">7</span>, <span class="number">19</span>));</span><br><span class="line">        Employee e3 = <span class="keyword">new</span> Employee(<span class="string">"Jack"</span>, <span class="number">54</span>, <span class="keyword">new</span> MyDate(<span class="number">1998</span>, <span class="number">12</span>, <span class="number">21</span>));</span><br><span class="line">        Employee e4 = <span class="keyword">new</span> Employee(<span class="string">"Jerry"</span>, <span class="number">12</span>, <span class="keyword">new</span> MyDate(<span class="number">2002</span>, <span class="number">4</span>, <span class="number">21</span>));</span><br><span class="line">        Employee e5 = <span class="keyword">new</span> Employee(<span class="string">"Tony"</span>, <span class="number">22</span>, <span class="keyword">new</span> MyDate(<span class="number">2001</span>, <span class="number">9</span>, <span class="number">12</span>));</span><br><span class="line">        set.add(e1);</span><br><span class="line">        set.add(e2);</span><br><span class="line">        set.add(e3);</span><br><span class="line">        set.add(e4);</span><br><span class="line">        set.add(e5);</span><br><span class="line">        <span class="comment">//遍历</span></span><br><span class="line">        Iterator iterator = set.iterator();</span><br><span class="line">        <span class="keyword">while</span> (iterator.hasNext()) &#123;</span><br><span class="line">            System.out.println(iterator.next());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//输出: 根据生日</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Jack', age=54, birthday=MyDate&#123;year=1998, month=12, day=21&#125;&#125;</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Tom', age=23, birthday=MyDate&#123;year=1999, month=7, day=9&#125;&#125;</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Rose', age=43, birthday=MyDate&#123;year=1999, month=7, day=19&#125;&#125;</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Tony', age=22, birthday=MyDate&#123;year=2001, month=9, day=12&#125;&#125;</span></span><br><span class="line">        <span class="comment">//Employee&#123;name='Jerry', age=12, birthday=MyDate&#123;year=2002, month=4, day=21&#125;&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-Map接口"><a href="#6-Map接口" class="headerlink" title="6. Map接口"></a>6. Map接口</h2><p>现实生活与开发中，我们常会看到这样的一类集合：用户ID与账户信息、学生姓名与考试成绩、IP地址与主机名等，这种一一对应的关系，就称作<strong>映射</strong><br>Java提供了专门的集合框架用来存储这种映射关系的对象，即<strong>java.util.Map接口</strong></p>
<h3 id="6-1-Map接口概述"><a href="#6-1-Map接口概述" class="headerlink" title="6.1 Map接口概述"></a>6.1 Map接口概述</h3><ul>
<li><p>Map与Collection并列存在。用于保存具有<code>映射关系</code>的数据：<strong>key-value</strong></p>
<ul>
<li><code>Collection</code>集合称为单列集合，元素是孤立存在的（理解为<strong>单身</strong>）</li>
<li><code>Map</code>集合称为双列集合，元素是成对存在的(理解为<strong>夫妻</strong>)</li>
</ul>
</li>
<li><p>Map 中的 key 和  value 可以是任何引用类型的数据。但常用String类作为Map的“键”。</p>
</li>
<li><p>Map接口的常用实现类：<code>HashMap</code>、<code>LinkedHashMap</code>、<code>TreeMap</code>和``Properties<code>。其中，HashMap是 Map 接口使用</code>频率最高`的实现类。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029518.png" alt="image-20220409001015034" style="zoom:67%;">

</li>
</ul>
<h3 id="6-2-Map中key-value特点"><a href="#6-2-Map中key-value特点" class="headerlink" title="6.2 Map中key-value特点"></a>6.2 Map中key-value特点</h3><p>这里主要以HashMap为例说明。HashMap中存储的key、value的特点如下：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029142.png" alt="image-20220409001213720" style="zoom:67%;">

<ul>
<li><p>Map 中的 <code>key用Set来存放</code>，<code>不允许重复</code>，即同一个 Map 对象所对应的类，须重写hashCode()和equals()方法</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242029512.png" alt="image-20220514190412763" style="zoom:67%;">
</li>
<li><p>key 和 value 之间存在单向一对一关系，通过指定 key 总能找到唯一的、确定的 value【<strong>根据key存放value</strong>】，不同key对应的<code>value可以重复</code>。value所在的类要重写equals()方法。</p>
</li>
<li><p>key和value构成一个entry。所有的entry彼此之间是<code>无序的</code>、<code>不可重复的</code>。</p>
</li>
<li><p><strong>总结</strong>:<br><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310271033778.png" alt="image-20231027103310700"></p>
</li>
</ul>
<h3 id="6-2-Map接口的常用方法"><a href="#6-2-Map接口的常用方法" class="headerlink" title="6.2 Map接口的常用方法"></a>6.2 Map接口的常用方法</h3><ul>
<li><strong>添加、修改操作：</strong><ul>
<li>Object put(Object key,Object value)：将指定key-value添加到(或修改)当前map对象中</li>
<li>void putAll(Map m):将m中的所有key-value对存放到当前map中</li>
</ul>
</li>
<li><strong>删除操作：</strong><ul>
<li>Object remove(Object key)：移除指定key的key-value对，并返回value</li>
<li>void clear()：清空当前map中的所有数据</li>
</ul>
</li>
<li><strong>元素查询的操作：</strong><ul>
<li>Object get(Object key)：获取指定key对应的value</li>
<li>boolean containsKey(Object key)：是否包含指定的key</li>
<li>boolean containsValue(Object value)：是否包含指定的value</li>
<li>int size()：返回map中key-value对的个数</li>
<li>boolean isEmpty()：判断当前map是否为空</li>
<li>boolean equals(Object obj)：判断当前map和参数对象obj是否相等</li>
</ul>
</li>
<li><strong>元视图操作的方法：</strong><ul>
<li>Set keySet()：返回所有key构成的Set集合</li>
<li>Collection values()：返回所有value构成的Collection集合</li>
<li>Set entrySet()：返回所有key-value对构成的Set集合</li>
</ul>
</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMapMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建 map对象</span></span><br><span class="line">        HashMap map = <span class="keyword">new</span> HashMap();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//添加元素到集合</span></span><br><span class="line">        map.put(<span class="string">"黄晓明"</span>, <span class="string">"杨颖"</span>);</span><br><span class="line">        map.put(<span class="string">"李晨"</span>, <span class="string">"李小璐"</span>);</span><br><span class="line">        map.put(<span class="string">"李晨"</span>, <span class="string">"范冰冰"</span>);</span><br><span class="line">        map.put(<span class="string">"邓超"</span>, <span class="string">"孙俪"</span>);</span><br><span class="line">        System.out.println(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//删除指定的key-value</span></span><br><span class="line">        System.out.println(map.remove(<span class="string">"黄晓明"</span>));</span><br><span class="line">        System.out.println(map);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//查询指定key对应的value</span></span><br><span class="line">        System.out.println(map.get(<span class="string">"邓超"</span>));</span><br><span class="line">        System.out.println(map.get(<span class="string">"黄晓明"</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    HashMap map = <span class="keyword">new</span> HashMap();</span><br><span class="line">    map.put(<span class="string">"许仙"</span>, <span class="string">"白娘子"</span>);</span><br><span class="line">    map.put(<span class="string">"董永"</span>, <span class="string">"七仙女"</span>);</span><br><span class="line">    map.put(<span class="string">"牛郎"</span>, <span class="string">"织女"</span>);</span><br><span class="line">    map.put(<span class="string">"许仙"</span>, <span class="string">"小青"</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"所有的key:"</span>);</span><br><span class="line">    Set keySet = map.keySet();</span><br><span class="line">    <span class="keyword">for</span> (Object key : keySet) &#123;</span><br><span class="line">        System.out.println(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"所有的value:"</span>);</span><br><span class="line">    Collection values = map.values();</span><br><span class="line">    <span class="keyword">for</span> (Object value : values) &#123;</span><br><span class="line">        System.out.println(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">"所有的映射关系:"</span>);</span><br><span class="line">    Set entrySet = map.entrySet();</span><br><span class="line">    <span class="keyword">for</span> (Object mapping : entrySet) &#123;</span><br><span class="line">        <span class="comment">//System.out.println(entry);</span></span><br><span class="line">        Map.Entry entry = (Map.Entry) mapping;</span><br><span class="line">        System.out.println(entry.getKey() + <span class="string">"-&gt;"</span> + entry.getValue());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-Map的主要实现类：HashMap"><a href="#6-3-Map的主要实现类：HashMap" class="headerlink" title="6.3 Map的主要实现类：HashMap"></a>6.3 Map的主要实现类：HashMap</h3><h4 id="6-3-1-HashMap概述"><a href="#6-3-1-HashMap概述" class="headerlink" title="6.3.1 HashMap概述"></a>6.3.1 HashMap概述</h4><ul>
<li>HashMap是 Map 接口<code>使用频率最高</code>的实现类。</li>
<li>HashMap是线程不安全的。允许添加 null 键和 null 值。</li>
<li>存储数据采用的哈希表结构，底层使用<code>一维数组</code>+<code>单向链表</code>+<code>红黑树</code>进行key-value数据的存储。与HashSet一样，元素的存取顺序不能保证一致。</li>
<li>HashMap <code>判断两个key相等的标准</code>是：两个 key 的hashCode值相等，通过 equals() 方法返回 true。</li>
<li>HashMap <code>判断两个value相等的标准</code>是：两个 value 通过 equals() 方法返回 true。</li>
</ul>
<h4 id="6-3-2-练习"><a href="#6-3-2-练习" class="headerlink" title="6.3.2 练习"></a>6.3.2 练习</h4><p><strong>练习1：</strong>添加你喜欢的歌手以及你喜欢他唱过的歌曲</p>
<p>例如：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242030279.png" alt="image-20220914190805362"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingerTest1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建一个HashMap用于保存歌手和其歌曲集</span></span><br><span class="line">        HashMap singers = <span class="keyword">new</span> HashMap();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//声明一组key,value</span></span><br><span class="line">        String singer1 = <span class="string">"周杰伦"</span>;</span><br><span class="line">        ArrayList songs1 = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        songs1.add(<span class="string">"双节棍"</span>);</span><br><span class="line">        songs1.add(<span class="string">"本草纲目"</span>);</span><br><span class="line">        songs1.add(<span class="string">"夜曲"</span>);</span><br><span class="line">        songs1.add(<span class="string">"稻香"</span>);</span><br><span class="line">        <span class="comment">//添加到map中</span></span><br><span class="line">        singers.put(singer1,songs1);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//声明一组key,value</span></span><br><span class="line">        String singer2 = <span class="string">"陈奕迅"</span>;</span><br><span class="line">        List songs2 = Arrays.asList(<span class="string">"浮夸"</span>, <span class="string">"十年"</span>, <span class="string">"红玫瑰"</span>, <span class="string">"好久不见"</span>, <span class="string">"孤勇者"</span>);</span><br><span class="line">        <span class="comment">//添加到map中</span></span><br><span class="line">        singers.put(singer2,songs2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//遍历map</span></span><br><span class="line">        Set entrySet = singers.entrySet();</span><br><span class="line">        <span class="keyword">for</span>(Object obj : entrySet)&#123;</span><br><span class="line">            Map.Entry entry = (Map.Entry)obj;</span><br><span class="line">            String singer = (String) entry.getKey();</span><br><span class="line">            List songs = (List) entry.getValue();</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"歌手："</span> + singer);</span><br><span class="line">            System.out.println(<span class="string">"歌曲有："</span> + songs);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式2：改为HashSet实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingerTest2</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Singer singer1 = <span class="keyword">new</span> Singer(<span class="string">"周杰伦"</span>);</span><br><span class="line">		Singer singer2 = <span class="keyword">new</span> Singer(<span class="string">"陈奕迅"</span>);</span><br><span class="line"></span><br><span class="line">		Song song1 = <span class="keyword">new</span> Song(<span class="string">"双节棍"</span>);</span><br><span class="line">		Song song2 = <span class="keyword">new</span> Song(<span class="string">"本草纲目"</span>);</span><br><span class="line">		Song song3 = <span class="keyword">new</span> Song(<span class="string">"夜曲"</span>);</span><br><span class="line">		Song song4 = <span class="keyword">new</span> Song(<span class="string">"浮夸"</span>);</span><br><span class="line">		Song song5 = <span class="keyword">new</span> Song(<span class="string">"十年"</span>);</span><br><span class="line">		Song song6 = <span class="keyword">new</span> Song(<span class="string">"孤勇者"</span>);</span><br><span class="line"></span><br><span class="line">		HashSet h1 = <span class="keyword">new</span> HashSet();<span class="comment">// 放歌手一的歌曲</span></span><br><span class="line">		h1.add(song1);</span><br><span class="line">		h1.add(song2);</span><br><span class="line">		h1.add(song3);</span><br><span class="line"></span><br><span class="line">		HashSet h2 = <span class="keyword">new</span> HashSet();<span class="comment">// 放歌手二的歌曲</span></span><br><span class="line">		h2.add(song4);</span><br><span class="line">		h2.add(song5);</span><br><span class="line">		h2.add(song6);</span><br><span class="line"></span><br><span class="line">		HashMap hashMap = <span class="keyword">new</span> HashMap();<span class="comment">// 放歌手和他对应的歌曲</span></span><br><span class="line">		hashMap.put(singer1, h1);</span><br><span class="line">		hashMap.put(singer2, h2);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span> (Object obj : hashMap.keySet()) &#123;</span><br><span class="line">			System.out.println(obj + <span class="string">"="</span> + hashMap.get(obj));</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//歌曲</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Song</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String songName;<span class="comment">//歌名</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Song</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Song</span><span class="params">(String songName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.songName = songName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getSongName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> songName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSongName</span><span class="params">(String songName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.songName = songName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"《"</span> + songName + <span class="string">"》"</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(o == <span class="keyword">this</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(o <span class="keyword">instanceof</span> Song)&#123;</span><br><span class="line">			Song song = (Song)o;</span><br><span class="line">			<span class="keyword">return</span> songName.compareTo(song.getSongName());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//歌手</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singer</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Song song;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Singer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Singer</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Song <span class="title">getSong</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> song;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSong</span><span class="params">(Song song)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.song = song;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(o == <span class="keyword">this</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(o <span class="keyword">instanceof</span> Singer)&#123;</span><br><span class="line">			Singer singer = (Singer)o;</span><br><span class="line">			<span class="keyword">return</span> name.compareTo(singer.getName());</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2</strong>：二级联动</p>
<p>将省份和城市的名称保存在集合中，当用户选择省份以后，二级联动，显示对应省份的地级市供用户选择。</p>
<p>效果演示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242030003.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CityMap</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Map model = <span class="keyword">new</span> HashMap();   <span class="comment">//使用HashMap()</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> &#123;</span><br><span class="line">		model.put(<span class="string">"北京"</span>, <span class="keyword">new</span> String[] &#123;<span class="string">"北京"</span>&#125;);</span><br><span class="line">		model.put(<span class="string">"上海"</span>, <span class="keyword">new</span> String[] &#123;<span class="string">"上海"</span>&#125;);</span><br><span class="line">		model.put(<span class="string">"天津"</span>, <span class="keyword">new</span> String[] &#123;<span class="string">"天津"</span>&#125;);</span><br><span class="line">		model.put(<span class="string">"重庆"</span>, <span class="keyword">new</span> String[] &#123;<span class="string">"重庆"</span>&#125;);</span><br><span class="line">		model.put(<span class="string">"黑龙江"</span>, <span class="keyword">new</span> String[] &#123;<span class="string">"哈尔滨"</span>,<span class="string">"齐齐哈尔"</span>,<span class="string">"牡丹江"</span>,<span class="string">"大庆"</span>,<span class="string">"伊春"</span>,<span class="string">"双鸭山"</span>,<span class="string">"绥化"</span>&#125;);</span><br><span class="line">		model.put(<span class="string">"吉林"</span>, <span class="keyword">new</span> String[] &#123;<span class="string">"长春"</span>,<span class="string">"延边"</span>,<span class="string">"吉林"</span>,<span class="string">"白山"</span>,<span class="string">"白城"</span>,<span class="string">"四平"</span>,<span class="string">"松原"</span>&#125;);</span><br><span class="line">		model.put(<span class="string">"河北"</span>, <span class="keyword">new</span> String[] &#123;<span class="string">"石家庄"</span>,<span class="string">"张家口"</span>,<span class="string">"邯郸"</span>,<span class="string">"邢台"</span>,<span class="string">"唐山"</span>,<span class="string">"保定"</span>,<span class="string">"秦皇岛"</span>&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProvinceTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		Set keySet = CityMap.model.keySet();</span><br><span class="line">		<span class="keyword">for</span>(Object s : keySet) &#123;</span><br><span class="line">			System.out.print(s + <span class="string">"\t"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line">		System.out.println(<span class="string">"请选择你所在的省份："</span>);</span><br><span class="line">		Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		String province = scan.next();</span><br><span class="line">		</span><br><span class="line">		String[] citys = (String[])CityMap.model.get(province);</span><br><span class="line">		<span class="keyword">for</span>(String city : citys) &#123;</span><br><span class="line">			System.out.print(city + <span class="string">"\t"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println();</span><br><span class="line">		System.out.println(<span class="string">"请选择你所在的城市："</span>);</span><br><span class="line">		String city = scan.next();</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"信息登记完毕"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习3</strong>：WordCount统计</p>
<p>需求：统计字符串中每个字符出现的次数</p>
<p>String str = “aaaabbbcccccccccc”;</p>
<p>提示：</p>
<p>char[] arr = str.toCharArray();   //将字符串转换成字符数组</p>
<p>HashMap hm = new HashMap();   //创建双列集合存储键和值，键放字符，值放次数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordCount</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"aaaabbbcccccccccc"</span>;</span><br><span class="line">        <span class="comment">//统计每个字符串出现的次数 最终结果是类似于:a:0 b:1 c:2</span></span><br><span class="line">        <span class="comment">//因为有映射关系 ---&gt; 使用HashMap类</span></span><br><span class="line">        HashMap map=<span class="keyword">new</span> HashMap();</span><br><span class="line">        <span class="comment">//字符串转为字符数组</span></span><br><span class="line">        <span class="keyword">char</span>[] arr=str.toCharArray();</span><br><span class="line">        <span class="keyword">for</span>(Object temp:arr)&#123;</span><br><span class="line">            <span class="comment">//如果不存在就key设置为temp，value设置1</span></span><br><span class="line">            <span class="keyword">if</span>(!map.containsKey(temp))&#123;</span><br><span class="line">                map.put(temp,<span class="number">1</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">//如何获取oldvalue</span></span><br><span class="line">                <span class="comment">//方法一: 通过map.put返回原有value</span></span><br><span class="line">                <span class="comment">//方法二: 通过get(KEY)获取对应的值  map.put(temp,map.get(temp));</span></span><br><span class="line">                <span class="keyword">int</span> oldvalue= (<span class="keyword">int</span>) map.put(temp,<span class="number">1</span>);   <span class="comment">//只能通过先设置一次获取到原来的value 然后下一次是认真的+1</span></span><br><span class="line">                map.put(temp,oldvalue+<span class="number">1</span>); <span class="comment">//如果存在就value+1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(map);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-4-Map实现类之二：LinkedHashMap"><a href="#6-4-Map实现类之二：LinkedHashMap" class="headerlink" title="6.4 Map实现类之二：LinkedHashMap"></a>6.4 Map实现类之二：LinkedHashMap</h3><ul>
<li>LinkedHashMap 是 HashMap 的子类</li>
<li>存储数据采用的哈希表结构+链表结构，在HashMap存储结构的基础上，使用了一对<code>双向链表</code>来<code>记录添加元素的先后顺序</code>，可以保证遍历元素时，与添加的顺序一致。</li>
<li>通过哈希表结构可以保证键的唯一、不重复，需要键所在类重写hashCode()方法、equals()方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLinkedHashMap</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LinkedHashMap map = <span class="keyword">new</span> LinkedHashMap();</span><br><span class="line">        map.put(<span class="string">"王五"</span>, <span class="number">13000.0</span>);</span><br><span class="line">        map.put(<span class="string">"张三"</span>, <span class="number">10000.0</span>);</span><br><span class="line">        <span class="comment">//key相同，新的value会覆盖原来的value</span></span><br><span class="line">        <span class="comment">//因为String重写了hashCode和equals方法</span></span><br><span class="line">        map.put(<span class="string">"张三"</span>, <span class="number">12000.0</span>);</span><br><span class="line">        map.put(<span class="string">"李四"</span>, <span class="number">14000.0</span>);</span><br><span class="line">        <span class="comment">//HashMap支持key和value为null值</span></span><br><span class="line">        String name = <span class="keyword">null</span>;</span><br><span class="line">        Double salary = <span class="keyword">null</span>;</span><br><span class="line">        map.put(name, salary);</span><br><span class="line"></span><br><span class="line">        Set entrySet = map.entrySet();</span><br><span class="line">        <span class="keyword">for</span> (Object obj : entrySet) &#123;</span><br><span class="line">        	Map.Entry entry = (Map.Entry)obj;</span><br><span class="line">            System.out.println(entry);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-5-Map实现类之三：TreeMap"><a href="#6-5-Map实现类之三：TreeMap" class="headerlink" title="6.5 Map实现类之三：TreeMap"></a>6.5 Map实现类之三：TreeMap</h3><ul>
<li>TreeMap存储 key-value 对时，需要根据 key-value 对进行排序。TreeMap 可以保证所有的 key-value 对处于<code>有序状态</code>。</li>
<li>TreeSet底层使用<code>红黑树</code>结构存储数据</li>
<li>TreeMap 的 Key 的排序：<ul>
<li><code>自然排序</code>：TreeMap 的所有的 Key 必须实现 Comparable 接口，而且所有的 Key 应该是同一个类的对象，否则将会抛出 ClasssCastException</li>
<li><code>定制排序</code>：创建 TreeMap 时，构造器传入一个 Comparator 对象，该对象负责对 TreeMap 中的所有 key 进行排序。此时不需要 Map 的 Key 实现 Comparable 接口</li>
</ul>
</li>
<li>TreeMap判断<code>两个key相等的标准</code>：两个key通过compareTo()方法或者compare()方法返回0。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestTreeMap</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 自然排序举例</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        TreeMap map = <span class="keyword">new</span> TreeMap();</span><br><span class="line"></span><br><span class="line">        map.put(<span class="string">"CC"</span>,<span class="number">45</span>);</span><br><span class="line">        map.put(<span class="string">"MM"</span>,<span class="number">78</span>);</span><br><span class="line">        map.put(<span class="string">"DD"</span>,<span class="number">56</span>);</span><br><span class="line">        map.put(<span class="string">"GG"</span>,<span class="number">89</span>);</span><br><span class="line">        map.put(<span class="string">"JJ"</span>,<span class="number">99</span>);</span><br><span class="line"></span><br><span class="line">        Set entrySet = map.entrySet();</span><br><span class="line">        <span class="keyword">for</span>(Object entry : entrySet)&#123;</span><br><span class="line">            System.out.println(entry);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 定制排序</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//按照User的姓名的从小到大的顺序排列</span></span><br><span class="line"></span><br><span class="line">        TreeMap map = <span class="keyword">new</span> TreeMap(<span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(o1 <span class="keyword">instanceof</span> User &amp;&amp; o2 <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">                    User u1 = (User)o1;</span><br><span class="line">                    User u2 = (User)o2;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> u1.name.compareTo(u2.name);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"输入的类型不匹配"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        map.put(<span class="keyword">new</span> User(<span class="string">"Tom"</span>,<span class="number">12</span>),<span class="number">67</span>);</span><br><span class="line">        map.put(<span class="keyword">new</span> User(<span class="string">"Rose"</span>,<span class="number">23</span>),<span class="string">"87"</span>);</span><br><span class="line">        map.put(<span class="keyword">new</span> User(<span class="string">"Jerry"</span>,<span class="number">2</span>),<span class="number">88</span>);</span><br><span class="line">        map.put(<span class="keyword">new</span> User(<span class="string">"Eric"</span>,<span class="number">18</span>),<span class="number">45</span>);</span><br><span class="line">        map.put(<span class="keyword">new</span> User(<span class="string">"Tommy"</span>,<span class="number">44</span>),<span class="number">77</span>);</span><br><span class="line">        map.put(<span class="keyword">new</span> User(<span class="string">"Jim"</span>,<span class="number">23</span>),<span class="number">88</span>);</span><br><span class="line">        map.put(<span class="keyword">new</span> User(<span class="string">"Maria"</span>,<span class="number">18</span>),<span class="number">34</span>);</span><br><span class="line"></span><br><span class="line">        Set entrySet = map.entrySet();</span><br><span class="line">        <span class="keyword">for</span>(Object entry : entrySet)&#123;</span><br><span class="line">            System.out.println(entry);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"User&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    举例：按照age从小到大的顺序排列，如果age相同，则按照name从大到小的顺序排列</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span> == o)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(o <span class="keyword">instanceof</span> User)&#123;</span><br><span class="line">            User user = (User)o;</span><br><span class="line">            <span class="keyword">int</span> value = <span class="keyword">this</span>.age - user.age;</span><br><span class="line">            <span class="keyword">if</span>(value != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> -<span class="keyword">this</span>.name.compareTo(user.name);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"输入的类型不匹配"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-6-Map实现类之四：Hashtable"><a href="#6-6-Map实现类之四：Hashtable" class="headerlink" title="6.6 Map实现类之四：Hashtable"></a>6.6 Map实现类之四：Hashtable</h3><ul>
<li>Hashtable是Map接口的<code>古老实现类</code>，JDK1.0就提供了。不同于HashMap，Hashtable是线程安全的。</li>
<li>Hashtable实现原理和HashMap相同，功能相同。底层都使用哈希表结构（数组+单向链表），查询速度快。</li>
<li>与HashMap一样，Hashtable 也不能保证其中 Key-Value 对的顺序</li>
<li>Hashtable判断两个key相等、两个value相等的标准，与HashMap一致。</li>
<li>与HashMap不同，Hashtable 不允许使用 null 作为 key 或 value。</li>
</ul>
<p>面试题：Hashtable和HashMap的区别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HashMap:底层是一个哈希表（jdk7:数组+链表;jdk8:数组+链表+红黑树）,是一个线程不安全的集合,执行效率高</span><br><span class="line">Hashtable:底层也是一个哈希表（数组+链表）,是一个线程安全的集合,执行效率低</span><br><span class="line"></span><br><span class="line">HashMap集合:可以存储null的键、null的值</span><br><span class="line">Hashtable集合,不能存储null的键、null的值</span><br><span class="line"></span><br><span class="line">Hashtable和Vector集合一样,在jdk1.2版本之后被更先进的集合(HashMap,ArrayList)取代了。所以HashMap是Map的主要实现类，Hashtable是Map的古老实现类。</span><br><span class="line"></span><br><span class="line">Hashtable的子类Properties（配置文件）依然活跃在历史舞台</span><br><span class="line">Properties集合是一个唯一和IO流相结合的集合</span><br></pre></td></tr></table></figure>



<h3 id="6-7-Map实现类之五：Properties"><a href="#6-7-Map实现类之五：Properties" class="headerlink" title="6.7 Map实现类之五：Properties"></a>6.7 Map实现类之五：Properties</h3><ul>
<li><p>Properties 类是 Hashtable 的子类，该对象用于处理属性文件</p>
</li>
<li><p>由于属性文件里的 key、value 都是字符串类型，所以 Properties 中要求 key 和 value 都是字符串类型</p>
</li>
<li><p>存取数据时，建议使用setProperty(String key,String value)方法和getProperty(String key)方法</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Properties properties = System.getProperties();</span><br><span class="line">    String fileEncoding = properties.getProperty(<span class="string">"file.encoding"</span>);<span class="comment">//当前源文件字符编码</span></span><br><span class="line">    System.out.println(<span class="string">"fileEncoding = "</span> + fileEncoding);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">    properties.setProperty(<span class="string">"user"</span>,<span class="string">"songhk"</span>);</span><br><span class="line">    properties.setProperty(<span class="string">"password"</span>,<span class="string">"123456"</span>);</span><br><span class="line">    System.out.println(properties);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    Properties pros = <span class="keyword">new</span> Properties();</span><br><span class="line">    pros.load(<span class="keyword">new</span> FileInputStream(<span class="string">"jdbc.properties"</span>));</span><br><span class="line">    String user = pros.getProperty(<span class="string">"user"</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-Collections工具类"><a href="#7-Collections工具类" class="headerlink" title="7. Collections工具类"></a>7. Collections工具类</h2><p>Arrays是一个操作<strong>数组</strong>的工具类</p>
<p>Collections 是一个操作 Set、List 和 Map 等<strong>集合</strong>的工具类。</p>
<h3 id="7-1-常用方法-static方法"><a href="#7-1-常用方法-static方法" class="headerlink" title="7.1 常用方法(static方法 )"></a>7.1 常用方法(static方法 )</h3><p>Collections 中提供了一系列<strong>静态方法</strong>对集合元素进行<strong>排序</strong>、<strong>查询</strong>和<strong>修改</strong>等操作，还提供了对<strong>集合对象设置不可变</strong>、对<strong>集合对象实现同步控制</strong>等方法（均为static方法）：</p>
<p><strong>- 排序</strong></p>
<ul>
<li>reverse(List)：反转 List 中元素的顺序</li>
<li>shuffle(List)：对 List 集合元素进行随机排序</li>
<li>sort(List)：根据元素的自然顺序对指定 List 集合元素按升序排序</li>
<li>sort(List，Comparator)：根据指定的 Comparator 产生的顺序对 List 集合元素进行排序</li>
<li>swap(List，int， int)：将指定 list 集合中的 i 处元素和 j 处元素进行交换</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test1()&#123;</span><br><span class="line">    ArrayList list&#x3D;new ArrayList();</span><br><span class="line">    list.add(123);</span><br><span class="line">    list.add(12);</span><br><span class="line">    list.add(2);</span><br><span class="line">    list.add(4414);</span><br><span class="line">    System.out.println(&quot;初始的list:&quot;+list); &#x2F;&#x2F;初始的list:[123, 12, 2, 4414]</span><br><span class="line">    Collections.reverse(list);</span><br><span class="line">    System.out.println(&quot;reverse之后:&quot;+list);  &#x2F;&#x2F; 反转顺序 ---- reverse之后:[4414, 2, 12, 123]</span><br><span class="line">    Collections.shuffle(list);</span><br><span class="line">    System.out.println(&quot;shuffle之后:&quot;+list);  &#x2F;&#x2F;很随机 ---- shuffle之后:[2, 4414, 12, 123]</span><br><span class="line">    Collections.sort(list);</span><br><span class="line">    System.out.println(&quot;sort之后:&quot;+list);  &#x2F;&#x2F; 自然顺序(升序) ---- sort之后:[2, 12, 123, 4414]</span><br><span class="line">    Collections.sort(list, new Comparator() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public int compare(Object o1, Object o2) &#123;</span><br><span class="line">            int temp1&#x3D;(int)o1;</span><br><span class="line">            int temp2&#x3D;(int)o2;</span><br><span class="line">            return -(temp1-temp2);  &#x2F;&#x2F;实现倒序</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    System.out.println(&quot;定制排序之后:&quot;+list); &#x2F;&#x2F;定制排序之后:[2, 12, 123, 4414]</span><br><span class="line">    Collections.swap(list,0,2);</span><br><span class="line">    System.out.println(&quot;将0和2位置的元素互换位置:&quot;+list); &#x2F;&#x2F; 将0和2位置的元素互换位置:  ---- swap之后:[12, 123, 4414, 2]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>- 查找</strong></p>
<ul>
<li>Object max(Collection)：根据元素的自然顺序，返回给定集合中的最大元素</li>
<li>Object max(Collection，Comparator)：根据 Comparator 指定的顺序，返回给定集合中的最大元素</li>
<li>Object min(Collection)：根据元素的自然顺序，返回给定集合中的最小元素</li>
<li>Object min(Collection，Comparator)：根据 Comparator 指定的顺序，返回给定集合中的最小元素</li>
<li>int binarySearch(List list,T key)在List集合中查找某个元素的下标，但是List的元素必须是T或T的子类对象，而且必须是可比较大小的，即支持自然排序的。而且集合也事先必须是有序的，否则结果不确定。</li>
<li>int binarySearch(List list,T key,Comparator c)在List集合中查找某个元素的下标，但是List的元素必须是T或T的子类对象，而且集合也事先必须是按照c比较器规则进行排序过的，否则结果不确定。</li>
<li>int frequency(Collection c，Object o)：返回指定集合中指定元素的出现次数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2()&#123;</span><br><span class="line">    ArrayList list&#x3D;new ArrayList();</span><br><span class="line">    list.add(123);</span><br><span class="line">    list.add(12);</span><br><span class="line">    list.add(2);</span><br><span class="line">    list.add(4414);</span><br><span class="line">    System.out.println(&quot;初始的list:&quot;+list); &#x2F;&#x2F;初始的list:[123, 12, 2, 4414]</span><br><span class="line">    &#x2F;&#x2F;寻找最大值</span><br><span class="line">    System.out.println(&quot;max(list)得出的最大值:&quot;+Collections.max(list)); &#x2F;&#x2F;max(list)得出的最大值:4414</span><br><span class="line">    System.out.println(&quot;max(list,Comparator)得出的最大值:&quot;+Collections.max(list, new Comparator() &#123;  &#x2F;&#x2F;max(list,Comparator)得出的最大值:4414</span><br><span class="line">        @Override</span><br><span class="line">        public int compare(Object o1, Object o2) &#123;</span><br><span class="line">            int temp1&#x3D;(int)o1;</span><br><span class="line">            int temp2&#x3D;(int)o2;</span><br><span class="line">            return (temp1-temp2);  &#x2F;&#x2F;实现倒序</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;));</span><br><span class="line">    &#x2F;&#x2F;寻找最小值</span><br><span class="line">    System.out.println(&quot;min(list)得出的最小值:&quot;+Collections.min(list)); &#x2F;&#x2F;min(list)得出的最小值:2</span><br><span class="line">    System.out.println(&quot;min(list,Comparator)得出的最小值:&quot;+Collections.min(list, new Comparator() &#123; &#x2F;&#x2F;min(list,Comparator)得出的最小值:2</span><br><span class="line">        @Override</span><br><span class="line">        public int compare(Object o1, Object o2) &#123;</span><br><span class="line">            int temp1&#x3D;(int)o1;</span><br><span class="line">            int temp2&#x3D;(int)o2;</span><br><span class="line">            return (temp1-temp2);  &#x2F;&#x2F;实现倒序</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;));</span><br><span class="line">    &#x2F;&#x2F;查找某个元素的下标</span><br><span class="line">    &#x2F;&#x2F;1.自然排序</span><br><span class="line">    Collections.sort(list);</span><br><span class="line">    System.out.println(&quot;排序之后的list:&quot;+list);  &#x2F;&#x2F; 排序之后的list:[2, 12, 123, 4414]</span><br><span class="line">    &#x2F;&#x2F;查找某个元素的下标</span><br><span class="line">    System.out.println(Collections.binarySearch(list,12));   &#x2F;&#x2F;下标为1</span><br><span class="line">    &#x2F;&#x2F;2.定制排序</span><br><span class="line">    System.out.println(Collections.binarySearch(list,12, new Comparator() &#123;    &#x2F;&#x2F;下标为1</span><br><span class="line">        @Override</span><br><span class="line">        public int compare(Object o1, Object o2) &#123;</span><br><span class="line">            int temp1&#x3D;(int)o1;</span><br><span class="line">            int temp2&#x3D;(int)o2;</span><br><span class="line">            return -(temp1-temp2);  &#x2F;&#x2F;实现倒序</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;));</span><br><span class="line">    &#x2F;&#x2F;查找指定元素的出现次数</span><br><span class="line">    System.out.println(Collections.frequency(list,412)); &#x2F;&#x2F;412元素出现的次数为0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>- 复制、替换</strong></p>
<ul>
<li>void copy(List dest,List src)：将src中的内容复制到dest中</li>
<li>boolean replaceAll(List list，Object oldVal，Object newVal)：使用新值替换 List 对象的所有旧值</li>
<li>提供了多个unmodifiableXxx()方法，该方法返回指定 Xxx的不可修改的视图。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test3()&#123;</span><br><span class="line">    ArrayList list&#x3D;new ArrayList();</span><br><span class="line">    list.add(123);</span><br><span class="line">    list.add(12);</span><br><span class="line">    list.add(2);</span><br><span class="line">    list.add(4414);</span><br><span class="line">    System.out.println(&quot;初始的list:&quot;+list); &#x2F;&#x2F;初始的list:[123, 12, 2, 4414]</span><br><span class="line">    &#x2F;&#x2F;复制</span><br><span class="line">    ArrayList list1&#x3D;new ArrayList();</span><br><span class="line">    list1.add(&quot;AA&quot;);</span><br><span class="line">    list1.add(&quot;BA&quot;);</span><br><span class="line">    list1.add(&quot;CCC&quot;);</span><br><span class="line">    Collections.copy(list,list1);</span><br><span class="line">    System.out.println(&quot;复制之后的list:&quot;+list); &#x2F;&#x2F;复制之后的list:[AA, BA, CCC, 4414]</span><br><span class="line">&#125;</span><br><span class="line">------------------------------------------------------------------------------------------------------------</span><br><span class="line">@Test</span><br><span class="line">public void test4()&#123;</span><br><span class="line">    ArrayList list&#x3D;new ArrayList();</span><br><span class="line">    list.add(123);</span><br><span class="line">    list.add(123);</span><br><span class="line">    list.add(2);</span><br><span class="line">    list.add(4414);</span><br><span class="line">    System.out.println(&quot;初始的list:&quot;+list); &#x2F;&#x2F;初始的list:[123, 123, 2, 4414]</span><br><span class="line">    &#x2F;&#x2F;替换</span><br><span class="line">    Collections.replaceAll(list,123,&quot;CC&quot;); &#x2F;&#x2F;替换之后的list:[CC, CC, 2, 4414]</span><br><span class="line">    System.out.println(&quot;替换之后的list:&quot;+list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>- 添加</strong></p>
<ul>
<li>boolean addAll(Collection  c,T… elements)将所有指定元素添加到指定 collection 中。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test5()&#123;</span><br><span class="line">    ArrayList list&#x3D;new ArrayList();</span><br><span class="line">    list.add(123);</span><br><span class="line">    list.add(12);</span><br><span class="line">    list.add(2);</span><br><span class="line">    list.add(4414);</span><br><span class="line">    System.out.println(&quot;初始的list:&quot;+list); &#x2F;&#x2F;初始的list:[123, 12, 2, 4414]</span><br><span class="line">    &#x2F;&#x2F;添加</span><br><span class="line">    Collections.addAll(list,&quot;CC&quot;,&quot;asd&quot;,&quot;ewr&quot;);</span><br><span class="line">    System.out.println(&quot;添加之后的list:&quot;+list); &#x2F;&#x2F;添加之后的list:[123, 12, 2, 4414, CC, asd, ewr]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>- 同步</strong></p>
<ul>
<li>Collections 类中提供了多个 synchronizedXxx() 方法，该方法可使将指定集合包装成线程同步的集合，从而可以解决多线程并发访问集合时的线程安全问题：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281041831.png" alt="image-20220409003002526"></p>
<h3 id="7-2-练习"><a href="#7-2-练习" class="headerlink" title="7.2 练习"></a>7.2 练习</h3><p><strong>练习1：</strong></p>
<p>请从键盘随机输入10个整数保存到List中，并按倒序、从大到小的顺序显示出来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.Collections;</span><br><span class="line">import java.util.Comparator;</span><br><span class="line">public class CollectionTest1 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ArrayList list&#x3D;new ArrayList();</span><br><span class="line">        list.add(12);</span><br><span class="line">        list.add(345);</span><br><span class="line">        list.add(323);</span><br><span class="line">        list.add(1233);</span><br><span class="line">        list.add(3);</span><br><span class="line">        list.add(123);</span><br><span class="line">        list.add(232);</span><br><span class="line">        list.add(122);</span><br><span class="line">        list.add(167);</span><br><span class="line">        list.add(789);</span><br><span class="line">        System.out.println(&quot;初始的list:&quot;+list); &#x2F;&#x2F; 初始的list:[12, 345, 323, 1233, 3, 123, 232, 122, 167, 789]</span><br><span class="line">        &#x2F;&#x2F;排序的话 -- 默认排序(升序不可以) 那就只能实现Comparator接口进行定制排序</span><br><span class="line">        Collections.sort(list, new Comparator&lt;Object&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public int compare(Object o1, Object o2) &#123;</span><br><span class="line">                int temp1&#x3D;(int)o1;</span><br><span class="line">                int temp2&#x3D;(int)o2;</span><br><span class="line">                return -(temp1-temp2);  &#x2F;&#x2F;倒序</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        System.out.println(&quot;倒序之后的list:&quot;+list); &#x2F;&#x2F; 倒序之后的list:[1233, 789, 345, 323, 232, 167, 123, 122, 12, 3]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281053007.png" alt="image-20231028105328967"></p>
<p><strong>练习2：</strong>模拟斗地主洗牌和发牌，牌没有排序</p>
<p>效果演示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242030648.png" alt="image-20220409011625061"></p>
<p>代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> MapTest;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CollectionTest2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] num = &#123;<span class="string">"A"</span>,<span class="string">"2"</span>,<span class="string">"3"</span>,<span class="string">"4"</span>,<span class="string">"5"</span>,<span class="string">"6"</span>,<span class="string">"7"</span>,<span class="string">"8"</span>,<span class="string">"9"</span>,<span class="string">"10"</span>,<span class="string">"J"</span>,<span class="string">"Q"</span>,<span class="string">"K"</span>&#125;;</span><br><span class="line">        String[] color = &#123;<span class="string">"方片"</span>,<span class="string">"梅花"</span>,<span class="string">"红桃"</span>,<span class="string">"黑桃"</span>&#125;;</span><br><span class="line">        ArrayList&lt;String&gt; poker = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//1. 生成54张扑克牌</span></span><br><span class="line">        <span class="keyword">for</span> (String s1 : color) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String s2 : num) &#123;</span><br><span class="line">                poker.add(s1.concat(<span class="string">" "</span> + s2));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        poker.add(<span class="string">"小王"</span>);</span><br><span class="line">        poker.add(<span class="string">"大王"</span>);</span><br><span class="line">        <span class="comment">//2.洗牌</span></span><br><span class="line">        Collections.shuffle(poker);</span><br><span class="line">        <span class="comment">//3.发牌</span></span><br><span class="line">        ArrayList tomCards = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        ArrayList jerryCards = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        ArrayList meCards = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        ArrayList lastCards = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">17</span>;i++)&#123;</span><br><span class="line">            tomCards.add(poker.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">18</span>;i&lt;<span class="number">34</span>;i++)&#123;</span><br><span class="line">            jerryCards.add(poker.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">35</span>;i&lt;<span class="number">51</span>;i++)&#123;</span><br><span class="line">            meCards.add(poker.get(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">51</span>;i&lt;<span class="number">54</span>;i++)&#123;</span><br><span class="line">            lastCards.add(poker.get(i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. 看牌</span></span><br><span class="line">        System.out.println(<span class="string">"Tom:\n"</span> + tomCards);</span><br><span class="line">        System.out.println(<span class="string">"Jerry:\n"</span> + jerryCards);</span><br><span class="line">        System.out.println(<span class="string">"me:\n"</span> + meCards);</span><br><span class="line">        System.out.println(<span class="string">"底牌:\n"</span> + lastCards);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310281101500.png" alt="image-20231028110109452"></p>
<p><strong>练习3：</strong>模拟斗地主洗牌和发牌并对牌进行排序的代码实现。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310242030895.png" alt="image-20220915002714578"></p>
<p>提示：考查HashMap、TreeSet、ArrayList、Collections</p>
<p>代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PokerTest1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String[] num = &#123;<span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>, <span class="string">"6"</span>, <span class="string">"7"</span>, <span class="string">"8"</span>, <span class="string">"9"</span>, <span class="string">"10"</span>, <span class="string">"J"</span>, <span class="string">"Q"</span>, <span class="string">"K"</span>, <span class="string">"A"</span>, <span class="string">"2"</span>&#125;;</span><br><span class="line">        String[] color = &#123;<span class="string">"方片"</span>, <span class="string">"梅花"</span>, <span class="string">"红桃"</span>, <span class="string">"黑桃"</span>&#125;;</span><br><span class="line">        HashMap map = <span class="keyword">new</span> HashMap(); <span class="comment">// 存储索引和扑克牌</span></span><br><span class="line">        ArrayList list = <span class="keyword">new</span> ArrayList(); <span class="comment">// 存储索引</span></span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>; <span class="comment">// 索引的开始值</span></span><br><span class="line">        <span class="keyword">for</span> (String s1 : num) &#123;</span><br><span class="line">            <span class="keyword">for</span> (String s2 : color) &#123;</span><br><span class="line">                map.put(index, s2.concat(s1)); <span class="comment">// 将索引和扑克牌添加到HashMap中</span></span><br><span class="line">                list.add(index); <span class="comment">// 将索引添加到ArrayList集合中</span></span><br><span class="line">                index++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(index, <span class="string">"小王"</span>);</span><br><span class="line">        list.add(index);</span><br><span class="line">        index++;</span><br><span class="line">        map.put(index, <span class="string">"大王"</span>);</span><br><span class="line">        list.add(index);</span><br><span class="line">        <span class="comment">// 洗牌</span></span><br><span class="line">        Collections.shuffle(list);</span><br><span class="line">        <span class="comment">// 发牌  ---保证每个人是TreeSet就行</span></span><br><span class="line">        TreeSet Tom = <span class="keyword">new</span> TreeSet();</span><br><span class="line">        TreeSet Jerry = <span class="keyword">new</span> TreeSet();</span><br><span class="line">        TreeSet me = <span class="keyword">new</span> TreeSet();</span><br><span class="line">        TreeSet lastCards = <span class="keyword">new</span> TreeSet();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; list.size(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= list.size() - <span class="number">3</span>) &#123;</span><br><span class="line">                lastCards.add(list.get(i)); <span class="comment">// 将list集合中的索引添加到TreeSet集合中会自动排序</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                Tom.add(list.get(i));</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i % <span class="number">3</span> == <span class="number">1</span>) &#123;</span><br><span class="line">                Jerry.add(list.get(i));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                me.add(list.get(i));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 看牌</span></span><br><span class="line">        lookPoker(<span class="string">"Tom"</span>, Tom, map);</span><br><span class="line">        lookPoker(<span class="string">"Jerry"</span>, Jerry, map);</span><br><span class="line">        lookPoker(<span class="string">"康师傅"</span>, me, map);</span><br><span class="line">        lookPoker(<span class="string">"底牌"</span>, lastCards, map);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">lookPoker</span><span class="params">(String name, TreeSet ts, HashMap map)</span> </span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">"的牌是:"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Object index : ts) &#123;</span><br><span class="line">            System.out.print(map.get(index) + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-picgo" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/21/picgo/" class="article-date">
      <time datetime="2023-10-21T12:52:36.000Z" itemprop="datePublished">2023-10-21</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/21/picgo/">picgo</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="引入前提"><a href="#引入前提" class="headerlink" title="引入前提"></a>引入前提</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.之前传入博客经常因为图片本地可见，但是上传之后不可见</span><br><span class="line">2.因为路径导致经常更改图片位置</span><br><span class="line">---》 因此网上搜索可以使用picgo软件将图片上传到github仓库实现</span><br></pre></td></tr></table></figure>

<h1 id="1-配置Github仓库"><a href="#1-配置Github仓库" class="headerlink" title="1.配置Github仓库"></a>1.配置Github仓库</h1><h2 id="1-1-创建仓库"><a href="#1-1-创建仓库" class="headerlink" title="1.1 创建仓库"></a>1.1 创建仓库</h2><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212058070.png" alt="image-20231021205806036"></p>
<ul>
<li><strong>其他步骤看参考步骤5里面的就行</strong></li>
</ul>
<h1 id="2-配置picgo软件"><a href="#2-配置picgo软件" class="headerlink" title="2.配置picgo软件"></a>2.配置picgo软件</h1><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212101591.png" alt="image-20231021210145557"></p>
<h1 id="3-配置typora"><a href="#3-配置typora" class="headerlink" title="3.配置typora"></a>3.配置typora</h1><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212100941.png" alt="image-20231021210037894"></p>
<h1 id="4-如何上传"><a href="#4-如何上传" class="headerlink" title="4.如何上传"></a>4.如何上传</h1><p>直接复制图片只是他会自动上传，然后就可以看到地址直接是github仓库的路径</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212102930.png" alt="image-20231021210202896"></p>
<h1 id="5-参考链接"><a href="#5-参考链接" class="headerlink" title="5.参考链接"></a>5.参考链接</h1>
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/picture/" rel="tag">picture</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-代码随想录-JAVA" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/20/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95-JAVA/" class="article-date">
      <time datetime="2023-10-20T06:35:36.000Z" itemprop="datePublished">2023-10-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/20/%E4%BB%A3%E7%A0%81%E9%9A%8F%E6%83%B3%E5%BD%95-JAVA/">代码随想录</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        
      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JAVA-常用类和基础API" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/20/JAVA-%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%92%8C%E5%9F%BA%E7%A1%80API/" class="article-date">
      <time datetime="2023-10-20T06:31:45.000Z" itemprop="datePublished">2023-10-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/20/JAVA-%E5%B8%B8%E7%94%A8%E7%B1%BB%E5%92%8C%E5%9F%BA%E7%A1%80API/">JAVA-常用类和基础API</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="第11章-常用类和基础API"><a href="#第11章-常用类和基础API" class="headerlink" title="第11章_常用类和基础API"></a>第11章_常用类和基础API</h1><h2 id="本章专题与脉络"><a href="#本章专题与脉络" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310221924469.png" alt="第3阶段：Java高级应用-第11章" style="zoom:50%;">

<h2 id="1-字符串相关类之不可变字符序列：String"><a href="#1-字符串相关类之不可变字符序列：String" class="headerlink" title="1. 字符串相关类之不可变字符序列：String"></a>1. 字符串相关类之不可变字符序列：String</h2><h3 id="1-1-String的特性"><a href="#1-1-String的特性" class="headerlink" title="1.1 String的特性"></a>1.1 String的特性</h3><ul>
<li><p><code>java.lang.String</code> 类代表字符串。Java程序中所有的字符串文字（例如<code>&quot;hello&quot;</code> ）都可以看作是实现此类的实例。</p>
</li>
<li><p>字符串是常量，用双引号引起来表示。它们的值在创建之后不能更改。</p>
</li>
<li><p>字符串String类型本身是final声明的，意味着我们不能继承String。</p>
</li>
<li><p>String对象的字符内容是存储在一个字符数组value[]中的。<code>&quot;abc&quot;</code> 等效于 <code>char[] data={&#39;h&#39;,&#39;e&#39;,&#39;l&#39;,&#39;l&#39;,&#39;o&#39;}</code>。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310221924899.png" alt="image-20220514184404024" style="zoom:80%;">

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jdk8中的String源码：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> </span>&#123;</span><br><span class="line">    <span class="comment">/** The value is used for character storage. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">char</span> value[]; <span class="comment">//String对象的字符内容是存储在此数组中</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">/** Cache the hash code for the string */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> hash; <span class="comment">// Default to 0</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>private意味着外面无法直接获取字符数组，而且String没有提供value的get和set方法。</p>
</li>
<li><p>final意味着字符数组的引用不可改变，而且String也没有提供方法来修改value数组某个元素值</p>
</li>
<li><p>因此字符串的字符数组内容也不可变的，即String代表着不可变的字符序列。即，一旦对字符串进行修改，就会产生新对象。</p>
</li>
<li><p>JDK9只有，底层使用byte[]数组。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">String</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span>, <span class="title">Comparable</span>&lt;<span class="title">String</span>&gt;, <span class="title">CharSequence</span> </span>&#123; </span><br><span class="line">    <span class="meta">@Stable</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">byte</span>[] value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//官方说明：... that most String objects contain only Latin-1 characters. Such characters require only one byte of storage, hence half of the space in the internal char arrays of such String objects is going unused.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//细节：... The new String class will store characters encoded either as ISO-8859-1/Latin-1 (one byte per character), or as UTF-16 (two bytes per character), based upon the contents of the string. The encoding flag will indicate which encoding is used.</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Java 语言提供对字符串串联符号（”+”）以及将其他对象转换为字符串的特殊支持（toString()方法）。</p>
</li>
</ul>
<h3 id="1-2-String的内存结构"><a href="#1-2-String的内存结构" class="headerlink" title="1.2 String的内存结构"></a>1.2 String的内存结构</h3><h4 id="1-2-1-概述"><a href="#1-2-1-概述" class="headerlink" title="1.2.1 概述"></a>1.2.1 概述</h4><p>因为字符串对象设计为不可变，所以字符串有常量池来保存很多常量对象。</p>
<p>JDK6中，字符串常量池在方法区。</p>
<p>JDK7开始，就移到堆空间。</p>
<p>举例内存结构分配：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310221924399.png" alt="image-20220405160036240"></p>
<h4 id="1-2-2-练习类型1：拼接"><a href="#1-2-2-练习类型1：拼接" class="headerlink" title="1.2.2 练习类型1：拼接"></a>1.2.2 练习类型1：拼接</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String s1 = <span class="string">"hello"</span>;</span><br><span class="line">String s2 = <span class="string">"hello"</span>;  <span class="comment">//字符串常量池不允许存放两个相同的字符串常量</span></span><br><span class="line"><span class="comment">//因此s1和s2其实指向是统一位置</span></span><br><span class="line">System.out.println(s1 == s2);</span><br><span class="line"><span class="comment">// 内存中只有一个"hello"对象被创建，同时被s1和s2共享。</span></span><br></pre></td></tr></table></figure>

<p>对应内存结构为：（以下内存结构以<code>JDK6为例</code>绘制）：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310221925656.png" alt="image-20220405152839525" style="zoom:67%;">

<p>进一步：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310221925319.png" alt="image-20220405152941599" style="zoom:67%;">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;新建一个对象，name是自己特有的</span><br><span class="line">Person p1 &#x3D; new Person();</span><br><span class="line">p1.name &#x3D; “Tom&quot;;</span><br><span class="line">&#x2F;&#x2F;新建一个对象 name是自己特有的</span><br><span class="line">Person p2 &#x3D; new Person();</span><br><span class="line">p2.name &#x3D; “Tom&quot;;</span><br><span class="line">System.out.println(p1.name.equals( p2.name)); &#x2F;&#x2F;true</span><br><span class="line">System.out.println(p1.name &#x3D;&#x3D; p2.name); &#x2F;&#x2F;true</span><br><span class="line">System.out.println(p1.name &#x3D;&#x3D; &quot;Tom&quot;); &#x2F;&#x2F;true</span><br><span class="line">p1.name&#x3D;&quot;Jerry&quot;;</span><br><span class="line">System.out.println(p2.name); &#x2F;&#x2F;Tom  因为改变p1不影响p2</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310221926450.png" alt="image-20220405153027693" style="zoom:67%;">

<h4 id="1-2-3-练习类型2：new"><a href="#1-2-3-练习类型2：new" class="headerlink" title="1.2.3 练习类型2：new"></a>1.2.3 练习类型2：new</h4><p>String str1 = “abc”; 与 String str2 = new String(“abc”);的区别？</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310221926927.png" alt="image-20220405160149200" style="zoom:67%;">

<p>str2 首先指向堆中的一个字符串对象，然后堆中字符串的value数组指向常量池中常量对象的value数组。</p>
<blockquote>
<ul>
<li><p>字符串常量存储在字符串常量池，目的是共享。</p>
</li>
<li><p>字符串非常量对象存储在堆中。</p>
</li>
</ul>
</blockquote>
<p>练习：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String s1 = <span class="string">"javaEE"</span>;</span><br><span class="line">String s2 = <span class="string">"javaEE"</span>;</span><br><span class="line">String s3 = <span class="keyword">new</span> String(<span class="string">"javaEE"</span>);</span><br><span class="line">String s4 = <span class="keyword">new</span> String(<span class="string">"javaEE"</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(s1 == s2);<span class="comment">//true  s1和s2直接指向同一位置</span></span><br><span class="line">System.out.println(s1 == s3);<span class="comment">//false s3相当于创建对象之后再指向</span></span><br><span class="line">System.out.println(s1 == s4);<span class="comment">//false s4相当于创建对象之后再指向</span></span><br><span class="line">System.out.println(s3 == s4);<span class="comment">//false s3和s4只想内容一样 但是堆地址不同</span></span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310221926902.png" alt="image-20220405160321172" style="zoom:67%;">

<p>练习：String str2 = new String(“hello”); 在内存中创建了几个对象？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">两个</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-练习类型3：intern"><a href="#1-2-4-练习类型3：intern" class="headerlink" title="1.2.4 练习类型3：intern()"></a>1.2.4 练习类型3：intern()</h4><ul>
<li><strong>String s1 = “a”;</strong> </li>
</ul>
<p>说明：在字符串常量池中创建了一个字面量为”a”的字符串。</p>
<ul>
<li><strong>s1 = s1 + “b”;</strong> </li>
</ul>
<p>说明：实际上原来的“a”字符串对象已经丢弃了，现在在堆空间中产生了一个字符串s1+”b”（也就是”ab”)。如果多次执行这些改变串内容的操作，会导致大量副本字符串对象存留在内存中，降低效率。如果这样的操作放到循环中，会极大影响程序的性能。</p>
<ul>
<li><strong>String s2 = “ab”;</strong></li>
</ul>
<p>说明：直接在字符串常量池中创建一个字面量为”ab”的字符串。</p>
<ul>
<li><strong>String s3 = “a” + “b”;</strong></li>
</ul>
<p>说明：s3指向字符串常量池中已经创建的”ab”的字符串。</p>
<ul>
<li><strong>String s4 = s1.intern();</strong></li>
</ul>
<p>说明：堆空间的s1对象在调用intern()之后，会将常量池中已经存在的”ab”字符串赋值给s4。</p>
<p>练习：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">String s1 = <span class="string">"hello"</span>;</span><br><span class="line">String s2 = <span class="string">"world"</span>;</span><br><span class="line">String s3 = <span class="string">"hello"</span> + <span class="string">"world"</span>;</span><br><span class="line">String s4 = s1 + <span class="string">"world"</span>;</span><br><span class="line">String s5 = s1 + s2;</span><br><span class="line">String s6 = (s1 + s2).intern();</span><br><span class="line"></span><br><span class="line">System.out.println(s3 == s4); <span class="comment">//false</span></span><br><span class="line">System.out.println(s3 == s5); <span class="comment">//false</span></span><br><span class="line">System.out.println(s4 == s5); <span class="comment">//false</span></span><br><span class="line">System.out.println(s3 == s6); <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>结论：</strong></p>
<p>（1）常量+常量：结果是常量池。且常量池中不会存在相同内容的常量。</p>
<p>（2）常量与变量 或 变量与变量：结果在堆中</p>
<p>（3）拼接后调用intern方法：返回值在常量池中</p>
</blockquote>
<p>练习：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	String s1 = <span class="string">"hello"</span>;</span><br><span class="line">	String s2 = <span class="string">"world"</span>;</span><br><span class="line">	String s3 = <span class="string">"helloworld"</span>;</span><br><span class="line">		</span><br><span class="line">	String s4 = s1 + <span class="string">"world"</span>;<span class="comment">//s4字符串内容也helloworld，s1是变量，"world"常量，变量 + 常量的结果在堆中</span></span><br><span class="line">	String s5 = s1 + s2;<span class="comment">//s5字符串内容也helloworld，s1和s2都是变量，变量 + 变量的结果在堆中</span></span><br><span class="line">	String s6 = <span class="string">"hello"</span> + <span class="string">"world"</span>;<span class="comment">//常量+ 常量 结果在常量池中，因为编译期间就可以确定结果</span></span><br><span class="line">	System.out.println(s3 == s6);<span class="comment">//true</span></span><br><span class="line">	System.out.println(s3 == s4);<span class="comment">//false</span></span><br><span class="line">	System.out.println(s3 == s5);<span class="comment">//false</span></span><br><span class="line">	System.out.println(s3 == s6);<span class="comment">//true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">final</span> String s1 = <span class="string">"hello"</span>;  <span class="comment">//加了final 就成为常量+常量情况</span></span><br><span class="line">	<span class="keyword">final</span> String s2 = <span class="string">"world"</span>; <span class="comment">//加了final 就成为常量+常量情况</span></span><br><span class="line">	String s3 = <span class="string">"helloworld"</span>;</span><br><span class="line">	</span><br><span class="line">	String s4 = s1 + <span class="string">"world"</span>;<span class="comment">//s4字符串内容也helloworld，s1是常量，"world"常量，常量+常量结果在常量池中</span></span><br><span class="line">	String s5 = s1 + s2;<span class="comment">//s5字符串内容也helloworld，s1和s2都是常量，常量+ 常量 结果在常量池中</span></span><br><span class="line">	String s6 = <span class="string">"hello"</span> + <span class="string">"world"</span>;<span class="comment">//常量+ 常量 结果在常量池中，因为编译期间就可以确定结果</span></span><br><span class="line">		</span><br><span class="line">	System.out.println(s3 == s4);<span class="comment">//true</span></span><br><span class="line">	System.out.println(s3 == s5);<span class="comment">//true</span></span><br><span class="line">	System.out.println(s3 == s6);<span class="comment">//true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">	String s1 = <span class="string">"hello"</span>;</span><br><span class="line">	String s2 = <span class="string">"world"</span>;</span><br><span class="line">	String s3 = <span class="string">"helloworld"</span>;</span><br><span class="line">		</span><br><span class="line">	String s4 = (s1 + <span class="string">"world"</span>).intern(); <span class="comment">//把拼接的结果放到常量池中</span></span><br><span class="line">	String s5 = (s1 + s2).intern();  <span class="comment">//把拼接的结果放到常量池中</span></span><br><span class="line">		</span><br><span class="line">	System.out.println(s3 == s4);<span class="comment">//true</span></span><br><span class="line">	System.out.println(s3 == s5);<span class="comment">//true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>练习：下列程序运行的结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		String str = <span class="string">"hello"</span>;</span><br><span class="line">		String str2 = <span class="string">"world"</span>;</span><br><span class="line">		String str3 =<span class="string">"helloworld"</span>;</span><br><span class="line">		</span><br><span class="line">		String str4 = <span class="string">"hello"</span>.concat(<span class="string">"world"</span>);</span><br><span class="line">		String str5 = <span class="string">"hello"</span>+<span class="string">"world"</span>;</span><br><span class="line">		</span><br><span class="line">		System.out.println(str3 == str4);<span class="comment">//false</span></span><br><span class="line">		System.out.println(str3 == str5);<span class="comment">//true</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>concat方法拼接，哪怕是两个常量对象拼接，结果也是在堆。</p>
</blockquote>
<p>练习：下列程序运行的结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String str = <span class="keyword">new</span> String(<span class="string">"good"</span>);</span><br><span class="line">    <span class="keyword">char</span>[] ch = &#123; <span class="string">'t'</span>, <span class="string">'e'</span>, <span class="string">'s'</span>, <span class="string">'t'</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(String str, <span class="keyword">char</span> ch[])</span> </span>&#123;</span><br><span class="line">        str = <span class="string">"test ok"</span>;</span><br><span class="line">        ch[<span class="number">0</span>] = <span class="string">'b'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        StringTest ex = <span class="keyword">new</span> StringTest();</span><br><span class="line">        ex.change(ex.str, ex.ch);</span><br><span class="line">        System.out.print(ex.str + <span class="string">" and "</span>);<span class="comment">//</span></span><br><span class="line">        System.out.println(ex.ch);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-String的常用API-1"><a href="#1-3-String的常用API-1" class="headerlink" title="1.3 String的常用API-1"></a>1.3 String的常用API-1</h3><h4 id="1-3-1-构造器"><a href="#1-3-1-构造器" class="headerlink" title="1.3.1 构造器"></a>1.3.1 构造器</h4><ul>
<li><code>public String()</code> ：初始化新创建的 String对象，以使其表示空字符序列。</li>
<li><code>publc String(String original)</code>： 初始化一个新创建的 <code>String</code> 对象，使其表示一个与参数相同的字符序列；换句话说，新创建的字符串是该参数字符串的副本。</li>
<li><code>public String(char[] value)</code> ：通过当前参数中的字符数组来构造新的String。</li>
<li><code>public String(char[] value,int offset, int count)</code> ：通过字符数组的一部分来构造新的String。</li>
<li><code>public String(byte[] bytes)</code> ：通过使用平台的<strong>默认字符集</strong>解码当前参数中的字节数组来构造新的String。</li>
<li><code>public String(byte[] bytes,String charsetName)</code> ：通过使用指定的字符集解码当前参数中的字节数组来构造新的String。</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字面量定义方式：字符串常量对象</span></span><br><span class="line">String str = <span class="string">"hello"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器定义方式：无参构造</span></span><br><span class="line">String str1 = <span class="keyword">new</span> String();</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器定义方式：创建"hello"字符串常量的副本</span></span><br><span class="line">String str2 = <span class="keyword">new</span> String(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器定义方式：通过字符数组构造</span></span><br><span class="line"><span class="keyword">char</span> chars[] = &#123;<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>&#125;;     </span><br><span class="line">String str3 = <span class="keyword">new</span> String(chars);</span><br><span class="line">String str4 = <span class="keyword">new</span> String(chars,<span class="number">0</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造器定义方式：通过字节数组构造</span></span><br><span class="line"><span class="keyword">byte</span> bytes[] = &#123;<span class="number">97</span>, <span class="number">98</span>, <span class="number">99</span> &#125;;     </span><br><span class="line">String str5 = <span class="keyword">new</span> String(bytes);</span><br><span class="line">String str6 = <span class="keyword">new</span> String(bytes,<span class="string">"GBK"</span>);  <span class="comment">//指定默认字符集类型</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">char</span>[] data = &#123;<span class="string">'h'</span>,<span class="string">'e'</span>,<span class="string">'l'</span>,<span class="string">'l'</span>,<span class="string">'o'</span>,<span class="string">'j'</span>,<span class="string">'a'</span>,<span class="string">'v'</span>,<span class="string">'a'</span>&#125;;</span><br><span class="line">	String s1 = String.copyValueOf(data);</span><br><span class="line">	String s2 = String.copyValueOf(data,<span class="number">0</span>,<span class="number">5</span>);</span><br><span class="line">	<span class="keyword">int</span> num = <span class="number">123456</span>;</span><br><span class="line">	String s3 = String.valueOf(num);</span><br><span class="line">	</span><br><span class="line">    System.out.println(s1);</span><br><span class="line">	System.out.println(s2);</span><br><span class="line">	System.out.println(s3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-String与其他结构间的转换"><a href="#1-3-2-String与其他结构间的转换" class="headerlink" title="1.3.2 String与其他结构间的转换"></a>1.3.2 String与其他结构间的转换</h4><p><strong>字符串 –&gt; 基本数据类型、包装类：</strong></p>
<ul>
<li>Integer包装类的public static int parseInt(String s)：可以将由“数字”字符组成的字符串转换为整型。</li>
<li>类似地，使用java.lang包中的Byte、Short、Long、Float、Double类调相应的类方法可以将由“数字”字符组成的字符串，转化为相应的基本数据类型。</li>
</ul>
<p><strong>基本数据类型、包装类 –&gt; 字符串：</strong></p>
<ul>
<li><p>调用String类的public String valueOf(int n)可将int型转换为字符串</p>
</li>
<li><p>相应的valueOf(byte b)、valueOf(long l)、valueOf(float f)、valueOf(double d)、valueOf(boolean b)可由参数的相应类型到字符串的转换。</p>
<p><strong>字符数组 –&gt;  字符串：</strong></p>
</li>
<li><p>String 类的构造器：String(char[]) 和 String(char[]，int offset，int length) 分别用字符数组中的全部字符和部分字符创建字符串对象。 </p>
<p><strong>字符串 –&gt;  字符数组：</strong></p>
</li>
<li><p>public char[] toCharArray()：将字符串中的全部字符存放在一个字符数组中的方法。</p>
</li>
<li><p>public void getChars(int srcBegin, int srcEnd, char[] dst, int dstBegin)：提供了将指定索引范围内的字符串存放到数组中的方法。</p>
</li>
</ul>
<p><strong>字符串 –&gt; 字节数组：（编码）</strong></p>
<ul>
<li><p>public byte[] getBytes() ：使用平台的默认字符集将此 String 编码为 byte 序列，并将结果存储到一个新的 byte 数组中。</p>
</li>
<li><p>public byte[] getBytes(String charsetName) ：使用指定的字符集将此 String 编码到 byte 序列，并将结果存储到新的 byte 数组。</p>
<p><strong>字节数组 –&gt; 字符串：（解码）</strong></p>
</li>
<li><p>String(byte[])：通过使用平台的默认字符集解码指定的 byte 数组，构造一个新的 String。</p>
</li>
<li><p>String(byte[]，int offset，int length) ：用指定的字节数组的一部分，即从数组起始位置offset开始取length个字节构造一个字符串对象。</p>
</li>
<li><p>String(byte[], String charsetName ) 或 new String(byte[], int, int,String charsetName )：解码，按照指定的编码方式进行解码。</p>
</li>
</ul>
<p>代码示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String str = <span class="string">"中国"</span>;</span><br><span class="line">    System.out.println(str.getBytes(<span class="string">"ISO8859-1"</span>).length);<span class="comment">// 2</span></span><br><span class="line">    <span class="comment">// ISO8859-1把所有的字符都当做一个byte处理，处理不了多个字节</span></span><br><span class="line">    System.out.println(str.getBytes(<span class="string">"GBK"</span>).length);<span class="comment">// 4 每一个中文都是对应2个字节</span></span><br><span class="line">    System.out.println(str.getBytes(<span class="string">"UTF-8"</span>).length);<span class="comment">// 6 常规的中文都是3个字节</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * 不乱码：（1）保证编码与解码的字符集名称一样（2）不缺字节</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(str.getBytes(<span class="string">"ISO8859-1"</span>), <span class="string">"ISO8859-1"</span>));<span class="comment">// 乱码</span></span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(str.getBytes(<span class="string">"GBK"</span>), <span class="string">"GBK"</span>));<span class="comment">// 中国</span></span><br><span class="line">    System.out.println(<span class="keyword">new</span> String(str.getBytes(<span class="string">"UTF-8"</span>), <span class="string">"UTF-8"</span>));<span class="comment">// 中国</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-String的常用API-2"><a href="#1-4-String的常用API-2" class="headerlink" title="1.4 String的常用API-2"></a>1.4 String的常用API-2</h3><p><code>String</code> 类包括的方法可用于检查序列的单个字符、比较字符串、搜索字符串、提取子字符串、创建字符串副本并将所有字符全部转换为大写或小写。 </p>
<h4 id="1-4-1-系列1：常用方法"><a href="#1-4-1-系列1：常用方法" class="headerlink" title="1.4.1 系列1：常用方法"></a>1.4.1 系列1：常用方法</h4><p>（1）boolean <strong>isEmpty()</strong>：字符串是否为空<br>（2）int <strong>length()</strong>：返回字符串的长度<br>（3）String <strong>concat</strong>(xx)：拼接<br>（4）boolean <strong>equals</strong>(Object obj)：比较字符串是否相等，区分大小写<br>（5）boolean <strong>equalsIgnoreCase</strong>(Object obj)：比较字符串是否相等，不区分大小写<br>（6）int <strong>compareTo</strong>(String other)：比较字符串大小，区分大小写，按照Unicode编码值比较大小<br>（7）int <strong>compareToIgnoreCase</strong>(String other)：比较字符串大小，不区分大小写<br>（8）String <strong>toLowerCase</strong>()：将字符串中大写字母转为小写<br>（9）String <strong>toUpperCase</strong>()：将字符串中小写字母转为大写<br>（10）String <strong>trim</strong>()：去掉字符串前后空白符<br>（11）public String <strong>intern</strong>()：结果在常量池中共享</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"abcdef"</span>;</span><br><span class="line">        String str1=<span class="string">"ABCDEF"</span>;</span><br><span class="line">        String str11=<span class="string">"abCdef"</span>;</span><br><span class="line">        String str111=<span class="string">"  afs asd "</span>;</span><br><span class="line">        <span class="comment">//1.判断字符串是否为空 --isEmpty()</span></span><br><span class="line">        System.out.println(str.isEmpty());  <span class="comment">//false</span></span><br><span class="line">        <span class="comment">//2.返回字符串长度 --length()</span></span><br><span class="line">        System.out.println(str.length());  <span class="comment">//6</span></span><br><span class="line">        <span class="comment">//3.拼接两个字符串 返回拼接的字符串 --concat(XX)</span></span><br><span class="line">        String str2=<span class="string">"中国"</span>;</span><br><span class="line">        System.out.println(str.concat(str2)); <span class="comment">//abcdef中国</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.比较字符串是否相等【区分大小写】</span></span><br><span class="line">        System.out.println(str.equals(str1)); <span class="comment">//false</span></span><br><span class="line">        <span class="comment">//5.比较字符串是否相等【不区分大小写】</span></span><br><span class="line">        System.out.println(str.equalsIgnoreCase(str1)); <span class="comment">//true 不区分大小写就是一个字符串</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//6.比较字符串大小【区分大小写】</span></span><br><span class="line">        System.out.println(str.compareTo(str11));  <span class="comment">//c和C差32 c比C大32</span></span><br><span class="line">        <span class="comment">//7.比较字符串大小【不区分大小写】</span></span><br><span class="line">        System.out.println(str.compareToIgnoreCase(str11)); <span class="comment">//0  不区分大小写就是一个字符串</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//8.将字符串的大写字母转为小写</span></span><br><span class="line">        System.out.println(str1.toLowerCase()); <span class="comment">// ABCDEF --&gt; abcdef</span></span><br><span class="line">        <span class="comment">//9.将字符串的小写字母转为大写</span></span><br><span class="line">        System.out.println(str.toUpperCase());  <span class="comment">// abcdef --&gt; ABCDEF</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//10.去掉字符串前后空白符</span></span><br><span class="line">        System.out.println(str111.trim()); <span class="comment">//afs asd</span></span><br><span class="line">        <span class="comment">//11.结果在常量池中共享</span></span><br><span class="line">        System.out.println(str.concat(str1));<span class="comment">//abcdefABCDEF 存储在字符串常量池</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-2-系列2：查找"><a href="#1-4-2-系列2：查找" class="headerlink" title="1.4.2 系列2：查找"></a>1.4.2 系列2：查找</h4><p>（11）boolean <strong>contains(xx)</strong>：是否包含xx<br>（12）int <strong>indexOf</strong>(xx)：从前往后找当前字符串中xx，即如果有返回第一次出现的下标，要是没有返回-1<br>（13）int <strong>indexOf(</strong>String str, int fromIndex)：返回指定子字符串在此字符串中第一次出现处的索引，从指定的索引开始<br>（14）int <strong>lastIndexOf</strong>(xx)：从后往前找当前字符串中xx，即如果有返回最后一次出现的下标，要是没有返回-1<br>（15）int <strong>lastIndexOf</strong>(String str, int fromIndex)：返回指定子字符串在此字符串中最后一次出现的索引，从指定的索引开始反向搜索。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"afasfawfqrasf"</span>;</span><br><span class="line">        String str1=<span class="string">"fqr"</span>; <span class="comment">//包含的</span></span><br><span class="line">        String str11=<span class="string">"asf"</span>; <span class="comment">//包含的</span></span><br><span class="line">        String str2=<span class="string">"fqa"</span>; <span class="comment">//不包含的</span></span><br><span class="line">        <span class="comment">//11.是否包含xx</span></span><br><span class="line">        System.out.println(str.contains(str1));  <span class="comment">//包含了str1 true</span></span><br><span class="line">        System.out.println(str.contains(<span class="string">"aaa"</span>)); <span class="comment">//不包含aaa false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//从前往后</span></span><br><span class="line">        <span class="comment">//12.查找xx在此字符串中第一次出现的索引【可以从指定索引开始】</span></span><br><span class="line">        System.out.println(str.indexOf(str11)); <span class="comment">//找到了 2 [第一次出现]</span></span><br><span class="line">        <span class="comment">//13.查找xx在此字符串中第一次出现的索引【从指定索引开始】</span></span><br><span class="line">        System.out.println(str.indexOf(str11,<span class="number">8</span>));  <span class="comment">//找到了 10 [第一次出现]</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//从后往前</span></span><br><span class="line">        <span class="comment">//14.查找xx在此字符串中最后一次出现的索引</span></span><br><span class="line">        System.out.println(str.lastIndexOf(str11)); <span class="comment">//找到了 10  [从后往前的最后一次 == 第一次出现]</span></span><br><span class="line">        <span class="comment">//15.查找xx在此字符串中最后一次出现的下标【从指定索引反向搜索】</span></span><br><span class="line">        System.out.println(str.lastIndexOf(str11,<span class="number">9</span>)); <span class="comment">//找到了 2 [从后往前的最后一次 == 第一次出现]</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-3-系列3：字符串截取"><a href="#1-4-3-系列3：字符串截取" class="headerlink" title="1.4.3 系列3：字符串截取"></a>1.4.3 系列3：字符串截取</h4><p>（16）String <strong>substring</strong>(int beginIndex) ：返回一个新的字符串，它是此字符串的从beginIndex开始截取到最后的一个子字符串。<br>（17）String <strong>substring</strong>(int beginIndex, int endIndex) ：返回一个新字符串，它是此字符串从beginIndex开始截取到endIndex(不包含)的一个子字符串。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"asdasfdewrthfdg中国asda北京"</span>;</span><br><span class="line">        <span class="comment">//16.截取从（beginIndex-字符串结尾）的部分</span></span><br><span class="line">        System.out.println(str.substring(<span class="number">5</span>)); <span class="comment">//fdewrthfdg中国asda北京</span></span><br><span class="line">        <span class="comment">//17.截取从（beginIndex-endIndex）部分</span></span><br><span class="line">        System.out.println(str.substring(<span class="number">5</span>,<span class="number">16</span>)); <span class="comment">//fdewrthfdg中</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-4-系列4：和字符-字符数组相关"><a href="#1-4-4-系列4：和字符-字符数组相关" class="headerlink" title="1.4.4 系列4：和字符/字符数组相关"></a>1.4.4 系列4：和字符/字符数组相关</h4><p>（18）char <strong>charAt</strong>(index)：返回[index]位置的字符<br>（19）char[] <strong>toCharArray</strong>()： 将此字符串转换为一个新的字符数组返回<br>（20）static String <strong>valueOf</strong>(char[] data)  ：返回指定数组中表示该字符序列的 String<br>（21）static String <strong>valueOf</strong>(char[] data, int offset, int count) ： 返回指定数组中表示该字符序列的 String<br>（22）static String <strong>copyValueOf</strong>(char[] data)： 返回指定数组中表示该字符序列的 String<br>（23）static String <strong>copyValueOf</strong>(char[] data, int offset, int count)：返回指定数组中表示该字符序列的 String</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod4</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"asfegewgsx北京中萨芬sasdafe"</span>;</span><br><span class="line">        <span class="comment">//18.返回指定index位置的字符</span></span><br><span class="line">        System.out.println(str.charAt(<span class="number">11</span>)); <span class="comment">//京</span></span><br><span class="line">        <span class="comment">//19.字符串 --&gt; char[]</span></span><br><span class="line">        <span class="keyword">char</span>[] arr=str.toCharArray();  <span class="comment">//转为一个char数组</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i]+<span class="string">" "</span>); <span class="comment">//a s f e g e w g s x 北 京 中 萨 芬 s a s d a f e</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//以下四个为静态方法  使用String类调用   --都是将字符数组/字符数组的一部分转为字符串</span></span><br><span class="line">        <span class="comment">//20.char[] --&gt; 字符串   [取所有字符转为字符串]</span></span><br><span class="line">        System.out.println(String.valueOf(arr));  <span class="comment">//asfegewgsx北京中萨芬sasdafe</span></span><br><span class="line">        <span class="comment">//21.char[] --&gt; 字符串   [取指定范围的字符转为字符串]</span></span><br><span class="line">        System.out.println(String.valueOf(arr,<span class="number">2</span>,<span class="number">15</span>)); <span class="comment">//fegewgsx北京中萨芬sa</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//22.char[] --&gt; 字符串</span></span><br><span class="line">        System.out.println(String.copyValueOf(arr));  <span class="comment">//asfegewgsx北京中萨芬sasdafe</span></span><br><span class="line">        <span class="comment">//23.char[] --&gt; 字符串</span></span><br><span class="line">        System.out.println(String.copyValueOf(arr,<span class="number">2</span>,<span class="number">15</span>)); <span class="comment">//fegewgsx北京中萨芬sa</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-5-系列5：开头与结尾"><a href="#1-4-5-系列5：开头与结尾" class="headerlink" title="1.4.5 系列5：开头与结尾"></a>1.4.5 系列5：开头与结尾</h4><p>（24）boolean <strong>startsWith</strong>(xx)：测试此字符串是否以指定的前缀开始<br>（25）boolean <strong>startsWith</strong>(String prefix, int toffset)：测试此字符串从指定索引开始的子字符串是否以指定前缀开始<br>（26）boolean <strong>endsWith</strong>(xx)：测试此字符串是否以指定的后缀结束 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod5</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"1231sdfsdt34t中国按时发放qrqasd"</span>;</span><br><span class="line">        <span class="comment">//24.测试此字符串是否以指定前缀开始</span></span><br><span class="line">        System.out.println(str.startsWith(<span class="string">"123"</span>)); <span class="comment">//true</span></span><br><span class="line">        System.out.println(str.startsWith(<span class="string">"124"</span>)); <span class="comment">//false</span></span><br><span class="line">        <span class="comment">//25.测试此字符串是否以【指定下标开始的】前缀开始</span></span><br><span class="line">        System.out.println(str.startsWith(<span class="string">"123"</span>,<span class="number">1</span>));  <span class="comment">//false</span></span><br><span class="line">        System.out.println(str.startsWith(<span class="string">"中国"</span>,<span class="number">13</span>)); <span class="comment">//true</span></span><br><span class="line">        <span class="comment">//26.测试此字符串是否以指定的后缀结束</span></span><br><span class="line">        System.out.println(str.endsWith(<span class="string">"asd"</span>)); <span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-6-系列6：替换"><a href="#1-4-6-系列6：替换" class="headerlink" title="1.4.6 系列6：替换"></a>1.4.6 系列6：替换</h4><p>（27）String replace(char oldChar, char newChar)：通过用 newChar 替换此字符串中出现的所有 oldChar 得到的。 不支持正则。<br>（28）String replace(CharSequence target, CharSequence replacement)：使用指定的字面值替换序列替换此字符串所有匹配字面值目标序列的子字符串。<br>（29）String replaceAll(String regex, String replacement)：使用给定的 replacement 替换此字符串所有匹配给定的正则表达式的子字符串。<br>（30）String replaceFirst(String regex, String replacement)：使用给定的 replacement 替换此字符串匹配给定的正则表达式的第一个子字符串。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod6</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"asfdewwegsdn 中国阿三大王负数saqwerqfsddds"</span>;</span><br><span class="line">        <span class="comment">//不可以使用正则表达式!!!!!!!!</span></span><br><span class="line">            <span class="comment">//替换字符</span></span><br><span class="line">            <span class="comment">//27.将字符串中所有d字符用*字符替换</span></span><br><span class="line">        System.out.println(str.replace(<span class="string">'d'</span>,<span class="string">'*'</span>));  <span class="comment">//asf*ewwegs*n 中国阿三大王负数saqwerqfs***s</span></span><br><span class="line">            <span class="comment">//替换一部分字符串</span></span><br><span class="line">            <span class="comment">//28.将字符串中所有的ddd子字符串用哈哈哈替换</span></span><br><span class="line">        System.out.println(str.replace(<span class="string">"ddd"</span>,<span class="string">"哈哈哈"</span>));  <span class="comment">//asfdewwegsdn 中国阿三大王负数saqwerqfs哈哈哈s</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//可以使用正则表达式!!!!!!!!!!</span></span><br><span class="line">            <span class="comment">//29.字符串每一位都按照正则表达式匹配一下，不符合的用*替换掉</span></span><br><span class="line">        System.out.println(str.replaceAll(<span class="string">"[^a-zA-Z]"</span>,<span class="string">"*"</span>));  <span class="comment">//asfdewwegsdn*********saqwerqfsddds</span></span><br><span class="line">            <span class="comment">//30.字符串每一位都按照正则表达式匹配一下，只是把不符合的第一位用%替换</span></span><br><span class="line">        System.out.println(str.replaceFirst(<span class="string">"[^a-zA-Z]"</span>,<span class="string">"%"</span>));  <span class="comment">//asfdewwegsdn%中国阿三大王负数saqwerqfsddds</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-常见算法题目"><a href="#1-5-常见算法题目" class="headerlink" title="1.5 常见算法题目"></a>1.5 常见算法题目</h3><p><strong>题目1：</strong>模拟一个trim方法，去除字符串两端的空格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod6</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"   asdasrqwe 中国1234019*（*）（8  "</span>;</span><br><span class="line">        System.out.println(<span class="string">"原样为:"</span>);</span><br><span class="line">        System.out.println(str);</span><br><span class="line">        System.out.println(<span class="string">"------------------"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//方法一：使用trim()</span></span><br><span class="line">        System.out.println(<span class="string">"方法一之后:"</span>);</span><br><span class="line">        System.out.println(str.trim());</span><br><span class="line">        System.out.println(<span class="string">"------------------"</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//方法二:找到开头和结尾不是空格的位置，然后使用subString()截取字符串</span></span><br><span class="line">        <span class="keyword">int</span> start=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> end=str.length()-<span class="number">1</span>;</span><br><span class="line">        <span class="comment">//找到首部第一个不为空格的下标</span></span><br><span class="line">        <span class="keyword">while</span>(start&lt;end)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str.charAt(start)==<span class="string">' '</span>)&#123;</span><br><span class="line">                start++;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">break</span>;  <span class="comment">//找到了就break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//找到尾部第一个不为空格的下标</span></span><br><span class="line">        <span class="keyword">while</span>(start&lt;end)&#123;</span><br><span class="line">            <span class="keyword">if</span>(str.charAt(end)==<span class="string">' '</span>)&#123;</span><br><span class="line">                end--;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">break</span>;  <span class="comment">//找到了就break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"方法二之后:"</span>);</span><br><span class="line">        System.out.println(str.substring(start,end+<span class="number">1</span>));  <span class="comment">//截取[start，end+1]部分的字符串</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">原样为:</span><br><span class="line">   asdasrqwe 中国<span class="number">1234019</span>*（*）（<span class="number">8</span>  </span><br><span class="line">------------------</span><br><span class="line">方法一之后:</span><br><span class="line">asdasrqwe 中国<span class="number">1234019</span>*（*）（<span class="number">8</span></span><br><span class="line">------------------</span><br><span class="line">方法二之后:</span><br><span class="line">asdasrqwe 中国<span class="number">1234019</span>*（*）（<span class="number">8</span></span><br></pre></td></tr></table></figure>

<p><strong>题目2：</strong>将一个字符串进行反转。将字符串中指定部分进行反转。比如“ab<code>cdef</code>g”反转为”ab<code>fedc</code>g”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod6</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str=<span class="string">"abcdefg"</span>;</span><br><span class="line">        StringMethod6 m6=<span class="keyword">new</span> StringMethod6();</span><br><span class="line">        System.out.println(<span class="string">"原始字符串为:"</span>+str);</span><br><span class="line">        System.out.println(<span class="string">"-------------------------------"</span>);</span><br><span class="line">        <span class="comment">//反转整个字符串</span></span><br><span class="line">        System.out.println(<span class="string">"反转整个字符串:"</span>);</span><br><span class="line">        System.out.println(m6.reverseAll(str));</span><br><span class="line">        System.out.println(<span class="string">"-------------------------------"</span>);</span><br><span class="line">        <span class="comment">//反转字符串中指定部分</span></span><br><span class="line">        System.out.println(<span class="string">"反转字符串中指定部分:"</span>);</span><br><span class="line">        System.out.println(m6.reversePart(str,<span class="number">2</span>,<span class="number">5</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//反转整个字符串</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">reverseAll</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        String str1=<span class="string">""</span>;</span><br><span class="line">        <span class="comment">//字符串转为字符数组</span></span><br><span class="line">        <span class="keyword">char</span>[] arr=str.toCharArray();</span><br><span class="line">        <span class="comment">//设置首部和尾部以及中间位置</span></span><br><span class="line">        <span class="keyword">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> right=arr.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(left&lt;=right)&#123;</span><br><span class="line">            <span class="keyword">int</span> mid=(left+right)/<span class="number">2</span>;</span><br><span class="line">            <span class="comment">//替换</span></span><br><span class="line">            <span class="keyword">char</span> temp=<span class="string">' '</span>;</span><br><span class="line">            temp=arr[left];</span><br><span class="line">            arr[left]=arr[right];</span><br><span class="line">            arr[right]=temp;</span><br><span class="line">            <span class="comment">//前后指针更新</span></span><br><span class="line">            left++;</span><br><span class="line">            right--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String(arr);  <span class="comment">//char[]数组转为String字符串</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//反转字符串中指定部分</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">reversePart</span><span class="params">(String str,<span class="keyword">int</span> start,<span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">        <span class="comment">//截取出来要反转的部分</span></span><br><span class="line">        String str1=str.substring(start,end+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">//反转之后的结果 </span></span><br><span class="line">        String str2=reverseAll(str1); <span class="comment">//调用反转字符串的方法</span></span><br><span class="line">        <span class="comment">//添加不用反转的部分</span></span><br><span class="line">        String str3=str.substring(<span class="number">0</span>,start)+str2+str.substring(end+<span class="number">1</span>,str.length());  <span class="comment">//拼接一下</span></span><br><span class="line">        <span class="keyword">return</span> str3;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">原始字符串为:abcdefg</span><br><span class="line">-------------------------------</span><br><span class="line">反转整个字符串:</span><br><span class="line">gfedcba</span><br><span class="line">-------------------------------</span><br><span class="line">反转字符串中指定部分:</span><br><span class="line">abfedcg</span><br></pre></td></tr></table></figure>

<p><strong>题目3：</strong>获取一个字符串在另一个字符串中出现的次数。<br>              比如：获取“ ab”在 “abkkcadkabkebfkabkskab” 中出现的次数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod6</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str1 = <span class="string">"cdabkkcadkabkebfkabkskab"</span>;</span><br><span class="line">        String str2 = <span class="string">"ab"</span>;</span><br><span class="line">        System.out.println(<span class="string">"出现的次数是:"</span>+getCount(str1, str2));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//关键点就是根据indexOf(String s,int index)方法找到第一次出现的位置 这样方便index进行更替!!!!</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">(String str1, String str2)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//获取出现次数</span></span><br><span class="line">        <span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//下标</span></span><br><span class="line">        <span class="keyword">int</span> index=<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//找到一次就把判断的范围缩小一点</span></span><br><span class="line">        <span class="comment">//str1.indexOf(str2,index) 返回str1从(index,str1.length())范围内第一次出现str2的下标</span></span><br><span class="line">        <span class="keyword">while</span>((index=str1.indexOf(str2,index))!=-<span class="number">1</span>)&#123;  <span class="comment">//返回str2第一次出现的位置</span></span><br><span class="line">            index+=str2.length(); <span class="comment">//判断范围缩小 Index下标往后挪动str2的长度这么多</span></span><br><span class="line">            System.out.println(<span class="string">"下一轮的寻找范围从下标"</span>+index+<span class="string">"开始判断"</span>);</span><br><span class="line">            num++; <span class="comment">//while成功一次说明范围内还有 也就是这次while已经算一次</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">下一轮的寻找范围从下标<span class="number">4</span>开始判断b</span><br><span class="line">下一轮的寻找范围从下标<span class="number">12</span>开始判断b</span><br><span class="line">下一轮的寻找范围从下标<span class="number">19</span>开始判断b</span><br><span class="line">下一轮的寻找范围从下标<span class="number">24</span>开始判断b</span><br><span class="line">出现的次数是:<span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><strong>题目4：</strong>获取两个字符串中最大相同子串。比如：<br>              str1 = “abcwerthelloyuiodef“;str2 = “cvhellobnm”<br>              <strong>提示：将短的那个串进行长度依次递减的子串与较长的串比较。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">	<span class="comment">// 第4题</span></span><br><span class="line">	<span class="comment">// 如果只存在一个最大长度的相同子串</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getMaxSameSubString</span><span class="params">(String str1, String str2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (str1 != <span class="keyword">null</span> &amp;&amp; str2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">			String maxStr = (str1.length() &gt; str2.length()) ? str1 : str2;</span><br><span class="line">			String minStr = (str1.length() &gt; str2.length()) ? str2 : str1;</span><br><span class="line">			<span class="keyword">int</span> len = minStr.length();</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;<span class="comment">// 0 1 2 3 4 此层循环决定要去几个字符</span></span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>, y = len - i; y &lt;= len; x++, y++) &#123;</span><br><span class="line">					<span class="keyword">if</span> (maxStr.contains(minStr.substring(x, y))) &#123;  <span class="comment">//看看str长是否有str短</span></span><br><span class="line">						<span class="keyword">return</span> minStr.substring(x, y);  <span class="comment">//如果有的话就返回str短的具体长度</span></span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 如果存在多个长度相同的最大相同子串</span></span><br><span class="line">	<span class="comment">// 此时先返回String[]，后面可以用集合中的ArrayList替换，较方便</span></span><br><span class="line">	<span class="keyword">public</span> String[] getMaxSameSubString1(String str1, String str2) &#123;</span><br><span class="line">		<span class="keyword">if</span> (str1 != <span class="keyword">null</span> &amp;&amp; str2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">			StringBuffer sBuffer = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">			String maxString = (str1.length() &gt; str2.length()) ? str1 : str2;</span><br><span class="line">			String minString = (str1.length() &gt; str2.length()) ? str2 : str1;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">int</span> len = minString.length();</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">int</span> x = <span class="number">0</span>, y = len - i; y &lt;= len; x++, y++) &#123;</span><br><span class="line">					String subString = minString.substring(x, y);</span><br><span class="line">					<span class="keyword">if</span> (maxString.contains(subString)) &#123;</span><br><span class="line">						sBuffer.append(subString + <span class="string">","</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				System.out.println(sBuffer);</span><br><span class="line">				<span class="keyword">if</span> (sBuffer.length() != <span class="number">0</span>) &#123;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			String[] split = sBuffer.toString().replaceAll(<span class="string">",$"</span>, <span class="string">""</span>).split(<span class="string">"\\,"</span>);</span><br><span class="line">			<span class="keyword">return</span> split;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// 如果存在多个长度相同的最大相同子串：使用ArrayList</span></span><br><span class="line"><span class="comment">//	public List&lt;String&gt; getMaxSameSubString1(String str1, String str2) &#123;</span></span><br><span class="line"><span class="comment">//		if (str1 != null &amp;&amp; str2 != null) &#123;</span></span><br><span class="line"><span class="comment">//			List&lt;String&gt; list = new ArrayList&lt;String&gt;();</span></span><br><span class="line"><span class="comment">//			String maxString = (str1.length() &gt; str2.length()) ? str1 : str2;</span></span><br><span class="line"><span class="comment">//			String minString = (str1.length() &gt; str2.length()) ? str2 : str1;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//			int len = minString.length();</span></span><br><span class="line"><span class="comment">//			for (int i = 0; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="comment">//				for (int x = 0, y = len - i; y &lt;= len; x++, y++) &#123;</span></span><br><span class="line"><span class="comment">//					String subString = minString.substring(x, y);</span></span><br><span class="line"><span class="comment">//					if (maxString.contains(subString)) &#123;</span></span><br><span class="line"><span class="comment">//						list.add(subString);</span></span><br><span class="line"><span class="comment">//					&#125;</span></span><br><span class="line"><span class="comment">//				&#125;</span></span><br><span class="line"><span class="comment">//				if (list.size() != 0) &#123;</span></span><br><span class="line"><span class="comment">//					break;</span></span><br><span class="line"><span class="comment">//				&#125;</span></span><br><span class="line"><span class="comment">//			&#125;</span></span><br><span class="line"><span class="comment">//			return list;</span></span><br><span class="line"><span class="comment">//		&#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//		return null;</span></span><br><span class="line"><span class="comment">//	&#125;</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testGetMaxSameSubString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		String str1 = <span class="string">"abcwerthelloyuiodef"</span>;</span><br><span class="line">		String str2 = <span class="string">"cvhellobnmiodef"</span>;</span><br><span class="line">		String[] strs = getMaxSameSubString1(str1, str2);</span><br><span class="line">		System.out.println(Arrays.toString(strs));</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p><strong>题目5：</strong>对字符串中字符进行自然顺序排序。<br>提示：<br>1）字符串变成字符数组。   —使用toCharArray()方法<br>2）对数组排序，选择，冒泡，Arrays.sort();  —使用Arrays.sort()方法<br>3）将排序后的数组变成字符串。 —使用new String()构造器方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StringMethod6</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String str1 = <span class="string">"cdabkkcadkabkebfkabkskab"</span>;</span><br><span class="line">        System.out.println(<span class="string">"排序前:"</span>+str1);</span><br><span class="line">        System.out.println(<span class="string">"-----------------------------------------------------------------"</span>);</span><br><span class="line">        <span class="comment">//1.字符串转为字符数组</span></span><br><span class="line">        <span class="keyword">char</span>[] arr=str1.toCharArray();</span><br><span class="line">        System.out.println(<span class="string">"转为char数组:"</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.print(arr[i]+<span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(<span class="string">"-----------------------------------------------------------------"</span>);</span><br><span class="line">        <span class="comment">//2.进行排序</span></span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        System.out.println(<span class="string">"排序后:"</span>+<span class="keyword">new</span> String(arr));</span><br><span class="line">        System.out.println(<span class="string">"-----------------------------------------------------------------"</span>);</span><br><span class="line">        <span class="comment">//3.转回字符串</span></span><br><span class="line">        System.out.println(<span class="keyword">new</span> String(arr));</span><br><span class="line">        System.out.println(<span class="string">"-----------------------------------------------------------------"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-字符串相关类之可变字符序列：StringBuffer、StringBuilder"><a href="#2-字符串相关类之可变字符序列：StringBuffer、StringBuilder" class="headerlink" title="2. 字符串相关类之可变字符序列：StringBuffer、StringBuilder"></a>2. 字符串相关类之可变字符序列：StringBuffer、StringBuilder</h2><p>因为String对象是不可变对象，虽然可以共享常量对象，但是对于频繁字符串的修改和拼接操作，效率极低，空间消耗也比较高。因此，JDK又在java.lang包提供了可变字符序列StringBuffer和StringBuilder类型。</p>
<h3 id="2-1-StringBuffer与StringBuilder的理解"><a href="#2-1-StringBuffer与StringBuilder的理解" class="headerlink" title="2.1 StringBuffer与StringBuilder的理解"></a>2.1 StringBuffer与StringBuilder的理解</h3><ul>
<li><p>java.lang.StringBuffer代表<code>可变的字符序列</code>，JDK1.0中声明，可以对字符串内容进行增删，此时不会产生新的对象。比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//情况1:</span></span><br><span class="line">String s = <span class="keyword">new</span> String(<span class="string">"我喜欢学习"</span>); </span><br><span class="line"><span class="comment">//情况2：</span></span><br><span class="line">StringBuffer buffer = <span class="keyword">new</span> StringBuffer(<span class="string">"我喜欢学习"</span>); </span><br><span class="line">buffer.append(<span class="string">"数学"</span>);</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310232037677.png" alt="image-20220405221714261"></p>
</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310232037777.png" alt="image-20220228153030902" style="zoom:80%;">


<ul>
<li>继承结构：</li>
</ul>
<p> <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310232037040.png" alt="image-20220405174233055"></p>
 <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310232037714.png" alt="image-20220405174414780" style="zoom:67%;">

<ul>
<li><p>StringBuilder 和 StringBuffer 非常类似，均代表可变的字符序列，而且提供相关功能的方法也一样。</p>
</li>
<li><p>区分String、StringBuffer、StringBuilder</p>
<ul>
<li>String:不可变的字符序列； 底层使用char[]数组存储(JDK8.0中)</li>
<li>StringBuffer:可变的字符序列；线程安全（方法有synchronized修饰），效率低；底层使用char[]数组存储 (JDK8.0中)</li>
<li>StringBuilder:可变的字符序列； jdk1.5引入，线程不安全的，效率高；底层使用char[]数组存储(JDK8.0中)</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310232045394.png" alt="image-20231023204515338"></p>
</li>
</ul>
<h3 id="2-2-StringBuilder、StringBuffer的API"><a href="#2-2-StringBuilder、StringBuffer的API" class="headerlink" title="2.2 StringBuilder、StringBuffer的API"></a>2.2 StringBuilder、StringBuffer的API</h3><p>StringBuilder、StringBuffer的API是完全一致的，并且很多方法与String相同。</p>
<p><strong>1、常用API</strong></p>
<p>（1）StringBuffer <strong>append(xx)</strong>：提供了很多的append()方法，用于进行字符串追加的方式拼接<br>（2）StringBuffer <strong>delete(int start, int end)</strong>：删除[start,end)之间字符<br>（3）StringBuffer <strong>deleteCharAt(int index)</strong>：删除[index]位置字符<br>（4）StringBuffer <strong>replace(int start, int end, String str)</strong>：替换[start,end)范围的字符序列为str<br>（5）void <strong>setCharAt(int index, char c)</strong>：替换[index]位置字符<br>（6）char <strong>charAt(int index)</strong>：查找指定index位置上的字符<br>（7）StringBuffer <strong>insert(int index, xx)</strong>：在[index]位置插入xx<br>（8）int <strong>length()</strong>：返回存储的字符数据的长度<br>（9）StringBuffer <strong>reverse()</strong>：反转</p>
<blockquote>
<ul>
<li><p>当append和insert时，如果原来value数组长度不够，可扩容。</p>
</li>
<li><p>如上(1)(2)(3)(4)(9)这些方法支持<code>方法链操作</code>。原理：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241015514.png" alt="image-20220405223542750"></p>
</li>
</ul>
</blockquote>
<p><strong>2、其它API</strong></p>
<p>（1）int indexOf(String str)：在当前字符序列中查询str的第一次出现下标<br>（2）int indexOf(String str, int fromIndex)：在当前字符序列[fromIndex,最后]中查询str的第一次出现下标<br>（3）int lastIndexOf(String str)：在当前字符序列中查询str的最后一次出现下标<br>（4）int lastIndexOf(String str, int fromIndex)：在当前字符序列[fromIndex,最后]中查询str的最后一次出现下标<br>（5）String substring(int start)：截取当前字符序列[start,最后]<br>（6）String substring(int start, int end)：截取当前字符序列[start,end)<br>（7）String toString()：返回此序列中数据的字符串表示形式<br>（8）void setLength(int newLength) ：设置当前字符序列长度为newLength</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">    s.append(<span class="string">"hello"</span>).append(<span class="keyword">true</span>).append(<span class="string">'a'</span>).append(<span class="number">12</span>).append(<span class="string">"atguigu"</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">    System.out.println(s.length());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    StringBuilder s = <span class="keyword">new</span> StringBuilder(<span class="string">"helloworld"</span>);</span><br><span class="line">    s.insert(<span class="number">5</span>, <span class="string">"java"</span>);</span><br><span class="line">    s.insert(<span class="number">5</span>, <span class="string">"chailinyan"</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    StringBuilder s = <span class="keyword">new</span> StringBuilder(<span class="string">"helloworld"</span>);</span><br><span class="line">    s.delete(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">    s.deleteCharAt(<span class="number">4</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">    StringBuilder s = <span class="keyword">new</span> StringBuilder(<span class="string">"helloworld"</span>);</span><br><span class="line">    s.reverse();</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">()</span></span>&#123;</span><br><span class="line">    StringBuilder s = <span class="keyword">new</span> StringBuilder(<span class="string">"helloworld"</span>);</span><br><span class="line">    s.setCharAt(<span class="number">2</span>, <span class="string">'a'</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">()</span></span>&#123;</span><br><span class="line">    StringBuilder s = <span class="keyword">new</span> StringBuilder(<span class="string">"helloworld"</span>);</span><br><span class="line">    s.setLength(<span class="number">30</span>);</span><br><span class="line">    System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3-效率测试"><a href="#2-3-效率测试" class="headerlink" title="2.3 效率测试"></a>2.3 效率测试</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始设置</span></span><br><span class="line"><span class="keyword">long</span> startTime = <span class="number">0L</span>;</span><br><span class="line"><span class="keyword">long</span> endTime = <span class="number">0L</span>;</span><br><span class="line">String text = <span class="string">""</span>;</span><br><span class="line">StringBuffer buffer = <span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">StringBuilder builder = <span class="keyword">new</span> StringBuilder(<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//开始对比</span></span><br><span class="line">startTime = System.currentTimeMillis();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20000</span>; i++) &#123;</span><br><span class="line">    buffer.append(String.valueOf(i));</span><br><span class="line">&#125;</span><br><span class="line">endTime = System.currentTimeMillis();</span><br><span class="line">System.out.println(<span class="string">"StringBuffer的执行时间："</span> + (endTime - startTime));</span><br><span class="line"></span><br><span class="line">startTime = System.currentTimeMillis();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20000</span>; i++) &#123;</span><br><span class="line">    builder.append(String.valueOf(i));</span><br><span class="line">&#125;</span><br><span class="line">endTime = System.currentTimeMillis();</span><br><span class="line">System.out.println(<span class="string">"StringBuilder的执行时间："</span> + (endTime - startTime));</span><br><span class="line"></span><br><span class="line">startTime = System.currentTimeMillis();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20000</span>; i++) &#123;</span><br><span class="line">    text = text + i;</span><br><span class="line">&#125;</span><br><span class="line">endTime = System.currentTimeMillis();</span><br><span class="line">System.out.println(<span class="string">"String的执行时间："</span> + (endTime - startTime));</span><br></pre></td></tr></table></figure>

<h3 id="2-4-练习"><a href="#2-4-练习" class="headerlink" title="2.4 练习"></a>2.4 练习</h3><p>笔试题：程序输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">String str = <span class="keyword">null</span>;</span><br><span class="line">StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">sb.append(str);</span><br><span class="line">System.out.println(sb.length());<span class="comment">//输出4</span></span><br><span class="line">System.out.println(sb);<span class="comment">//输出null</span></span><br><span class="line">StringBuffer sb1 = <span class="keyword">new</span> StringBuffer(str);  <span class="comment">//线程安全  Cannot invoke "String.length()" because "str" is null</span></span><br><span class="line">System.out.println(sb1);<span class="comment">//输出null</span></span><br></pre></td></tr></table></figure>

<h2 id="3-JDK8之前：日期时间API"><a href="#3-JDK8之前：日期时间API" class="headerlink" title="3. JDK8之前：日期时间API"></a>3. JDK8之前：日期时间API</h2><h3 id="3-1-java-lang-System类的方法"><a href="#3-1-java-lang-System类的方法" class="headerlink" title="3.1 java.lang.System类的方法"></a>3.1 java.lang.System类的方法</h3><ul>
<li><p>System类提供的public static long currentTimeMillis()：用来返回当前时间与1970年1月1日0时0分0秒之间以毫秒为单位的时间差。</p>
<ul>
<li>此方法适于计算时间差。</li>
</ul>
</li>
<li><p>计算世界时间的主要标准有：</p>
<ul>
<li>UTC(Coordinated Universal Time)</li>
<li>GMT(Greenwich Mean Time)</li>
<li>CST(Central Standard Time)</li>
</ul>
<blockquote>
<p>在国际无线电通信场合，为了统一起见，使用一个统一的时间，称为通用协调时(UTC, Universal Time Coordinated)。UTC与格林尼治平均时(GMT, Greenwich Mean Time)一样，都与英国伦敦的本地时相同。这里，UTC与GMT含义完全相同。 </p>
</blockquote>
</li>
</ul>
<h3 id="3-2-java-util-Date"><a href="#3-2-java-util-Date" class="headerlink" title="3.2 java.util.Date"></a>3.2 java.util.Date</h3><p>表示特定的瞬间，精确到毫秒。</p>
<ul>
<li>构造器：<ul>
<li>Date()：使用无参构造器创建的对象可以获取本地当前时间。</li>
<li>Date(long 毫秒数)：把该毫秒值换算成日期时间对象</li>
</ul>
</li>
<li>常用方法<ul>
<li><strong>getTime():</strong> 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。</li>
<li><strong>toString()</strong>: 把此 Date 对象转换为以下形式的 String： dow mon dd hh:mm:ss zzz yyyy 其中： dow 是一周中的某一天 (Sun, Mon, Tue, Wed, Thu, Fri, Sat)，zzz是时间标准。</li>
<li>其它很多方法都过时了。</li>
</ul>
</li>
<li>举例：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">   <span class="comment">//创建一个基于当前系统时间的Date实例</span></span><br><span class="line">   Date date=<span class="keyword">new</span> Date();</span><br><span class="line">   System.out.println(date.toString()); <span class="comment">//Tue Oct 24 10:25:37 CST 2023</span></span><br><span class="line">   System.out.println(date.getTime()); <span class="comment">//对应的毫秒数:1698114337721</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//创建一个基于自定义时间的Date实例</span></span><br><span class="line">    <span class="comment">//或者写成 java.sql.Date date=new java.sql.Date(date.getTime());</span></span><br><span class="line">    java.sql.Date date=<span class="keyword">new</span> java.sql.Date(<span class="number">1698114337721L</span>);  </span><br><span class="line">    System.out.println(date.toString()); <span class="comment">//2023-10-24</span></span><br><span class="line">    System.out.println(date.getTime()); <span class="comment">//对应的毫秒数:1698114337721</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-java-text-SimpleDateFormat"><a href="#3-3-java-text-SimpleDateFormat" class="headerlink" title="3.3 java.text.SimpleDateFormat"></a>3.3 java.text.SimpleDateFormat</h3><ul>
<li>java.text.SimpleDateFormat类是一个不与语言环境有关的方式来格式化和解析日期的具体类。</li>
<li>可以进行格式化：日期 –&gt; 文本</li>
<li>可以进行解析：文本 –&gt; 日期</li>
<li><strong>构造器：</strong><ul>
<li>SimpleDateFormat() ：默认的模式和语言环境创建对象</li>
<li>public SimpleDateFormat(String pattern)：该构造方法可以用参数pattern指定的格式创建一个对象</li>
</ul>
</li>
<li><strong>格式化：</strong><ul>
<li>public String format(Date date)：方法格式化时间对象date</li>
</ul>
</li>
<li><strong>解析：</strong><ul>
<li>public Date parse(String source)：从给定字符串的开始解析文本，以生成一个日期。</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241719633.png" alt="1572599023197"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用SimpleDateFormat类</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span> <span class="keyword">throws</span> ParseException </span>&#123;</span><br><span class="line">    <span class="comment">//1.没设置需要的格式</span></span><br><span class="line">        SimpleDateFormat sdf=<span class="keyword">new</span> SimpleDateFormat();</span><br><span class="line">        <span class="comment">//格式化: 日期date ---&gt; String</span></span><br><span class="line">        Date date=<span class="keyword">new</span> Date();</span><br><span class="line">        String str=sdf.format(date); <span class="comment">//2023/10/24 上午10:42</span></span><br><span class="line">        System.out.println(str);</span><br><span class="line">        <span class="comment">//解析:  String ---&gt; 日期date</span></span><br><span class="line">        Date date1=sdf.parse(<span class="string">"2023/10/24 上午10:42"</span>);</span><br><span class="line">        System.out.println(date1.toString());  <span class="comment">//Tue Oct 24 10:42:00 CST 2023</span></span><br><span class="line">    <span class="comment">//2.设置需要的格式</span></span><br><span class="line">        SimpleDateFormat sdf1=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">        String str1=sdf1.format(date);  <span class="comment">//2023-10-24 10:46:37</span></span><br><span class="line">        System.out.println(str1);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-java-util-Calendar-日历"><a href="#3-4-java-util-Calendar-日历" class="headerlink" title="3.4 java.util.Calendar(日历)"></a>3.4 java.util.Calendar(日历)</h3><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241719774.png" alt="image-20220511105252261" style="zoom:67%;">

<ul>
<li><p>Date类的API大部分被废弃了，替换为Calendar。</p>
</li>
<li><p><code>Calendar</code> 类是一个抽象类，主用用于完成日期字段之间相互操作的功能。</p>
</li>
<li><p>获取Calendar实例的方法</p>
<ul>
<li><p>使用<code>Calendar.getInstance()</code>方法</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241719741.png" alt="image-20220123184906903"></p>
</li>
<li><p>调用它的子类GregorianCalendar（公历）的构造器。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241719362.png" alt="image-20220405225828816"></p>
</li>
</ul>
</li>
<li><p>一个Calendar的实例是系统时间的抽象表示，可以修改或获取 YEAR、MONTH、DAY_OF_WEEK、HOUR_OF_DAY 、MINUTE、SECOND等 <code>日历字段</code>对应的时间值。</p>
<ul>
<li>public int get(int field)：返回给定日历字段的值</li>
<li>public void set(int field,int value) ：将给定的日历字段设置为指定的值</li>
<li>public void add(int field,int amount)：根据日历的规则，为给定的日历字段添加或者减去指定的时间量</li>
<li>public final Date getTime()：将Calendar转成Date对象</li>
<li>public final void setTime(Date date)：使用指定的Date对象重置Calendar的时间</li>
</ul>
</li>
<li><p>常用字段</p>
<p><img src=".images/1620277709044.png" alt="1620277709044"></p>
</li>
<li><p>注意：</p>
<ul>
<li>获取月份时：一月是0，二月是1，以此类推，12月是11</li>
<li>获取星期时：周日是1，周二是2 ， 。。。。周六是7</li>
</ul>
</li>
<li><p>示例代码：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.Calendar;</span><br><span class="line"><span class="keyword">import</span> java.util.TimeZone;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCalendar</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Calendar c = Calendar.getInstance();</span><br><span class="line">        System.out.println(c);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> year = c.get(Calendar.YEAR);</span><br><span class="line">        <span class="keyword">int</span> month = c.get(Calendar.MONTH)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> day = c.get(Calendar.DATE);</span><br><span class="line">        <span class="keyword">int</span> hour = c.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">        <span class="keyword">int</span> minute = c.get(Calendar.MINUTE);</span><br><span class="line"></span><br><span class="line">        System.out.println(year + <span class="string">"-"</span> + month + <span class="string">"-"</span> + day + <span class="string">" "</span> + hour + <span class="string">":"</span> + minute);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        TimeZone t = TimeZone.getTimeZone(<span class="string">"America/Los_Angeles"</span>);</span><br><span class="line">        Calendar c = Calendar.getInstance(t);</span><br><span class="line">        <span class="keyword">int</span> year = c.get(Calendar.YEAR);</span><br><span class="line">        <span class="keyword">int</span> month = c.get(Calendar.MONTH)+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> day = c.get(Calendar.DATE);</span><br><span class="line">        <span class="keyword">int</span> hour = c.get(Calendar.HOUR_OF_DAY);</span><br><span class="line">        <span class="keyword">int</span> minute = c.get(Calendar.MINUTE);</span><br><span class="line"></span><br><span class="line">        System.out.println(year + <span class="string">"-"</span> + month + <span class="string">"-"</span> + day + <span class="string">" "</span> + hour + <span class="string">":"</span> + minute);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Calendar calendar = Calendar.getInstance();</span><br><span class="line">		<span class="comment">// 从一个 Calendar 对象中获取 Date 对象</span></span><br><span class="line">		Date date = calendar.getTime();</span><br><span class="line">        </span><br><span class="line">		<span class="comment">// 使用给定的 Date 设置此 Calendar 的时间</span></span><br><span class="line">		date = <span class="keyword">new</span> Date(<span class="number">234234235235L</span>);</span><br><span class="line">		calendar.setTime(date);</span><br><span class="line">		calendar.set(Calendar.DAY_OF_MONTH, <span class="number">8</span>);</span><br><span class="line">		System.out.println(<span class="string">"当前时间日设置为8后,时间是:"</span> + calendar.getTime());</span><br><span class="line">        </span><br><span class="line">		calendar.add(Calendar.HOUR, <span class="number">2</span>);</span><br><span class="line">		System.out.println(<span class="string">"当前时间加2小时后,时间是:"</span> + calendar.getTime());</span><br><span class="line">        </span><br><span class="line">		calendar.add(Calendar.MONTH, -<span class="number">2</span>);</span><br><span class="line">		System.out.println(<span class="string">"当前日期减2个月后,时间是:"</span> + calendar.getTime());  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-练习"><a href="#3-5-练习" class="headerlink" title="3.5 练习"></a>3.5 练习</h3><p>输入年份和月份，输出该月日历。</p>
<p>闰年计算公式：年份可以被4整除但不能被100整除，或者可以被400整除。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241720705.png" alt="image-20220503120722810" style="zoom:67%;">

<h2 id="4-JDK8：新的日期时间API"><a href="#4-JDK8：新的日期时间API" class="headerlink" title="4. JDK8：新的日期时间API"></a>4. JDK8：新的日期时间API</h2><p>如果我们可以跟别人说：“我们在1502643933071见面，别晚了！”那么就再简单不过了。但是我们希望时间与昼夜和四季有关，于是事情就变复杂了。JDK 1.0中包含了一个java.util.Date类，但是它的大多数方法已经在JDK 1.1引入Calendar类之后被弃用了。而Calendar并不比Date好多少。它们面临的问题是：</p>
<ul>
<li><p>可变性：像日期和时间这样的类应该是不可变的。【Calendar类的set方法可以更改时间和日期】</p>
</li>
<li><p>偏移性：Date中的年份是从1900开始的，而月份都从0开始。【具有偏移量，不能直接写2023就是2023】</p>
</li>
<li><p>格式化：格式化只对Date有用，Calendar则不行。【】</p>
</li>
<li><p>此外，它们也不是线程安全的；不能处理闰秒等。【】</p>
<blockquote>
<p>闰秒，是指为保持协调世界时接近于世界时时刻，由国际计量局统一规定在年底或年中（也可能在季末）对协调世界时增加或减少1秒的调整。由于地球自转的不均匀性和长期变慢性（主要由潮汐摩擦引起的），会使世界时（民用时）和原子时之间相差超过到±0.9秒时，就把协调世界时向前拨1秒（负闰秒，最后一分钟为59秒）或向后拨1秒（正闰秒，最后一分钟为61秒）； 闰秒一般加在公历年末或公历六月末。</p>
<p>目前，全球已经进行了27次闰秒，均为正闰秒。</p>
</blockquote>
</li>
</ul>
<p>总结：<code>对日期和时间的操作一直是Java程序员最痛苦的地方之一</code>。</p>
<p>第三次引入的API是成功的，并且Java 8中引入的<strong>java.time</strong> 已经纠正了过去的缺陷，将来很长一段时间内它都会为我们服务。</p>
<p>Java 8 以一个新的开始为 Java 创建优秀的 API。新的日期时间API包含：</p>
<ul>
<li><code>java.time</code> – 包含值对象的基础包</li>
<li><code>java.time.chrono</code> – 提供对不同的日历系统的访问。</li>
<li><code>java.time.format</code> – 格式化和解析时间和日期</li>
<li><code>java.time.temporal</code> – 包括底层框架和扩展特性</li>
<li><code>java.time.zone</code> – 包含时区支持的类</li>
</ul>
<p>说明：新的 java.time 中包含了所有关于时钟（Clock），本地日期（LocalDate）、本地时间（LocalTime）、本地日期时间（LocalDateTime）、时区（ZonedDateTime）和持续时间（Duration）的类。</p>
<p>尽管有68个新的公开类型，但是大多数开发者只会用到基础包和format包，大概占总数的三分之一。</p>
<h3 id="4-1-本地日期时间：LocalDate、LocalTime、LocalDateTime"><a href="#4-1-本地日期时间：LocalDate、LocalTime、LocalDateTime" class="headerlink" title="4.1 本地日期时间：LocalDate、LocalTime、LocalDateTime"></a>4.1 本地日期时间：LocalDate、LocalTime、LocalDateTime</h3><table>
<thead>
<tr>
<th>方法</th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>now()</code>/<br>now(ZoneId zone)</td>
<td><strong>静态方法</strong>，根据当前时间创建对象/指定时区的对象</td>
</tr>
<tr>
<td><code>of(xx,xx,xx,xx,xx,xxx)</code></td>
<td><strong>静态方法</strong>，根据指定日期/时间创建对象</td>
</tr>
<tr>
<td>getDayOfMonth()/<br>getDayOfYear()</td>
<td>获得月份天数(1-31) /获得年份天数(1-366)</td>
</tr>
<tr>
<td>getDayOfWeek()</td>
<td>获得星期几(返回一个 DayOfWeek 枚举值)</td>
</tr>
<tr>
<td>getMonth()</td>
<td>获得月份, 返回一个 Month 枚举值</td>
</tr>
<tr>
<td>getMonthValue() / <br>getYear()</td>
<td>获得月份(1-12) /获得年份</td>
</tr>
<tr>
<td>getHours()/<br>getMinute()/<br>getSecond()</td>
<td>获得当前对象对应的小时、分钟、秒</td>
</tr>
<tr>
<td>withDayOfMonth()/<br>withDayOfYear()/<br>withMonth()/<br>withYear()</td>
<td>将月份天数、年份天数、月份、年份修改为指定的值并返回新的对象</td>
</tr>
<tr>
<td>with(TemporalAdjuster  t)</td>
<td>将当前日期时间设置为校对器指定的日期时间</td>
</tr>
<tr>
<td>plusDays(), <br>plusWeeks(),<br>plusMonths(), <br>plusYears(),<br>plusHours()</td>
<td>向当前对象添加几天、几周、几个月、几年、几小时</td>
</tr>
<tr>
<td>minusMonths() / <br>minusWeeks()/<br>minusDays()/<br>minusYears()/<br>minusHours()</td>
<td>从当前对象减去几月、几周、几天、几年、几小时</td>
</tr>
<tr>
<td>plus(TemporalAmount t)/<br>minus(TemporalAmount t)</td>
<td>添加或减少一个 Duration 或 Period</td>
</tr>
<tr>
<td>isBefore()/<br>isAfter()</td>
<td>比较两个 LocalDate</td>
</tr>
<tr>
<td>isLeapYear()</td>
<td>判断是否是闰年（在LocalDate类中声明）</td>
</tr>
<tr>
<td>format(DateTimeFormatter  t)</td>
<td>格式化本地日期、时间，返回一个字符串</td>
</tr>
<tr>
<td>parse(Charsequence text)</td>
<td>将指定格式的字符串解析为日期、时间</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//now() 获取当前日期和时间</span></span><br><span class="line">    LocalDate localDate=LocalDate.now();</span><br><span class="line">    System.out.println(localDate);  <span class="comment">//2023-10-24</span></span><br><span class="line"></span><br><span class="line">    LocalTime localTime= LocalTime.now();</span><br><span class="line">    System.out.println(localTime);  <span class="comment">//11:08:04.703426700</span></span><br><span class="line"></span><br><span class="line">    LocalDateTime localDateTime=LocalDateTime.now();</span><br><span class="line">    System.out.println(localDateTime); <span class="comment">//2023-10-24T11:08:04.703426700</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//of() 获取指定日期和时间 【没有偏移量，指定哪天就是哪天】</span></span><br><span class="line">    LocalDate localDate1=LocalDate.of(<span class="number">2023</span>,<span class="number">10</span>,<span class="number">13</span>);</span><br><span class="line">    System.out.println(localDate1); <span class="comment">//2023-10-13</span></span><br><span class="line"></span><br><span class="line">    LocalTime localTime1=LocalTime.of(<span class="number">12</span>,<span class="number">10</span>,<span class="number">24</span>);</span><br><span class="line">    System.out.println(localTime1); <span class="comment">//12:10:24</span></span><br><span class="line"></span><br><span class="line">    LocalDateTime localDateTime1=LocalDateTime.of(<span class="number">2023</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">1</span>);</span><br><span class="line">    System.out.println(localDateTime1); <span class="comment">//2023-10-01T12:13:01</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-瞬时：Instant"><a href="#4-2-瞬时：Instant" class="headerlink" title="4.2 瞬时：Instant"></a>4.2 瞬时：Instant</h3><ul>
<li>Instant：时间线上的一个瞬时点。 这可能被用来记录应用程序中的事件<strong>时间戳</strong>。[购物平台的购买记录，类似于订单号每个人只有一个]<ul>
<li>时间戳是指格林威治时间1970年01月01日00时00分00秒(北京时间1970年01月01日08时00分00秒)起至现在的总秒数。</li>
</ul>
</li>
<li><code>java.time.Instant</code>表示时间线上的一点，而不需要任何上下文信息，例如，时区。概念上讲，<code>它只是简单的表示自1970年1月1日0时0分0秒（UTC）开始的秒数。</code></li>
</ul>
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><code>now()</code></td>
<td><strong>静态方法</strong>，返回默认UTC时区的Instant类的对象</td>
</tr>
<tr>
<td><code>ofEpochMilli(long epochMilli)</code></td>
<td><strong>静态方法</strong>，返回在1970-01-01 00:00:00基础上加上指定毫秒数之后的Instant类的对象</td>
</tr>
<tr>
<td>atOffset(ZoneOffset offset)</td>
<td>结合即时的偏移来创建一个 OffsetDateTime</td>
</tr>
<tr>
<td><code>toEpochMilli()</code></td>
<td>返回1970-01-01 00:00:00到当前时间的毫秒数，即为时间戳</td>
</tr>
</tbody></table>
<blockquote>
<p>中国大陆、中国香港、中国澳门、中国台湾、蒙古国、新加坡、马来西亚、菲律宾、西澳大利亚州的时间与UTC的时差均为+8，也就是UTC+8。</p>
<p>instant.atOffset(ZoneOffset.ofHours(8));</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241720689.png" alt="image-20220406000442908"></p>
<blockquote>
<p>整个地球分为二十四时区，每个时区都有自己的本地时间。北京时区是东八区，领先UTC八个小时，在电子邮件信头的Date域记为+0800。如果在电子邮件的信头中有这么一行： </p>
<p>Date: Fri, 08 Nov 2002 09:42:22 +0800 </p>
<p>说明信件的发送地的地方时间是二○○二年十一月八号，星期五，早上九点四十二分（二十二秒），这个地方的本地时领先UTC八个小时(+0800， 就是东八区时间)。电子邮件信头的Date域使用二十四小时的时钟，而不使用AM和PM来标记上下午。 </p>
</blockquote>
<h3 id="4-3-日期时间格式化：DateTimeFormatter"><a href="#4-3-日期时间格式化：DateTimeFormatter" class="headerlink" title="4.3 日期时间格式化：DateTimeFormatter"></a>4.3 日期时间格式化：DateTimeFormatter</h3><p>该类提供了三种格式化方法：</p>
<ul>
<li>(了解)预定义的标准格式。如：ISO_LOCAL_DATE_TIME、ISO_LOCAL_DATE、ISO_LOCAL_TIME</li>
</ul>
<ul>
<li><p>(了解)本地化相关的格式。如：ofLocalizedDate(FormatStyle.LONG)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 本地化相关的格式。如：ofLocalizedDateTime()</span></span><br><span class="line"><span class="comment">// FormatStyle.MEDIUM / FormatStyle.SHORT :适用于LocalDateTime</span></span><br><span class="line">				</span><br><span class="line"><span class="comment">// 本地化相关的格式。如：ofLocalizedDate()</span></span><br><span class="line"><span class="comment">// FormatStyle.FULL / FormatStyle.LONG / FormatStyle.MEDIUM / FormatStyle.SHORT : 适用于LocalDate</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义的格式。如：ofPattern(“yyyy-MM-dd hh:mm:ss”)</p>
</li>
</ul>
<table>
<thead>
<tr>
<th><strong>方</strong>   <strong>法</strong></th>
<th><strong>描</strong>   <strong>述</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>ofPattern(String</strong>  <strong>pattern)</strong></td>
<td><strong>静态方法</strong>，返回一个指定字符串格式的DateTimeFormatter</td>
</tr>
<tr>
<td><strong>format(TemporalAccessor</strong> <strong>t)</strong></td>
<td><strong>格式化</strong>一个日期、时间，返回字符串</td>
</tr>
<tr>
<td><strong>parse(CharSequence</strong>  <strong>text)</strong></td>
<td>将指定格式的字符序列<strong>解析</strong>为一个日期、时间</td>
</tr>
</tbody></table>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.ZoneId;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> java.time.format.FormatStyle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDatetimeFormatter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 方式一：预定义的标准格式。如：ISO_LOCAL_DATE_TIME;ISO_LOCAL_DATE;ISO_LOCAL_TIME</span></span><br><span class="line">        DateTimeFormatter formatter = DateTimeFormatter.ISO_LOCAL_DATE_TIME;</span><br><span class="line">        <span class="comment">// 格式化:日期--&gt;字符串</span></span><br><span class="line">        LocalDateTime localDateTime = LocalDateTime.now();</span><br><span class="line">        String str1 = formatter.format(localDateTime);</span><br><span class="line">        System.out.println(localDateTime);</span><br><span class="line">        System.out.println(str1);<span class="comment">//2022-12-04T21:02:14.808</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 解析：字符串 --&gt;日期</span></span><br><span class="line">        TemporalAccessor parse = formatter.parse(<span class="string">"2022-12-04T21:02:14.808"</span>);</span><br><span class="line">        LocalDateTime dateTime = LocalDateTime.from(parse);</span><br><span class="line">        System.out.println(dateTime);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        LocalDateTime localDateTime = LocalDateTime.now();</span><br><span class="line">        <span class="comment">// 方式二：</span></span><br><span class="line">        <span class="comment">// 本地化相关的格式。如：ofLocalizedDateTime()</span></span><br><span class="line">        <span class="comment">// FormatStyle.LONG / FormatStyle.MEDIUM / FormatStyle.SHORT :适用于LocalDateTime</span></span><br><span class="line">        DateTimeFormatter formatter1 = DateTimeFormatter.ofLocalizedDateTime(FormatStyle.LONG);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 格式化</span></span><br><span class="line">        String str2 = formatter1.format(localDateTime);</span><br><span class="line">        System.out.println(str2);<span class="comment">// 2022年12月4日 下午09时03分55秒</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 本地化相关的格式。如：ofLocalizedDate()</span></span><br><span class="line">        <span class="comment">// FormatStyle.FULL / FormatStyle.LONG / FormatStyle.MEDIUM / FormatStyle.SHORT : 适用于LocalDate</span></span><br><span class="line">        DateTimeFormatter formatter2 = DateTimeFormatter.ofLocalizedDate(FormatStyle.FULL);</span><br><span class="line">        <span class="comment">// 格式化</span></span><br><span class="line">        String str3 = formatter2.format(LocalDate.now());</span><br><span class="line">        System.out.println(str3);<span class="comment">// 2022年12月4日 星期日</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test3</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//方式三：自定义的方式（关注、重点）</span></span><br><span class="line">        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(<span class="string">"yyyy/MM/dd HH:mm:ss"</span>);</span><br><span class="line">        <span class="comment">//格式化</span></span><br><span class="line">        String strDateTime = dateTimeFormatter.format(LocalDateTime.now());</span><br><span class="line">        System.out.println(strDateTime); <span class="comment">//2022/12/04 21:05:42</span></span><br><span class="line">        <span class="comment">//解析</span></span><br><span class="line">        TemporalAccessor accessor = dateTimeFormatter.parse(<span class="string">"2022/12/04 21:05:42"</span>);</span><br><span class="line">        LocalDateTime localDateTime = LocalDateTime.from(accessor);</span><br><span class="line">        System.out.println(localDateTime); <span class="comment">//2022-12-04T21:05:42</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-其它API"><a href="#4-4-其它API" class="headerlink" title="4.4 其它API"></a>4.4 其它API</h3><p><strong>1、指定时区日期时间：ZondId和ZonedDateTime</strong></p>
<ul>
<li><p>ZoneId：该类中包含了所有的时区信息，一个时区的ID，如 Europe/Paris</p>
</li>
<li><p>ZonedDateTime：一个在ISO-8601日历系统时区的日期时间，如 2007-12-03T10:15:30+01:00 Europe/Paris。</p>
<ul>
<li>其中每个时区都对应着ID，地区ID都为“{区域}/{城市}”的格式，例如：Asia/Shanghai等</li>
</ul>
</li>
<li><p>常见时区ID：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Asia/Shanghai</span><br><span class="line">UTC</span><br><span class="line">America/New_York</span><br></pre></td></tr></table></figure>

<ul>
<li>可以通过ZondId获取所有可用的时区ID：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.ZoneId;</span><br><span class="line"><span class="keyword">import</span> java.time.ZonedDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestZone</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//需要知道一些时区的id</span></span><br><span class="line">        <span class="comment">//Set&lt;String&gt;是一个集合，容器</span></span><br><span class="line">        Set&lt;String&gt; availableZoneIds = ZoneId.getAvailableZoneIds();</span><br><span class="line">        <span class="comment">//快捷模板iter</span></span><br><span class="line">        <span class="keyword">for</span> (String availableZoneId : availableZoneIds) &#123;</span><br><span class="line">            System.out.println(availableZoneId);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ZonedDateTime t1 = ZonedDateTime.now();</span><br><span class="line">        System.out.println(t1);</span><br><span class="line"></span><br><span class="line">        ZonedDateTime t2 = ZonedDateTime.now(ZoneId.of(<span class="string">"America/New_York"</span>));</span><br><span class="line">        System.out.println(t2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、持续日期/时间：Period和Duration</strong></p>
<ul>
<li>持续时间：Duration，用于计算两个“时间”间隔</li>
<li>日期间隔：Period，用于计算两个“日期”间隔</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.Period;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPeriodDuration</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        LocalDate t1 = LocalDate.now();</span><br><span class="line">        LocalDate t2 = LocalDate.of(<span class="number">2018</span>, <span class="number">12</span>, <span class="number">31</span>);</span><br><span class="line">        Period between = Period.between(t1, t2);</span><br><span class="line">        System.out.println(between);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"相差的年数："</span>+between.getYears());</span><br><span class="line">        System.out.println(<span class="string">"相差的月数："</span>+between.getMonths());</span><br><span class="line">        System.out.println(<span class="string">"相差的天数："</span>+between.getDays());</span><br><span class="line">        System.out.println(<span class="string">"相差的总数："</span>+between.toTotalMonths());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        LocalDateTime t1 = LocalDateTime.now();</span><br><span class="line">        LocalDateTime t2 = LocalDateTime.of(<span class="number">2017</span>, <span class="number">8</span>, <span class="number">29</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        Duration between = Duration.between(t1, t2);</span><br><span class="line">        System.out.println(between);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"相差的总天数："</span>+between.toDays());</span><br><span class="line">        System.out.println(<span class="string">"相差的总小时数："</span>+between.toHours());</span><br><span class="line">        System.out.println(<span class="string">"相差的总分钟数："</span>+between.toMinutes());</span><br><span class="line">        System.out.println(<span class="string">"相差的总秒数："</span>+between.getSeconds());</span><br><span class="line">        System.out.println(<span class="string">"相差的总毫秒数："</span>+between.toMillis());</span><br><span class="line">        System.out.println(<span class="string">"相差的总纳秒数："</span>+between.toNanos());</span><br><span class="line">        System.out.println(<span class="string">"不够一秒的纳秒数："</span>+between.getNano());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//Duration:用于计算两个“时间”间隔，以秒和纳秒为基准</span></span><br><span class="line">		LocalTime localTime = LocalTime.now();</span><br><span class="line">		LocalTime localTime1 = LocalTime.of(<span class="number">15</span>, <span class="number">23</span>, <span class="number">32</span>);</span><br><span class="line">		<span class="comment">//between():静态方法，返回Duration对象，表示两个时间的间隔</span></span><br><span class="line">		Duration duration = Duration.between(localTime1, localTime);</span><br><span class="line">		System.out.println(duration);</span><br><span class="line"></span><br><span class="line">		System.out.println(duration.getSeconds());</span><br><span class="line">		System.out.println(duration.getNano());</span><br><span class="line"></span><br><span class="line">		LocalDateTime localDateTime = LocalDateTime.of(<span class="number">2016</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">15</span>, <span class="number">23</span>, <span class="number">32</span>);</span><br><span class="line">		LocalDateTime localDateTime1 = LocalDateTime.of(<span class="number">2017</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">15</span>, <span class="number">23</span>, <span class="number">32</span>);</span><br><span class="line"></span><br><span class="line">		Duration duration1 = Duration.between(localDateTime1, localDateTime);</span><br><span class="line">		System.out.println(duration1.toDays());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//Period:用于计算两个“日期”间隔，以年、月、日衡量</span></span><br><span class="line">		LocalDate localDate = LocalDate.now();</span><br><span class="line">		LocalDate localDate1 = LocalDate.of(<span class="number">2028</span>, <span class="number">3</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line">		Period period = Period.between(localDate, localDate1);</span><br><span class="line">		System.out.println(period);</span><br><span class="line"></span><br><span class="line">		System.out.println(period.getYears());</span><br><span class="line">		System.out.println(period.getMonths());</span><br><span class="line">		System.out.println(period.getDays());</span><br><span class="line"></span><br><span class="line">		Period period1 = period.withYears(<span class="number">2</span>);</span><br><span class="line">		System.out.println(period1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、Clock：使用时区提供对当前即时、日期和时间的访问的时钟。</p>
<p>4、TemporalAdjuster : 时间校正器。有时我们可能需要获取例如：将日期调整到“下一个工作日”等操作。<br>TemporalAdjusters : 该类通过静态方法(firstDayOfXxx()/lastDayOfXxx()/nextXxx())提供了大量的常用 TemporalAdjuster 的实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">// TemporalAdjuster:时间校正器</span></span><br><span class="line">	<span class="comment">// 获取当前日期的下一个周日是哪天？</span></span><br><span class="line">	TemporalAdjuster temporalAdjuster = TemporalAdjusters.next(DayOfWeek.SUNDAY);</span><br><span class="line">	LocalDateTime localDateTime = LocalDateTime.now().with(temporalAdjuster);</span><br><span class="line">	System.out.println(localDateTime);</span><br><span class="line">	<span class="comment">// 获取下一个工作日是哪天？</span></span><br><span class="line">	LocalDate localDate = LocalDate.now().with(<span class="keyword">new</span> TemporalAdjuster() &#123;</span><br><span class="line">   	 	<span class="meta">@Override</span></span><br><span class="line">   	 	<span class="function"><span class="keyword">public</span> Temporal <span class="title">adjustInto</span><span class="params">(Temporal temporal)</span> </span>&#123;</span><br><span class="line">        	LocalDate date = (LocalDate) temporal;</span><br><span class="line">     	  	<span class="keyword">if</span> (date.getDayOfWeek().equals(DayOfWeek.FRIDAY)) &#123;</span><br><span class="line">           		<span class="keyword">return</span> date.plusDays(<span class="number">3</span>);</span><br><span class="line">        	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (date.getDayOfWeek().equals(DayOfWeek.SATURDAY)) &#123;</span><br><span class="line">            	<span class="keyword">return</span> date.plusDays(<span class="number">2</span>);</span><br><span class="line">        	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            	<span class="keyword">return</span> date.plusDays(<span class="number">1</span>);</span><br><span class="line">        	&#125;</span><br><span class="line">    	&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	System.out.println(<span class="string">"下一个工作日是："</span> + localDate);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-5-与传统日期处理的转换"><a href="#4-5-与传统日期处理的转换" class="headerlink" title="4.5 与传统日期处理的转换"></a>4.5 与传统日期处理的转换</h3><table>
<thead>
<tr>
<th><strong>类</strong></th>
<th><strong>To</strong> <strong>遗留类</strong></th>
<th><strong>From</strong> <strong>遗留类</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>java.time.Instant与java.util.Date</strong></td>
<td>Date.from(instant)</td>
<td>date.toInstant()</td>
</tr>
<tr>
<td><strong>java.time.Instant与java.sql.Timestamp</strong></td>
<td>Timestamp.from(instant)</td>
<td>timestamp.toInstant()</td>
</tr>
<tr>
<td><strong>java.time.ZonedDateTime与java.util.GregorianCalendar</strong></td>
<td>GregorianCalendar.from(zonedDateTime)</td>
<td>cal.toZonedDateTime()</td>
</tr>
<tr>
<td><strong>java.time.LocalDate与java.sql.Time</strong></td>
<td>Date.valueOf(localDate)</td>
<td>date.toLocalDate()</td>
</tr>
<tr>
<td><strong>java.time.LocalTime与java.sql.Time</strong></td>
<td>Date.valueOf(localDate)</td>
<td>date.toLocalTime()</td>
</tr>
<tr>
<td><strong>java.time.LocalDateTime与java.sql.Timestamp</strong></td>
<td>Timestamp.valueOf(localDateTime)</td>
<td>timestamp.toLocalDateTime()</td>
</tr>
<tr>
<td><strong>java.time.ZoneId与java.util.TimeZone</strong></td>
<td>Timezone.getTimeZone(id)</td>
<td>timeZone.toZoneId()</td>
</tr>
<tr>
<td><strong>java.time.format.DateTimeFormatter与java.text.DateFormat</strong></td>
<td>formatter.toFormat()</td>
<td>无</td>
</tr>
</tbody></table>
<h2 id="5-Java比较器"><a href="#5-Java比较器" class="headerlink" title="5. Java比较器"></a>5. Java比较器</h2><p>我们知道基本数据类型的数据（除boolean类型外）需要比较大小的话，之间使用比较运算符即可，但是引用数据类型是不能直接使用比较运算符来比较大小的。那么，如何解决这个问题呢？</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241720048.png" alt="image-20220406001726285"></p>
<ul>
<li>在Java中经常会涉及到对象数组的排序问题，那么就涉及到对象之间的比较问题。</li>
</ul>
<ul>
<li>Java实现对象排序的方式有两种：<ul>
<li>自然排序：java.lang.Comparable</li>
<li>定制排序：java.util.Comparator</li>
</ul>
</li>
</ul>
<h3 id="5-1-自然排序：java-lang-Comparable"><a href="#5-1-自然排序：java-lang-Comparable" class="headerlink" title="5.1 自然排序：java.lang.Comparable"></a>5.1 自然排序：java.lang.Comparable</h3><ul>
<li>Comparable接口强行对实现它的每个类的对象进行整体排序。这种排序被称为类的自然排序。</li>
<li>实现 Comparable 的类必须实现 <code>compareTo(Object obj)</code>方法，两个对象即通过 compareTo(Object obj) 方法的返回值来比较大小。如果当前对象this大于形参对象obj，则返回正整数，如果当前对象this小于形参对象obj，则返回负整数，如果当前对象this等于形参对象obj，则返回零。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparable</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object obj)</span></span>;  <span class="comment">//抽象方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>实现Comparable接口的对象列表（和数组）可以通过 Collections.sort 或 Arrays.sort进行自动排序。实现此接口的对象可以用作有序映射中的键或有序集合中的元素，无需指定比较器。</p>
</li>
<li><p>对于类 C 的每一个 e1 和 e2 来说，当且仅当 e1.compareTo(e2) == 0 与 e1.equals(e2) 具有相同的 boolean 值时，类 C 的自然排序才叫做与 equals 一致。建议（虽然不是必需的）<code>最好使自然排序与 equals 一致</code>。</p>
</li>
<li><p>Comparable 的典型实现：(<code>默认都是从小到大排列的</code>)</p>
<ul>
<li>String：按照字符串中字符的Unicode值进行比较</li>
<li>Character：按照字符的Unicode值来进行比较</li>
<li>数值类型对应的包装类以及BigInteger、BigDecimal：按照它们对应的数值大小进行比较</li>
<li>Boolean：true 对应的包装类实例大于 false 对应的包装类实例</li>
<li>Date、Time等：后面的日期时间比前面的日期时间大</li>
</ul>
</li>
<li><p>代码示例：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Comparable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> score;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> score, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getScore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScore</span><span class="params">(<span class="keyword">int</span> score)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student&#123;"</span> +<span class="string">"id="</span> + id +<span class="string">", name='"</span> + name + <span class="string">'\''</span> +<span class="string">", score="</span> + score +<span class="string">", age="</span> + age +<span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//重写compareTo方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//这些需要强制，将o对象向下转型为Student类型的变量，才能调用Student类中的属性</span></span><br><span class="line">        <span class="comment">//默认按照学号比较大小</span></span><br><span class="line">        Student stu = (Student) o;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.id - stu.id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStudent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Student[] arr = <span class="keyword">new</span> Student[<span class="number">5</span>];</span><br><span class="line">        arr[<span class="number">0</span>] = <span class="keyword">new</span> Student(<span class="number">3</span>,<span class="string">"张三"</span>,<span class="number">90</span>,<span class="number">23</span>);</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="keyword">new</span> Student(<span class="number">1</span>,<span class="string">"熊大"</span>,<span class="number">100</span>,<span class="number">22</span>);</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="keyword">new</span> Student(<span class="number">5</span>,<span class="string">"王五"</span>,<span class="number">75</span>,<span class="number">25</span>);</span><br><span class="line">        arr[<span class="number">3</span>] = <span class="keyword">new</span> Student(<span class="number">4</span>,<span class="string">"李四"</span>,<span class="number">85</span>,<span class="number">24</span>);</span><br><span class="line">        arr[<span class="number">4</span>] = <span class="keyword">new</span> Student(<span class="number">2</span>,<span class="string">"熊二"</span>,<span class="number">85</span>,<span class="number">18</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//单独比较两个对象</span></span><br><span class="line">        System.out.println(arr[<span class="number">0</span>].compareTo(arr[<span class="number">1</span>]));  <span class="comment">//调用Person重写的方法</span></span><br><span class="line">        System.out.println(arr[<span class="number">1</span>].compareTo(arr[<span class="number">2</span>]));  <span class="comment">//调用Person重写的方法</span></span><br><span class="line">        System.out.println(arr[<span class="number">2</span>].compareTo(arr[<span class="number">2</span>]));  <span class="comment">//调用Person重写的方法</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"所有学生："</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"按照学号排序："</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length-i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[j].compareTo(arr[j+<span class="number">1</span>])&gt;<span class="number">0</span>)&#123;   <span class="comment">//调用Person重写的方法</span></span><br><span class="line">                    Student temp = arr[j];</span><br><span class="line">                    arr[j] = arr[j+<span class="number">1</span>];</span><br><span class="line">                    arr[j+<span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//遍历数组所有元素</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241544774.png" alt="image-20231024154426685"></p>
<h3 id="5-2-定制排序：java-util-Comparator"><a href="#5-2-定制排序：java-util-Comparator" class="headerlink" title="5.2 定制排序：java.util.Comparator"></a>5.2 定制排序：java.util.Comparator</h3><ul>
<li>思考<ul>
<li>当元素的类型没有实现java.lang.Comparable接口而又不方便修改代码（例如：一些第三方的类，你只有.class文件，没有源文件）</li>
<li>如果一个类，实现了Comparable接口，也指定了两个对象的比较大小的规则，但是此时此刻我不想按照它预定义的方法比较大小，但是我又不能随意修改，因为会影响其他地方的使用，怎么办？</li>
</ul>
</li>
<li>JDK在设计类库之初，也考虑到这种情况，所以又增加了一个java.util.Comparator接口。强行对多个对象进行整体排序的比较。<ul>
<li>重写compare(Object o1,Object o2)方法，比较o1和o2的大小：如果方法返回正整数，则表示o1大于o2；如果返回0，表示相等；返回负整数，表示o1小于o2。</li>
<li>可以将 Comparator 传递给 sort 方法（如 Collections.sort 或 Arrays.sort），从而允许在排序顺序上实现精确控制。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparator</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1,Object o2)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="comment">//定义定制比较器类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentScoreComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span> </span>&#123; </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">        Student s1 = (Student) o1;</span><br><span class="line">        Student s2 = (Student) o2;</span><br><span class="line">        <span class="keyword">int</span> result = s1.getScore() - s2.getScore();</span><br><span class="line">        <span class="keyword">return</span> result != <span class="number">0</span> ? result : s1.getId() - s2.getId();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStudent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Student[] arr = <span class="keyword">new</span> Student[<span class="number">5</span>];</span><br><span class="line">        arr[<span class="number">0</span>] = <span class="keyword">new</span> Student(<span class="number">3</span>, <span class="string">"张三"</span>, <span class="number">90</span>, <span class="number">23</span>);</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="keyword">new</span> Student(<span class="number">1</span>, <span class="string">"熊大"</span>, <span class="number">100</span>, <span class="number">22</span>);</span><br><span class="line">        arr[<span class="number">2</span>] = <span class="keyword">new</span> Student(<span class="number">5</span>, <span class="string">"王五"</span>, <span class="number">75</span>, <span class="number">25</span>);</span><br><span class="line">        arr[<span class="number">3</span>] = <span class="keyword">new</span> Student(<span class="number">4</span>, <span class="string">"李四"</span>, <span class="number">85</span>, <span class="number">24</span>);</span><br><span class="line">        arr[<span class="number">4</span>] = <span class="keyword">new</span> Student(<span class="number">2</span>, <span class="string">"熊二"</span>, <span class="number">85</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"所有学生："</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"按照成绩排序"</span>);</span><br><span class="line">        StudentScoreComparator sc = <span class="keyword">new</span> StudentScoreComparator();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; arr.length - i; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (sc.compare(arr[j], arr[j + <span class="number">1</span>]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                    Student temp = arr[j];</span><br><span class="line">                    arr[j] = arr[j + <span class="number">1</span>];</span><br><span class="line">                    arr[j + <span class="number">1</span>] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student[] students = <span class="keyword">new</span> Student[<span class="number">5</span>];</span><br><span class="line">    students[<span class="number">0</span>] = <span class="keyword">new</span> Student(<span class="number">3</span>, <span class="string">"张三"</span>, <span class="number">90</span>, <span class="number">23</span>);</span><br><span class="line">    students[<span class="number">1</span>] = <span class="keyword">new</span> Student(<span class="number">1</span>, <span class="string">"熊大"</span>, <span class="number">100</span>, <span class="number">22</span>);</span><br><span class="line">    students[<span class="number">2</span>] = <span class="keyword">new</span> Student(<span class="number">5</span>, <span class="string">"王五"</span>, <span class="number">75</span>, <span class="number">25</span>);</span><br><span class="line">    students[<span class="number">3</span>] = <span class="keyword">new</span> Student(<span class="number">4</span>, <span class="string">"李四"</span>, <span class="number">85</span>, <span class="number">24</span>);</span><br><span class="line">    students[<span class="number">4</span>] = <span class="keyword">new</span> Student(<span class="number">2</span>, <span class="string">"熊二"</span>, <span class="number">85</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(Arrays.toString(students));</span><br><span class="line">    <span class="comment">//定制排序</span></span><br><span class="line">    StudentScoreComparator sc = <span class="keyword">new</span> StudentScoreComparator();</span><br><span class="line">    Arrays.sort(students, sc);</span><br><span class="line">    System.out.println(<span class="string">"排序之后："</span>);</span><br><span class="line">    System.out.println(Arrays.toString(students));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>再举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Goods[] all = <span class="keyword">new</span> Goods[<span class="number">4</span>];</span><br><span class="line">all[<span class="number">0</span>] = <span class="keyword">new</span> Goods(<span class="string">"War and Peace"</span>, <span class="number">100</span>);</span><br><span class="line">all[<span class="number">1</span>] = <span class="keyword">new</span> Goods(<span class="string">"Childhood"</span>, <span class="number">80</span>);</span><br><span class="line">all[<span class="number">2</span>] = <span class="keyword">new</span> Goods(<span class="string">"Scarlet and Black"</span>, <span class="number">140</span>);</span><br><span class="line">all[<span class="number">3</span>] = <span class="keyword">new</span> Goods(<span class="string">"Notre Dame de Paris"</span>, <span class="number">120</span>);</span><br><span class="line"></span><br><span class="line">Arrays.sort(all, <span class="keyword">new</span> Comparator() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(Object o1, Object o2)</span> </span>&#123;</span><br><span class="line">        Goods g1 = (Goods) o1;</span><br><span class="line">        Goods g2 = (Goods) o2;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> g1.getName().compareTo(g2.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(Arrays.toString(all));</span><br></pre></td></tr></table></figure>

<h2 id="6-系统相关类"><a href="#6-系统相关类" class="headerlink" title="6. 系统相关类"></a>6. 系统相关类</h2><h3 id="6-1-java-lang-System类"><a href="#6-1-java-lang-System类" class="headerlink" title="6.1 java.lang.System类"></a>6.1 java.lang.System类</h3><ul>
<li><p>System类代表系统，系统级的很多属性和控制方法都放置在该类的内部。该类位于<code>java.lang包</code>。</p>
</li>
<li><p>由于该类的构造器是private的，所以无法创建该类的对象。其内部的成员变量和成员方法都是<code>static的</code>，所以也可以很方便的进行调用。</p>
</li>
<li><p>成员变量   Scanner scan = new Scanner(System.in);</p>
<ul>
<li>System类内部包含<code>in</code>、<code>out</code>和<code>err</code>三个成员变量，分别代表标准输入流(键盘输入)，标准输出流(显示器)和标准错误输出流(显示器)。</li>
</ul>
</li>
<li><p>成员方法</p>
<ul>
<li><p><code>native long currentTimeMillis()</code>：<br>该方法的作用是返回当前的计算机时间，时间的表达格式为当前计算机时间和GMT时间(格林威治时间)1970年1月1号0时0分0秒所差的毫秒数。</p>
</li>
<li><p><code>void exit(int status)</code>：<br>该方法的作用是退出程序。其中status的值为0代表正常退出，非零代表异常退出。使用该方法可以在图形界面编程中实现程序的退出功能等。</p>
</li>
<li><p><code>void gc()</code>：<br>该方法的作用是请求系统进行垃圾回收。至于系统是否立刻回收，则取决于系统中垃圾回收算法的实现以及系统执行时的情况。</p>
</li>
<li><p><code>String getProperty(String key)</code>：<br>该方法的作用是获得系统中属性名为key的属性对应的值。系统中常见的属性名以及属性的作用如下表所示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310241720367.png" alt="image-20220406003340258"></p>
</li>
</ul>
</li>
<li><p>举例</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSystem</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> time = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"现在的系统时间距离1970年1月1日凌晨："</span> + time + <span class="string">"毫秒"</span>);</span><br><span class="line"></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"over"</span>);<span class="comment">//不会执行</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String javaVersion = System.getProperty(<span class="string">"java.version"</span>);</span><br><span class="line">		System.out.println(<span class="string">"java的version:"</span> + javaVersion);</span><br><span class="line"></span><br><span class="line">		String javaHome = System.getProperty(<span class="string">"java.home"</span>);</span><br><span class="line">		System.out.println(<span class="string">"java的home:"</span> + javaHome);</span><br><span class="line"></span><br><span class="line">		String osName = System.getProperty(<span class="string">"os.name"</span>);</span><br><span class="line">		System.out.println(<span class="string">"os的name:"</span> + osName);</span><br><span class="line"></span><br><span class="line">		String osVersion = System.getProperty(<span class="string">"os.version"</span>);</span><br><span class="line">		System.out.println(<span class="string">"os的version:"</span> + osVersion);</span><br><span class="line"></span><br><span class="line">		String userName = System.getProperty(<span class="string">"user.name"</span>);</span><br><span class="line">		System.out.println(<span class="string">"user的name:"</span> + userName);</span><br><span class="line"></span><br><span class="line">		String userHome = System.getProperty(<span class="string">"user.home"</span>);</span><br><span class="line">		System.out.println(<span class="string">"user的home:"</span> + userHome);</span><br><span class="line"></span><br><span class="line">		String userDir = System.getProperty(<span class="string">"user.dir"</span>);</span><br><span class="line">		System.out.println(<span class="string">"user的dir:"</span> + userDir);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>; i &lt;=<span class="number">10</span>; i++)&#123;</span><br><span class="line">            MyDemo my = <span class="keyword">new</span> MyDemo(i);</span><br><span class="line">            <span class="comment">//每一次循环my就会指向新的对象，那么上次的对象就没有变量引用它了，就成垃圾对象</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//为了看到垃圾回收器工作，我要加下面的代码，让main方法不那么快结束，因为main结束就会导致JVM退出，GC也会跟着结束。</span></span><br><span class="line">        System.gc();<span class="comment">//如果不调用这句代码，GC可能不工作，因为当前内存很充足，GC就觉得不着急回收垃圾对象。</span></span><br><span class="line">        			<span class="comment">//调用这句代码，会让GC尽快来工作。</span></span><br><span class="line">        Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDemo</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> value;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyDemo</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"MyDemo&#123;"</span> + <span class="string">"value="</span> + value + <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写finalize方法，让大家看一下它的调用效果</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"><span class="comment">//        正常重写，这里是编写清理系统内存的代码</span></span><br><span class="line"><span class="comment">//        这里写输出语句是为了看到finalize()方法被调用的效果</span></span><br><span class="line">        System.out.println(<span class="keyword">this</span>+ <span class="string">"轻轻的我走了，不带走一段代码...."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>static void arraycopy(Object src, int srcPos, Object dest, int destPos, int length)</code>： </p>
<p>从指定源数组中复制一个数组，复制从指定的位置开始，到目标数组的指定位置结束。常用于数组的插入和删除</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSystemArrayCopy</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr1 = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span>[] arr2 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>];</span><br><span class="line">        System.arraycopy(arr1,<span class="number">0</span>,arr2,<span class="number">3</span>,arr1.length);</span><br><span class="line">        System.out.println(Arrays.toString(arr1));</span><br><span class="line">        System.out.println(Arrays.toString(arr2));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        System.arraycopy(arr,<span class="number">0</span>,arr,<span class="number">1</span>,arr.length-<span class="number">1</span>);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;;</span><br><span class="line">        System.arraycopy(arr,<span class="number">1</span>,arr,<span class="number">0</span>,arr.length-<span class="number">1</span>);</span><br><span class="line">        System.out.println(Arrays.toString(arr));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-java-lang-Runtime类"><a href="#6-2-java-lang-Runtime类" class="headerlink" title="6.2 java.lang.Runtime类"></a>6.2 java.lang.Runtime类</h3><p>每个 Java 应用程序都有一个 <code>Runtime</code> 类实例，使应用程序能够与其运行的环境相连接。</p>
<p><code>public static Runtime getRuntime()</code>： 返回与当前 Java 应用程序相关的运行时对象。应用程序不能创建自己的 Runtime 类实例。</p>
<p><code>public long totalMemory()</code>：返回 Java 虚拟机中初始化时的内存总量。此方法返回的值可能随时间的推移而变化，这取决于主机环境。默认为物理电脑内存的1/64。</p>
<p><code>public long maxMemory()</code>：返回 Java 虚拟机中最大程度能使用的内存总量。默认为物理电脑内存的1/4。</p>
<p><code>public long freeMemory()</code>：回 Java 虚拟机中的空闲内存量。调用 gc 方法可能导致 freeMemory 返回值的增加。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestRuntime</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Runtime runtime = Runtime.getRuntime();</span><br><span class="line">        <span class="keyword">long</span> initialMemory = runtime.totalMemory(); <span class="comment">//获取虚拟机初始化时堆内存总量</span></span><br><span class="line">        <span class="keyword">long</span> maxMemory = runtime.maxMemory(); <span class="comment">//获取虚拟机最大堆内存总量</span></span><br><span class="line">        String str = <span class="string">""</span>;</span><br><span class="line">        <span class="comment">//模拟占用内存</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            str += i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">long</span> freeMemory = runtime.freeMemory(); <span class="comment">//获取空闲堆内存总量</span></span><br><span class="line">        System.out.println(<span class="string">"总内存："</span> + initialMemory / <span class="number">1024</span> / <span class="number">1024</span> * <span class="number">64</span> + <span class="string">"MB"</span>);</span><br><span class="line">        System.out.println(<span class="string">"总内存："</span> + maxMemory / <span class="number">1024</span> / <span class="number">1024</span> * <span class="number">4</span> + <span class="string">"MB"</span>);</span><br><span class="line">        System.out.println(<span class="string">"空闲内存："</span> + freeMemory / <span class="number">1024</span> / <span class="number">1024</span> + <span class="string">"MB"</span>) ;</span><br><span class="line">        System.out.println(<span class="string">"已用内存："</span> + (initialMemory-freeMemory) / <span class="number">1024</span> / <span class="number">1024</span> + <span class="string">"MB"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-和数学相关的类"><a href="#7-和数学相关的类" class="headerlink" title="7. 和数学相关的类"></a>7. 和数学相关的类</h2><h3 id="7-1-java-lang-Math"><a href="#7-1-java-lang-Math" class="headerlink" title="7.1 java.lang.Math"></a>7.1 java.lang.Math</h3><p><code>java.lang.Math</code> 类包含用于执行基本数学运算的方法，如初等指数、对数、平方根和三角函数。类似这样的工具类，其所有方法均为静态方法，并且不会创建对象，调用起来非常简单。</p>
<ul>
<li><code>public static double abs(double a)</code> ：返回 double 值的绝对值。 </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d1 = Math.abs(-<span class="number">5</span>); <span class="comment">//d1的值为5</span></span><br><span class="line"><span class="keyword">double</span> d2 = Math.abs(<span class="number">5</span>); <span class="comment">//d2的值为5</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>public static double ceil(double a)</code> ：返回大于等于参数的最小的整数。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d1 = Math.ceil(<span class="number">3.3</span>); <span class="comment">//d1的值为 4.0</span></span><br><span class="line"><span class="keyword">double</span> d2 = Math.ceil(-<span class="number">3.3</span>); <span class="comment">//d2的值为 -3.0</span></span><br><span class="line"><span class="keyword">double</span> d3 = Math.ceil(<span class="number">5.1</span>); <span class="comment">//d3的值为 6.0</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>public static double floor(double a)</code> ：返回小于等于参数最大的整数。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d1 = Math.floor(<span class="number">3.3</span>); <span class="comment">//d1的值为3.0</span></span><br><span class="line"><span class="keyword">double</span> d2 = Math.floor(-<span class="number">3.3</span>); <span class="comment">//d2的值为-4.0</span></span><br><span class="line"><span class="keyword">double</span> d3 = Math.floor(<span class="number">5.1</span>); <span class="comment">//d3的值为 5.0</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>public static long round(double a)</code> ：返回最接近参数的 long。(相当于四舍五入方法)  </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">long</span> d1 = Math.round(<span class="number">5.5</span>); <span class="comment">//d1的值为6</span></span><br><span class="line"><span class="keyword">long</span> d2 = Math.round(<span class="number">5.4</span>); <span class="comment">//d2的值为5</span></span><br><span class="line"><span class="keyword">long</span> d3 = Math.round(-<span class="number">3.3</span>); <span class="comment">//d3的值为-3</span></span><br><span class="line"><span class="keyword">long</span> d4 = Math.round(-<span class="number">3.8</span>); <span class="comment">//d4的值为-4</span></span><br></pre></td></tr></table></figure>

<ul>
<li>public static double pow(double a,double b)：返回a的b幂次方法</li>
<li>public static double sqrt(double a)：返回a的平方根</li>
<li><code>public static double random()</code>：返回[0,1)的随机值</li>
<li>public static final double PI：返回圆周率</li>
<li>public static double max(double x, double y)：返回x,y中的最大值</li>
<li>public static double min(double x, double y)：返回x,y中的最小值</li>
<li>其它：acos,asin,atan,cos,sin,tan 三角函数</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> result = Math.pow(<span class="number">2</span>,<span class="number">31</span>);</span><br><span class="line"><span class="keyword">double</span> sqrt = Math.sqrt(<span class="number">256</span>);</span><br><span class="line"><span class="keyword">double</span> rand = Math.random();</span><br><span class="line"><span class="keyword">double</span> pi = Math.PI;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-java-math包"><a href="#7-2-java-math包" class="headerlink" title="7.2 java.math包"></a>7.2 java.math包</h3><h4 id="7-2-1-BigInteger"><a href="#7-2-1-BigInteger" class="headerlink" title="7.2.1 BigInteger"></a>7.2.1 BigInteger</h4><ul>
<li>Integer类作为int的包装类，能存储的最大整型值为2^31-1，Long类也是有限的，最大为2^63-1。如果要表示再大的整数，不管是基本数据类型还是他们的包装类都无能为力，更不用说进行运算了。</li>
</ul>
<ul>
<li>java.math包的BigInteger可以表示<code>不可变的任意精度的整数</code>。BigInteger 提供所有 Java 的基本整数操作符的对应物，并提供 java.lang.Math 的所有相关方法。另外，BigInteger 还提供以下运算：模算术、GCD 计算、质数测试、素数生成、位操作以及一些其他操作。 </li>
</ul>
<ul>
<li><p>构造器</p>
<ul>
<li>BigInteger(String val)：根据字符串构建BigInteger对象</li>
</ul>
</li>
<li><p>方法</p>
<ul>
<li>public BigInteger <code>abs</code>()：返回此 BigInteger 的绝对值的 BigInteger。</li>
<li>BigInteger <code>add</code>(BigInteger val) ：返回其值为 (this + val) 的 BigInteger</li>
<li>BigInteger <code>subtract</code>(BigInteger val) ：返回其值为 (this - val) 的 BigInteger</li>
<li>BigInteger <code>multiply</code>(BigInteger val) ：返回其值为 (this * val) 的 BigInteger</li>
<li>BigInteger <code>divide</code>(BigInteger val) ：返回其值为 (this / val) 的 BigInteger。整数相除只保留整数部分。</li>
<li>BigInteger <code>remainder</code>(BigInteger val) ：返回其值为 (this % val) 的 BigInteger。</li>
<li>BigInteger[] <code>divideAndRemainder</code>(BigInteger val)：返回包含 (this / val) 后跟 (this % val) 的两个 BigInteger 的数组。</li>
<li>BigInteger <code>pow</code>(int exponent) ：返回其值为 (this^exponent) 的 BigInteger。 </li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigInteger;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BigIntegerTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BigInteger big1=<span class="keyword">new</span> BigInteger(<span class="string">"-112314124"</span>);</span><br><span class="line">        BigInteger big2=<span class="keyword">new</span> BigInteger(<span class="string">"1112414"</span>);</span><br><span class="line">        <span class="comment">//1.abs() BigInteger对象取绝对值</span></span><br><span class="line">        System.out.println(big1.abs());  <span class="comment">//112314124</span></span><br><span class="line">        <span class="comment">//2.add(big2) 两个BigInteger对象相加</span></span><br><span class="line">        System.out.println(big1.add(big2));  <span class="comment">//-111201710</span></span><br><span class="line">        <span class="comment">//3.subtract(big2) 两个BigInteger对象相减</span></span><br><span class="line">        System.out.println(big1.subtract(big2)); <span class="comment">//-11342653</span></span><br><span class="line">        <span class="comment">//4.multiply(big2) 两个BigInteger对象相乘</span></span><br><span class="line">        System.out.println(big1.multiply(big2)); <span class="comment">//-124939803935336</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.divide(big2) 两个BigInteger对象相除 [只保留整数部分]</span></span><br><span class="line">        System.out.println(big1.divide(big2)); <span class="comment">//-100</span></span><br><span class="line">        <span class="comment">//6.remainder(big2) 两个BigInteger对象相除 [取余数]</span></span><br><span class="line">        System.out.println(big1.remainder(big2)); <span class="comment">//-1072724</span></span><br><span class="line">        <span class="comment">//7.divideAndremainder(big2) 两个BigInteger对象相除 将5和6方法的结果放在数组</span></span><br><span class="line">        BigInteger[] arr=big1.divideAndRemainder(big2);</span><br><span class="line">        System.out.println(arr[<span class="number">0</span>]); <span class="comment">//-100</span></span><br><span class="line">        System.out.println(arr[<span class="number">1</span>]);  <span class="comment">//-1072724</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//8.pow(x) 将BigInteger对象^X</span></span><br><span class="line">        System.out.println(big1.pow(<span class="number">2</span>)); <span class="comment">//12614462449887376</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line"><span class="number">112314124</span></span><br><span class="line">-<span class="number">111201710</span></span><br><span class="line">-<span class="number">113426538</span></span><br><span class="line">-<span class="number">124939803935336</span></span><br><span class="line">-<span class="number">100</span></span><br><span class="line">-<span class="number">1072724</span></span><br><span class="line">-<span class="number">100</span></span><br><span class="line">-<span class="number">1072724</span></span><br><span class="line"><span class="number">12614462449887376</span></span><br></pre></td></tr></table></figure>

<h4 id="7-2-2-BigDecimal"><a href="#7-2-2-BigDecimal" class="headerlink" title="7.2.2 BigDecimal"></a>7.2.2 BigDecimal</h4><ul>
<li><p>一般的Float类和Double类可以用来做科学计算或工程计算，但在<strong>商业计算中，要求数字精度比较高，故用到java.math.BigDecimal类。</strong></p>
</li>
<li><p>BigDecimal类支持不可变的、任意精度的有符号十进制定点数。</p>
</li>
<li><p>构造器</p>
<ul>
<li>public BigDecimal(double val)</li>
<li>public BigDecimal(String val) –&gt; 推荐</li>
</ul>
</li>
<li><p>常用方法</p>
<ul>
<li>public BigDecimal <code>add</code>(BigDecimal augend)</li>
<li>public BigDecimal <code>subtract</code>(BigDecimal subtrahend)</li>
<li>public BigDecimal <code>multiply</code>(BigDecimal multiplicand)</li>
<li>public BigDecimal <code>divide</code>(BigDecimal divisor, int scale, int roundingMode)：divisor是除数，scale指明保留几位小数，roundingMode指明舍入模式（ROUND_UP :向上加1、ROUND_DOWN :直接舍去、ROUND_HALF_UP:四舍五入）</li>
</ul>
</li>
</ul>
<ul>
<li>举例</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BigDecimalTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BigDecimal big1=<span class="keyword">new</span> BigDecimal(<span class="string">"123132"</span>);</span><br><span class="line">        BigDecimal big2=<span class="keyword">new</span> BigDecimal(<span class="string">"100"</span>);</span><br><span class="line">        <span class="comment">//1.add(big2) 两个BigDecimal类对象相加</span></span><br><span class="line">        System.out.println(big1.add(big2));  <span class="comment">//123232</span></span><br><span class="line">        <span class="comment">//2.subtract(big2) 两个BigDecimal类对象相加</span></span><br><span class="line">        System.out.println(big1.subtract(big2));  <span class="comment">//123032</span></span><br><span class="line">        <span class="comment">//3.multiply(big2) 两个BigDecimal类对象相乘</span></span><br><span class="line">        System.out.println(big1.multiply(big2));  <span class="comment">//12313200</span></span><br><span class="line">        <span class="comment">//4.divide(big2,3,ROUND_UP) 两个BigDecimal类对象相乘，结果保留3位，四舍五入的模式设定为向上加1</span></span><br><span class="line">        System.out.println(big1.divide(big2,<span class="number">3</span>,BigDecimal.ROUND_UP));  <span class="comment">//1231.320</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-java-util-Random"><a href="#7-3-java-util-Random" class="headerlink" title="7.3 java.util.Random"></a>7.3 java.util.Random</h3><p>用于产生随机数</p>
<ul>
<li><p><code>boolean nextBoolean()</code>:返回下一个伪随机数，它是取自此随机数生成器序列的均匀分布的 boolean 值。 </p>
</li>
<li><p><code>void nextBytes(byte[] bytes)</code>:生成随机字节并将其置于用户提供的 byte 数组中。 </p>
</li>
<li><p><code>double nextDouble()</code>:返回下一个伪随机数，它是取自此随机数生成器序列的、在 0.0 和 1.0 之间均匀分布的 double 值。 </p>
</li>
<li><p><code>float nextFloat()</code>:返回下一个伪随机数，它是取自此随机数生成器序列的、在 0.0 和 1.0 之间均匀分布的 float 值。 </p>
</li>
<li><p><code>double nextGaussian()</code>:返回下一个伪随机数，它是取自此随机数生成器序列的、呈高斯（“正态”）分布的 double 值，其平均值是 0.0，标准差是 1.0。 </p>
</li>
<li><p><code>int nextInt()</code>:返回下一个伪随机数，它是此随机数生成器的序列中均匀分布的 int 值。 </p>
</li>
<li><p><code>int nextInt(int n)</code>:返回一个伪随机数，它是取自此随机数生成器序列的、在 0（包括）和指定值（不包括）之间均匀分布的 int 值。 </p>
</li>
<li><p><code>long nextLong()</code>:返回下一个伪随机数，它是取自此随机数生成器序列的均匀分布的 long 值。 </p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Random r=<span class="keyword">new</span> Random();</span><br><span class="line">        System.out.println(<span class="string">"随机整数："</span> + r.nextInt());</span><br><span class="line">        System.out.println(<span class="string">"随机小数："</span> + r.nextDouble());</span><br><span class="line">        System.out.println(<span class="string">"随机布尔值："</span> + r.nextBoolean());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">随机整数：-<span class="number">270071674</span></span><br><span class="line">随机小数：<span class="number">0.195118491954403</span></span><br><span class="line">随机布尔值：<span class="keyword">true</span></span><br></pre></td></tr></table></figure>




      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JAVA-异常处理" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/20/JAVA-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" class="article-date">
      <time datetime="2023-10-20T06:31:27.000Z" itemprop="datePublished">2023-10-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/20/JAVA-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/">JAVA-异常处理</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="第09章-异常处理"><a href="#第09章-异常处理" class="headerlink" title="第09章_异常处理"></a>第09章_异常处理</h1><hr>
<h2 id="本章专题与脉络"><a href="#本章专题与脉络" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145299.png" alt="第3阶段：Java高级应用-第09章" style="zoom: 50%;">

<h2 id="1-异常概述"><a href="#1-异常概述" class="headerlink" title="1. 异常概述"></a>1. 异常概述</h2><h3 id="1-1-什么是生活的异常"><a href="#1-1-什么是生活的异常" class="headerlink" title="1.1 什么是生活的异常"></a>1.1 什么是生活的异常</h3><p>男主角小明每天开车上班，正常车程1小时。但是，不出意外的话，可能会出现意外。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145306.png" alt="image-20220814203918560"></p>
<p>出现意外，即为异常情况。我们会做相应的处理。如果不处理，到不了公司。处理完了，就可以正常开车去公司。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145047.png" alt="image-20220520210320301" style="zoom:70%;">

<h3 id="1-2-什么是程序的异常"><a href="#1-2-什么是程序的异常" class="headerlink" title="1.2 什么是程序的异常"></a>1.2 什么是程序的异常</h3><p>在使用计算机语言进行项目开发的过程中，即使程序员把代码写得<code>尽善尽美</code>，在系统的运行过程中仍然会遇到一些问题，因为很多问题不是靠代码能够避免的，比如：<code>客户输入数据的格式问题</code>，<code>读取文件是否存在</code>，<code>网络是否始终保持通畅</code>等等。</p>
<ul>
<li><strong>异常</strong> ：指的是程序在执行过程中，出现的非正常情况，如果不处理最终会导致JVM的非正常停止。</li>
</ul>
<blockquote>
<p>异常指的并不是语法错误和逻辑错误。<br>1.1 语法错误，编译不通过，不会产生字节码文件，根本不能运行。</p>
<p>1.2 代码逻辑错误，只是没有得到想要的结果，例如：求a与b的和，你写成了a-b</p>
</blockquote>
<h3 id="1-3-异常的抛出机制"><a href="#1-3-异常的抛出机制" class="headerlink" title="1.3 异常的抛出机制"></a>1.3 异常的抛出机制</h3><p>Java中是如何表示不同的异常情况，又是如何让程序员得知，并处理异常的呢？</p>
<p>Java中把不同的异常用不同的类表示<strong>，一旦发生某种异常，就<code>创建该异常类型的对象</code>，并且抛出（throw）</strong>。</p>
<p>1.1 然后程序员可以捕获(catch)到这个异常对象，并处理；<br>1.2 如果没有捕获(catch)这个异常对象，那么这个异常对象将会导致程序终止。</p>
<p>举例：</p>
<p>运行下面的程序，程序会产生一个数组角标越界异常<code>ArrayIndexOfBoundsException</code>。我们通过图解来解析下异常产生和抛出的过程。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayTools</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 对给定的数组通过给定的角标获取元素。</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getElement</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> index)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> element = arr[index];</span><br><span class="line">        <span class="keyword">return</span> element;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123; <span class="number">34</span>, <span class="number">12</span>, <span class="number">67</span> &#125;;</span><br><span class="line">        intnum = ArrayTools.getElement(arr, <span class="number">4</span>)</span><br><span class="line">        System.out.println(<span class="string">"num="</span> + num);</span><br><span class="line">        System.out.println(<span class="string">"over"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述程序执行过程图解：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145800.png" alt></p>
<h3 id="1-4-如何对待异常"><a href="#1-4-如何对待异常" class="headerlink" title="1.4 如何对待异常"></a>1.4 如何对待异常</h3><p> 对于程序出现的异常，一般有两种解决方法：一是遇到错误就终止程序的运行。另一种方法是程序员在编写程序时，就充分考虑到各种可能发生的异常和错误，极力预防和避免。实在无法避免的，要编写相应的代码进行异常的检测、以及<code>异常的处理</code>，保证代码的<code>健壮性</code>。</p>
<h2 id="2-Java异常体系"><a href="#2-Java异常体系" class="headerlink" title="2. Java异常体系"></a>2. Java异常体系</h2><h3 id="2-1-Throwable"><a href="#2-1-Throwable" class="headerlink" title="2.1 Throwable"></a>2.1 Throwable</h3><p><code>java.lang.Throwable</code> 类是Java程序执行过程中发生的异常事件对应的类的根父类。</p>
<p><strong>Throwable中的常用方法：</strong></p>
<ul>
<li><p><code>public void printStackTrace()</code>：打印异常的详细信息。</p>
<p>包含了异常的类型、异常的原因、异常出现的位置、在开发和调试阶段都得使用printStackTrace。</p>
</li>
<li><p><code>public String getMessage()</code>：获取发生异常的原因。</p>
</li>
</ul>
<h3 id="2-2-Error-和-Exception"><a href="#2-2-Error-和-Exception" class="headerlink" title="2.2 Error 和 Exception"></a>2.2 Error 和 Exception</h3><p>Throwable可分为两类：Error和Exception。分别对应着<code>java.lang.Error</code>与<code>java.lang.Exception</code>两个类。</p>
<p><strong>Error：</strong>Java虚拟机无法解决的严重问题。如：JVM系统内部错误、资源耗尽等严重情况。一般不编写针对性的代码进行处理。</p>
<ul>
<li>例如：StackOverflowError（栈内存溢出）和OutOfMemoryError（堆内存溢出，简称OOM）。</li>
</ul>
<p><strong>Exception:</strong> 其它因编程错误或偶然的外在因素导致的一般性问题，需要使用针对性的代码进行处理，使程序继续运行。否则一旦发生异常，程序也会挂掉。例如：</p>
<ul>
<li>空指针访问</li>
<li>试图读取不存在的文件</li>
<li>网络连接中断</li>
<li>数组角标越界</li>
</ul>
<blockquote>
<p>说明：</p>
<ol>
<li>无论是Error还是Exception，还有很多子类，异常的类型非常丰富。当代码运行出现异常时，特别是我们不熟悉的异常时，不要紧张，把异常的简单类名，拷贝到API中去查去认识它即可。</li>
<li>我们本章讲的异常处理，其实针对的就是Exception。</li>
</ol>
</blockquote>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145981.png" alt="image-20220511161910951" style="zoom:67%;">

<h3 id="2-3-编译时异常和运行时异常"><a href="#2-3-编译时异常和运行时异常" class="headerlink" title="2.3 编译时异常和运行时异常"></a>2.3 编译时异常和运行时异常</h3><p>Java程序的执行分为编译时过程和运行时过程。有的错误只有在<code>运行时</code>才会发生。比如：除数为0，数组下标越界等。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145046.png" alt="image-20220330002449526" style="zoom:80%;">

<p>因此，根据异常可能出现的阶段，可以将异常分为：</p>
<ul>
<li><strong>编译时期异常</strong>（即checked异常、受检异常）：在代码编译阶段，编译器就能明确<code>警示</code>当前代码<code>可能发生（不是一定发生）</code>xx异常，并<code>明确督促</code>程序员提前编写处理它的代码。如果程序员<code>没有编写</code>对应的异常处理代码，则编译器就会直接判定编译失败，从而不能生成字节码文件。通常，这类异常的发生不是由程序员的代码引起的，或者不是靠加简单判断就可以避免的，例如：FileNotFoundException（文件找不到异常）。</li>
<li><strong>运行时期异常</strong>（即runtime异常、unchecked异常、非受检异常）：在代码编译阶段，编译器完全不做任何检查，无论该异常是否会发生，编译器都不给出任何提示。只有等代码运行起来并确实发生了xx异常，它才能被发现。通常，这类异常是由程序员的代码编写不当引起的，只要稍加判断，或者细心检查就可以避免。<ul>
<li><strong>java.lang.RuntimeException</strong>类及它的子类都是运行时异常。比如：ArrayIndexOutOfBoundsException数组下标越界异常，ClassCastException类型转换异常。</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145864.png" alt="1562771528807"></p>
<h2 id="3-常见的错误和异常"><a href="#3-常见的错误和异常" class="headerlink" title="3. 常见的错误和异常"></a>3. 常见的错误和异常</h2><h3 id="3-1-Error"><a href="#3-1-Error" class="headerlink" title="3.1 Error"></a>3.1 Error</h3><p>最常见的就是VirtualMachineError，它有两个经典的子类：StackOverflowError、OutOfMemoryError。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStackOverflowError</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//StackOverflowError</span></span><br><span class="line">        recursion();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">recursion</span><span class="params">()</span></span>&#123; <span class="comment">//递归方法</span></span><br><span class="line">        recursion(); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOutOfMemoryError</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//OutOfMemoryError</span></span><br><span class="line">        <span class="comment">//方式一：</span></span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[Integer.MAX_VALUE];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//OutOfMemoryError</span></span><br><span class="line">        <span class="comment">//方式二：</span></span><br><span class="line">        StringBuilder s = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            s.append(<span class="string">"atguigu"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-运行时异常"><a href="#3-2-运行时异常" class="headerlink" title="3.2 运行时异常"></a>3.2 运行时异常</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestRuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//NullPointerException</span></span><br><span class="line">        <span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][];</span><br><span class="line">        System.out.println(arr[<span class="number">0</span>].length);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//ClassCastException</span></span><br><span class="line">        Object obj = <span class="number">15</span>;</span><br><span class="line">        String str = (String) obj;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//ArrayIndexOutOfBoundsException</span></span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test04</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//InputMismatchException</span></span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.print(<span class="string">"请输入一个整数："</span>);<span class="comment">//输入非整数</span></span><br><span class="line">        <span class="keyword">int</span> num = input.nextInt();</span><br><span class="line">        input.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test05</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//ArithmeticException</span></span><br><span class="line">        System.out.println(a/b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-编译时异常"><a href="#3-3-编译时异常" class="headerlink" title="3.3 编译时异常"></a>3.3 编译时异常</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.exception;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCheckedException</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test06</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);<span class="comment">//休眠1秒  InterruptedException</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test07</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Class c = Class.forName(<span class="string">"java.lang.String"</span>);<span class="comment">//ClassNotFoundException</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test08</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Connection conn = DriverManager.getConnection(<span class="string">"...."</span>);  <span class="comment">//SQLException</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test09</span><span class="params">()</span>  </span>&#123;</span><br><span class="line">        FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"尚硅谷Java秘籍.txt"</span>); <span class="comment">//FileNotFoundException</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test10</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        File file = <span class="keyword">new</span> File(<span class="string">"尚硅谷Java秘籍.txt"</span>);</span><br><span class="line">		FileInputStream fis = <span class="keyword">new</span> FileInputStream(file);<span class="comment">//FileNotFoundException</span></span><br><span class="line">		<span class="keyword">int</span> b = fis.read();<span class="comment">//IOException</span></span><br><span class="line">		<span class="keyword">while</span>(b != -<span class="number">1</span>)&#123;</span><br><span class="line">			System.out.print((<span class="keyword">char</span>)b);</span><br><span class="line">			b = fis.read();<span class="comment">//IOException</span></span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		fis.close();<span class="comment">//IOException</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-异常的处理"><a href="#4-异常的处理" class="headerlink" title="4. 异常的处理"></a>4. 异常的处理</h2><h3 id="4-1-异常处理概述"><a href="#4-1-异常处理概述" class="headerlink" title="4.1 异常处理概述"></a>4.1 异常处理概述</h3><p>在编写程序时，经常要在可能出现错误的地方加上检测的代码，如进行x/y运算时，要<code>检测分母为0</code>，<code>数据为空</code>，<code>输入的不是数据而是字符</code>等。过多的if-else分支会导致程序的<code>代码加长</code>、<code>臃肿</code>，<code>可读性差</code>，程序员需要花很大的精力“<code>堵漏洞</code>”。因此采用异常处理机制。</p>
<p><strong>Java异常处理</strong></p>
<p>Java采用的异常处理机制，是<code>将异常处理的程序代码集中在一起</code>，与正常的程序代码分开，使得程序简洁、优雅，并易于维护。</p>
<p><strong>Java异常处理的方式：</strong></p>
<p>方式一：try-catch-finally</p>
<p>方式二：throws + 异常类型</p>
<h3 id="4-2-方式1：捕获异常（try-catch-finally）"><a href="#4-2-方式1：捕获异常（try-catch-finally）" class="headerlink" title="4.2 方式1：捕获异常（try-catch-finally）"></a>4.2 方式1：捕获异常（try-catch-finally）</h3><p>Java提供了异常处理的<strong>抓抛模型</strong>。</p>
<ul>
<li>前面提到，Java程序的执行过程中如出现异常，会生成一个异常类对象，该异常对象将被提交给Java运行时系统，这个过程称为<code>抛出(throw)异常</code>。</li>
<li>如果一个方法内抛出异常，该异常对象会被抛给调用者方法中处理。如果异常没有在调用者方法中处理，它继续被抛给这个调用方法的上层方法。这个过程将一直继续下去，直到异常被处理。这一过程称为<code>捕获(catch)异常</code>。</li>
<li>如果一个异常回到main()方法，并且main()也不处理，则程序运行终止。</li>
</ul>
<h4 id="4-2-1-try-catch-finally基本格式"><a href="#4-2-1-try-catch-finally基本格式" class="headerlink" title="4.2.1 try-catch-finally基本格式"></a>4.2.1 try-catch-finally基本格式</h4><p>捕获异常语法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">	......	<span class="comment">//可能产生异常的代码</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>( 异常类型<span class="number">1</span> e )&#123;</span><br><span class="line">	......	<span class="comment">//当产生异常类型1型异常时的处置措施</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span>( 异常类型<span class="number">2</span> e )&#123;</span><br><span class="line">	...... 	<span class="comment">//当产生异常类型2型异常时的处置措施</span></span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">finally</span>&#123;</span><br><span class="line">	...... <span class="comment">//无论是否发生异常，都无条件执行的语句</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>1、整体执行过程：</strong></p>
<p>当某段代码可能发生异常，不管这个异常是编译时异常（受检异常）还是运行时异常（非受检异常），我们都可以使用try块将它括起来，并在try块下面编写catch分支尝试捕获对应的异常对象。</p>
<ul>
<li>如果在程序运行时，try块中的代码没有发生异常，那么catch所有的分支都不执行。</li>
<li>如果在程序运行时，try块中的代码发生了异常，根据异常对象的类型，将从上到下选择第一个匹配的catch分支执行。此时try中发生异常的语句下面的代码将不执行，而整个try…catch之后的代码可以继续运行。</li>
<li>如果在程序运行时，try块中的代码发生了异常，但是所有catch分支都无法匹配（捕获）这个异常，那么JVM将会终止当前方法的执行，并把异常对象“抛”给调用者。如果调用者不处理，程序就挂了。</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145413.png" alt="image-20220503122722605" style="zoom:67%;">

<p><strong>2、try</strong></p>
<ul>
<li>捕获异常的第一步是用<code>try{…}语句块</code>选定捕获异常的范围，将可能出现异常的业务逻辑代码放在try语句块中。</li>
</ul>
<p><strong>3、catch (Exceptiontype e)</strong></p>
<ul>
<li><p>catch分支，分为两个部分，catch()中编写异常类型和异常参数名，{}中编写如果发生了这个异常，要做什么处理的代码。</p>
</li>
<li><p>如果明确知道产生的是何种异常，可以用该异常类作为catch的参数；也可以用其父类作为catch的参数。</p>
<p>比如：可以用ArithmeticException类作为参数的地方，就可以用RuntimeException类作为参数，或者用所有异常的父类Exception类作为参数。但不能是与ArithmeticException类无关的异常，如NullPointerException（catch中的语句将不会执行）。</p>
</li>
<li><p>每个try语句块可以伴随一个或多个catch语句，用于处理可能产生的不同类型的异常对象。</p>
</li>
<li><p>如果有多个catch分支，并且多个异常类型有父子类关系，必须保证小的子异常类型在上，大的父异常类型在下。否则，报错。</p>
</li>
<li><p>catch中常用异常处理的方式</p>
<ul>
<li><p><code>public String getMessage()</code>：获取异常的描述信息，返回字符串</p>
</li>
<li><p><code>public void printStackTrace()</code>：打印异常的跟踪栈信息并输出到控制台。包含了异常的类型、异常的原因、还包括异常出现的位置，在开发和调试阶段，都得使用printStackTrace()。</p>
</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145052.png" alt="image-20220331180736381" style="zoom:80%;">

</li>
</ul>
<h4 id="4-2-2-使用举例"><a href="#4-2-2-使用举例" class="headerlink" title="4.2.2 使用举例"></a>4.2.2 使用举例</h4><p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexOutExp</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        String friends[] = &#123;<span class="string">"lisa"</span>, <span class="string">"bily"</span>, <span class="string">"kessy"</span>&#125;;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;  <span class="comment">// i只能从0-2</span></span><br><span class="line">                System.out.println(friends[i]);  <span class="comment">// 可能出现数组下标</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArrayIndexOutOfBoundsException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"index err"</span>);   <span class="comment">//前面三个正常输出 第四个就会被异常catch捕捉</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"\nthis is the end"</span>);  <span class="comment">//记得前面有一个换行符</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">lisa</span><br><span class="line">bily</span><br><span class="line">kessy</span><br><span class="line">index err</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span> is the end</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DivideZero1</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x;  <span class="comment">//全局变量x</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> y;  <span class="comment">//局部变量y</span></span><br><span class="line">        DivideZero1 c = <span class="keyword">new</span> DivideZero1();  <span class="comment">//创建类的对象</span></span><br><span class="line">        System.out.println(<span class="string">"当前对象的属性x值为:"</span>+c.x);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            y = <span class="number">3</span> / c.x;  <span class="comment">//会出现下标异常</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"divide by zero error!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"program ends ok!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">当前对象的属性x值为:<span class="number">0</span></span><br><span class="line">divide by zero error!</span><br><span class="line">program ends ok!</span><br></pre></td></tr></table></figure>

<p>举例3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		String str1 = <span class="string">"atguigu.com"</span>;</span><br><span class="line">		str1 = <span class="keyword">null</span>;</span><br><span class="line">		System.out.println(str1.charAt(<span class="number">0</span>));</span><br><span class="line">	&#125;<span class="keyword">catch</span>(NullPointerException e)&#123;</span><br><span class="line">		<span class="comment">//异常的处理方式1</span></span><br><span class="line">		System.out.println(<span class="string">"不好意思，亲~出现了小问题，正在加紧解决..."</span>);	</span><br><span class="line">	&#125;<span class="keyword">catch</span>(ClassCastException e)&#123;</span><br><span class="line">		<span class="comment">//异常的处理方式2</span></span><br><span class="line">		System.out.println(<span class="string">"出现了类型转换的异常"</span>);</span><br><span class="line">	&#125;<span class="keyword">catch</span>(RuntimeException e)&#123;</span><br><span class="line">		<span class="comment">//异常的处理方式3</span></span><br><span class="line">		System.out.println(<span class="string">"出现了运行时异常"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//此处的代码，在异常被处理了以后，是可以正常执行的</span></span><br><span class="line">	System.out.println(<span class="string">"hello"</span>);</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">不好意思，亲~出现了小问题，正在加紧解决...</span><br><span class="line">hello</span><br></pre></td></tr></table></figure>

<h4 id="4-2-3-finally使用及举例"><a href="#4-2-3-finally使用及举例" class="headerlink" title="4.2.3 finally使用及举例"></a>4.2.3 finally使用及举例</h4><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212145506.png" alt="image-20220331215517077" style="zoom: 80%;">

<ul>
<li><p>因为异常会引发程序跳转，从而会导致有些语句执行不到。而程序中有一些特定的代码无论异常是否发生，都<code>需要执行</code>。例如，数据库连接、输入流输出流、Socket连接、Lock锁的关闭等，这样的代码通常就会放到finally块中。所以，我们通常将一定要被执行的代码声明在finally中。</p>
<ul>
<li>唯一的例外，使用 System.exit(0) 来终止当前正在运行的 Java 虚拟机。</li>
</ul>
</li>
<li><p>不论在try代码块中是否发生了异常事件，catch语句是否执行，catch语句是否有异常，catch语句中是否有return，finally块中的语句都会被执行。</p>
</li>
<li><p>finally语句和catch语句是可选的，但finally不能单独使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">     </span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>举例1：确保资源关闭</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.InputMismatchException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFinally</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.print(<span class="string">"请输入第一个整数："</span>);</span><br><span class="line">            <span class="keyword">int</span> a = input.nextInt();</span><br><span class="line">            System.out.print(<span class="string">"请输入第二个整数："</span>);</span><br><span class="line">            <span class="keyword">int</span> b = input.nextInt();</span><br><span class="line">            <span class="keyword">int</span> result = a/b;</span><br><span class="line">            System.out.println(a + <span class="string">"/"</span> + b +<span class="string">"="</span> + result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InputMismatchException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">"数字格式不正确，请输入两个整数"</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (ArithmeticException e)&#123;</span><br><span class="line">            System.out.println(<span class="string">"第二个整数不能为0"</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"程序结束，释放资源"</span>);  <span class="comment">//一定会输出</span></span><br><span class="line">            input.close(); <span class="comment">//输入流的关闭语句一定要写在finally语句</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出：</span><br><span class="line">请输入第一个整数：<span class="number">2</span></span><br><span class="line">请输入第二个整数：<span class="number">0</span></span><br><span class="line">第二个整数不能为<span class="number">0</span></span><br><span class="line">程序结束，释放资源</span><br></pre></td></tr></table></figure>

<p>举例2：从try回来</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinallyTest1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = test(<span class="string">"12"</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            Integer.parseInt(str); <span class="comment">//字符串转为int包装类</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(NumberFormatException e)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"test结束"</span>);  <span class="comment">//一定会执行</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最后输出:</span><br><span class="line">test结束</span><br><span class="line"><span class="number">1</span>   <span class="comment">//这个1是try里面返回的</span></span><br></pre></td></tr></table></figure>

<p>举例3：从catch回来</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinallyTest2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = test(<span class="string">"a"</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Integer.parseInt(str);     <span class="comment">//字符串转为int包装类</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;  <span class="comment">//有异常进入catch</span></span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123; </span><br><span class="line">            System.out.println(<span class="string">"test结束"</span>);  <span class="comment">//一定会执行</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">test结束</span><br><span class="line">-<span class="number">1</span>   <span class="comment">//这个-1是catch里面返回的</span></span><br></pre></td></tr></table></figure>

<p>举例4：从finally回来</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinallyTest3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = test(<span class="string">"a"</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Integer.parseInt(str);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"test结束"</span>);    <span class="comment">//一定会执行</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">//直接从finally输出0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">test结束</span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure>

<p>笔试题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExceptionTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = test();</span><br><span class="line">        System.out.println(result); <span class="comment">//102</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">100</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> i;  <span class="comment">//i只能在try里面有效</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            i++;   <span class="comment">//没有修改try里面的局部变量i的值</span></span><br><span class="line">            <span class="keyword">return</span> ++i; <span class="comment">//这时候返回的是102</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line"><span class="number">102</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>笔试题：final、finally、finalize有什么区别？</p>
</blockquote>
<h4 id="4-2-4-练习"><a href="#4-2-4-练习" class="headerlink" title="4.2.4 练习"></a>4.2.4 练习</h4><p>编写一个类ExceptionTest，在main方法中使用try、catch、finally，要求：</p>
<ul>
<li><p>在try块中，编写被零除的代码。</p>
</li>
<li><p>在catch块中，捕获被零除所产生的异常，并且打印异常信息</p>
</li>
<li><p>在finally块中，打印一条语句。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class ExceptionTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            int a&#x3D;1;</span><br><span class="line">            int b&#x3D;0;</span><br><span class="line">            System.out.println(a&#x2F;b);</span><br><span class="line">        &#125;</span><br><span class="line">        catch (ArithmeticException e)&#123;</span><br><span class="line">            System.out.println(&quot;不能被整除0&quot;);</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        finally &#123;</span><br><span class="line">            System.out.println(&quot;finally语句&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146146.png" alt="image-20231016141559508"></p>
</li>
</ul>
<h4 id="4-2-5-异常处理的体会"><a href="#4-2-5-异常处理的体会" class="headerlink" title="4.2.5 异常处理的体会"></a>4.2.5 异常处理的体会</h4><ul>
<li><p>前面使用的异常都是<code>RuntimeException类</code>/它的<code>子类</code>，这些类异常的特点是：即使没有使用try和catch捕获，Java自己也能捕获，并且编译通过 ( 但运行时会发生异常使得程序运行终止 )。所以，对于这类异常，可以<strong>不作处理</strong>，因为这类异常很普遍，若全处理可能会对程序的可读性和运行效率产生影响。</p>
</li>
<li><p>如果抛出的异常是IOException等类型的<code>非运行时异常</code>，则必须捕获，否则<code>编译错误</code>。也就是说，我们<strong>必须处理编译时异常</strong>，将异常进行捕捉，转化为运行时异常。</p>
</li>
</ul>
<h3 id="4-3-方式2：声明抛出异常类型（throws）"><a href="#4-3-方式2：声明抛出异常类型（throws）" class="headerlink" title="4.3 方式2：声明抛出异常类型（throws）"></a>4.3 方式2：声明抛出异常类型（throws）</h3><ul>
<li><p>如果在编写方法体的代码时，某句代码可能发生某个<strong>编译时异常</strong>，不处理编译不通过，但是在当前方法体中可能<code>不适合处理</code>或<code>无法给出合理的处理方式</code>，则此方法应<code>显示地</code>声明抛出异常，表明该方法将不对这些异常进行处理，而由该方法的调用者负责处理。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146749.png" alt="image-20220331112000671" style="zoom:67%;">
</li>
<li><p>具体方式：在方法声明中用<code>throws语句</code>可以声明抛出异常的列表，throws后面的异常类型可以是方法中产生的异常类型，也可以是它的父类。</p>
</li>
</ul>
<h4 id="4-3-1-throws基本格式"><a href="#4-3-1-throws基本格式" class="headerlink" title="4.3.1 throws基本格式"></a>4.3.1 throws基本格式</h4><p><strong>声明异常格式：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">修饰符 返回值类型 方法名(参数) throws 异常类名1,异常类名2…&#123;   &#125;</span><br></pre></td></tr></table></figure>

<p>在throws后面可以写多个异常类型，用逗号隔开。</p>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">readFile</span><span class="params">(String file)</span>  <span class="keyword">throws</span> FileNotFoundException,IOException </span>&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="comment">// 读文件的操作可能产生FileNotFoundException或IOException类型的异常</span></span><br><span class="line">	FileInputStream fis = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-3-2-throws-使用举例"><a href="#4-3-2-throws-使用举例" class="headerlink" title="4.3.2 throws 使用举例"></a>4.3.2 throws 使用举例</h4><p><strong>举例：针对于编译时异常</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThrowsCheckedException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"上课....."</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            afterClass();<span class="comment">//换到这里处理异常</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">"准备提前上课"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"上课....."</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">afterClass</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">10</span>; i&gt;=<span class="number">1</span>; i--)&#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);<span class="comment">//本来应该在这里处理异常</span></span><br><span class="line">            System.out.println(<span class="string">"距离上课还有："</span> + i + <span class="string">"分钟"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>举例：针对于运行时异常：</strong></p>
<p>throws后面也可以写运行时异常类型，只是运行时异常类型，写或不写对于编译器和程序执行来说都没有任何区别。如果写了，唯一的区别就是调用者调用该方法后，使用try…catch结构时，IDEA可以获得更多的信息，需要添加哪种catch分支。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.InputMismatchException;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThrowsRuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.print(<span class="string">"请输入第一个整数："</span>);</span><br><span class="line">            <span class="keyword">int</span> a = input.nextInt();</span><br><span class="line">            System.out.print(<span class="string">"请输入第二个整数："</span>);</span><br><span class="line">            <span class="keyword">int</span> b = input.nextInt();</span><br><span class="line">            <span class="keyword">int</span> result = divide(a,b);</span><br><span class="line">            System.out.println(a + <span class="string">"/"</span> + b +<span class="string">"="</span> + result);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ArithmeticException | InputMismatchException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            input.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">divide</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span><span class="keyword">throws</span> ArithmeticException</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a/b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-3-3-方法重写中throws的要求"><a href="#4-3-3-方法重写中throws的要求" class="headerlink" title="4.3.3 方法重写中throws的要求"></a>4.3.3 方法重写中throws的要求</h4><p>方法重写时，对于方法签名是有严格要求的。复习：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">（1）方法名必须相同</span><br><span class="line">（2）形参列表必须相同</span><br><span class="line">（3）返回值类型</span><br><span class="line">	- 基本数据类型和void：必须相同</span><br><span class="line">	- 引用数据类型：&lt;&#x3D;</span><br><span class="line">（4）权限修饰符：&gt;&#x3D;，而且要求父类被重写方法在子类中是可见的</span><br><span class="line">（5）不能是static，final修饰的方法</span><br></pre></td></tr></table></figure>

<p>此外，对于throws异常列表要求：</p>
<p>​    <strong>1.编译时异常:</strong></p>
<ul>
<li><p>如果父类被重写方法的方法签名后面没有 “throws  编译时异常类型”，那么重写方法时，方法签名后面也不能出现“throws  编译时异常类型”。</p>
</li>
<li><p>如果父类被重写方法的方法签名后面有 “<code>throws  编译时异常类型</code>”，那么重写方法时，throws的编译时异常类型必须 &lt;= 被重写方法throws的编译时异常类型，或者不throws编译时异常。</p>
<p><strong>2.运行时异常:</strong></p>
</li>
<li><p>方法重写，对于“<code>throws 运行时异常类型</code>”没有要求。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Father.method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> <span class="keyword">throws</span> IOException,ClassCastException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Son.method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-两种异常处理方式的选择"><a href="#4-4-两种异常处理方式的选择" class="headerlink" title="4.4 两种异常处理方式的选择"></a>4.4 两种异常处理方式的选择</h3><p>前提：对于异常，使用相应的处理方式。此时的异常，主要指的是编译时异常。</p>
<ul>
<li>如果程序代码中，涉及到资源的调用（流、数据库连接、网络连接等），则必须考虑使用try-catch-finally来处理，保证不出现内存泄漏。</li>
<li>如果父类被重写的方法没有throws异常类型，则子类重写的方法中如果出现异常，只能考虑使用try-catch-finally进行处理，不能throws。</li>
<li>开发中，方法a中依次调用了方法b,c,d等方法，方法b,c,d之间是递进关系。此时，如果方法b,c,d中有异常，我们通常选择使用throws，而方法a中通常选择使用try-catch-finally。</li>
</ul>
<h2 id="5-手动抛出异常对象：throw"><a href="#5-手动抛出异常对象：throw" class="headerlink" title="5. 手动抛出异常对象：throw"></a>5. 手动抛出异常对象：throw</h2><p>Java 中异常对象的生成有两种方式：</p>
<ul>
<li><p>由虚拟机<strong>自动生成</strong>：程序运行过程中，虚拟机检测到程序发生了问题，那么针对当前代码，就会在后台自动创建一个对应异常类的实例对象并抛出。</p>
</li>
<li><p>由开发人员<strong>手动创建</strong>：<code>new 异常类型([实参列表]);</code>，如果创建好的异常对象不抛出对程序没有任何影响，和创建一个普通对象一样，但是一旦throw抛出，就会对程序运行产生影响了。</p>
</li>
</ul>
<h3 id="5-1-使用格式"><a href="#5-1-使用格式" class="headerlink" title="5.1 使用格式"></a>5.1 使用格式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> 异常类名(参数);</span><br></pre></td></tr></table></figure>

<p>throw语句抛出的异常对象，和JVM自动创建和抛出的异常对象一样。</p>
<ul>
<li><p>如果是<strong>编译时异常类型</strong>的对象，需要使用throws或者try…catch处理，否则编译不通过。</p>
</li>
<li><p>如果是<strong>运行时异常类型</strong>的对象，编译器不提示。</p>
</li>
<li><p>可以抛出的异常必须是Throwable或其子类的实例。下面的语句在编译时将会产生语法错误：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> String(<span class="string">"want to throw"</span>);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="5-2-使用注意点："><a href="#5-2-使用注意点：" class="headerlink" title="5.2 使用注意点："></a>5.2 使用注意点：</h3><p>无论是编译时异常类型的对象，还是运行时异常类型的对象，如果没有被try..catch合理的处理，都会导致程序崩溃。</p>
<p>throw语句会导致程序执行流程被改变，throw语句是明确抛出一个异常对象，因此它<code>下面的代码将不会执行</code>。</p>
<p>如果当前方法没有try…catch处理这个异常对象，throw语句就会<code>代替return语句</code>提前终止当前方法的执行，并返回一个异常对象给调用者。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThrow</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//第一个try-catch</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(max(<span class="number">4</span>,<span class="number">2</span>,<span class="number">31</span>,<span class="number">1</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//第二个try-catch</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(max(<span class="number">4</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//第三个try-catch</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(max());  <span class="comment">//有问题</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//寻找数组中的最大值</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span>... nums)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(nums == <span class="keyword">null</span> || nums.length==<span class="number">0</span>)&#123;  <span class="comment">//nums为空</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"没有传入任何整数，无法获取最大值"</span>);  <span class="comment">//抛出一个异常</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> max = nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; max)&#123;</span><br><span class="line">                max = nums[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出：</span><br><span class="line"><span class="number">31</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line">java.lang.IllegalArgumentException: 没有传入任何整数，无法获取最大值</span><br><span class="line">	at ExceptionTest.TestThrow.max(TestThrow.java:<span class="number">27</span>)</span><br><span class="line">	at ExceptionTest.TestThrow.main(TestThrow.java:<span class="number">19</span>)</span><br></pre></td></tr></table></figure>

<h2 id="6-自定义异常类"><a href="#6-自定义异常类" class="headerlink" title="6. 自定义异常类"></a>6. 自定义异常类</h2><h3 id="6-1-为什么需要自定义异常类"><a href="#6-1-为什么需要自定义异常类" class="headerlink" title="6.1 为什么需要自定义异常类"></a>6.1 为什么需要自定义异常类</h3><p>Java中不同的异常类，分别表示着某一种具体的异常情况。那么在开发中总是有些异常情况是核心类库中没有定义好的，此时我们需要根据自己业务的异常情况来定义异常类。例如年龄负数问题，考试成绩负数问题，某员工已在团队中等。</p>
<h3 id="6-2-如何自定义异常类"><a href="#6-2-如何自定义异常类" class="headerlink" title="6.2 如何自定义异常类"></a>6.2 如何自定义异常类</h3><p>（1）要<strong>继承一个异常类型</strong></p>
<p>​            自定义一个编译时异常类型：自定义类继承<code>java.lang.Exception</code>。</p>
<p>​            自定义一个运行时异常类型：自定义类继承<code>java.lang.RuntimeException</code>。</p>
<p>（2）建议大家提供至少<strong>两个构造器</strong>，一个是无参构造，一个是(String message)构造器。</p>
<p>（3）自定义异常需要提供<strong>一个全局常量</strong>，—&gt; <strong>static final long</strong> <strong>serialVersionUID</strong></p>
<p>例如:</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146349.png" alt></p>
<h3 id="6-3-注意点"><a href="#6-3-注意点" class="headerlink" title="6.3 注意点"></a>6.3 注意点</h3><ol>
<li><p><strong>自定义的异常</strong>只能通过<strong>throw抛出</strong>。</p>
</li>
<li><p>自定义异常最重要的是异常类的名字和message属性。当异常出现时，可以根据名字判断异常类型。比如：<code>TeamException(&quot;成员已满，无法添加&quot;);</code>、 <code>TeamException(&quot;该员工已是某团队成员&quot;);</code></p>
</li>
<li><p><strong>自定义异常对象</strong>只能<strong>手动抛出</strong>。抛出后由try..catch处理，也可以甩锅throws给调用者处理。</p>
</li>
</ol>
<h3 id="6-4-举例"><a href="#6-4-举例" class="headerlink" title="6.4 举例"></a>6.4 举例</h3><p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义异常：</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;  <span class="comment">//继承编译时异常类型</span></span><br><span class="line">    <span class="comment">//1个全局常量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">23423423435L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> idnumber;</span><br><span class="line">    <span class="comment">//构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String message, <span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">        <span class="keyword">this</span>.idnumber = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> idnumber;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyExpTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">        MyExpTest t = <span class="keyword">new</span> MyExpTest();</span><br><span class="line">        t.manager();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">manager</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            regist(-<span class="number">100</span>);  <span class="comment">//对regist方法进行检测</span></span><br><span class="line">        &#125;<span class="keyword">catch</span> (MyException e)&#123;   <span class="comment">//使用自己定义的MyException类</span></span><br><span class="line">            System.out.println(<span class="string">"登记失败，出错种类:"</span> + e.getId());</span><br><span class="line">            System.out.println(<span class="string">"输出信息:"</span>+e.getMessage());</span><br><span class="line">            System.out.println(<span class="string">"输出报错的原因:"</span>+e.getCause());</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.print(<span class="string">"本次登记操作结束！"</span>);  <span class="comment">//一定会执行</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">regist</span><span class="params">(<span class="keyword">int</span> num)</span> <span class="keyword">throws</span> MyException</span>&#123;  <span class="comment">//捕获异常 返回给被调用的manager方法【在它方法内使用try-catch】</span></span><br><span class="line">        <span class="keyword">if</span>(num&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"人数为负数，不合理"</span>,<span class="number">3</span>);  <span class="comment">//抛出异常</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"登记人数"</span>+num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146708.png" alt="image-20231016170808072"></p>
<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义异常：</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NotTriangleException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;  <span class="comment">//继承编译时异常类型</span></span><br><span class="line">    <span class="comment">//一个全局常量</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">13465653435L</span>;</span><br><span class="line">	<span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NotTriangleException</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//有参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NotTriangleException</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> a;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> b;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> c;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Triangle</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b, <span class="keyword">double</span> c)</span> <span class="keyword">throws</span> NotTriangleException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a&lt;=<span class="number">0</span> || b&lt;=<span class="number">0</span> || c&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NotTriangleException(<span class="string">"三角形的边长必须是正数"</span>);  <span class="comment">//抛出自定义异常类对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a+b&lt;=c || b+c&lt;=a || a+c&lt;=b)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NotTriangleException(a+<span class="string">","</span> + b +<span class="string">","</span> + c +<span class="string">"不能构造三角形，三角形任意两边之后必须大于第三边"</span>);  <span class="comment">//抛出自定义异常类对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">        <span class="keyword">this</span>.b = b;</span><br><span class="line">        <span class="keyword">this</span>.c = c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setA</span><span class="params">(<span class="keyword">double</span> a)</span> <span class="keyword">throws</span> NotTriangleException</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NotTriangleException(<span class="string">"三角形的边长必须是正数"</span>); <span class="comment">//抛出自定义异常类对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a+b&lt;=c || b+c&lt;=a || a+c&lt;=b)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NotTriangleException(a+<span class="string">","</span> + b +<span class="string">","</span> + c +<span class="string">"不能构造三角形，三角形任意两边之后必须大于第三边"</span>);  <span class="comment">//抛出自定义异常类对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setB</span><span class="params">(<span class="keyword">double</span> b)</span> <span class="keyword">throws</span> NotTriangleException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(b&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NotTriangleException(<span class="string">"三角形的边长必须是正数"</span>);  <span class="comment">//抛出自定义异常类对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a+b&lt;=c || b+c&lt;=a || a+c&lt;=b)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NotTriangleException(a+<span class="string">","</span> + b +<span class="string">","</span> + c +<span class="string">"不能构造三角形，三角形任意两边之后必须大于第三边"</span>);  <span class="comment">//抛出自定义异常类对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.b = b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getC</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setC</span><span class="params">(<span class="keyword">double</span> c)</span> <span class="keyword">throws</span> NotTriangleException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(c&lt;=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NotTriangleException(<span class="string">"三角形的边长必须是正数"</span>);  <span class="comment">//抛出自定义异常类对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(a+b&lt;=c || b+c&lt;=a || a+c&lt;=b)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> NotTriangleException(a+<span class="string">","</span> + b +<span class="string">","</span> + c +<span class="string">"不能构造三角形，三角形任意两边之后必须大于第三边"</span>);  <span class="comment">//抛出自定义异常类对象</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.c = c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Triangle&#123;"</span> +<span class="string">"a="</span> + a +<span class="string">", b="</span> + b +<span class="string">", c="</span> + c +<span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestTriangle</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Triangle t = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//第一个try  测试构造器</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            t = <span class="keyword">new</span> Triangle(<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>);  </span><br><span class="line">            System.out.println(<span class="string">"三角形创建成功："</span>);</span><br><span class="line">            System.out.println(t);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NotTriangleException e) &#123;  <span class="comment">//出现在自定义异常类</span></span><br><span class="line">            System.err.println(<span class="string">"三角形创建失败"</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">//第二个try  测试setA方法</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(t != <span class="keyword">null</span>) &#123;</span><br><span class="line">                t.setA(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">"三角形边长修改成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NotTriangleException e) &#123;  <span class="comment">//出现在自定义异常类</span></span><br><span class="line">            System.out.println(<span class="string">"三角形边长修改失败"</span>);</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146645.png" alt="image-20231016171600914"></p>
<h2 id="7-练习"><a href="#7-练习" class="headerlink" title="7. 练习"></a>7. 练习</h2><p><strong>练习1：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReturnExceptionDemo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//方法 methodA</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">methodA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"进入方法A"</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"制造异常"</span>); <span class="comment">//抛出一个运行时异常</span></span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"用A方法的finally"</span>); <span class="comment">//一定会执行</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//方法 methodB</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"进入方法B"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"调用B方法的finally"</span>);   <span class="comment">//一定会执行</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//代码执行main方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//执行顺序:</span></span><br><span class="line"><span class="comment">//进入try块 执行methodA方法</span></span><br><span class="line"><span class="comment">//进入methodA方法的try块 输出进入方法A  然后执行finally语句 输出用A方法的finally  之后将抛出的运行时异常给调用者main方法 进入catch就输出制造异常</span></span><br><span class="line"><span class="comment">//最后执行methodB方法</span></span><br><span class="line"><span class="comment">//进入方法B的try块  输出进入方法B  然后执行finally输出调用B方法的finally 最后不返回值</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            methodA();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//调用方法B</span></span><br><span class="line">        methodB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">进入方法A</span><br><span class="line">用A方法的<span class="keyword">finally</span></span><br><span class="line">制造异常</span><br><span class="line">进入方法B</span><br><span class="line">调用B方法的<span class="keyword">finally</span></span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong></p>
<p>从键盘接收学生成绩，成绩必须在0~100之间。</p>
<p>自定义成绩无效异常。</p>
<p>编写方法接收成绩并返回该成绩，如果输入无效，则抛出自定义异常。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;自定义异常类</span><br><span class="line">public class GradeNotException extends Exception&#123;</span><br><span class="line">    static final long serialVersionUID&#x3D;-123412421L;</span><br><span class="line">    public GradeNotException()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public GradeNotException(String name)&#123;</span><br><span class="line">        super(name);</span><br><span class="line">    &#125;</span><br><span class="line">    public GradeNotException(String message,Throwable cause)&#123;</span><br><span class="line">        super(message,cause);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;手动Stduent类使用设定的自定义异常</span><br><span class="line">import java.util.Scanner;</span><br><span class="line">public class Student &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Scanner input&#x3D;new Scanner(System.in);</span><br><span class="line">        try&#123;</span><br><span class="line">            System.out.println(&quot;输入学生成绩&quot;);</span><br><span class="line">            int score&#x3D;getValidScore(input);  &#x2F;&#x2F;调用方法</span><br><span class="line">        &#125;catch(GradeNotException e)&#123;  &#x2F;&#x2F;catch为自定义异常类</span><br><span class="line">            System.out.println(e.getMessage());  &#x2F;&#x2F;输出异常信息  --就是throw new GradeNotException括号里面内容</span><br><span class="line">        &#125;finally&#123;</span><br><span class="line">            System.out.println(&quot;finally语句&quot;);  &#x2F;&#x2F;一定执行</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static int getValidScore(Scanner input) throws GradeNotException&#123;  &#x2F;&#x2F;抛出自定义异常</span><br><span class="line">        System.out.println(&quot;输出成绩:&quot;);</span><br><span class="line">        int score&#x3D;input.nextInt(); &#x2F;&#x2F;从键盘输入成绩score</span><br><span class="line">        if(score&lt;0||score&gt;100)&#123;</span><br><span class="line">            throw new GradeNotException(&quot;输入成绩无效&quot;);  &#x2F;&#x2F;只能throw手动抛出</span><br><span class="line">        &#125;</span><br><span class="line">        return score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码结果如下:</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146897.png" alt="image-20231017094258915"></p>
<p><strong>练习3：</strong></p>
<p>编写应用程序EcmDef.java，接收命令行的两个参数，要求不能输入负数，计算两数相除。<br>对数据类型不一致(NumberFormatException)、缺少命令行参数(ArrayIndexOutOfBoundsException、<br>除0(ArithmeticException)及输入负数(EcDef 自定义的异常)进行异常处理。</p>
<p>提示：<br>(1)在主类(EcmDef)中定义异常方法(ecm)完成两数相除功能。</p>
<p>(2)在main()方法中使用异常处理语句进行异常处理。</p>
<p>(3)在程序中，自定义对应输入负数的异常类(EcDef)。</p>
<p>(4)运行时接受参数 java EcmDef 20 10   //args[0]=“20” args[1]=“10”</p>
<p>(5)Interger类的static方法parseInt(String s)将s转换成对应的int值。<br>     如：int a=Interger.parseInt(“314”);    //a=314;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;自定义异常类</span><br><span class="line">public class EcmDefTest extends Exception&#123;</span><br><span class="line">    static final long serialVersionUID&#x3D;-123148L;</span><br><span class="line">    public EcmDefTest()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public EcmDefTest(String name)&#123;</span><br><span class="line">        super(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public class EcmDef &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">		&#x2F;&#x2F;写try-catch-finally块</span><br><span class="line">        try&#123;</span><br><span class="line">           if(args.length!&#x3D;2)&#123;</span><br><span class="line">               System.out.println(&quot;没有获取两个命令行参数&quot;);</span><br><span class="line">               throw new ArrayIndexOutOfBoundsException(&quot;需要提供两个命令行参数&quot;);</span><br><span class="line">           &#125;</span><br><span class="line">           &#x2F;&#x2F;因为main里面是字符串数组&#x2F;&#x2F;要对比数据类型不一致  那么就要将String转为包装类对比</span><br><span class="line">           int num1&#x3D;Integer.parseInt(args[0]);</span><br><span class="line">           int num2&#x3D;Integer.parseInt(args[1]);</span><br><span class="line">           &#x2F;&#x2F;做除法</span><br><span class="line">           getChu(num1,num2);</span><br><span class="line">        &#125;catch(NumberFormatException e)&#123;</span><br><span class="line">            System.out.println(&quot;发生的是NumberFormatException(数据类型不一致)异常类&quot;);</span><br><span class="line">            e.getMessage();</span><br><span class="line">        &#125;catch(ArrayIndexOutOfBoundsException e)&#123;</span><br><span class="line">            System.out.println(&quot;发生的是ArrayIndexOutOfBoundsException(缺少命令行参数)异常类&quot;);</span><br><span class="line">            e.getMessage();</span><br><span class="line">        &#125;catch(ArithmeticException e)&#123;</span><br><span class="line">            System.out.println(&quot;发生的是ArithmeticException(除0)异常类&quot;);</span><br><span class="line">            e.getMessage();</span><br><span class="line">        &#125;catch(EcmDefTest e)&#123;</span><br><span class="line">            System.out.println(&quot;发生的是EcmDefTest(输入负数)自定义异常类&quot;);</span><br><span class="line">            e.getMessage();</span><br><span class="line">        &#125;finally&#123;</span><br><span class="line">            System.out.println(&quot;finally语句&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    public static void getChu(int num1,int num2) throws EcmDefTest &#123;</span><br><span class="line">        if(num1&lt;0||num2&lt;0)&#123;</span><br><span class="line">            throw new EcmDefTest(&quot;输入不能为负数&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        if(num2&#x3D;&#x3D;0)&#123;</span><br><span class="line">            throw new ArithmeticException(&quot;被除数为0&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        int res&#x3D;num1&#x2F;num2;</span><br><span class="line">        System.out.println(&quot;res&quot;+res);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146690.png" alt="image-20231017102148928"></p>
<h2 id="8-小结与小悟"><a href="#8-小结与小悟" class="headerlink" title="8. 小结与小悟"></a>8. 小结与小悟</h2><h3 id="8-1-小结：异常处理5个关键字"><a href="#8-1-小结：异常处理5个关键字" class="headerlink" title="8.1 小结：异常处理5个关键字"></a>8.1 小结：异常处理5个关键字</h3><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146785.png" alt="image-20220330003738109" style="zoom: 67%;">

<blockquote>
<p>类比：上游排污，下游治污</p>
</blockquote>
<h3 id="8-2-感悟"><a href="#8-2-感悟" class="headerlink" title="8.2 感悟"></a>8.2 感悟</h3><p><strong>小哲理：</strong></p>
<p>世界上最遥远的<code>距离</code>，是我在<code>if</code>里你在<code>else</code>里，似乎一直相伴又永远分离；</p>
<p>世界上最痴心的<code>等待</code>，是我当<code>case</code>你是<code>switch</code>，或许永远都选不上自己；</p>
<p>世界上最真情的<code>相依</code>，是你在<code>try</code>我在<code>catch</code>。无论你发神马脾气，我都默默承受，静静处理。到那时，再来期待我们的<code>finally</code>。</p>
<p><strong>歌词：</strong></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212146209.png" alt="image-20220511163035280" style="zoom:67%;">

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-JAVA-面向对象" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2023/10/20/JAVA-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="article-date">
      <time datetime="2023-10-20T06:31:02.000Z" itemprop="datePublished">2023-10-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2023/10/20/JAVA-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">JAVA-面向对象</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h1 id="第06章-面向对象编程（基础）"><a href="#第06章-面向对象编程（基础）" class="headerlink" title="第06章_面向对象编程（基础）"></a>第06章_面向对象编程（基础）</h1><p><strong>学习面向对象内容的三条主线</strong></p>
<p>•     Java类及类的成员：（重点）属性、方法、构造器；（熟悉）代码块、内部类</p>
<p>•     面向对象的特征：封装、继承、多态、（抽象）</p>
<p>•     其他关键字的使用：this、super、package、import、static、final、interface、abstract等</p>
<h2 id="1-面向对象编程概述-了解"><a href="#1-面向对象编程概述-了解" class="headerlink" title="1. 面向对象编程概述(了解)"></a>1. 面向对象编程概述(了解)</h2><h3 id="1-1-程序设计的思路"><a href="#1-1-程序设计的思路" class="headerlink" title="1.1 程序设计的思路"></a>1.1 程序设计的思路</h3><p>面向对象，是软件开发中的一类编程风格、开发范式。除了面向对象，还有面向过程、指令式编程和函数式编程。在所有的编程范式中，我们接触最多的还是面向过程和面向对象两种。</p>
<p>类比：史书类型</p>
<p>•     纪传体：以人物传记为中心，“本纪”叙述帝王，“世家”记叙王侯封国和特殊人物，“列传”记叙民间人物。</p>
<p>•     编年体：按年、月、日顺序编写。</p>
<p>•     国别体：是一部分国记事的历史散文，分载多国历史。</p>
<p>早期先有面向过程思想，随着软件规模的扩大，问题复杂性的提高，面向过程的弊端越来越明显，出现了面向对象思想并成为目前主流的方式。</p>
<p><strong>1. 面向过程的程序设计思想（Process-Oriented Programming）</strong>，简称POP</p>
<p>关注的焦点是过程：过程就是操作数据的步骤。如果某个过程的实现代码重复出现，那么就可以把这个过程抽取为一个函数。这样就可以大大简化冗余代码，便于维护。</p>
<p>典型的语言：C语言</p>
<p>代码结构：以函数为组织单位。</p>
<p>是一种“执行者思维”，适合解决简单问题。扩展能力差、后期维护难度较大。</p>
<p><strong>2. 面向对象的程序设计思想（ Object Oriented Programming）</strong>，简称OOP</p>
<p>关注的焦点是类：在计算机程序设计过程中，参照现实中事物，将事物的属性特征、行为特征抽象出来，用类来表示。</p>
<p>典型的语言：Java、C#、C++、Python、Ruby和PHP等</p>
<p>代码结构：以类为组织单位。每种事物都具备自己的属性和行为/功能。</p>
<p>是一种“设计者思维”，适合解决复杂问题。代码扩展性强、可维护性高。</p>
<h3 id="1-2-由实际问题考虑如何设计程序"><a href="#1-2-由实际问题考虑如何设计程序" class="headerlink" title="1.2 由实际问题考虑如何设计程序"></a>1.2 由实际问题考虑如何设计程序</h3><p>可随着需求的更改，功能的增多，发现需要面对每一个步骤很麻烦了，这时就开始思索，<strong>能不能把这些步骤和功能进行封装，封装时根据不同的功能，进行不同的封装，功能类似的封装在一起。</strong>这样结构就清晰了很多。用的时候，找到对应的类就可以了。这就是面向对象的思想。</p>
<p><strong>类比举例2：人把大象装进冰箱</strong></p>
<p><strong>面向过程：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.打开冰箱</span><br><span class="line">2.把大象装进冰箱</span><br><span class="line">3.把冰箱门关住</span><br></pre></td></tr></table></figure>

<p>面向对象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;分为三个类</span><br><span class="line">人&#123;</span><br><span class="line">   打开（冰箱）&#123;</span><br><span class="line">   冰箱.开门();  </span><br><span class="line">   &#125;</span><br><span class="line">   操作(大象)&#123;</span><br><span class="line">       大象.进入(冰箱);</span><br><span class="line">   &#125;</span><br><span class="line">   关闭(冰箱)&#123;  </span><br><span class="line">      冰箱.关门();   </span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">冰箱&#123;</span><br><span class="line">   开门()&#123; &#125; </span><br><span class="line">   关门()&#123; &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">大象&#123;</span><br><span class="line">   进入(冰箱)&#123; </span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-Java语言的基本元素：类和对象"><a href="#2-Java语言的基本元素：类和对象" class="headerlink" title="2. Java语言的基本元素：类和对象"></a>2. Java语言的基本元素：类和对象</h2><h3 id="2-1-引入"><a href="#2-1-引入" class="headerlink" title="2.1 引入"></a>2.1 引入</h3><p>人认识世界，其实就是面向对象的。比如，我们认识一下美人鱼（都没见过）</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212042448.gif" alt="image-20220520162643547"></p>
<p>经过“仔细学习”，发现美人鱼通常具备一些特征：</p>
<p>•     女孩</p>
<p>•     有鱼尾</p>
<p>•     美丽</p>
<p>这个总结的过程，其实是抽象化的过程。抽象出来的美人鱼的特征，可以归纳为一个美人鱼类。而图片中的都是这个类呈现出来的具体的对象。</p>
<h3 id="2-2-类和对象概述"><a href="#2-2-类和对象概述" class="headerlink" title="2.2 类和对象概述"></a>2.2 类和对象概述</h3><p>类(Class)和对象(Object)是面向对象的核心概念。</p>
<p><strong>1**</strong>、什么是类**</p>
<p><strong>类</strong>：具有相同特征的事物的抽象描述，是抽象的、概念上的定义。</p>
<p><strong>2**</strong>、什么是对象**</p>
<p><strong>对象</strong>：实际存在的该类事物的每个个体，是具体的，因而也称为实例(instance)。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212042110.gif" alt="img"></p>
<p>可以理解为：类 =&gt; 抽象概念的人；对象 =&gt; 实实在在的某个人</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212042059.jpg" alt="img"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212042451.gif" alt="img"></p>
<p><strong>3**</strong>、类与对象的关系错误理解**</p>
<p>曰：“白马非马，可乎？”<br> 曰：“可。”<br> 曰：“何哉？”<br> 曰：“马者，所以命形也。白者，所以命色也。命色者，非命形也，故曰白马非马。”</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212042193.gif" alt="img"></p>
<h3 id="2-3-类的成员概述"><a href="#2-3-类的成员概述" class="headerlink" title="2.3 类的成员概述"></a>2.3 类的成员概述</h3><p>面向对象程序设计的重点是类的设计</p>
<p>Java中用类class来描述事物也是如此。类，是一组相关属性和行为的集合，这也是类最基本的两个成员。</p>
<p><strong>属性：</strong>该类事物的状态信息。对应类中的成员变量</p>
<p>•     <strong>成员变量 &lt;=&gt; 属性 &lt;=&gt; Field</strong></p>
<p><strong>行为：</strong>该类事物要做什么操作，或者基于事物的状态能做什么。对应类中的成员方法</p>
<p>•     <strong>(成员)方法 &lt;=&gt; 函数 &lt;=&gt; Method</strong></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212042714.jpg" alt="20220319_211611"></p>
<p>举例：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212042521.gif" alt="img"></p>
<h3 id="2-4-面向对象完成功能的三步骤（重要）"><a href="#2-4-面向对象完成功能的三步骤（重要）" class="headerlink" title="2.4 面向对象完成功能的三步骤（重要）"></a>2.4 面向对象完成功能的三步骤（重要）</h3><h4 id="步骤1：类的定义"><a href="#步骤1：类的定义" class="headerlink" title="步骤1：类的定义"></a>步骤1：类的定义</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">类的定义使用关键字：class。格式如下：</span><br><span class="line"></span><br><span class="line">[修饰符] class 类名&#123;</span><br><span class="line">   属性声明;</span><br><span class="line">   方法声明;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">举例1：</span><br><span class="line">public class Person&#123;</span><br><span class="line">   *&#x2F;&#x2F;**声明属性age*</span><br><span class="line">   int age ;           </span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;**声明方法showAge()*</span><br><span class="line">   public void eat() &#123;    </span><br><span class="line">     System.out.println(&quot;人吃饭&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">举例2：</span><br><span class="line"></span><br><span class="line">public class Dog&#123;</span><br><span class="line">   *&#x2F;&#x2F;**声明属性*</span><br><span class="line">   String type; *&#x2F;&#x2F;**种类*</span><br><span class="line">   String nickName; *&#x2F;&#x2F;**昵称*</span><br><span class="line">   String hostName; *&#x2F;&#x2F;**主人名称*</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;**声明方法*</span><br><span class="line">   public void eat()&#123; *&#x2F;&#x2F;**吃东西*</span><br><span class="line">    System.out.println(&quot;狗狗进食&quot;);   </span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">public class Person&#123;</span><br><span class="line">   String name;</span><br><span class="line">   char gender;</span><br><span class="line">   Dog dog;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;**喂宠物*</span><br><span class="line">   public void feed()&#123;</span><br><span class="line">     dog.eat();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h4 id="步骤2：对象的创建"><a href="#步骤2：对象的创建" class="headerlink" title="步骤2：对象的创建"></a>步骤2：对象的创建</h4><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212042315.gif" alt="image-20220319213201568"></p>
<p>创建对象，使用关键字：<strong>new</strong></p>
<p><strong>创建对象语法：</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">方式1：给创建的对象命名*</span><br><span class="line"> 把创建的对象用一个引用数据类型的变量保存起来，这样就可以反复使用这个对象了*</span><br><span class="line"> 类名 对象名 &#x3D; new 类名();</span><br><span class="line"></span><br><span class="line">方式2：</span><br><span class="line"> new 类名()*&#x2F;&#x2F;**也称为匿名对象</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class PersonTest&#123;</span><br><span class="line">   public static void main(String[] args)&#123;</span><br><span class="line">    *&#x2F;&#x2F;**创建Person**类的对象*</span><br><span class="line">    Person per &#x3D; new Person();</span><br><span class="line">    *&#x2F;&#x2F;**创建Dog**类的对象*</span><br><span class="line">    Dog dog &#x3D; new Dog();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="步骤3：对象调用属性或方法"><a href="#步骤3：对象调用属性或方法" class="headerlink" title="步骤3：对象调用属性或方法"></a>步骤3：对象调用属性或方法</h4><p>对象是类的一个<strong>实例</strong>，必然具备该类事物的属性和行为（即方法）。</p>
<p>使用”对象名.属性” 或 “对象名.方法”的方式访问对象成员（包括属性和方法）</p>
<p>举例1：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;**声明Animal**类*</span><br><span class="line"> public class Animal &#123; *&#x2F;&#x2F;**动物类*</span><br><span class="line">   public int legs;</span><br><span class="line"></span><br><span class="line">   public void eat() &#123;</span><br><span class="line">     System.out.println(&quot;Eating.&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public void move() &#123;</span><br><span class="line">     System.out.println(&quot;Move.&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;声明测试类</span><br><span class="line"> public class AnimalTest &#123;</span><br><span class="line">   public static void main(String args[]) &#123;</span><br><span class="line">     *&#x2F;&#x2F;**创建对象*</span><br><span class="line">     Animal xb &#x3D; new Animal();</span><br><span class="line">     xb.legs &#x3D; 4;*&#x2F;&#x2F;**访问属性*</span><br><span class="line">     System.out.println(xb.legs);</span><br><span class="line">     xb.eat();*&#x2F;&#x2F;**访问方法*</span><br><span class="line">     xb.move();*&#x2F;&#x2F;**访问方法*</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>图示理解：<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212043080.gif" alt="标题: fig:"></p>
<p>举例2：针对前面步骤1的举例2：类的实例化（创建类的对象）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Game&#123;</span><br><span class="line">   public static void main(String[] args)&#123;</span><br><span class="line">     Person p &#x3D; new Person();</span><br><span class="line">     *&#x2F;&#x2F;**通过Person**对象调用属性*</span><br><span class="line">     p.name &#x3D; &quot;康师傅&quot;;</span><br><span class="line">     p.gender &#x3D; &#39;男&#39;;</span><br><span class="line">     p.dog &#x3D; new Dog(); *&#x2F;&#x2F;**给Person**对象的dog**属性赋值*</span><br><span class="line">      *&#x2F;&#x2F;**给Person**对象的dog**属性的type**、nickname**属性赋值*</span><br><span class="line">     p.dog.type &#x3D; &quot;柯基犬&quot;;</span><br><span class="line">     p.dog.nickName &#x3D; &quot;小白&quot;;</span><br><span class="line"></span><br><span class="line">     *&#x2F;&#x2F;**通过Person**对象调用方法*</span><br><span class="line">     p.feed();</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-匿名对象-anonymous-object"><a href="#2-5-匿名对象-anonymous-object" class="headerlink" title="2.5 匿名对象 (anonymous object)"></a>2.5 匿名对象 (anonymous object)</h3><p>我们也可以不定义对象的句柄，而直接调用这个对象的方法。这样的对象叫做匿名对象。</p>
<p>–     如：new Person().shout(); </p>
<p>使用情况</p>
<p>–     如果一个对象只需要进行一次方法调用，那么就可以使用匿名对象。 </p>
<p>–     我们经常将匿名对象作为实参传递给一个方法调用。 </p>
<h2 id="3-对象的内存解析"><a href="#3-对象的内存解析" class="headerlink" title="3. 对象的内存解析"></a>3. 对象的内存解析</h2><h3 id="3-1-JVM内存结构划分"><a href="#3-1-JVM内存结构划分" class="headerlink" title="3.1 JVM内存结构划分"></a>3.1 JVM内存结构划分</h3><p>HotSpot Java虚拟机的架构图如下。其中我们主要关心的是运行时数据区部分（Runtime Data Area）。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212043498.gif" alt="img"></p>
<p>其中：</p>
<p>堆（Heap）：此内存区域的唯一目的就是存放对象实例，几乎所有的对象实例都在这里分配内存。这一点在Java虚拟机规范中的描述是：所有的对象实例以及数组都要在堆上分配。</p>
<p>栈（Stack）：是指虚拟机栈。虚拟机栈用于存储局部变量等。局部变量表存放了编译期可知长度的各种基本数据类型（boolean、byte、char、short、int、float、long、double）、对象引用（reference类型，它不等同于对象本身，是对象在堆内存的首地址）。 方法执行完，自动释放。</p>
<p>方法区（Method Area）：用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。</p>
<h3 id="3-2-对象内存解析"><a href="#3-2-对象内存解析" class="headerlink" title="3.2 对象内存解析"></a>3.2 对象内存解析</h3><p>举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123; *&#x2F;&#x2F;**类：人*</span><br><span class="line">   String name;</span><br><span class="line">   int age;</span><br><span class="line">   boolean isMale;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> public class PersonTest &#123; *&#x2F;&#x2F;**测试类*</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     Person p1 &#x3D; new Person();</span><br><span class="line">     p1.name &#x3D; &quot;赵同学&quot;;</span><br><span class="line">     p1.age &#x3D; 20;</span><br><span class="line">     p1.isMale &#x3D; true;</span><br><span class="line"></span><br><span class="line">     Person p2 &#x3D; new Person();</span><br><span class="line">     p2.age &#x3D; 10;</span><br><span class="line">     </span><br><span class="line">     Person p3 &#x3D; p1;</span><br><span class="line">     p3.name &#x3D; &quot;郭同学&quot;;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>内存解析图：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212043394.gif" alt="image-20220319215723183"></p>
<p>说明：</p>
<p><strong>堆：</strong>凡是new出来的结构(对象、数组)都放在堆空间中。</p>
<p>对象的属性存放在堆空间中。</p>
<p>创建一个类的多个对象（比如p1、p2），则每个对象都拥有当前类的一套”副本”（即属性）。当通过一个对象修改其属性时，不会影响其它对象此属性的值。</p>
<p>当声明一个新的变量使用现有的对象进行赋值时（比如p3 = p1），此时并没有在堆空间中创建新的对象。而是两个变量共同指向了堆空间中同一个对象。当通过一个对象修改属性时，会影响另外一个对象对此属性的调用。</p>
<p><strong>面试题：对象名中存储的是什么呢？</strong></p>
<p>答：对象地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class StudentTest&#123;</span><br><span class="line">   public static void main(String[] args)&#123;</span><br><span class="line">     System.out.println(new Student());*&#x2F;&#x2F;Student@7852e922*</span><br><span class="line"></span><br><span class="line">     Student stu &#x3D; new Student();</span><br><span class="line">     System.out.println(stu);*&#x2F;&#x2F;Student@4e25154f*</span><br><span class="line">     </span><br><span class="line">     int[] arr &#x3D; new int[5];</span><br><span class="line">    System.out.println(arr);*&#x2F;&#x2F;[I@70dea4e*</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>直接打印对象名和数组名都是显示“类型@对象的hashCode值”，所以说<strong>类、数组都是引用数据类型，引用数据类型的变量中存储的是对象的地址，或者说指向堆中对象的首地址。</strong></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212044522.gif" alt="img"></p>
<h3 id="3-3-练习"><a href="#3-3-练习" class="headerlink" title="3.3 练习"></a>3.3 练习</h3><p>根据代码，画出内存图</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">class Car &#123;</span><br><span class="line">   String color &#x3D; &quot;red&quot;;</span><br><span class="line">   int num &#x3D; 4;</span><br><span class="line"></span><br><span class="line">   void show() &#123;</span><br><span class="line">     System.out.println(&quot;color&#x3D;&quot; + color + &quot;,num&#x3D;&quot; + num);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> class CarTest &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     Car c1 &#x3D; new Car();  *&#x2F;&#x2F;**建立对象c1*</span><br><span class="line">     Car c2 &#x3D; new Car();  *&#x2F;&#x2F;**建立对象c2*</span><br><span class="line">     c1.color &#x3D; &quot;blue&quot;;  *&#x2F;&#x2F;**对对象的属性进行修改*</span><br><span class="line">     c1.show();  *&#x2F;&#x2F;**使用对象的方法*</span><br><span class="line">     c2.show();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-类的成员之一：成员变量-field"><a href="#4-类的成员之一：成员变量-field" class="headerlink" title="4. 类的成员之一：成员变量(field)"></a>4. 类的成员之一：成员变量(field)</h2><h3 id="4-1-如何声明成员变量"><a href="#4-1-如何声明成员变量" class="headerlink" title="4.1 如何声明成员变量"></a>4.1 如何声明成员变量</h3><p><strong>语法格式：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[修饰符1] class 类名&#123;</span><br><span class="line">   [修饰符2] 数据类型 成员变量名 [&#x3D; 初始化值]; </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>说明：</strong></p>
<p>–     位置要求：必须在类中，方法外</p>
<p>–     修饰符2(暂不考虑)</p>
<p>•     常用的权限修饰符有：private、缺省、protected、public</p>
<p>•     其他修饰符：static、final </p>
<p>–     数据类型</p>
<p>•     任何基本数据类型(如int、Boolean) 或 任何引用数据类型。</p>
<p>–     成员变量名</p>
<p>•     属于标识符，符合命名规则和规范即可。</p>
<p>–     初始化值</p>
<p>•     根据情况，可以显式赋值；也可以不赋值，使用默认值</p>
<p><strong>示例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public class Person&#123;</span><br><span class="line">   private int age;       *&#x2F;&#x2F;**声明private**变量 age*</span><br><span class="line">   public String name &#x3D; “Lila”;  *&#x2F;&#x2F;**声明public**变量 name*</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-成员变量-vs-局部变量"><a href="#4-2-成员变量-vs-局部变量" class="headerlink" title="4.2 成员变量 vs 局部变量"></a>4.2 成员变量 vs 局部变量</h3><p><strong>1**</strong>、变量的分类：成员变量与局部变量**</p>
<p>在方法体外，类体内声明的变量称为成员变量。</p>
<p>在方法体内部等位置声明的变量称为局部变量。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212148222.gif" alt="image-20220511101608038"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212148949.gif" alt="image-20220319230744617"></p>
<p>其中，static可以将成员变量分为两大类，静态变量和非静态变量。其中静态变量又称为类变量，非静态变量又称为实例变量或者属性。接下来先学习实例变量。</p>
<p><strong>2**</strong>、成员变量 与 局部变量 的对比**</p>
<p>相同点：</p>
<p>–     变量声明的格式相同： 数据类型 变量名 = 初始化值</p>
<p>–     变量必须先声明、后初始化、再使用。</p>
<p>–     变量都有其对应的作用域。只在其作用域内是有效的</p>
<p>不同点：</p>
<p>1、声明位置和方式 （1）实例变量：在类中方法外 （2）局部变量：在方法体{}中或方法的形参列表、代码块中</p>
<p>2、在内存中存储的位置不同 （1）实例变量：堆 （2）局部变量：栈</p>
<p>3、生命周期 （1）实例变量：和对象的生命周期一样，随着对象的创建而存在，随着对象被GC回收而消亡， 而且每一个对象的实例变量是独立的。 （2）局部变量：和方法调用的生命周期一样，每一次方法被调用而在存在，随着方法执行的结束而消亡， 而且每一次方法调用都是独立。</p>
<p>4、作用域 （1）实例变量：通过对象就可以使用，本类中直接调用，其他类中“对象.实例变量” （2）局部变量：出了作用域就不能使用</p>
<p>5、修饰符（后面来讲） （1）实例变量：public,protected,private,final,volatile,transient等 （2）局部变量：final</p>
<p>6、默认值 （1）实例变量：有默认值 （2）局部变量：没有，必须手动初始化。其中的形参比较特殊，靠实参给它初始化。</p>
<p><strong>3**</strong>、对象属性的默认初始化赋值**</p>
<p>当一个对象被创建时，会对其中各种类型的成员变量自动进行初始化赋值。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212148739.gif" alt="image-20220319231821747"></p>
<p><strong>4、举例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class Person &#123;*&#x2F;&#x2F;**人类*</span><br><span class="line">   *&#x2F;&#x2F;1.**属性*</span><br><span class="line">   String name;*&#x2F;&#x2F;**姓名*</span><br><span class="line">   int age &#x3D; 1;*&#x2F;&#x2F;**年龄*</span><br><span class="line">   boolean isMale;*&#x2F;&#x2F;**是否是男性*</span><br><span class="line"></span><br><span class="line">   public void show(String nation) &#123;</span><br><span class="line">     *&#x2F;&#x2F;nation:**局部变量*</span><br><span class="line">     String color;*&#x2F;&#x2F;color:**局部变量*</span><br><span class="line">     color &#x3D; &quot;yellow&quot;;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;**测试类*</span><br><span class="line"> class PersonTest &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     Person p &#x3D; new Person();</span><br><span class="line">     p.show(&quot;CHN&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212148474.gif" alt="image-20220319231703240"></p>
<h2 id="1-类的成员之二：方法-method"><a href="#1-类的成员之二：方法-method" class="headerlink" title="1.  类的成员之二：方法(method)"></a>1.  类的成员之二：方法(method)</h2><h3 id="5-1-方法的引入"><a href="#5-1-方法的引入" class="headerlink" title="5.1 方法的引入"></a>5.1 方法的引入</h3><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212148852.jpg" alt="img"></p>
<p>《街霸》游戏中，每次人物出拳、出脚或跳跃等动作都需要编写50-80行的代码，在每次出拳、出脚或跳跃的地方都需要重复地编写这50-80行代码，这样程序会变得很臃肿，可读性也非常差。为了解决代码重复编写的问题，可以将出拳、出脚或跳跃的代码提取出来放在一个{}中，并为这段代码起个名字，这样在每次的出拳、出脚或跳跃的地方通过这个名字来调用这个{}的代码就可以了。</p>
<p>上述过程中，所提取出来的代码可以被看作是程序中定义的一个方法，程序在需要出拳、出脚或跳跃时调用该方法即可。</p>
<h3 id="5-2-方法-method、函数-的理解"><a href="#5-2-方法-method、函数-的理解" class="headerlink" title="5.2 方法(method、函数)的理解"></a>5.2 方法(method、函数)的理解</h3><p>方法是类或对象行为特征的抽象，用来完成某个功能操作。在某些语言中也称为函数或过程。 </p>
<p>将功能封装为方法的目的是，可以实现代码重用，减少冗余，简化代码</p>
<p>Java里的方法不能独立存在，所有的方法必须定义在类里。</p>
<p><strong>举例1：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">–     Math.random()的random()方法</span><br><span class="line"></span><br><span class="line">–     Math.sqrt(x)的sqrt(x)方法</span><br><span class="line"></span><br><span class="line">–     System.out.println(x)的println(x)方法</span><br><span class="line"></span><br><span class="line">–     new Scanner(System.in).nextInt()的nextInt()方法</span><br><span class="line"></span><br><span class="line">–     Arrays类中的binarySearch()方法、sort()方法、equals()方法</span><br></pre></td></tr></table></figure>

<p><strong>举例2：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  public class Person&#123;</span><br><span class="line">  private int age;</span><br><span class="line">  public int getAge() &#123; *&#x2F;&#x2F;**声明方法getAge()*</span><br><span class="line">  return age; </span><br><span class="line">  &#125;</span><br><span class="line">  public void setAge(int i) &#123; *&#x2F;&#x2F;**声明方法setAge*</span><br><span class="line">  age &#x3D; i;    *&#x2F;&#x2F;**将参数i**的值赋给类的成员变量age*</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-3-如何声明方法"><a href="#5-3-如何声明方法" class="headerlink" title="5.3 如何声明方法"></a>5.3 如何声明方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">1****、声明方法的语法格式**</span><br><span class="line"></span><br><span class="line">[修饰符] 返回值类型 方法名([形参列表])[throws 异常列表]&#123;</span><br><span class="line">     方法体的功能代码</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">（1）一个完整的方法 &#x3D; 方法头 + 方法体。</span><br><span class="line"></span><br><span class="line">方法头就是[修饰符] 返回值类型 方法名([形参列表])[throws 异常列表]，也称为方法签名。通常调用方法时只需要关注方法头就可以，从方法头可以看出这个方法的功能和调用格式。</span><br><span class="line"></span><br><span class="line">方法体就是方法被调用后要执行的代码。对于调用者来说，不了解方法体如何实现的，并不影响方法的使用。</span><br><span class="line"></span><br><span class="line">**（2）方法头可能包含5个部分**</span><br><span class="line"></span><br><span class="line">**修饰符**：可选的。方法的修饰符也有很多，例如：public、protected、private、static、abstract、native、final、synchronized等，后面会一一学习。</span><br><span class="line"></span><br><span class="line">–     其中，权限修饰符有public、protected、private。在讲封装性之前，我们先默认使用pulbic修饰方法。</span><br><span class="line"></span><br><span class="line">–     其中，根据是否有static，可以将方法分为静态方法和非静态方法。其中静态方法又称为类方法，非静态方法又称为实例方法。咱们在讲static前先学习实例方法。</span><br><span class="line"></span><br><span class="line">**返回值类型**： 表示方法运行的结果的数据类型，方法执行后将结果返回到调用者。</span><br><span class="line"></span><br><span class="line">–     无返回值，则声明：void</span><br><span class="line"></span><br><span class="line">–     有返回值，则声明出返回值类型（可以是任意类型）。与方法体中“return 返回值”搭配使用</span><br><span class="line"></span><br><span class="line">**方法名**：属于标识符，命名时遵循标识符命名规则和规范，“见名知意”</span><br><span class="line"></span><br><span class="line">**形参列表**：表示完成方法体功能时需要外部提供的数据列表。可以包含零个，一个或多个参数。</span><br><span class="line"></span><br><span class="line">–     无论是否有参数，()不能省略</span><br><span class="line"></span><br><span class="line">–     如果有参数，每一个参数都要指定数据类型和参数名，多个参数之间使用逗号分隔，例如：</span><br><span class="line"></span><br><span class="line">•     一个参数： (数据类型 参数名)</span><br><span class="line"></span><br><span class="line">•     二个参数： (数据类型1 参数1, 数据类型2 参数2) </span><br><span class="line"></span><br><span class="line">–     参数的类型可以是基本数据类型、引用数据类型</span><br><span class="line"></span><br><span class="line">**throws 异常列表**：可选，在【第09章-异常处理】章节再讲</span><br><span class="line"></span><br><span class="line">**（3）方法体**：方法体必须有&#123;&#125;括起来，在&#123;&#125;中编写完成方法功能的代码</span><br><span class="line"></span><br><span class="line">**（4）关于方法体中return语句的说明：**</span><br><span class="line"></span><br><span class="line">return语句的作用是结束方法的执行，并将方法的结果返回去</span><br><span class="line"></span><br><span class="line">如果返回值类型不是void，方法体中必须保证一定有 return 返回值; 语句，并且要求该返回值结果的类型与声明的返回值类型一致或兼容。</span><br><span class="line"></span><br><span class="line">如果返回值类型为void时，方法体中可以没有return语句，如果要用return语句提前结束方法的执行，那么return后面不能跟返回值，直接写return ; 就可以。</span><br><span class="line"></span><br><span class="line">return语句后面就不能再写其他代码了，否则会报错：Unreachable code</span><br><span class="line"></span><br><span class="line">补充：方法的分类：按照是否有形参及返回值</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212149493.gif" alt="image-20220320000047155"></p>
<p><strong>2、类比举例</strong></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212149572.gif" alt="image-20220503102323689"></p>
<p><strong>3、代码示例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.test04.method;</span><br><span class="line"></span><br><span class="line"> *&#x2F;***</span><br><span class="line"> *** *方法定义案例演示*</span><br><span class="line"> **&#x2F;*</span><br><span class="line"> public class MethodDefineDemo &#123;</span><br><span class="line">   *&#x2F;***</span><br><span class="line">   *** *无参无返回值方法的演示*</span><br><span class="line">   **&#x2F;*</span><br><span class="line">   public void sayHello()&#123;</span><br><span class="line">     System.out.println(&quot;hello&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;***</span><br><span class="line">   *** *有参无返回值方法的演示*</span><br><span class="line">   ** @*param length int *第一个参数，表示矩形的长*</span><br><span class="line">   *** *@*param width int *第二个参数，表示矩形的宽*</span><br><span class="line">   *** *@*param sign char *第三个参数，表示填充矩形图形的符号*</span><br><span class="line">   **&#x2F;*</span><br><span class="line">   public void printRectangle(int length, int width, char sign)&#123;</span><br><span class="line">     for (int i &#x3D; 1; i &lt;&#x3D; length ; i++) &#123;</span><br><span class="line">       for(int j&#x3D;1; j &lt;&#x3D; width; j++)&#123;</span><br><span class="line">         System.out.print(sign);</span><br><span class="line">       &#125;</span><br><span class="line">       System.out.println();</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;***</span><br><span class="line">   *** *无参有返回值方法的演示*</span><br><span class="line">   ** @*return</span><br><span class="line">   **&#x2F;*</span><br><span class="line">   public int getIntBetweenOneToHundred()&#123;</span><br><span class="line">     return (int)(Math.random()*100+1);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;***</span><br><span class="line">   *** *有参有返回值方法的演示*</span><br><span class="line">   ** @*param a int *第一个参数，要比较大小的整数之一*</span><br><span class="line">   *** *@*param b int *第二个参数，要比较大小的整数之二*</span><br><span class="line">   *** *@*return int *比较大小的两个整数中较大者的值*</span><br><span class="line">   **&#x2F;*</span><br><span class="line">   public int max(int a, int b)&#123;</span><br><span class="line">     return a &gt; b ? a : b;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-4-如何调用实例方法"><a href="#5-4-如何调用实例方法" class="headerlink" title="5.4 如何调用实例方法"></a>5.4 如何调用实例方法</h3><p>方法通过方法名被调用，且只有被调用才会执行。</p>
<p><strong>1</strong>、方法调用语法格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">对象.方法名([实参列表])</span><br></pre></td></tr></table></figure>

<p><strong>2、示例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">举例1：</span><br><span class="line"></span><br><span class="line">package com.atguigu.test04.method;</span><br><span class="line"></span><br><span class="line"> *&#x2F;***</span><br><span class="line"> *** *方法调用案例演示*</span><br><span class="line"> **&#x2F;*</span><br><span class="line"> public class MethodInvokeDemo &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     *&#x2F;&#x2F;**创建对象*</span><br><span class="line">     MethodDefineDemo md &#x3D; new MethodDefineDemo();</span><br><span class="line"></span><br><span class="line">     System.out.println(&quot;-----------------------方法调用演示-------------------------&quot;);</span><br><span class="line">     </span><br><span class="line">     *&#x2F;&#x2F;**调用MethodDefineDemo**类中无参无返回值的方法sayHello*</span><br><span class="line">     md.sayHello();</span><br><span class="line">     md.sayHello();</span><br><span class="line">     md.sayHello();</span><br><span class="line">     *&#x2F;&#x2F;**调用一次，执行一次，不调用不执行*</span><br><span class="line">     </span><br><span class="line">     System.out.println(&quot;------------------------------------------------&quot;);</span><br><span class="line">     *&#x2F;&#x2F;**调用MethodDefineDemo**类中有参无返回值的方法printRectangle*</span><br><span class="line">     md.printRectangle(5,10,&#39;@&#39;);</span><br><span class="line">     </span><br><span class="line">     System.out.println(&quot;------------------------------------------------&quot;);</span><br><span class="line">     *&#x2F;&#x2F;**调用MethodDefineDemo**类中无参有返回值的方法getIntBetweenOneToHundred*</span><br><span class="line">     md.getIntBetweenOneToHundred();*&#x2F;&#x2F;**语法没问题，就是结果丢失*</span><br><span class="line">     </span><br><span class="line">     int num &#x3D; md.getIntBetweenOneToHundred();</span><br><span class="line">     System.out.println(&quot;num &#x3D; &quot; + num);</span><br><span class="line">     </span><br><span class="line">     System.out.println(md.getIntBetweenOneToHundred());</span><br><span class="line">     *&#x2F;&#x2F;**上面的代码调用了getIntBetweenOneToHundred**三次，这个方法执行了三次*</span><br><span class="line">     </span><br><span class="line">     System.out.println(&quot;------------------------------------------------&quot;);</span><br><span class="line">     *&#x2F;&#x2F;**调用MethodDefineDemo**类中有参有返回值的方法max*</span><br><span class="line">     md.max(3,6);*&#x2F;&#x2F;**语法没问题，就是结果丢失*</span><br><span class="line">     </span><br><span class="line">     int bigger &#x3D; md.max(5,6);</span><br><span class="line">     System.out.println(&quot;bigger &#x3D; &quot; + bigger);</span><br><span class="line">     </span><br><span class="line">     System.out.println(&quot;8,3中较大者是：&quot; + md.max(8,9));</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">举例2：</span><br><span class="line"></span><br><span class="line">*&#x2F;&#x2F;1**、创建Scanner**的对象*</span><br><span class="line"> Scanner input &#x3D; new Scanner(System.in);*&#x2F;&#x2F;System.in**默认代表键盘输入*</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;2**、提示输入xx*</span><br><span class="line"> System.out.print(&quot;请输入一个整数：&quot;); *&#x2F;&#x2F;**对象.**非静态方法(**实参列表)*</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;3**、接收输入内容*</span><br><span class="line"> int num &#x3D; input.nextInt(); *&#x2F;&#x2F;**对象.**非静态方法()</span><br></pre></td></tr></table></figure>



<h3 id="5-5-使用的注意点"><a href="#5-5-使用的注意点" class="headerlink" title="5.5 使用的注意点"></a>5.5 使用的注意点</h3><p>（1）必须先声明后使用，且方法必须定义在类的内部</p>
<p>（2）调用一次就执行一次，不调用不执行。</p>
<p>（3）方法中可以调用类中的方法或属性，不可以在方法内部定义方法。</p>
<p>正确示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">类&#123;</span><br><span class="line">   方法1()&#123;</span><br><span class="line">     </span><br><span class="line">   &#125;</span><br><span class="line">   方法2()&#123;</span><br><span class="line">     </span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>错误示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">类&#123;</span><br><span class="line">   方法1()&#123;</span><br><span class="line">     方法2()&#123; *&#x2F;&#x2F;**位置错误*</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h3 id="5-6-关键字return的使用"><a href="#5-6-关键字return的使用" class="headerlink" title="5.6 关键字return的使用"></a>5.6 关键字return的使用</h3><p>return在方法中的作用：</p>
<p>–     作用1：结束一个方法</p>
<p>–     作用2：结束一个方法的同时，可以返回数据给方法的调用者</p>
<p>注意点：在return关键字的直接后面不能声明执行语句</p>
<h3 id="5-7-方法调用内存分析"><a href="#5-7-方法调用内存分析" class="headerlink" title="5.7 方法调用内存分析"></a>5.7 方法调用内存分析</h3><p>方法没有被调用的时候，都在方法区中的字节码文件(.class)中存储。</p>
<p>方法被调用的时候，需要进入到栈内存中运行。方法每调用一次就会在栈中有一个入栈动作，即给当前方法开辟一块独立的内存区域，用于存储当前方法的局部变量的值。</p>
<p>当方法执行结束后，会释放该内存，称为出栈，如果方法有返回值，就会把结果返回调用处，如果没有返回值，就直接结束，回到调用处继续执行下一条指令。</p>
<p>栈结构：先进后出，后进先出。</p>
<p>举例分析：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     Person p1 &#x3D; new Person();</span><br><span class="line">     p1.eat();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   public static void eat() &#123;</span><br><span class="line">     sleep();</span><br><span class="line">     System.out.println(&quot;人：吃饭&quot;);</span><br><span class="line">   &#125;</span><br><span class="line">   public static void sleep()&#123;</span><br><span class="line">     System.out.println(&quot;人：睡觉&quot;);</span><br><span class="line">     doSport();</span><br><span class="line">   &#125;</span><br><span class="line">   public static void doSport()&#123;</span><br><span class="line">     System.out.println(&quot;人：运动&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>内存分析：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212150395.gif" alt="img"></p>
<h3 id="5-8-练习"><a href="#5-8-练习" class="headerlink" title="5.8 练习"></a>5.8 练习</h3><p><strong>练习1：</strong>创建一个Person类，其定义如下：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212150716.gif" alt="image-20220320001337145"></p>
<p>要求：</p>
<p>(1)创建Person类的对象，设置该对象的name、age和sex属性，调用study方法，输出字符串“studying”，调用showAge()方法显示age值，调用addAge()方法给对象的age属性值增加2岁。 (2)创建第二个对象，执行上述操作，体会同一个类的不同对象之间的关系。</p>
<p><strong>练习2：</strong>利用面向对象的编程方法，设计圆类Circle，包含属性（半径）和计算圆面积的方法。定义测试类，创建该Circle类的对象，并进行测试。</p>
<p><strong>练习3：</strong></p>
<p>3.1 编写程序，声明一个method方法，在方法中打印一个10<em>8的</em>型矩形，在main方法中调用该方法。</p>
<p>3.2 修改上一个程序，在method方法中，除打印一个10<em>8的</em>型矩形外，再计算该矩形的面积，并将其作为方法返回值。在main方法中调用该方法，接收返回的面积值并打印。</p>
<p>3.3 修改上一个程序，在method方法提供m和n两个参数，方法中打印一个m<em>n的</em>型矩形，并计算该矩形的面积， 将其作为方法返回值。在main方法中调用该方法，接收返回的面积值并打印。</p>
<p><strong>练习4：</strong>声明一个日期类型MyDate：有属性：年year,月month，日day。创建2个日期对象，分别赋值为：你的出生日期，你对象的出生日期，并显示信息。</p>
<p><strong>练习5（课下练习）：</strong>用面向对象的方式编写用户登录程序。</p>
<p>用户类：</p>
<p>属性：用户名，密码</p>
<p>方法：登录</p>
<p>界面类：</p>
<p>在界面类中添加main方法，接受用户输入，并调用用户类的登录方法进行验证。</p>
<p>–     输出：</p>
<p>•     登录失败：用户名或密码错误！</p>
<p>•     登录成功：欢迎你，用户名！</p>
<p>参考代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">public class User &#123;</span><br><span class="line">   String name;</span><br><span class="line">   String password;*&#x2F;&#x2F;**密码*</span><br><span class="line"></span><br><span class="line">   *&#x2F;***</span><br><span class="line">   *** *实现用户登录的判断*</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line">   ** @*param inputName *输入的用户名*</span><br><span class="line">   *** *@*param inputPwd *输入的密码*</span><br><span class="line">   **&#x2F;*</span><br><span class="line">   public void login(String inputName,String inputPwd)&#123;</span><br><span class="line">     if(name.equals(inputName) &amp;&amp; password.equals(inputPwd))&#123;</span><br><span class="line">       System.out.println(&quot;登录成功：欢迎你，&quot; + name);</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">       System.out.println(&quot;登录失败：用户名或密码错误！&quot;);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;***</span><br><span class="line">   *** *实现用户登录的判断*</span><br><span class="line">   ** @*param inputName *输入的用户名*</span><br><span class="line">   *** *@*param inputPwd *输入的密码*</span><br><span class="line">   *** *@*return true*:**登录成功* false*:**登录失败*</span><br><span class="line">   **&#x2F;*</span><br><span class="line">   public boolean login1(String inputName,String inputPwd)&#123;</span><br><span class="line"> *&#x2F;&#x2F;    if(name.equals(inputName) &amp;&amp; password.equals(inputPwd))&#123;*</span><br><span class="line"> *&#x2F;&#x2F;      return true;*</span><br><span class="line"> *&#x2F;&#x2F;    &#125;else&#123;*</span><br><span class="line"> *&#x2F;&#x2F;      return false;*</span><br><span class="line"> *&#x2F;&#x2F;    &#125;*</span><br><span class="line"></span><br><span class="line">     *&#x2F;&#x2F;**简化为：*</span><br><span class="line">     return name.equals(inputName) &amp;&amp; password.equals(inputPwd);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> *** *用户界面类*UserInterface*：*</span><br><span class="line"></span><br><span class="line">***</span><br><span class="line"></span><br><span class="line"> *** *-* *在用户界面类中添加*main*方法，接受用户输入，并调用用户类的登录方法进行验证。*</span><br><span class="line"> *** *-* *输出：*</span><br><span class="line"> ***   *-* *登录失败：用户名或密码错误！*</span><br><span class="line"> ***   *-* *登录成功：欢迎你，用户名！*</span><br><span class="line"> **&#x2F;*</span><br><span class="line"> public class UserInterface &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">     User u1 &#x3D; new User();</span><br><span class="line">     u1.name &#x3D; &quot;Tom&quot;;</span><br><span class="line">     u1.password &#x3D; &quot;abc123&quot;;</span><br><span class="line">     Scanner scanner &#x3D; new Scanner(System.in);</span><br><span class="line">     System.out.print(&quot;请输入用户名：&quot;);</span><br><span class="line">     String name &#x3D; scanner.next();</span><br><span class="line">     System.out.print(&quot;请输入密码：&quot;);</span><br><span class="line">     String pwd &#x3D; scanner.next();</span><br><span class="line">     </span><br><span class="line">     *&#x2F;&#x2F;**演示1**：*</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;    u1.login(name,pwd);*</span><br><span class="line"></span><br><span class="line">     *&#x2F;&#x2F;**演示2**：*</span><br><span class="line">     boolean isLogin &#x3D; u1.login1(name, pwd);</span><br><span class="line">     if(isLogin)&#123;</span><br><span class="line">       System.out.println(&quot;登录成功：欢迎你，&quot; + u1.name);</span><br><span class="line">     &#125;else&#123;</span><br><span class="line">       System.out.println(&quot;登录失败：用户名或密码错误！&quot;);</span><br><span class="line">     &#125;</span><br><span class="line">     </span><br><span class="line">     scanner.close();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h2 id="6-对象数组"><a href="#6-对象数组" class="headerlink" title="6. 对象数组"></a>6. 对象数组</h2><p>数组的元素可以是基本数据类型，也可以是引用数据类型。当元素是引用类型中的类时，我们称为对象数组。</p>
<p><strong>1、案例</strong></p>
<p>定义类Student，包含三个属性：学号number(int)，年级state(int)，成绩score(int)。 创建20个学生对象，学号为1到20，年级和成绩都由随机数确定。</p>
<p>问题一：打印出3年级(state值为3）的学生信息。</p>
<p>问题二：使用冒泡排序按学生成绩排序，并遍历所有学生信息</p>
<p>提示：</p>
<p>\1) 生成随机数：Math.random()，返回值类型double; </p>
<p>\2) 四舍五入取整：Math.round(double d)，返回值类型long。</p>
<p>定义类Student<strong>，包含三个属性：学号number(int)</strong>，年级state(int)<strong>，成绩score(int)</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line"></span><br><span class="line">   int number;*&#x2F;&#x2F;**学号*</span><br><span class="line">   int state;*&#x2F;&#x2F;**年级*</span><br><span class="line">   int score;*&#x2F;&#x2F;**成绩*</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   public void info()&#123;</span><br><span class="line">    System.out.println(&quot;number : &quot; + number </span><br><span class="line">        \+ &quot;,state : &quot; + state + &quot;,score : &quot; + score);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">public class StudentTest &#123;</span><br><span class="line"></span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">    *&#x2F;&#x2F; Student s1 &#x3D; new Student();*</span><br><span class="line">    *&#x2F;&#x2F; s1.number &#x3D; 1;*</span><br><span class="line">    *&#x2F;&#x2F; s1.state &#x3D; (int)(Math.random() \* 6 + 1);&#x2F;&#x2F;[1,6]*</span><br><span class="line">    *&#x2F;&#x2F; s1.score &#x3D; (int)(Math.random() \* 101);&#x2F;&#x2F;[0,100]*</span><br><span class="line">    *&#x2F;&#x2F;*</span><br><span class="line">    *&#x2F;&#x2F; Student s2 &#x3D; new Student();*</span><br><span class="line">    *&#x2F;&#x2F; s2.number &#x3D; 2;*</span><br><span class="line">    *&#x2F;&#x2F; s2.state &#x3D; (int)(Math.random() \* 6 + 1);&#x2F;&#x2F;[1,6]*</span><br><span class="line">    *&#x2F;&#x2F; s2.score &#x3D; (int)(Math.random() \* 101);&#x2F;&#x2F;[0,100]*</span><br><span class="line">    *&#x2F;&#x2F;*</span><br><span class="line">    *&#x2F;&#x2F; &#x2F;&#x2F;....*</span><br><span class="line">    *&#x2F;&#x2F;* *对象数组*</span><br><span class="line">    *&#x2F;&#x2F; String[] arr &#x3D; new String[10];*</span><br><span class="line">    *&#x2F;&#x2F;* *数组的创建*</span><br><span class="line">    Student[] students &#x3D; new Student[20];</span><br><span class="line">    *&#x2F;&#x2F;* *通过循环结构给数组的属性赋值*</span><br><span class="line">    for (int i &#x3D; 0; i &lt; students.length; i++) &#123;</span><br><span class="line">      *&#x2F;&#x2F;* *数组元素的赋值*</span><br><span class="line">      students[i] &#x3D; new Student();</span><br><span class="line">      *&#x2F;&#x2F;* *数组元素是一个对象，给对象的各个属性赋值*</span><br><span class="line">      students[i].number &#x3D; (i + 1);</span><br><span class="line">      students[i].state &#x3D; (int) (Math.random() * 6 + 1);*&#x2F;&#x2F; [1,6]*</span><br><span class="line">      students[i].score &#x3D; (int) (Math.random() * 101);*&#x2F;&#x2F; [0,100]*</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    *&#x2F;&#x2F;* *问题一：打印出3**年级(state**值为3**）的学生信息。*</span><br><span class="line">    for (int i &#x3D; 0; i &lt; students.length; i++) &#123;</span><br><span class="line">     </span><br><span class="line">      if (students[i].state &#x3D;&#x3D; 3) &#123;</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;      System.out.println(*</span><br><span class="line"> *&#x2F;&#x2F;          &quot;number:&quot; + students[i].number + &quot;,state:&quot; + students[i].state + &quot;,score:&quot; + students[i].score);*</span><br><span class="line">        students[i].info();</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">     </span><br><span class="line">     &#125;</span><br><span class="line">    System.out.println(&quot;******************************&quot;);</span><br><span class="line">    *&#x2F;&#x2F;* *问题二：使用冒泡排序按学生成绩排序，并遍历所有学生信息*</span><br><span class="line">    *&#x2F;&#x2F;* *排序前*</span><br><span class="line">    for (int i &#x3D; 0; i &lt; students.length; i++) &#123;</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;     System.out.println(*</span><br><span class="line"> *&#x2F;&#x2F;        &quot;number:&quot; + students[i].number + &quot;,state:&quot; +* </span><br><span class="line"> *&#x2F;&#x2F;            students[i].state + &quot;,score:&quot; + students[i].score);*</span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">      students[i].info();</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    System.out.println();</span><br><span class="line">    *&#x2F;&#x2F;* *排序：*</span><br><span class="line">    for (int i &#x3D; 0; i &lt; students.length - 1; i++) &#123;</span><br><span class="line">      for (int j &#x3D; 0; j &lt; students.length - 1 - i; j++) &#123;</span><br><span class="line">        if (students[j].score &gt; students[j + 1].score) &#123;</span><br><span class="line">          Student temp &#x3D; students[j];</span><br><span class="line">          students[j] &#x3D; students[j + 1];</span><br><span class="line">          students[j + 1] &#x3D; temp;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    *&#x2F;&#x2F;* *排序后：*</span><br><span class="line">    for (int i &#x3D; 0; i &lt; students.length; i++) &#123;</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;     System.out.println(*</span><br><span class="line"> *&#x2F;&#x2F;        &quot;number:&quot; + students[i].number + &quot;,state:&quot; +* </span><br><span class="line"> *&#x2F;&#x2F;            students[i].state + &quot;,score:&quot; + students[i].score);*</span><br><span class="line">      students[i].info();</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>内存解析：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212151364.gif" alt="img"></p>
<p>2、<strong>注意点</strong></p>
<p>对象数组，首先要创建数组对象本身，即确定数组的长度，然后再创建每一个元素对象，如果不创建，数组的元素的默认值就是null，所以很容易出现空指针异常NullPointerException。</p>
<p><strong>3、练习</strong></p>
<p>（1）定义矩形类Rectangle，包含长、宽属性，area()返回矩形面积的方法，perimeter()返回矩形周长的方法，String getInfo()返回圆对象的详细信息（如：长、宽、面积、周长等数据）的方法</p>
<p>（2）在测试类中创建长度为3的Rectangle[]数组，用来装3个矩形对象，并给3个矩形对象的长分别赋值为10,20,30，宽分别赋值为5,15,25，遍历输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">package com.atguigu.test08.array;</span><br><span class="line"></span><br><span class="line"> public class Rectangle &#123;</span><br><span class="line">   double length;</span><br><span class="line">   double width;</span><br><span class="line"></span><br><span class="line">   public double area()&#123;*&#x2F;&#x2F;**面积*</span><br><span class="line">     return length * width;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public double perimeter()&#123;*&#x2F;&#x2F;**周长*</span><br><span class="line">     return 2 * (length + width);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public String getInfo()&#123;</span><br><span class="line">     return &quot;长：&quot; + length +</span><br><span class="line">         &quot;，宽：&quot; + width +</span><br><span class="line">         &quot;，面积：&quot; + area() +</span><br><span class="line">         &quot;，周长：&quot; + perimeter();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">package com.atguigu.test08.array;</span><br><span class="line"></span><br><span class="line"> public class ObjectArrayTest &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     *&#x2F;&#x2F;**声明并创建一个长度为3**的矩形对象数组*</span><br><span class="line">     Rectangle[] array &#x3D; new Rectangle[3];</span><br><span class="line"></span><br><span class="line">     *&#x2F;&#x2F;**创建3**个矩形对象，并为对象的实例变量赋值，*</span><br><span class="line">     *&#x2F;&#x2F;3**个矩形对象的长分别是10,20,30*</span><br><span class="line">     *&#x2F;&#x2F;3**个矩形对象的宽分别是5,15,25*</span><br><span class="line">     *&#x2F;&#x2F;**调用矩形对象的getInfo()**返回对象信息后输出*</span><br><span class="line">     for (int i &#x3D; 0; i &lt; array.length; i++) &#123;</span><br><span class="line">       *&#x2F;&#x2F;**创建矩形对象*</span><br><span class="line">       array[i] &#x3D; new Rectangle();</span><br><span class="line">     </span><br><span class="line">       *&#x2F;&#x2F;**为矩形对象的成员变量赋值*</span><br><span class="line">       array[i].length &#x3D; (i+1) * 10;</span><br><span class="line">       array[i].width &#x3D; (2*i+1) * 5;</span><br><span class="line">     </span><br><span class="line">       *&#x2F;&#x2F;**获取并输出对象对象的信息*</span><br><span class="line">       System.out.println(array[i].getInfo());</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>内存解析：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212151866.gif" alt="img"></p>
<h2 id="7-再谈方法"><a href="#7-再谈方法" class="headerlink" title="7. 再谈方法"></a>7. 再谈方法</h2><h3 id="7-1-方法的重载（overload）"><a href="#7-1-方法的重载（overload）" class="headerlink" title="7.1 方法的重载（overload）"></a>7.1 方法的重载（overload）</h3><h4 id="7-1-1-概念及特点"><a href="#7-1-1-概念及特点" class="headerlink" title="7.1.1 概念及特点"></a>7.1.1 概念及特点</h4><p><strong>方法重载</strong>：在同一个类中，允许存在一个以上的同名方法，只要它们的参数列表不同即可。</p>
<p>–     参数列表不同，意味着参数个数或参数类型的不同</p>
<p><strong>重载的特点</strong>：与修饰符、返回值类型无关，只看参数列表，且参数列表必须不同。(参数个数或参数类型)。调用时，根据方法参数列表的不同来区别。</p>
<p><strong>重载方法调用</strong>：JVM通过方法的参数列表，调用匹配的方法。</p>
<p>–     先找个数、类型最匹配的</p>
<p>–     再找个数和类型可以兼容的，如果同时多个方法可以兼容将会报错</p>
<h4 id="7-1-2-示例"><a href="#7-1-2-示例" class="headerlink" title="7.1.2 示例"></a>7.1.2 示例</h4><p>举例1：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;System.out.println()**方法就是典型的重载方法，其内部的声明形式如下：*</span><br><span class="line"> public class PrintStream &#123;</span><br><span class="line">   public void println(byte x)</span><br><span class="line">   public void println(short x)</span><br><span class="line">   public void println(int x)</span><br><span class="line">   public void println(long x)</span><br><span class="line">   public void println(float x)</span><br><span class="line">   public void println(double x)</span><br><span class="line">   public void println(char x)</span><br><span class="line">   public void println(double x)</span><br><span class="line">   public void println()</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> public class HelloWorld&#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     System.out.println(3);</span><br><span class="line">     System.out.println(1.2f);</span><br><span class="line">     System.out.println(&quot;hello!&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p> 举例2：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;**返回两个整数的和*</span><br><span class="line"> public int add(int x,int y)&#123;</span><br><span class="line">   return x+y;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;**返回三个整数的和*</span><br><span class="line"> public int add(int x,int y,int z)&#123;</span><br><span class="line">   return x+y+z;</span><br><span class="line"> &#125;</span><br><span class="line"> *&#x2F;&#x2F;**返回两个小数的和*</span><br><span class="line"> public double add(double x,double y)&#123;</span><br><span class="line">   return x+y;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> 举例3：方法的重载和返回值类型无关</span><br><span class="line"></span><br><span class="line">public class MathTools &#123;</span><br><span class="line">   *&#x2F;&#x2F;**以下方法不是重载，会报错*</span><br><span class="line">   public int getOneToHundred()&#123;</span><br><span class="line">     return (int)(Math.random()*100);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public double getOneToHundred()&#123;</span><br><span class="line">     return Math.random()*100;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h4 id="7-1-3-练习"><a href="#7-1-3-练习" class="headerlink" title="7.1.3 练习"></a>7.1.3 练习</h4><p><strong>练习1：</strong>判 断与void show(int a,char b,double c){}构成重载的有：</p>
<p>a)void show(int x,char y,double z){}   <em>// no</em></p>
<p> b)int show(int a,double c,char b){}   <em>// yes</em></p>
<p> c) void show(int a,double c,char b){}  <em>// yes</em></p>
<p> d) boolean show(int c,char b){}     <em>// yes</em></p>
<p> e) void show(double c){}         <em>// yes</em></p>
<p> f) double show(int x,char y,double z){} <em>// no</em></p>
<p> g) void shows(){double c}        <em>// no</em></p>
<p><strong>练习2</strong>：编写程序，定义三个重载方法并调用。</p>
<p>方法名为mOL。</p>
<p>三个方法分别接收一个int参数、两个int参数、一个字符串参数。分别执行平方运算并输出结果，相乘并输出结果，输出字符串信息。</p>
<p>在主类的main ()方法中分别用参数区别调用三个方法。</p>
<p><strong>练习3</strong>：定义三个重载方法max()，第一个方法求两个int值中的最大值，第二个方法求两个double值中的最大值，第三个方法求三个double值中的最大值，并分别调用三个方法。</p>
<h3 id="7-2-可变个数的形参"><a href="#7-2-可变个数的形参" class="headerlink" title="7.2 可变个数的形参"></a>7.2 可变个数的形参</h3><p>在<strong>JDK 5.0</strong> 中提供了<strong>Varargs(</strong>variable number of arguments<strong>)</strong>机制。即当定义一个方法时，形参的类型可以确定，但是形参的个数不确定，那么可以考虑使用可变个数的形参。</p>
<p><strong>格式：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">方法名(参数的类型名 ...参数名)</span><br></pre></td></tr></table></figure>

<p><strong>举例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;JDK 5.0**以前：采用数组形参来定义方法，传入多个同一类型变量*</span><br><span class="line"> public static void test(int a ,String[] books);</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;JDK5.0**：采用可变个数形参来定义方法，传入多个同一类型变量*</span><br><span class="line"> public static void test(int a ,String...books);</span><br></pre></td></tr></table></figure>

<p><strong>特点：</strong></p>
<p>可变参数：方法参数部分指定类型的参数个数是可变多个：0个，1个或多个</p>
<p>可变个数形参的方法与同名的方法之间，彼此构成重载</p>
<p>可变参数方法的使用与方法参数部分使用数组是一致的，二者不能同时声明，否则报错。</p>
<p>方法的参数部分有可变形参，需要放在形参声明的最后</p>
<p>在一个方法的形参中，最多只能声明一个可变个数的形参</p>
<p><strong>案例分析：</strong></p>
<p>案例1：n个字符串进行拼接，每一个字符串之间使用某字符进行分割，如果没有传入字符串，那么返回空字符串””</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">public class StringTools &#123;</span><br><span class="line">   String concat(char seperator, String... args)&#123;</span><br><span class="line">     String str &#x3D; &quot;&quot;;</span><br><span class="line">     for (int i &#x3D; 0; i &lt; args.length; i++) &#123;</span><br><span class="line">       if(i&#x3D;&#x3D;0)&#123;</span><br><span class="line">         str +&#x3D; args[i];</span><br><span class="line">       &#125;else&#123;</span><br><span class="line">         str +&#x3D; seperator + args[i];</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     return str;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">package com.atguigu.test05.param;</span><br><span class="line"></span><br><span class="line"> public class StringToolsTest &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     StringTools tools &#x3D; new StringTools();</span><br><span class="line"></span><br><span class="line">     System.out.println(tools.concat(&#39;-&#39;));</span><br><span class="line">     System.out.println(tools.concat(&#39;-&#39;,&quot;hello&quot;));</span><br><span class="line">     System.out.println(tools.concat(&#39;-&#39;,&quot;hello&quot;,&quot;world&quot;));</span><br><span class="line">     System.out.println(tools.concat(&#39;-&#39;,&quot;hello&quot;,&quot;world&quot;,&quot;java&quot;));</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">案例2：求n个整数的和</span><br><span class="line"></span><br><span class="line">public class NumberTools &#123;</span><br><span class="line">   public int total(int[] nums)&#123;</span><br><span class="line">     int sum &#x3D; 0;</span><br><span class="line">     for (int i &#x3D; 0; i &lt; nums.length; i++) &#123;</span><br><span class="line">       sum +&#x3D; nums[i];</span><br><span class="line">     &#125;</span><br><span class="line">     return sum;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public int sum(int... nums)&#123;</span><br><span class="line">     int sum &#x3D; 0;</span><br><span class="line">     for (int i &#x3D; 0; i &lt; nums.length; i++) &#123;</span><br><span class="line">       sum +&#x3D; nums[i];</span><br><span class="line">     &#125;</span><br><span class="line">     return sum;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">public class TestVarParam &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     NumberTools tools &#x3D; new NumberTools();</span><br><span class="line"></span><br><span class="line">     System.out.println(tools.sum());*&#x2F;&#x2F;0**个实参*</span><br><span class="line">     System.out.println(tools.sum(5));*&#x2F;&#x2F;1**个实参*</span><br><span class="line">     System.out.println(tools.sum(5,6,2,4));*&#x2F;&#x2F;4**个实参*</span><br><span class="line">     System.out.println(tools.sum(new int[]&#123;5,6,2,4&#125;));*&#x2F;&#x2F;**传入数组实参*</span><br><span class="line">     </span><br><span class="line">     System.out.println(&quot;------------------------------------&quot;);</span><br><span class="line">     System.out.println(tools.total(new int[]&#123;&#125;));*&#x2F;&#x2F;0**个元素的数组*</span><br><span class="line">     System.out.println(tools.total(new int[]&#123;5&#125;));*&#x2F;&#x2F;1**个元素的数组*</span><br><span class="line">     System.out.println(tools.total(new int[]&#123;5,6,2,4&#125;));*&#x2F;&#x2F;**传入数组实参*</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>案例3：如下的方法彼此构成重载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">public class MathTools &#123;</span><br><span class="line">   *&#x2F;&#x2F;**求两个整数的最大值*</span><br><span class="line">   public int max(int a,int b)&#123;</span><br><span class="line">     return a&gt;b?a:b;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;**求两个小数的最大值*</span><br><span class="line">   public double max(double a, double b)&#123;</span><br><span class="line">     return a&gt;b?a:b;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;**求三个整数的最大值*</span><br><span class="line">   public int max(int a, int b, int c)&#123;</span><br><span class="line">     return max(max(a,b),c);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;**求n**个整数的最大值*</span><br><span class="line">   public int max(int... nums)&#123;</span><br><span class="line">     int max &#x3D; nums[0];*&#x2F;&#x2F;**如果没有传入整数，或者传入null**，这句代码会报异常*</span><br><span class="line">     for (int i &#x3D; 1; i &lt; nums.length; i++) &#123;</span><br><span class="line">       if(nums[i] &gt; max)&#123;</span><br><span class="line">         max &#x3D; nums[i];</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     return max;</span><br><span class="line">   &#125;</span><br><span class="line">   *&#x2F;\*  &#x2F;&#x2F;**求n**整数的最大值*</span><br><span class="line">   *public int max(int[] nums)&#123; &#x2F;&#x2F;**编译就报错，与(int... nums)**无法区分*</span><br><span class="line">     *int max &#x3D; nums[0];&#x2F;&#x2F;**如果没有传入整数，或者传入null**，这句代码会报异常*</span><br><span class="line">     *for (int i &#x3D; 1; i &lt; nums.length; i++) &#123;*</span><br><span class="line">       *if(nums[i] &gt; max)&#123;*</span><br><span class="line">         *max &#x3D; nums[i];*</span><br><span class="line">       *&#125;*</span><br><span class="line">     *&#125;*</span><br><span class="line">     *return max;*</span><br><span class="line">   *&#125;\*&#x2F;*</span><br><span class="line"></span><br><span class="line"> *&#x2F;\*  &#x2F;&#x2F;**求n**整数的最大值*</span><br><span class="line">   *public int max(int first, int... nums)&#123; &#x2F;&#x2F;**当前类不报错，但是调用时会引起多个方法同时匹配*</span><br><span class="line">     *int max &#x3D; first;*</span><br><span class="line">     *for (int i &#x3D; 0; i &lt; nums.length; i++) &#123;*</span><br><span class="line">       *if(nums[i] &gt; max)&#123;*</span><br><span class="line">         *max &#x3D; nums[i];*</span><br><span class="line">       *&#125;*</span><br><span class="line">     *&#125;*</span><br><span class="line">     *return max;*</span><br><span class="line">   *&#125;\*&#x2F;*</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h3 id="7-3-方法的参数传递机制"><a href="#7-3-方法的参数传递机制" class="headerlink" title="7.3 方法的参数传递机制"></a>7.3 方法的参数传递机制</h3><h4 id="7-3-1-形参和实参"><a href="#7-3-1-形参和实参" class="headerlink" title="7.3.1 形参和实参"></a>7.3.1 形参和实参</h4><p>形参（formal parameter）：在定义方法时，方法名后面括号()中声明的变量称为形式参数，简称形参。</p>
<p>实参（actual parameter）：在调用方法时，方法名后面括号()中的使用的值/变量/表达式称为实际参数，简称实参。</p>
<h4 id="7-3-2-参数传递机制：值传递"><a href="#7-3-2-参数传递机制：值传递" class="headerlink" title="7.3.2 参数传递机制：值传递"></a>7.3.2 参数传递机制：值传递</h4><p>Java里方法的参数传递方式只有一种：值传递。 即将实际参数值的副本（复制品）传入方法内，而参数本身不受影响。</p>
<p>形参是基本数据类型：将实参基本数据类型变量的“数据值”传递给形参</p>
<p>形参是引用数据类型：将实参引用数据类型变量的“地址值”传递给形参</p>
<h4 id="7-3-3-举例"><a href="#7-3-3-举例" class="headerlink" title="7.3.3 举例"></a>7.3.3 举例</h4><p><strong>1、形参是基本数据类型</strong></p>
<p>案例：编写方法，交换两个整型变量的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">    int m &#x3D; 10;</span><br><span class="line">    int n &#x3D; 20;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    System.out.println(&quot;m &#x3D; &quot; + m + &quot;, n &#x3D; &quot; + n);</span><br><span class="line">    *&#x2F;&#x2F;**交换m**和n**的值*</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;   int temp &#x3D; m;*</span><br><span class="line"> *&#x2F;&#x2F;   m &#x3D; n;*</span><br><span class="line"> *&#x2F;&#x2F;   n &#x3D; temp;*</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    ValueTransferTest1 test &#x3D; new ValueTransferTest1();</span><br><span class="line">    test.swap(m, n);</span><br><span class="line">    </span><br><span class="line">    System.out.println(&quot;m &#x3D; &quot; + m + &quot;, n &#x3D; &quot; + n);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public void swap(int m,int n)&#123;</span><br><span class="line">    int temp &#x3D; m;</span><br><span class="line">    m &#x3D; n;</span><br><span class="line">    n &#x3D; temp;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>内存解析：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212152067.gif" alt="img"></p>
<p><strong>2、形参是引用数据类型</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public class Test &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    Data d1 &#x3D; new Data();</span><br><span class="line">    d1.m &#x3D; 10;</span><br><span class="line">    d1.n &#x3D; 20;</span><br><span class="line">    </span><br><span class="line">    System.out.println(&quot;m &#x3D; &quot; + d1.m + &quot;, n &#x3D; &quot; + d1.n);</span><br><span class="line">    </span><br><span class="line">    *&#x2F;&#x2F;**实现* *换序*</span><br><span class="line">    ValueTransferTest2 test &#x3D; new ValueTransferTest2();</span><br><span class="line">    test.swap(d1);  </span><br><span class="line">    System.out.println(&quot;m &#x3D; &quot; + d1.m + &quot;, n &#x3D; &quot; + d1.n);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line">   public void swap(Data data)&#123;</span><br><span class="line">    int temp &#x3D; data.m;</span><br><span class="line">    data.m &#x3D; data.n;</span><br><span class="line">    data.n &#x3D; temp;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">class Data&#123;</span><br><span class="line">   int m;</span><br><span class="line">   int n;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>内存解析：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212152773.gif" alt="img"></p>
<h4 id="7-3-4-练习"><a href="#7-3-4-练习" class="headerlink" title="7.3.4 练习"></a>7.3.4 练习</h4><p>练习1：判断如下程序输出的结果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public class AssignNewObject &#123;</span><br><span class="line">   public void swap(MyData my)&#123;</span><br><span class="line">     my &#x3D; new MyData(); *&#x2F;&#x2F;**考虑堆空间此新创建的对象，和main**中的data**对象是否有关*</span><br><span class="line">     int temp &#x3D; my.x;</span><br><span class="line">     my.x &#x3D; my.y;</span><br><span class="line">     my.y &#x3D; temp;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     AssignNewObject tools &#x3D; new AssignNewObject();</span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">     MyData data &#x3D; new MyData();</span><br><span class="line">     data.x &#x3D; 1;</span><br><span class="line">     data.y &#x3D; 2;</span><br><span class="line">     System.out.println(&quot;交换之前：x &#x3D; &quot; + data.x +&quot;,y &#x3D; &quot; + data.y);*&#x2F;&#x2F;*</span><br><span class="line">     tools.swap(data);*&#x2F;&#x2F;**调用完之后，x**与y**的值交换？*</span><br><span class="line">     System.out.println(&quot;交换之后：x &#x3D; &quot; + data.x +&quot;,y &#x3D; &quot; + data.y);*&#x2F;&#x2F;*</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> class MyData&#123;</span><br><span class="line">   int x ;</span><br><span class="line">   int y;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">练习2：如下操作是否可以实现数组排序</span><br><span class="line"></span><br><span class="line">public class ArrayTypeParam &#123;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;**冒泡排序，实现数组从小到大排序*</span><br><span class="line">   public void sort(int[] arr)&#123;</span><br><span class="line">     for (int i &#x3D; 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">       for (int j &#x3D; 0; j &lt; arr.length - 1 - i; j++) &#123;</span><br><span class="line">         if(arr[j] &gt; arr[j+1])&#123;</span><br><span class="line">           int temp &#x3D; arr[j];</span><br><span class="line">           arr[j] &#x3D; arr[j+1];</span><br><span class="line">           arr[j+1] &#x3D; temp;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   *&#x2F;&#x2F;**打印数组的元素*</span><br><span class="line">   public void print(int[] arr)&#123;</span><br><span class="line">     for (int i &#x3D; 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">       System.out.print(arr[i]+&quot; &quot;);</span><br><span class="line">     &#125;</span><br><span class="line">     System.out.println();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     ArrayTypeParam tools &#x3D; new ArrayTypeParam();</span><br><span class="line"></span><br><span class="line">     int[] nums &#x3D; &#123;4,3,1,6,7&#125;;</span><br><span class="line">     System.out.println(&quot;排序之前：&quot;);</span><br><span class="line">     tools.print(nums);</span><br><span class="line">     </span><br><span class="line">     tools.sort(nums);*&#x2F;&#x2F;**对nums**数组进行排序*</span><br><span class="line">     </span><br><span class="line">     System.out.println(&quot;排序之后：&quot;);</span><br><span class="line">     tools.print(nums);*&#x2F;&#x2F;**输出nums**数组的元素*</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">练习3：通过内存结构图，写出如下程序的输出结果</span><br><span class="line"></span><br><span class="line">*&#x2F;&#x2F;**栈：每个方法在调用时，都会有以栈帧的方法压入栈中。栈帧中保存了当前方法中声明的变量：方法内声明的，形参*</span><br><span class="line"> *&#x2F;&#x2F;**堆：存放**new**出来的**&quot;**东西**&quot;**：对象（成员变量在对象中）、数组实体（数组元素）。* </span><br><span class="line"> *&#x2F;&#x2F;**注意：变量前如果声明有类型，那么这就是一个新的刚要定义的变量。如果变量前没有声明类型，那就说明此变量在之前已经声明过。*</span><br><span class="line"> public class TransferTest3 &#123;</span><br><span class="line">   public static void main(String args[]) &#123;</span><br><span class="line">     TransferTest3 test &#x3D; new TransferTest3();</span><br><span class="line">     test.first();</span><br><span class="line">   &#125;</span><br><span class="line">   public void first() &#123;</span><br><span class="line">     int i &#x3D; 5;</span><br><span class="line">     Value v &#x3D; new Value();</span><br><span class="line">     v.i &#x3D; 25;</span><br><span class="line">     second(v, i);</span><br><span class="line">     System.out.println(v.i);</span><br><span class="line">   &#125;</span><br><span class="line">   public void second(Value v, int i) &#123;</span><br><span class="line">     i &#x3D; 0;</span><br><span class="line">     v.i &#x3D; 20;</span><br><span class="line">     Value val &#x3D; new Value();</span><br><span class="line">     v &#x3D; val;</span><br><span class="line">     System.out.println(v.i + &quot; &quot; + i);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> class Value &#123;</span><br><span class="line">   int i &#x3D; 15;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>内存解析：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212153523.jpg" alt="20220320_233145"></p>
<p>练习4：貌似是考查方法的参数传递</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212153002.gif" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">*&#x2F;&#x2F;**法一：*</span><br><span class="line"> public static void method(int a, int b) &#123;</span><br><span class="line">   *&#x2F;&#x2F;* *在不改变原本题目的前提下，如何写这个函数才能在main**函数中输出a&#x3D;100**，b&#x3D;200**？* </span><br><span class="line">   a &#x3D; a * 10;</span><br><span class="line">   b &#x3D; b * 20;</span><br><span class="line">   System.out.println(a);</span><br><span class="line">   System.out.println(b);</span><br><span class="line">   System.exit(0);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;**法二：*</span><br><span class="line"> public static void method(int a, int b) &#123;</span><br><span class="line"></span><br><span class="line">   PrintStream ps &#x3D; new PrintStream(System.out) &#123;</span><br><span class="line">     @Override</span><br><span class="line">     public void println(String x) &#123;</span><br><span class="line">   </span><br><span class="line">       if (&quot;a&#x3D;10&quot;.equals(x)) &#123;</span><br><span class="line">         x &#x3D; &quot;a&#x3D;100&quot;;</span><br><span class="line">       &#125; else if (&quot;b&#x3D;10&quot;.equals(x)) &#123;</span><br><span class="line">         x &#x3D; &quot;b&#x3D;200&quot;;</span><br><span class="line">       &#125;</span><br><span class="line">       super.println(x);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;;</span><br><span class="line">   </span><br><span class="line">   System.setOut(ps);</span><br><span class="line"></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>练习5：将对象作为参数传递给方法</p>
<p>（1）定义一个Circle类，包含一个double型的radius属性代表圆的半径，一个findArea()方法返回圆的面积。 （2）定义一个类PassObject，在类中定义一个方法printAreas()，该方法的定义如下：public void printAreas(Circle c, int time)，在printAreas方法中打印输出1到time之间的每个整数半径值，以及对应的面积。例如，times为5，则输出半径1，2，3，4，5，以及对应的圆面积。 （3）在main方法中调用printAreas()方法，调用完毕后输出当前半径值。程序运行结果如图所示。</p>
<p><img src=".images/clip_image072.gif" alt="img"></p>
<h3 id="7-4-递归-recursion-方法"><a href="#7-4-递归-recursion-方法" class="headerlink" title="7.4 递归(recursion)方法"></a>7.4 递归(recursion)方法</h3><p>举例1：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212153708.gif" alt="image-20220521160246138"></p>
<p>举例2：</p>
<p>从前有座山,山上有座庙,庙里有个老和尚,老和尚在给小和尚讲故事,讲的啥?<br>    从前有座山,山上有座庙,庙里有个老和尚,老和尚在给小和尚讲故事,讲的啥?<br>      从前有座山,山上有座庙,庙里有个老和尚,老和尚在给小和尚讲故事,讲的啥?<br>        从前有座山,山上有座庙,庙里有个老和尚,老和尚在给小和尚讲故事,讲的啥?…<br>        …<br> 老和尚没了,庙塌了,小和尚还俗结婚了。</p>
<p><strong>递归方法调用</strong>：方法自己调用自己的现象就称为递归。</p>
<p><strong>递归的分类:</strong> 直接递归、间接递归。</p>
<p>直接递归：方法自身调用自己。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> public void methodA()&#123;</span><br><span class="line"> 	methodA();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">间接递归：可以理解为A()方法调用B()方法，B()方法调用C()方法，C()方法调用A()方法。</span><br><span class="line"></span><br><span class="line">   public static void A()&#123;</span><br><span class="line"> B();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> public static void B()&#123;</span><br><span class="line"> C();</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> public static void C()&#123;</span><br><span class="line"> A();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>说明</strong>：</p>
<p>递归方法包含了一种隐式的循环。</p>
<p>递归方法会重复执行某段代码，但这种重复执行无须循环控制。</p>
<p>递归一定要向已知方向递归，否则这种递归就变成了无穷递归，停不下来，类似于死循环。最终发生栈内存溢出。</p>
<p><strong>举例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">举例1：计算1 ~ n的和</span><br><span class="line"></span><br><span class="line">public class RecursionDemo &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     RecursionDemo demo &#x3D; new RecursionDemo();</span><br><span class="line">    *&#x2F;&#x2F;**计算1~num**的和，使用递归完成*</span><br><span class="line">    int num &#x3D; 5;</span><br><span class="line">     *&#x2F;&#x2F;* *调用求和的方法*</span><br><span class="line">    int sum &#x3D; demo.getSum(num);</span><br><span class="line">     *&#x2F;&#x2F;* *输出结果*</span><br><span class="line">    System.out.println(sum);</span><br><span class="line">    </span><br><span class="line">   &#125;</span><br><span class="line">   *&#x2F;**</span><br><span class="line">    *通过递归算法实现.*</span><br><span class="line">    *参数列表:int* </span><br><span class="line">    *返回值类型: int* </span><br><span class="line">   **&#x2F;*</span><br><span class="line">   public int getSum(int num) &#123;</span><br><span class="line">     *&#x2F;** </span><br><span class="line">       *num**为1**时,**方法返回1,*</span><br><span class="line">       *相当于是方法的出口,num**总有是1**的情况*</span><br><span class="line">     **&#x2F;*</span><br><span class="line">    if(num &#x3D;&#x3D; 1)&#123;</span><br><span class="line">      return 1;</span><br><span class="line">    &#125;</span><br><span class="line">     *&#x2F;**</span><br><span class="line">      *num**不为1**时,**方法返回 num +(num-1)**的累和*</span><br><span class="line">      *递归调用getSum**方法*</span><br><span class="line">     **&#x2F;*</span><br><span class="line">    return num + getSum(num-1);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>代码执行图解：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212154676.gif" alt="img"></p>
<p>举例2：递归方法计算n!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public int multiply(int num)&#123;</span><br><span class="line">   if(num &#x3D;&#x3D; 1)&#123;</span><br><span class="line">    return 1;</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">    return num * multiply(num - 1);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212154552.gif" alt="img"></p>
<p>举例3：已知有一个数列：f(0) = 1，f(1) = 4，f(n+2)=2*f(n+1) + f(n)，其中n是大于0的整数，求f(10)的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public int f(int num)&#123;</span><br><span class="line">   if(num &#x3D;&#x3D; 0)&#123;</span><br><span class="line">    return 1;</span><br><span class="line">   &#125;else if(num &#x3D;&#x3D; 1)&#123;</span><br><span class="line">    return 4;</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">    return 2 * f(num - 1) + f(num - 2);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>举例4：已知一个数列：f(20) = 1,f(21) = 4,f(n+2) = 2*f(n+1)+f(n)，其中n是大于0的整数，求f(10)的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public int func(int num)&#123;</span><br><span class="line">   if(num &#x3D;&#x3D; 20)&#123;</span><br><span class="line">    return 1;</span><br><span class="line">   &#125;else if(num &#x3D;&#x3D; 21)&#123;</span><br><span class="line">    return 4;</span><br><span class="line">   &#125;else&#123;</span><br><span class="line">     return func(num + 2) - 2 * func(num + 1);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>举例5：计算斐波那契数列（Fibonacci）的第n个值，斐波那契数列满足如下规律，</p>
<p>1,1,2,3,5,8,13,21,34,55,….</p>
<p>即从第三个数开始，一个数等于前两个数之和。假设f(n)代表斐波那契数列的第n个值，那么f(n)满足： f(n) = f(n-2) + f(n-1); </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;**使用递归的写法*</span><br><span class="line">   int f(int n) &#123;*&#x2F;&#x2F;**计算斐波那契数列第**n**个值是多少*</span><br><span class="line">     if (n &lt; 1) &#123;*&#x2F;&#x2F;**负数是返回特殊值**1**，表示不计算负数情况*</span><br><span class="line">       return 1;</span><br><span class="line">     &#125;</span><br><span class="line">     if (n &#x3D;&#x3D; 1 || n &#x3D;&#x3D; 2) &#123;</span><br><span class="line">       return 1;</span><br><span class="line">     &#125;</span><br><span class="line">     return f(n - 2) + f(n - 1);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;**不用递归*</span><br><span class="line">   int fValue(int n) &#123;*&#x2F;&#x2F;**计算斐波那契数列第**n**个值是多少*</span><br><span class="line">     if (n &lt; 1) &#123;*&#x2F;&#x2F;**负数是返回特殊值**1**，表示不计算负数情况*</span><br><span class="line">       return 1;</span><br><span class="line">     &#125;</span><br><span class="line">     if (n &#x3D;&#x3D; 1 || n &#x3D;&#x3D; 2) &#123;</span><br><span class="line">       return 1;</span><br><span class="line">     &#125;</span><br><span class="line">     *&#x2F;&#x2F;**从第三个数开始，* *等于* *前两个整数相加*</span><br><span class="line">     int beforeBefore &#x3D; 1; *&#x2F;&#x2F;**相当于**n&#x3D;1**时的值*</span><br><span class="line">     int before &#x3D; 1;*&#x2F;&#x2F;**相当于**n&#x3D;2**时的值*</span><br><span class="line">     int current &#x3D; beforeBefore + before; *&#x2F;&#x2F;**相当于**n&#x3D;3**的值*</span><br><span class="line">     *&#x2F;&#x2F;**再完后*</span><br><span class="line">     for (int i &#x3D; 4; i &lt;&#x3D; n; i++) &#123;</span><br><span class="line">       beforeBefore &#x3D; before;</span><br><span class="line">       before &#x3D; current;</span><br><span class="line">       current &#x3D; beforeBefore + before;</span><br><span class="line">       *&#x2F;**</span><br><span class="line">       *假设**i&#x3D;4*</span><br><span class="line">         *beforeBefore &#x3D; before; &#x2F;&#x2F;**相当于**n&#x3D;2**时的值*</span><br><span class="line">         *before &#x3D; current; &#x2F;&#x2F;**相当于**n&#x3D;3**的值*</span><br><span class="line">         *current &#x3D; beforeBefore + before; &#x2F;&#x2F;**相当于**n &#x3D; 4**的值*</span><br><span class="line">       *假设**i&#x3D;5*</span><br><span class="line">         *beforeBefore &#x3D; before; &#x2F;&#x2F;**相当于**n&#x3D;3**的值*</span><br><span class="line">         *before &#x3D; current; &#x2F;&#x2F;**相当于**n &#x3D; 4**的值*</span><br><span class="line">         *current &#x3D; beforeBefore + before; &#x2F;&#x2F;**相当于**n &#x3D; 5**的值*</span><br><span class="line">         *....*</span><br><span class="line">       **&#x2F;*</span><br><span class="line">     &#125;</span><br><span class="line">     return current;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>举例6：面试题</p>
<p>宋老师，我今天去百度面试，遇到一个一个双重递归调用的问题，我琢磨了一下，完全不知道为什么。打断点了，也还是没看懂为什么程序会那样走。您有空可以看一下，求指教。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212155814.gif" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private int count &#x3D; 0;</span><br><span class="line"></span><br><span class="line">  public int recursion(int k) &#123;</span><br><span class="line">    count++;</span><br><span class="line">    System.out.println(&quot;count1:&quot; + count + &quot; k:&quot; + k);</span><br><span class="line">    if (k &lt;&#x3D; 0) &#123;</span><br><span class="line">      return 0;</span><br><span class="line">    &#125;</span><br><span class="line">    return recursion(k - 1) + recursion(k - 2);*&#x2F;&#x2F;287*</span><br><span class="line">    *&#x2F;&#x2F;return recursion(k - 1);&#x2F;&#x2F;11*</span><br><span class="line">    *&#x2F;&#x2F;return recursion(k - 1) + recursion(k - 1);&#x2F;&#x2F;2047*</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>剖析：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212155044.gif" alt="image-20220320235229941"></p>
<p>最后说两句：</p>
<p>\1.    递归调用会占用大量的系统堆栈，内存耗用多，在递归调用层次多时速度要比循环慢的多，所以在使用递归时要慎重。</p>
<p>\2.    在要求高性能的情况下尽量避免使用递归，递归调用既花时间又耗内存。考虑使用循环迭代</p>
<h2 id="8-关键字：package、import"><a href="#8-关键字：package、import" class="headerlink" title="8. 关键字：package、import"></a>8. 关键字：package、import</h2><h3 id="8-1-package-包"><a href="#8-1-package-包" class="headerlink" title="8.1 package(包)"></a>8.1 package(包)</h3><p>package，称为包，用于指明该文件中定义的类、接口等结构所在的包。</p>
<h4 id="8-1-1-语法格式"><a href="#8-1-1-语法格式" class="headerlink" title="8.1.1 语法格式"></a>8.1.1 语法格式</h4><p>package 顶层包名.子包名 ;</p>
<p>举例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pack1\pack2\PackageTest.java</span><br><span class="line"></span><br><span class="line">package pack1.pack2;  *&#x2F;&#x2F;**指定类PackageTest**属于包pack1.pack2*</span><br><span class="line"></span><br><span class="line"> public class PackageTest&#123;</span><br><span class="line">   public void display()&#123;</span><br><span class="line">    System.out.println(&quot;in method display()&quot;);</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<p>•     一个源文件只能有一个声明包的package语句</p>
<p>•     package语句作为Java源文件的第一条语句出现。若缺省该语句，则指定为无名包。</p>
<p>•     包名，属于标识符，满足标识符命名的规则和规范（全部小写）、见名知意</p>
<p>–     包通常使用所在公司域名的倒置：com.atguigu.xxx。</p>
<p>–     大家取包名时不要使用”java.xx”包</p>
<p>•     包对应于文件系统的目录，package语句中用 “.” 来指明包(目录)的层次，每.一次就表示一层文件目录。</p>
<p>•     同一个包下可以声明多个结构（类、接口），但是不能定义同名的结构（类、接口）。不同的包下可以定义同名的结构（类、接口）</p>
<h4 id="8-1-2-包的作用"><a href="#8-1-2-包的作用" class="headerlink" title="8.1.2 包的作用"></a>8.1.2 包的作用</h4><p>•     包可以包含类和子包，划分项目层次，便于管理</p>
<p>•     帮助管理大型软件系统：将功能相近的类划分到同一个包中。比如：MVC的设计模式</p>
<p>•     解决类命名冲突的问题</p>
<p>•     控制访问权限</p>
<h4 id="8-1-3-应用举例"><a href="#8-1-3-应用举例" class="headerlink" title="8.1.3 应用举例"></a>8.1.3 应用举例</h4><p>举例1：某航运软件系统包括：一组域对象、GUI和reports子系统</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212155997.gif" alt="img"></p>
<p><strong>举例2：MVC设计模式</strong></p>
<p>MVC是一种软件构件模式，目的是为了降低程序开发中代码业务的耦合度。</p>
<p>MVC设计模式将整个程序分为三个层次：视图模型(Viewer)层，控制器(Controller)层，与数据模型(Model)层。这种将程序输入输出、数据处理，以及数据的展示分离开来的设计模式使程序结构变的灵活而且清晰，同时也描述了程序各个对象间的通信方式，降低了程序的耦合性。</p>
<p>视图层viewer：显示数据,为用户提供使用界面，与用户直接进行交互。<br> &gt;相关工具类  view.utils<br> &gt;自定义view  view.ui</p>
<p> 控制层controller：解析用户请求，处理业务逻辑，给予用户响应<br> &gt;应用界面相关   controller.activity<br> &gt;存放fragment  controller.fragment<br> &gt;显示列表的适配器 controller.adapter<br> &gt;服务相关的     controller.service<br> &gt;抽取的基类     controller.base</p>
<p> 模型层model：主要承载数据、处理数据<br> &gt;数据对象封装 model.bean/domain<br> &gt;数据库操作类 model.dao<br> &gt;数据库    model.db</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212155074.gif" alt="img"></p>
<h4 id="8-1-4-JDK中主要的包介绍"><a href="#8-1-4-JDK中主要的包介绍" class="headerlink" title="8.1.4 JDK中主要的包介绍"></a>8.1.4 JDK中主要的包介绍</h4><p>java.lang—-包含一些Java语言的核心类，如String、Math、Integer、 System和Thread，提供常用功能 java.net—-包含执行与网络相关的操作的类和接口。 java.io —-包含能提供多种输入/输出功能的类。 java.util—-包含一些实用工具类，如定义系统特性、接口的集合框架类、使用与日期日历相关的函数。 java.text—-包含了一些java格式化相关的类 java.sql—-包含了java进行JDBC数据库编程的相关类/接口 java.awt—-包含了构成抽象窗口工具集（abstract window toolkits）的多个类，这些类被用来构建和管理应用程序的图形用户界面(GUI)。</p>
<h3 id="8-2-import-导入"><a href="#8-2-import-导入" class="headerlink" title="8.2 import(导入)"></a>8.2 import(导入)</h3><p>为了使用定义在其它包中的Java类，需用import语句来显式引入指定包下所需要的类。相当于import语句告诉编译器到哪里去寻找这个类。</p>
<h4 id="8-2-1-语法格式"><a href="#8-2-1-语法格式" class="headerlink" title="8.2.1 语法格式"></a>8.2.1 语法格式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import 包名.类名;</span><br></pre></td></tr></table></figure>



<h4 id="8-2-2-应用举例"><a href="#8-2-2-应用举例" class="headerlink" title="8.2.2 应用举例"></a>8.2.2 应用举例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import pack1.pack2.Test;  *&#x2F;&#x2F;import pack1.pack2.\*;**表示引入pack1.pack2**包中的所有结构*</span><br><span class="line"></span><br><span class="line"> public class PackTest&#123;</span><br><span class="line">   public static void main(String args[])&#123;</span><br><span class="line">    Test t &#x3D; new Test();     *&#x2F;&#x2F;Test**类在pack1.pack2**包中定义*</span><br><span class="line">    t.display();</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h4 id="8-2-3-注意事项"><a href="#8-2-3-注意事项" class="headerlink" title="8.2.3 注意事项"></a>8.2.3 注意事项</h4><p>•     import语句，声明在包的声明和类的声明之间。</p>
<p>•     如果需要导入多个类或接口，那么就并列显式多个import语句即可</p>
<p>•     如果使用a.<em>导入结构，表示可以导入a包下的所有的结构。举例：可以使用java.util.</em>的方式，一次性导入util包下所有的类或接口。</p>
<p>•     如果导入的类或接口是java.lang包下的，或者是当前包下的，则可以省略此import语句。</p>
<p>•     如果已经导入java.a包下的类，那么如果需要使用a包的子包下的类的话，仍然需要导入。</p>
<p>•     如果在代码中使用不同包下的同名的类，那么就需要使用类的全类名的方式指明调用的是哪个类。</p>
<p>•     （了解）import static组合的使用：调用指定类或接口下的静态的属性或方法</p>
<h2 id="9-面向对象特征一：封装性-encapsulation"><a href="#9-面向对象特征一：封装性-encapsulation" class="headerlink" title="9. 面向对象特征一：封装性(encapsulation)"></a>9. 面向对象特征一：封装性(encapsulation)</h2><h3 id="9-1-为什么需要封装？"><a href="#9-1-为什么需要封装？" class="headerlink" title="9.1 为什么需要封装？"></a>9.1 为什么需要封装？</h3><p>•     我要用洗衣机，只需要按一下开关和洗涤模式就可以了。有必要了解洗衣机内部的结构吗？有必要碰电动机吗？</p>
<p>•     我要开车，我不需要懂离合、油门、制动等原理和维修也可以驾驶。</p>
<p>•     客观世界里每一个事物的内部信息都隐藏在其内部，外界无法直接操作和修改，只能通过指定的方式进行访问和修改。</p>
<p>随着我们系统越来越复杂，类会越来越多，那么类之间的访问边界必须把握好，面向对象的开发原则要遵循“高内聚、低耦合”。</p>
<p>高内聚、低耦合是软件工程中的概念，也是UNIX 操作系统设计的经典原则。</p>
<p>内聚，指一个模块内各个元素彼此结合的紧密程度；耦合指一个软件结构内不同模块之间互连程度的度量。内聚意味着重用和独立，耦合意味着多米诺效应牵一发动全身。</p>
<p>而“高内聚，低耦合”的体现之一：</p>
<p>•     高内聚：类的内部数据操作细节自己完成，不允许外部干涉；</p>
<p>•     低耦合：仅暴露少量的方法给外部使用，尽量方便外部调用。</p>
<h3 id="9-2-何为封装性？"><a href="#9-2-何为封装性？" class="headerlink" title="9.2 何为封装性？"></a>9.2 何为封装性？</h3><p>所谓封装，就是把客观事物封装成抽象概念的类，并且类可以把自己的数据和方法只向可信的类或者对象开放，向没必要开放的类或者对象隐藏信息。</p>
<p><strong>通俗的讲，把该隐藏的隐藏起来，该暴露的暴露出来。这就是封装性的设计思想。</strong></p>
<h3 id="9-3-Java如何实现数据封装"><a href="#9-3-Java如何实现数据封装" class="headerlink" title="9.3 Java如何实现数据封装"></a>9.3 Java如何实现数据封装</h3><p>•     实现封装就是控制类或成员的可见性范围。这就需要依赖访问控制修饰符，也称为权限修饰符来控制。</p>
<p>•     权限修饰符：public、protected、缺省、private。具体访问范围如下：</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>本类内部</th>
<th>本包内</th>
<th>其他包的子类</th>
<th>其他包非子类</th>
</tr>
</thead>
<tbody><tr>
<td>private</td>
<td>√</td>
<td>×</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>缺省</td>
<td>√</td>
<td>√</td>
<td>×</td>
<td>×</td>
</tr>
<tr>
<td>protected</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>×</td>
</tr>
<tr>
<td>public</td>
<td>√</td>
<td>√</td>
<td>√</td>
<td>√</td>
</tr>
</tbody></table>
<p>•     具体修饰的结构：</p>
<p>–     外部类：public、缺省</p>
<p>–     成员变量、成员方法、构造器、成员内部类：public、protected、缺省、private</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212156909.gif" alt="image-20220321222327616"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212156562.gif" alt="image-20220617164042390"></p>
<h3 id="9-4-封装性的体现"><a href="#9-4-封装性的体现" class="headerlink" title="9.4 封装性的体现"></a>9.4 封装性的体现</h3><h4 id="9-4-1-成员变量-属性私有化"><a href="#9-4-1-成员变量-属性私有化" class="headerlink" title="9.4.1 成员变量/属性私有化"></a>9.4.1 成员变量/属性私有化</h4><p><strong>概述：私有化类的成员变量，提供公共的get和set方法，对外暴露获取和修改属性的功能。</strong></p>
<p>实现步骤：</p>
<p><strong>①</strong> 使用 private 修饰成员变量</p>
<p>private 数据类型 变量名 ；</p>
<p>代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line">   private String name;</span><br><span class="line">   private int age;</span><br><span class="line">   private boolean marry;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>②</strong> 提供 getXxx方法 / setXxx 方法，可以访问成员变量，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line">   private String name;</span><br><span class="line">   private int age;</span><br><span class="line">   private boolean marry;</span><br><span class="line"></span><br><span class="line">   public void setName(String n) &#123;</span><br><span class="line">    name &#x3D; n;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public String getName() &#123;</span><br><span class="line">     return name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public void setAge(int a) &#123;</span><br><span class="line">     age &#x3D; a;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public int getAge() &#123;</span><br><span class="line">     return age;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public void setMarry(boolean m)&#123;</span><br><span class="line">     marry &#x3D; m;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public boolean isMarry()&#123;</span><br><span class="line">     return marry;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>③</strong> 测试：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class PersonTest &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     Person p &#x3D; new Person();</span><br><span class="line"></span><br><span class="line">     *&#x2F;&#x2F;**实例变量私有化，跨类是无法直接使用的*</span><br><span class="line">    *&#x2F;\* p.name &#x3D; &quot;**张三&quot;;*</span><br><span class="line">     *p.age &#x3D; 23;*</span><br><span class="line">     *p.marry &#x3D; true;\*&#x2F;*</span><br><span class="line">     </span><br><span class="line">     p.setName(&quot;张三&quot;);</span><br><span class="line">     System.out.println(&quot;p.name &#x3D; &quot; + p.getName());</span><br><span class="line">     </span><br><span class="line">     p.setAge(23);</span><br><span class="line">     System.out.println(&quot;p.age &#x3D; &quot; + p.getAge());</span><br><span class="line">     </span><br><span class="line">     p.setMarry(true);</span><br><span class="line">     System.out.println(&quot;p.marry &#x3D; &quot; + p.isMarry());</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>成员变量封装的好处：</strong></p>
<p>•     让使用者只能通过事先预定的方法来访问数据，从而可以在该方法里面加入控制逻辑，限制对成员变量的不合理访问。还可以进行数据检查，从而有利于保证对象信息的完整性。</p>
<p>•     便于修改，提高代码的可维护性。主要说的是隐藏的部分，在内部修改了，如果其对外可以的访问方式不变的话，外部根本感觉不到它的修改。例如：Java8-&gt;Java9，String从char[]转为byte[]内部实现，而对外的方法不变，我们使用者根本感觉不到它内部的修改。</p>
<p><strong>开心一笑：</strong></p>
<p>A man and woman are in a computer programming lecture. The man touches the woman’s breasts.</p>
<p> “Hey!” she says. “Those are private!”</p>
<p> The man says, “But we’re in the same class!”</p>
<h4 id="9-4-2-私有化方法"><a href="#9-4-2-私有化方法" class="headerlink" title="9.4.2 私有化方法"></a>9.4.2 私有化方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">public class ArrayUtil &#123;</span><br><span class="line"></span><br><span class="line">    public int max(int[] arr) &#123;</span><br><span class="line">    int maxValue &#x3D; arr[0];</span><br><span class="line">    for(int i &#x3D; 1;i &lt; arr.length;i++)&#123;</span><br><span class="line">      if(maxValue &lt; arr[i])&#123;</span><br><span class="line">        maxValue &#x3D; arr[i];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return maxValue;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   public int min(int[] arr)&#123;</span><br><span class="line">    int minValue &#x3D; arr[0];</span><br><span class="line">    for(int i &#x3D; 1;i &lt; arr.length;i++)&#123;</span><br><span class="line">      if(minValue &gt; arr[i])&#123;</span><br><span class="line">        minValue &#x3D; arr[i];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return minValue;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   public int sum(int[] arr) &#123;</span><br><span class="line">    int sum &#x3D; 0;</span><br><span class="line">    for(int i &#x3D; 0;i &lt; arr.length;i++)&#123;</span><br><span class="line">      sum +&#x3D; arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    return sum;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   public int avg(int[] arr) &#123;</span><br><span class="line">    int sumValue &#x3D; sum(arr);</span><br><span class="line">    return sumValue &#x2F; arr.length;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;* *创建一系列重载的上述方法*</span><br><span class="line">   *&#x2F;&#x2F; public double max(double[] arr)&#123;&#125;*</span><br><span class="line">   *&#x2F;&#x2F; public float max(float[] arr)&#123;&#125;*</span><br><span class="line">   *&#x2F;&#x2F; public byte max(byte[] arr)&#123;&#125;*</span><br><span class="line"></span><br><span class="line">    public void print(int[] arr) &#123;</span><br><span class="line">    for(int i &#x3D; 0;i &lt; arr.length;i++)&#123;</span><br><span class="line">      System.out.print(arr[i] + &quot; &quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    public int[] copy(int[] arr) &#123;</span><br><span class="line">    int[] arr1 &#x3D; new int[arr.length];</span><br><span class="line">    for(int i &#x3D; 0;i &lt; arr.length;i++)&#123;</span><br><span class="line">      arr1[i] &#x3D; arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    return arr1;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public void reverse(int[] arr) &#123;</span><br><span class="line">    for(int i &#x3D; 0,j &#x3D; arr.length - 1;i &lt; j;i++,j--)&#123;</span><br><span class="line">      int temp &#x3D; arr[i];</span><br><span class="line">      arr[i] &#x3D; arr[j];</span><br><span class="line">      arr[j] &#x3D; temp;</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public void sort(int[] arr,String desc) &#123;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    if(&quot;ascend&quot;.equals(desc))&#123;*&#x2F;&#x2F;if(desc.equals(&quot;ascend&quot;))&#123;*</span><br><span class="line">      for (int i &#x3D; 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">        for (int j &#x3D; 0; j &lt; arr.length - 1 - i; j++) &#123;</span><br><span class="line">          if (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line"></span><br><span class="line"> *&#x2F;&#x2F;          int temp &#x3D; arr[j];*</span><br><span class="line"> *&#x2F;&#x2F;          arr[j] &#x3D; arr[j + 1];*</span><br><span class="line"> *&#x2F;&#x2F;          arr[j + 1] &#x3D; temp;*</span><br><span class="line">           swap(arr,j,j+1);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;else if (&quot;descend&quot;.equals(desc))&#123;</span><br><span class="line">      for (int i &#x3D; 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">        for (int j &#x3D; 0; j &lt; arr.length - 1 - i; j++) &#123;</span><br><span class="line">          if (arr[j] &lt; arr[j + 1]) &#123;</span><br><span class="line"> *&#x2F;&#x2F;          int temp &#x3D; arr[j];*</span><br><span class="line"> *&#x2F;&#x2F;          arr[j] &#x3D; arr[j + 1];*</span><br><span class="line"> *&#x2F;&#x2F;          arr[j + 1] &#x3D; temp;*</span><br><span class="line">           swap(arr,j,j+1);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">      System.out.println(&quot;您输入的排序方式有误！&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   private void swap(int[] arr,int i,int j)&#123;</span><br><span class="line">    int temp &#x3D; arr[i];</span><br><span class="line">    arr[i] &#x3D; arr[j];</span><br><span class="line">    arr[j] &#x3D; temp;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;***</span><br><span class="line">    *** </span><br><span class="line">    *** *@*param arr</span><br><span class="line">    *** *@*param value</span><br><span class="line">    *** *@*return *返回*value*值出现的位置* *或* *-1**：未找到*</span><br><span class="line">    **&#x2F;*</span><br><span class="line">   public int getValue(int[] arr, int value) &#123;</span><br><span class="line">    *&#x2F;&#x2F;**方法：线性查找*</span><br><span class="line">    for(int i &#x3D; 0;i &lt; arr.length;i++)&#123;</span><br><span class="line">      if(value &#x3D;&#x3D; arr[i])&#123;</span><br><span class="line">        return i;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    return - 1;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>开发中，一般成员实例变量都习惯使用private修饰，再提供相应的public权限的get/set方法访问。</p>
<p>对于final的实例变量，不提供set()方法。（后面final关键字的时候讲）</p>
<p>对于static final的成员变量，习惯上使用public修饰。</p>
<h3 id="9-5-练习"><a href="#9-5-练习" class="headerlink" title="9.5 练习"></a>9.5 练习</h3><p>练习1：</p>
<p>创建程序：在其中定义两个类：Person和PersonTest类。定义如下：</p>
<p>用setAge()设置人的合法年龄(0~130)，用getAge()返回人的年龄。在PersonTest类中实例化Person类的对象b，调用setAge()和getAge()方法，体会Java的封装性。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212157241.gif" alt="image-20220321223633916"></p>
<p>练习2：</p>
<p>自定义图书类。设定属性包括：书名bookName，作者author，出版社名publisher，价格price；方法包括：相应属性的get/set方法，图书信息介绍等。</p>
<h2 id="10-类的成员之三：构造器-Constructor"><a href="#10-类的成员之三：构造器-Constructor" class="headerlink" title="10. 类的成员之三：构造器(Constructor)"></a>10. 类的成员之三：构造器(Constructor)</h2><p>我们new完对象时，所有成员变量都是默认值，如果我们需要赋别的值，需要挨个为它们再赋值，太麻烦了。我们能不能在new对象时，直接为当前对象的某个或所有成员变量直接赋值呢？</p>
<p>可以，Java给我们提供了构造器（Constructor)，也称为构造方法。</p>
<h3 id="10-1-构造器的作用"><a href="#10-1-构造器的作用" class="headerlink" title="10.1 构造器的作用"></a>10.1 构造器的作用</h3><p>new对象，并在new对象的时候为实例变量赋值。</p>
<p>举例：Person p = new Person(“Peter”,15);</p>
<p>解释：如同我们规定每个“人”一出生就必须先洗澡，我们就可以在“人”的构造器中加入完成“洗澡”的程序代码，于是每个“人”一出生就会自动完成“洗澡”，程序就不必再在每个人刚出生时一个一个地告诉他们要“洗澡”了。</p>
<h3 id="10-2-构造器的语法格式"><a href="#10-2-构造器的语法格式" class="headerlink" title="10.2 构造器的语法格式"></a>10.2 构造器的语法格式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] class 类名&#123;</span><br><span class="line">   [修饰符] 构造器名()&#123;</span><br><span class="line">     *&#x2F;&#x2F;* *实例初始化代码*</span><br><span class="line">   &#125;</span><br><span class="line">   [修饰符] 构造器名(参数列表)&#123;</span><br><span class="line">     *&#x2F;&#x2F;* *实例初始化代码*</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<p>\3.    构造器名必须与它所在的类名必须相同。</p>
<p>\4.    它没有返回值，所以不需要返回值类型，也不需要void。</p>
<p>\5.    构造器的修饰符只能是权限修饰符，不能被其他任何修饰。比如，不能被static、final、synchronized、abstract、native修饰，不能有return语句返回值。</p>
<p>代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">public class Student &#123;</span><br><span class="line">   private String name;</span><br><span class="line">   private int age;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;* *无参构造*</span><br><span class="line">   public Student() &#123;&#125;</span><br><span class="line"></span><br><span class="line">   *&#x2F;&#x2F;* *有参构造*</span><br><span class="line">   public Student(String n,int a) &#123;</span><br><span class="line">     name &#x3D; n;</span><br><span class="line">     age &#x3D; a;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public String getName() &#123;</span><br><span class="line">     return name;</span><br><span class="line">   &#125;</span><br><span class="line">   public void setName(String n) &#123;</span><br><span class="line">     name &#x3D; n;</span><br><span class="line">   &#125;</span><br><span class="line">   public int getAge() &#123;</span><br><span class="line">     return age;</span><br><span class="line">   &#125;</span><br><span class="line">   public void setAge(int a) &#123;</span><br><span class="line">     age &#x3D; a;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public String getInfo()&#123;</span><br><span class="line">     return &quot;姓名：&quot; + name +&quot;，年龄：&quot; + age;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">public class TestStudent &#123;</span><br><span class="line">   public static void main(String[] args) &#123;</span><br><span class="line">     *&#x2F;&#x2F;**调用无参构造创建学生对象*</span><br><span class="line">     Student s1 &#x3D; new Student();</span><br><span class="line"></span><br><span class="line">     *&#x2F;&#x2F;**调用有参构造创建学生对象*</span><br><span class="line">     Student s2 &#x3D; new Student(&quot;张三&quot;,23);</span><br><span class="line">     </span><br><span class="line">     System.out.println(s1.getInfo());</span><br><span class="line">     System.out.println(s2.getInfo());</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h3 id="10-3-使用说明"><a href="#10-3-使用说明" class="headerlink" title="10.3 使用说明"></a>10.3 使用说明</h3><p>当我们没有显式的声明类中的构造器时，系统会默认提供一个无参的构造器并且该构造器的修饰符默认与类的修饰符相同</p>
<p>​      <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212157521.gif" alt="img"></p>
<p>​      </p>
<p>当我们显式的定义类的构造器以后，系统就不再提供默认的无参的构造器了。</p>
<p>在类中，至少会存在一个构造器。</p>
<p>构造器是可以重载的。</p>
<h3 id="10-4-练习"><a href="#10-4-练习" class="headerlink" title="10.4 练习"></a>10.4 练习</h3><p><strong>练习1：</strong>编写两个类，TriAngle和TriAngleTest，其中TriAngle类中声明私有的底边长base和高height，同时声明公共方法访问私有变量。此外，提供类必要的构造器。另一个类中使用这些公共方法，计算三角形的面积。</p>
<p><strong>练习2：</strong></p>
<p>(1)定义Student类,有4个属性： String name;  int age;  String school;  String major;</p>
<p>(2)定义Student类的3个构造器:</p>
<p>•     第一个构造器Student(String n, int a)设置类的name和age属性；</p>
<p>•     第二个构造器Student(String n, int a, String s)设置类的name, age 和school属性；</p>
<p>•     第三个构造器Student(String n, int a, String s, String m)设置类的name, age ,school和major属性；</p>
<p>(3)在main方法中分别调用不同的构造器创建的对象，并输出其属性值。</p>
<p><strong>练习3：</strong></p>
<p>1、写一个名为Account的类模拟账户。该类的属性和方法如下图所示。</p>
<p>该类包括的属性：账号id，余额balance，年利率annualInterestRate；</p>
<p>包含的方法：访问器方法（getter和setter方法），取款方法withdraw()，存款方法deposit()。</p>
<p> <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212157098.gif" alt="标题: fig:"></p>
<p><strong>提示：</strong>在提款方法withdraw中，需要判断用户余额是否能够满足提款数额的要求，如果不能，应给出提示。</p>
<p>\1.    创建Customer类。</p>
<p> <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212157663.gif" alt="标题: fig:"></p>
<p>\2. 声明三个私有对象属性：firstName、lastName和account。 b. 声明一个公有构造器，这个构造器带有两个代表对象属性的参数（f和l） c. 声明两个公有存取器来访问该对象属性，方法getFirstName和getLastName返回相应的属性。 d. 声明setAccount 方法来对account属性赋值。 e. 声明getAccount 方法以获取account属性。</p>
<p>3.写一个测试程序。</p>
<p>（1）创建一个Customer ，名字叫 Jane Smith, 他有一个账号为1000，余额为2000元，年利率为 1.23％ 的账户。 （2）对Jane Smith操作。 存入 100 元，再取出960元。再取出2000元。 打印出Jane Smith 的基本信息</p>
<p>成功存入 ：100.0<br> 成功取出：960.0<br> 余额不足，取款失败<br> Customer [Smith, Jane] has a account: id is 1000, annualInterestRate is 1.23％, balance is 1140.0</p>
<h2 id="11-阶段性知识补充"><a href="#11-阶段性知识补充" class="headerlink" title="11. 阶段性知识补充"></a>11. 阶段性知识补充</h2><h3 id="11-1-类中属性赋值过程"><a href="#11-1-类中属性赋值过程" class="headerlink" title="11.1 类中属性赋值过程"></a>11.1 类中属性赋值过程</h3><p><strong>1、在类的属性中，可以有哪些位置给属性赋值？</strong></p>
<p>① 默认初始化</p>
<p>② 显式初始化</p>
<p>③ 构造器中初始化</p>
<p>④ 通过”对象.属性”或”对象.方法”的方式，给属性赋值</p>
<p><strong>2、这些位置执行的先后顺序是怎样？</strong></p>
<p>顺序：① - ② - ③ - ④</p>
<p><strong>3、说明：</strong></p>
<p>上述中的①、②、③在对象创建过程中，只执行一次。</p>
<p>④ 是在对象创建后执行的，可以根据需求多次执行。</p>
<h3 id="11-2-JavaBean"><a href="#11-2-JavaBean" class="headerlink" title="11.2 JavaBean"></a>11.2 JavaBean</h3><p><strong>JavaBean是一种Java语言写成的可重用组件。</strong></p>
<p>–     好比你做了一个扳手，这个扳手会在很多地方被拿去用。这个扳手也提供多种功能(你可以拿这个扳手扳、锤、撬等等)，而这个扳手就是一个组件。</p>
<p><strong>所谓JavaBean，是指符合如下标准的Java类：</strong></p>
<ul>
<li><p>–     类是公共的</p>
</li>
<li><p>–     有一个无参的公共的构造器</p>
</li>
<li><p>–     有属性，且有对应的get、set方法</p>
</li>
</ul>
<p>•     用户可以使用JavaBean将功能、处理、值、数据库访问和其他任何可以用Java代码创造的对象进行打包，并且其他的开发者可以通过内部的JSP页面、Servlet、其他JavaBean、applet程序或者应用来使用这些对象。用户可以认为JavaBean提供了一种随时随地的复制和粘贴的功能，而不用关心任何改变。</p>
<p>•     《Think in Java》中提到，JavaBean最初是为Java GUI的可视化编程实现的。你拖动IDE构建工具创建一个GUI 组件（如多选框），其实是工具给你创建Java类，并提供将类的属性暴露出来给你修改调整，将事件监听器暴露出来。</p>
<p>•     示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">  public class JavaBean &#123;</span><br><span class="line">  private String name; *&#x2F;&#x2F;* *属性一般定义为private*</span><br><span class="line">  private int age;</span><br><span class="line">  public JavaBean() &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  public int getAge() &#123;</span><br><span class="line">    return age;</span><br><span class="line">  &#125;</span><br><span class="line">  public void setAge(int a) &#123;</span><br><span class="line">    age &#x3D; a;</span><br><span class="line">  &#125;</span><br><span class="line">  public String getName() &#123;</span><br><span class="line">    return name;</span><br><span class="line">  &#125;</span><br><span class="line">  public void setName(String n) &#123;</span><br><span class="line">    name &#x3D; n;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="11-3-UML类图"><a href="#11-3-UML类图" class="headerlink" title="11.3 UML类图"></a>11.3 UML类图</h3><p>UML（Unified Modeling Language，统一建模语言），用来描述软件模型和架构的图形化语言。</p>
<p>•     常用的UML工具软件有PowerDesinger、Rose和Enterprise Architect。</p>
<p>•     UML工具软件不仅可以绘制软件开发中所需的各种图表，还可以生成对应的源代码。</p>
<p>•     在软件开发中，使用UML类图可以更加直观地描述类内部结构（类的属性和操作）以及类之间的关系（如关联、依赖、聚合等）。</p>
<p>–     +表示 public 类型， - 表示 private 类型，#表示protected类型</p>
<p>–     方法的写法: 方法的类型(+、-) 方法名(参数名： 参数类型)：返回值类型</p>
<p>–     斜体表示抽象方法或类。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158974.gif" alt="image-20220321232230831"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158886.gif" alt="img"></p>
<h1 id="第07章-面向对象编程-进阶"><a href="#第07章-面向对象编程-进阶" class="headerlink" title="第07章_面向对象编程(进阶)"></a>第07章_面向对象编程(进阶)</h1><hr>
<h2 id="本章专题与脉络"><a href="#本章专题与脉络" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158056.png" alt="第2阶段：Java面向对象编程-第07章" style="zoom: 67%;">

<h2 id="1-关键字：this"><a href="#1-关键字：this" class="headerlink" title="1. 关键字：this"></a>1. 关键字：this</h2><h3 id="1-1-this是什么？"><a href="#1-1-this是什么？" class="headerlink" title="1.1 this是什么？"></a>1.1 this是什么？</h3><ul>
<li><p>在Java中，this关键字不算难理解，它的作用和其词义很接近。</p>
<ul>
<li>它在方法（实例方法/非static的方法）内部使用，表示调用该方法的对象   —this.name=name;这时候</li>
<li>它在构造器内部使用，表示该构造器正在初始化的对象。  – -Person person=new Person();这时候</li>
</ul>
</li>
<li><p>this可以调用的结构：成员变量[不可以是局部变量!!]、方法和构造器</p>
</li>
</ul>
<h3 id="1-2-什么时候使用this"><a href="#1-2-什么时候使用this" class="headerlink" title="1.2 什么时候使用this"></a>1.2 什么时候使用this</h3><h4 id="1-2-1-实例方法-构造器中—使用当前对象的成员-区分成员变量和传入的局部变量"><a href="#1-2-1-实例方法-构造器中—使用当前对象的成员-区分成员变量和传入的局部变量" class="headerlink" title="1.2.1 实例方法/构造器中—使用当前对象的成员(区分成员变量和传入的局部变量)"></a>1.2.1 实例方法/构造器中—使用当前对象的成员(区分成员变量和传入的局部变量)</h4><p>在实例方法或构造器中，如果使用当前类的成员变量或成员方法可以在其前面添加this，增强程序的可读性。不过，通常我们都习惯省略this。</p>
<p>但是，当形参与成员变量同名时，如果在方法内或构造器内需要使用成员变量，必须添加this来表明该变量是类的成员变量。即：<strong>我们可以用this来区分<code>成员变量</code>和<code>局部变量</code></strong>。比如：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158238.png" alt="image-20220503102947013" style="zoom:67%;">

<p>另外，使用this访问属性和方法时，如果在本类中未找到，会从父类中查找。这个在继承中会讲到。</p>
<p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;		<span class="comment">// 定义Person类</span></span><br><span class="line">	<span class="keyword">private</span> String name ;	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age ;			</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name,<span class="keyword">int</span> age)</span></span>&#123;	</span><br><span class="line">		<span class="keyword">this</span>.name = name ;   </span><br><span class="line">		<span class="keyword">this</span>.age = age ;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getInfo</span><span class="params">()</span></span>&#123;	</span><br><span class="line">		System.out.println(<span class="string">"姓名："</span> + name) ;</span><br><span class="line">		<span class="keyword">this</span>.speak();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(“年龄：” + <span class="keyword">this</span>.age);	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">    <span class="keyword">int</span> width;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.length * <span class="keyword">this</span>.width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">perimeter</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * (<span class="keyword">this</span>.length + <span class="keyword">this</span>.width);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">char</span> sign)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="keyword">this</span>.width; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="keyword">this</span>.length; j++) &#123;</span><br><span class="line">                System.out.print(sign);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"长："</span> + <span class="keyword">this</span>.length + <span class="string">"，宽："</span> + <span class="keyword">this</span>.width +<span class="string">"，面积："</span> + <span class="keyword">this</span>.area() +<span class="string">"，周长："</span> + <span class="keyword">this</span>.perimeter();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestRectangle</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Rectangle r1 = <span class="keyword">new</span> Rectangle();</span><br><span class="line">        Rectangle r2 = <span class="keyword">new</span> Rectangle();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"r1对象："</span> + r1.getInfo());</span><br><span class="line">        System.out.println(<span class="string">"r2对象："</span> + r2.getInfo());</span><br><span class="line"></span><br><span class="line">        r1.length = <span class="number">10</span>;</span><br><span class="line">        r1.width = <span class="number">2</span>;</span><br><span class="line">        System.out.println(<span class="string">"r1对象："</span> + r1.getInfo());</span><br><span class="line">        System.out.println(<span class="string">"r2对象："</span> + r2.getInfo());</span><br><span class="line"></span><br><span class="line">        r1.print(<span class="string">'#'</span>);</span><br><span class="line">        System.out.println(<span class="string">"---------------------"</span>);</span><br><span class="line">        r1.print(<span class="string">'&amp;'</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"---------------------"</span>);</span><br><span class="line">        r2.print(<span class="string">'#'</span>);</span><br><span class="line">        System.out.println(<span class="string">"---------------------"</span>);</span><br><span class="line">        r2.print(<span class="string">'%'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-同一个类中—-构造器互相调用-减少重复代码"><a href="#1-2-2-同一个类中—-构造器互相调用-减少重复代码" class="headerlink" title="1.2.2 同一个类中—-构造器互相调用(减少重复代码)"></a>1.2.2 同一个类中—-构造器互相调用(减少重复代码)</h4><p>this可以作为一个类中构造器相互调用的特殊格式。  –<strong>我们可以通过this调用类中的其他构造器!!!!</strong></p>
<ul>
<li><p>this()：调用本类的无参构造器</p>
</li>
<li><p>this(实参列表)：调用本类的有参构造器</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158727.png" alt="image-20230927165025075"></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">// 无参构造</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//        this("",18);//调用本类有参构造器</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 有参构造</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();<span class="comment">//调用本类无参构造器   必须是首行  只能最多声明一个this()</span></span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 有参构造</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name,<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="comment">//直接this.name=name都可以省略了</span></span><br><span class="line">        <span class="keyword">this</span>(name);<span class="comment">//调用本类中有一个String参数的构造器    必须是首行   只能最多声明一个this()</span></span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>不能出现递归调用。比如，调用自身构造器。<ul>
<li>推论：如果一个类中声明了n个构造器，则<strong>最多有 n - 1个构造器中使用了”this(形参列表)</strong>“</li>
</ul>
</li>
<li>this()和this(实参列表)只能声明在构造器<strong>首行</strong>。<ul>
<li>推论：在类的一个构造器中，<strong>最多只能声明一个”this(参数列表)</strong>“</li>
</ul>
</li>
</ul>
<h3 id="1-3-练习"><a href="#1-3-练习" class="headerlink" title="1.3 练习"></a>1.3 练习</h3><p><strong>练习1：</strong>添加必要的构造器，综合应用构造器的重载，this关键字。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158165.png" alt="image-20220808191154534"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public class Boy &#123;</span><br><span class="line">    private String name;  &#x2F;&#x2F;name和age前面写的负号  说明是私有属性</span><br><span class="line">    private String age;</span><br><span class="line"></span><br><span class="line">    public void setAge(String age)&#123;  &#x2F;&#x2F;set方法传入的就可以是age  使用this.age&#x3D;age可以区分传入的局部变量</span><br><span class="line">        this.age&#x3D;age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name)&#123;  &#x2F;&#x2F;set方法传入的就可以是name  使用this.name&#x3D;name可以区分传入的局部变量</span><br><span class="line">        this.name&#x3D;name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getAge()&#123;</span><br><span class="line">        return this.age;  &#x2F;&#x2F;this可以省略</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName()&#123;</span><br><span class="line">        return this.name; &#x2F;&#x2F;this可以省略</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void marry(Girl girl)&#123;</span><br><span class="line">		</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void shout()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public Boy()&#123;</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public Boy(String name,String age)&#123;</span><br><span class="line">    	this.name&#x3D;name;  &#x2F;&#x2F;this()可以调用无参构造器</span><br><span class="line">    	this.age&#x3D;age;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class Girl &#123;</span><br><span class="line">    private String name;  &#x2F;&#x2F;name和age前面写的负号  说明是私有属性</span><br><span class="line">    private String age;</span><br><span class="line"></span><br><span class="line">    public void setAge(String age)&#123;     &#x2F;&#x2F;set方法传入的就可以是age  使用this.age&#x3D;age可以区分传入的局部变量</span><br><span class="line">        this.age&#x3D;age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name)&#123;   &#x2F;&#x2F;set方法传入的就可以是name  使用this.name&#x3D;name可以区分传入的局部变量</span><br><span class="line">        this.name&#x3D;name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getAge()&#123;</span><br><span class="line">        return this.age;  &#x2F;&#x2F;this可以省略</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName()&#123; </span><br><span class="line">        return this.name;  &#x2F;&#x2F;this可以省略</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void marry(Boy boy)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void compare(Girl girl)&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong></p>
<p>（1）按照如下的UML类图，创建相应的类，提供必要的结构：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158508.png" alt="image-20220323211412409" style="zoom:50%;">

<p>在提款方法withdraw()中，需要判断用户余额是否能够满足提款数额的要求，如果不能，应给出提示。deposit()方法表示存款。</p>
<p>（2）按照如下的UML类图，创建相应的类，提供必要的结构</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158891.png" alt="image-20220323211454372" style="zoom:50%;">

<p>（3）按照如下的UML类图，创建相应的类，提供必要的结构</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158869.png" alt="image-20220323211521808" style="zoom:50%;">

<ul>
<li><p>addCustomer 方法必须依照参数（姓，名）构造一个新的 Customer对象，然后把它放到 customer 数组中。还必须把 numberOfCustomer 属性的值加 1。</p>
</li>
<li><p>getNumOfCustomers 方法返回 numberofCustomers 属性值。</p>
</li>
<li><p>getCustomer方法返回与给出的index参数相关的客户。</p>
</li>
</ul>
<p>（4）创建BankTest类，进行测试。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class Account &#123;</span><br><span class="line">    private double balance; &#x2F;&#x2F;因为balance前面是负号</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;前面一个加号是public 加横线了就是构造器</span><br><span class="line">    public Account(double balance)&#123;</span><br><span class="line">        this.balance&#x3D;balance; &#x2F;&#x2F;使用this区分成员变量和局部变量</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;前面一个加号是public  冒号后面是double是返回值</span><br><span class="line">    public double getBalance()&#123;</span><br><span class="line">        return this.balance;  &#x2F;&#x2F;this可以省略</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void deposit(double amt)&#123;  &#x2F;&#x2F;存钱</span><br><span class="line">        if(amt&gt;0)&#123;</span><br><span class="line">            this.balance+&#x3D;amt;</span><br><span class="line">            System.out.println(&quot;存入成功!!!&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void withdraw(double amt)&#123;  &#x2F;&#x2F;取钱</span><br><span class="line">        if(amt&gt;this.balance)&#123;</span><br><span class="line">            System.out.println(&quot;余额不足!!!&quot;);</span><br><span class="line">            return;  &#x2F;&#x2F;跳出结果</span><br><span class="line">        &#125;</span><br><span class="line">        this.balance-&#x3D;amt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class Customer &#123;</span><br><span class="line">    private String firstName;   &#x2F;&#x2F;三个属性都是负号 所以设定为私有private</span><br><span class="line">    private String lastName;    &#x2F;&#x2F;三个属性都是负号 所以设定为私有private</span><br><span class="line">    private Account account;    &#x2F;&#x2F;三个属性都是负号 所以设定为私有private</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;正号所以是public  下划线所以是构造器</span><br><span class="line">    public Customer(String f,String l)&#123;</span><br><span class="line">        this.firstName&#x3D;f;</span><br><span class="line">        this.lastName&#x3D;l;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;有冒号 说明有返回值</span><br><span class="line">    public String getFirstName()&#123;</span><br><span class="line">        return this.firstName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;有冒号 说明有返回值</span><br><span class="line">    public String getLastName()&#123;</span><br><span class="line">        return this.lastName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;有冒号 说明有返回值</span><br><span class="line">    public Account getAccount()&#123;</span><br><span class="line">        return this.account;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;没有冒号 说明没有返回值</span><br><span class="line">    public void setAccount(Account acct)&#123;</span><br><span class="line">        this.account&#x3D;acct;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class Bank &#123;</span><br><span class="line">    private Customer[] customers;  &#x2F;&#x2F;私有化不能get和set创建</span><br><span class="line">    private int numberOfCustomer;</span><br><span class="line"></span><br><span class="line">    public Bank()&#123;</span><br><span class="line">        customers &#x3D; new Customer[10];  &#x2F;&#x2F;要初始化 不然BankTest会出现customers是null!!!</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void addCustomer(String f,String l)&#123;</span><br><span class="line">        Customer customer&#x3D;new Customer(f,l);  &#x2F;&#x2F;新创建的顾客</span><br><span class="line">        customers[this.numberOfCustomer++]&#x3D;customer;  &#x2F;&#x2F;将顾客添加到顾客数组</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getNumberOfCustomer()&#123;</span><br><span class="line">        return this.numberOfCustomer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Customer getCustomer(int index)&#123;</span><br><span class="line">        if(index &lt; 0 || index &gt;&#x3D; numberOfCustomer)&#123;</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">        return customers[index];   &#x2F;&#x2F;返回对应位置的顾客</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class BankTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Bank bank &#x3D; new Bank();</span><br><span class="line"></span><br><span class="line">        bank.addCustomer(&quot;操&quot;,&quot;曹&quot;);</span><br><span class="line">        bank.addCustomer(&quot;备&quot;,&quot;刘&quot;);</span><br><span class="line"></span><br><span class="line">        bank.getCustomer(0).setAccount(new Account(1000)); &#x2F;&#x2F;银行类bank获取第一个顾客，顾客设定一个账户，账户里面有1000余额</span><br><span class="line">        bank.getCustomer(0).getAccount().withdraw(50);  &#x2F;&#x2F;余额取出50</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;账户余额为：&quot; + bank.getCustomer(0).getAccount().getBalance()); &#x2F;&#x2F;获取余额950</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>内存解析图：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158617.png" alt="image-20220323211653907" style="zoom:80%;">

<h2 id="2-面向对象特征二：继承-Inheritance"><a href="#2-面向对象特征二：继承-Inheritance" class="headerlink" title="2. 面向对象特征二：继承(Inheritance)"></a>2. 面向对象特征二：继承(Inheritance)</h2><h3 id="2-1-继承的概述"><a href="#2-1-继承的概述" class="headerlink" title="2.1 继承的概述"></a>2.1 继承的概述</h3><p><strong>角度一：从上而下</strong></p>
<p>为描述和处理<strong>个人</strong>信息，定义类Person：</p>
 <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158029.png" alt="image-20220323220923386" style="zoom:67%;">

<p>为描述和处理<strong>学生</strong>信息，定义类Student：</p>
 <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158434.png" alt="image-20220323221001495" style="zoom:67%;">

<p>通过继承，简化Student类的定义：</p>
 <img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158172.png" alt="image-20220323221050791" style="zoom:67%;">

<blockquote>
<p>说明：Student类继承了父类Person的所有属性和方法，并增加了一个属性school。Person中的属性和方法，Student都可以使用。</p>
</blockquote>
<p><strong>角度二：从下而上</strong></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158747.jpg" alt></p>
<p>多个类中存在相同属性和行为时，将这些内容抽取到单独一个类中，那么多个类中无需再定义这些属性和行为，只需要和抽取出来的类构成<code>继承关系</code>。如图所示：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158180.jpg" style="zoom: 67%;">

<p>再举例：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158410.png" alt="image-20220323221436571" style="zoom:67%;">

<h4 id="2-1-1-继承的好处"><a href="#2-1-1-继承的好处" class="headerlink" title="2.1.1 继承的好处"></a>2.1.1 继承的好处</h4><ul>
<li><p>继承的出现减少了代码冗余，提高了代码的复用性。</p>
</li>
<li><p>继承的出现，更有利于功能的扩展。</p>
</li>
<li><p>继承的出现让类与类之间产生了<code>is-a</code>的关系，为多态的使用提供了前提。</p>
<ul>
<li>继承描述事物之间的所属关系，这种关系是：<code>is-a</code> 的关系。可见，父类更通用、更一般，子类更具体。</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意：不要仅为了获取其他类中某个功能而去继承！</p>
</blockquote>
<h3 id="2-2-继承的语法"><a href="#2-2-继承的语法" class="headerlink" title="2.2 继承的语法"></a>2.2 继承的语法</h3><h4 id="2-2-1-继承中的语法格式"><a href="#2-2-1-继承中的语法格式" class="headerlink" title="2.2.1 继承中的语法格式"></a>2.2.1 继承中的语法格式</h4><p>通过 <code>extends</code> 关键字，可以声明一个类B继承另外一个类A，定义格式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] <span class="class"><span class="keyword">class</span> 类<span class="title">A</span> </span>&#123;  <span class="comment">//类A，称为父类、超类、基类(base class)、SuperClass</span></span><br><span class="line">	<span class="comment">//属性和方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[修饰符] <span class="class"><span class="keyword">class</span> 类<span class="title">B</span> <span class="keyword">extends</span> 类<span class="title">A</span> </span>&#123;   <span class="comment">//类B，称为子类、派生类(derived class)、SubClass</span></span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-2-2-继承中的基本概念"><a href="#2-2-2-继承中的基本概念" class="headerlink" title="2.2.2 继承中的基本概念"></a>2.2.2 继承中的基本概念</h4><p>类B，称为子类、派生类(derived class)、SubClass</p>
<p>类A，称为父类、超类、基类(base class)、SuperClass</p>
<h3 id="2-3-代码举例"><a href="#2-3-代码举例" class="headerlink" title="2.3 代码举例"></a>2.3 代码举例</h3><p><strong>1、父类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 定义name属性</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="comment">// 定义age属性</span></span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">// 定义动物的吃东西方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(age + <span class="string">"岁的"</span>+ name + <span class="string">"在吃东西"</span>);</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2、子类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;  <span class="comment">//使用extends继承   </span></span><br><span class="line">    <span class="keyword">int</span> count;<span class="comment">//记录每只猫抓的老鼠数量</span></span><br><span class="line">    <span class="comment">// 定义一个猫抓老鼠的方法catchMouse</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">catchMouse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count++;</span><br><span class="line">        System.out.println(<span class="string">"抓老鼠，已经抓了"</span>+ count + <span class="string">"只老鼠"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3、测试类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCat</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 创建一个猫类对象</span></span><br><span class="line">        Cat cat = <span class="keyword">new</span> Cat();      </span><br><span class="line">        <span class="comment">// 为该猫类对象的name属性进行赋值   这是父类Animal的属性和方法(继承过来的)</span></span><br><span class="line">        cat.name = <span class="string">"Tom"</span>;</span><br><span class="line">        <span class="comment">// 为该猫类对象的age属性进行赋值</span></span><br><span class="line">        cat.age = <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// 调用该猫继承来的eat()方法</span></span><br><span class="line">        cat.eat();        </span><br><span class="line">        <span class="comment">// 调用该猫的catchMouse()方法     这是自己类的方法</span></span><br><span class="line">        cat.catchMouse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158514.png" alt="image-20211230090255997"></p>
<h3 id="2-4-继承性的细节说明"><a href="#2-4-继承性的细节说明" class="headerlink" title="2.4 继承性的细节说明"></a>2.4 继承性的细节说明</h3><p><strong>1、子类会继承父类所有的实例变量和实例方法</strong></p>
<p>从类的定义来看，类是一类具有相同特性的事物的抽象描述。父类是所有子类共同特征的抽象描述。而实例变量和实例方法就是事物的特征，那么父类中声明的实例变量和实例方法代表子类事物也有这个特征。</p>
<ul>
<li>当子类对象被创建时，在堆中给new对象申请内存时，就要看子类和父类都声明了什么实例变量，这些<strong>实例变量都要分配内存</strong>。</li>
<li>当子类对象调用方法时，编译器会先在子类模板中看该类是否有这个方法，如果没找到，父类—-&gt;父类—-&gt;父类是否声明了这个方法，遵循<strong><code>从下往上</code></strong>找的顺序，找到了就停止，一直到根父类都没有找到，就会报编译错误。</li>
</ul>
<p>所以继承意味着子类的对象除了看子类的类模板还要看父类的类模板。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158739.png" alt="image-20211230090255997"></p>
<p><strong>2、子类不能直接访问父类中私有的(private)的成员变量和方法</strong></p>
<p>子类虽会继承父类私有(private)的成员变量，但子类不能对继承的私有成员变量<strong>直接进行访问</strong>，——&gt;通过get/set方法进行访问。 (继承性要保证封装性!!!)</p>
<p>如图所示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158183.png" alt="image-20220323224757212"></p>
<p><strong>3、在Java 中，继承的关键字用的是“extends”，即子类不是父类的子集，而是对父类的“扩展”</strong></p>
<p>子类在继承父类以后，还可以定义自己特有的方法，这就可以看做是对父类功能上的扩展。</p>
<p><strong>4、Java支持多层继承(继承体系)</strong></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158656.png" alt="image-20220323225441417" style="zoom:67%;">

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>说明：</p>
<ul>
<li><p>子类和父类是一种<strong>相对的</strong></p>
</li>
<li><p>顶层父类是Object类。所有的类默认继承Object，作为父类。 (<strong>如果没有显示说明的话就是继承Object类</strong>)</p>
</li>
</ul>
</blockquote>
<p><strong>5、一个父类可以同时拥有多个子类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">E</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>6、Java只支持单继承，不支持多重继承</strong></p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158220.png" alt="image-20220514162507692" style="zoom:67%;">

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//一个类只能有一个父类，不可以有多个直接父类。</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span></span>&#123;&#125; 	<span class="comment">// √</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">A</span>,<span class="title">B</span>...	// ×</span></span><br></pre></td></tr></table></figure>

<h3 id="2-5-练习"><a href="#2-5-练习" class="headerlink" title="2.5 练习"></a>2.5 练习</h3><p><strong>练习1：</strong>定义一个学生类Student，它继承自Person类</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212158099.png" alt="image-20220323231804928" style="zoom:67%;">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Person &#123;</span><br><span class="line">    public String name;</span><br><span class="line">    public char sex;</span><br><span class="line">    public int age;</span><br><span class="line"></span><br><span class="line">    public Person(String name,char sex,int age)&#123;  &#x2F;&#x2F;构造器</span><br><span class="line">        this.name&#x3D;name;</span><br><span class="line">        this.sex&#x3D;sex;</span><br><span class="line">        this.age&#x3D;age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String toString()&#123;</span><br><span class="line">        return &quot;name是： &quot;+this.name+&quot;sex是: &quot;+this.sex+&quot; age是: &quot;+this.age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public class Student extends Person&#123;</span><br><span class="line">    public long number;</span><br><span class="line">    public int math;</span><br><span class="line">    public int english;</span><br><span class="line">    public int computer;</span><br><span class="line"></span><br><span class="line">    public Student(String n,char s,int a,long k,int m,int e,int c)&#123;</span><br><span class="line">        super(n,s,a);  &#x2F;&#x2F;要使用super调用父类的三个属性 跟this(有参&#x2F;无参)功能样式一样!!!</span><br><span class="line">        this.number&#x3D;k;</span><br><span class="line">        this.math&#x3D;m;</span><br><span class="line">        this.english&#x3D;e;</span><br><span class="line">        this.computer&#x3D;c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double aver()&#123;</span><br><span class="line">        return 1.0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int max()&#123;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int min()&#123;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong></p>
<p>(1)定义一个ManKind类，包括</p>
<ul>
<li><p>成员变量int sex和int salary；</p>
</li>
<li><p>方法void manOrWoman()：根据sex的值显示“man”(sex==1)或者“woman”(sex==0)；</p>
</li>
<li><p>方法void employeed()：根据salary的值显示“no job”(salary==0)或者“ job”(salary!=0)。</p>
</li>
</ul>
<p>(2)定义类Kids继承ManKind，并包括</p>
<ul>
<li>成员变量int yearsOld；</li>
<li>方法printAge()打印yearsOld的值。</li>
</ul>
<p>(3)定义类KidsTest，在类的main方法中实例化Kids的对象someKid，用该对象访问其父类的成员变量及方法。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">public class ManKind &#123;</span><br><span class="line">    private int sex;     &#x2F;&#x2F;属性设置为私有  子类只能通过get&#x2F;set方法获取 [不能直接获取]</span><br><span class="line">    private int salary;  &#x2F;&#x2F;属性设置为私有  子类只能通过get&#x2F;set方法获取 [不能直接获取]</span><br><span class="line"></span><br><span class="line">    public void manOrWoman()&#123;   &#x2F;&#x2F;我的误区就是经常往里面传值，其实成员变量没必要，传入的是局部变量!!!</span><br><span class="line">        if(sex&#x3D;&#x3D;1)&#123;</span><br><span class="line">            System.out.println(&quot;man&quot;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        if(sex&#x3D;&#x3D;0)&#123;</span><br><span class="line">            System.out.println(&quot;woman&quot;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;输入sex异常&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getSex() &#123;</span><br><span class="line">        return sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSex(int sex) &#123;</span><br><span class="line">        this.sex &#x3D; sex;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getSalary() &#123;</span><br><span class="line">        return salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSalary(int salary) &#123;</span><br><span class="line">        this.salary &#x3D; salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;无参构造器</span><br><span class="line">    public ManKind() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;有参构造器</span><br><span class="line">    public ManKind(int sex, int salary) &#123;</span><br><span class="line">        this();  &#x2F;&#x2F;调用无参构造器public ManKind()&#123;&#125;</span><br><span class="line">        this.sex &#x3D; sex;</span><br><span class="line">        this.salary &#x3D; salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void employeed()&#123;   &#x2F;&#x2F;我的误区就是经常往里面传值，其实成员变量没必要，传入的是局部变量!!!</span><br><span class="line">        if(salary&#x3D;&#x3D;0)&#123;</span><br><span class="line">            System.out.println(&quot;no job&quot;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;job&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Kids extends ManKind&#123;  &#x2F;&#x2F;使用extends关键字继承父类</span><br><span class="line">    private int yearsOld;  &#x2F;&#x2F;属性设置成私有 其他人获取只能通过get和set方法  而且private只能在类中和同一包内</span><br><span class="line"></span><br><span class="line">    public int getYearsOld() &#123;</span><br><span class="line">        return yearsOld;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setYearsOld(int yearsOld) &#123;</span><br><span class="line">        this.yearsOld &#x3D; yearsOld;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void printAge()&#123;</span><br><span class="line">        System.out.println(this.yearsOld);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class KidsTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Kids someKid&#x3D;new Kids();</span><br><span class="line">        &#x2F;&#x2F;调用父类属性</span><br><span class="line">        someKid.setSex(1);</span><br><span class="line">        someKid.setSalary(1);  &#x2F;&#x2F;相当于子类拥有了父类和自己的属性  三个属性一共</span><br><span class="line">        &#x2F;&#x2F;调用父类方法</span><br><span class="line">        someKid.manOrWoman();</span><br><span class="line">        someKid.employeed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">输出:</span><br><span class="line">man</span><br><span class="line">job</span><br></pre></td></tr></table></figure>

<p><strong>练习3：</strong>根据下图实现类。在CylinderTest类中创建Cylinder类的对象，设置圆柱的底面半径和高，并输出圆柱的体积。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212159800.png" alt="image-20220323231942361" style="zoom:67%;">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class Circle &#123;</span><br><span class="line">    private double radius;</span><br><span class="line">    public Circle()&#123;</span><br><span class="line">        this.radius&#x3D;1; &#x2F;&#x2F;初始化为1</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;声明set和get方便其他类访问private成员变量</span><br><span class="line">    public void setRadius(double radius)&#123;</span><br><span class="line">        this.radius&#x3D;radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getRadius()&#123;</span><br><span class="line">        return this.radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double findArea()&#123;</span><br><span class="line">        return this.radius*this.radius*Math.PI;  &#x2F;&#x2F;计算圆的面积</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class Cylinder extends Circle&#123;  &#x2F;&#x2F;使用extends继承父类圆Circle</span><br><span class="line">    private double length;</span><br><span class="line"></span><br><span class="line">    public Cylinder()&#123;</span><br><span class="line">        this.length&#x3D;1; &#x2F;&#x2F;初始化为1</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;声明set和get方便其他类访问private成员变量</span><br><span class="line">    public void setLength(double length) &#123;</span><br><span class="line">        this.length &#x3D; length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getLength()&#123;</span><br><span class="line">        return this.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double findVolume()&#123;</span><br><span class="line">        return this.findArea()*length;  &#x2F;&#x2F;或者getLength()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class CylinderTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Cylinder cy &#x3D; new Cylinder();  &#x2F;&#x2F;创建一个圆柱对象  子类</span><br><span class="line">        cy.setRadius(2.3); &#x2F;&#x2F;子类使用父类的属性</span><br><span class="line">        cy.setLength(1.4); &#x2F;&#x2F;子类使用自己的方法</span><br><span class="line">        System.out.println(&quot;圆柱的体积为：&quot; + cy.findVolume());</span><br><span class="line">        System.out.println(&quot;圆柱的底面积：&quot; + cy.findArea()); &#x2F;&#x2F;子类使用父类的方法</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出:</span><br><span class="line">圆柱的体积为：23.266635192486003</span><br><span class="line">圆柱的底面积：16.619025137490002</span><br></pre></td></tr></table></figure>

<h2 id="3-方法的重写（override-overwrite）"><a href="#3-方法的重写（override-overwrite）" class="headerlink" title="3. 方法的重写（override/overwrite）"></a>3. 方法的重写（override/overwrite）</h2><p>父类的所有方法子类都会继承，但是当某个方法被继承到子类之后，子类觉得父类原来的实现不适合于自己当前的类，该怎么办呢？子类可以对从父类中继承来的方法进行改造，我们称为方法的<code>重写 (override、overwrite)</code>。也称为方法的<code>重置</code>、<code>覆盖</code>。</p>
<p>在程序执行时，子类的方法将覆盖父类的方法。</p>
<h3 id="3-1-方法重写举例"><a href="#3-1-方法重写举例" class="headerlink" title="3.1 方法重写举例"></a>3.1 方法重写举例</h3><p>比如新的手机增加来电显示头像的功能，代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.inherited.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"发短信"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"打电话"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showNum</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"来电显示号码"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.inherited.method;</span><br><span class="line"></span><br><span class="line"><span class="comment">//SmartPhone：智能手机</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SmartPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span></span>&#123;</span><br><span class="line">    <span class="comment">//重写父类的来电显示功能的方法</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showNum</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//来电显示姓名和图片功能</span></span><br><span class="line">        System.out.println(<span class="string">"显示来电姓名"</span>);</span><br><span class="line">        System.out.println(<span class="string">"显示头像"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//重写父类的通话功能的方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"语音通话 或 视频通话"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.inherited.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOverride</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 创建子类对象</span></span><br><span class="line">        SmartPhone sp = <span class="keyword">new</span> SmartPhone();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用父类继承而来的方法</span></span><br><span class="line">        sp.call();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 调用子类重写的方法</span></span><br><span class="line">        sp.showNum();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>@Override使用说明：</p>
<p>写在方法上面，用来检测是不是满足重写方法的要求。这个注解就算不写，只要满足要求，也是正确的方法覆盖重写。建议保留，这样编译器可以帮助我们检查格式，另外也可以让阅读源代码的程序员清晰的知道这是一个重写的方法。</p>
</blockquote>
<h3 id="3-2-方法重写的要求"><a href="#3-2-方法重写的要求" class="headerlink" title="3.2 方法重写的要求"></a>3.2 方法重写的要求</h3><ol>
<li><p>子类重写的方法<code>必须</code>和父类被重写的方法具有相同的<code>方法名称</code>、<code>参数列表</code>。</p>
</li>
<li><p>子类重写的方法的返回值类型<code>不能大于</code>父类被重写的方法的返回值类型。（例如：Student &lt; Person）。</p>
</li>
</ol>
<blockquote>
<p>注意：如果返回值类型是基本数据类型和void，那么必须是相同</p>
</blockquote>
<ol start="3">
<li>子类重写的方法使用的访问权限<code>不能小于</code>父类被重写的方法的访问权限。（public &gt; protected &gt; 缺省 &gt; private）</li>
</ol>
<blockquote>
<p>注意：① 父类私有方法不能重写   ② 跨包的父类缺省的方法也不能重写</p>
</blockquote>
<ol start="4">
<li>子类方法抛出的异常不能大于父类被重写方法的异常</li>
</ol>
<p>此外，子类与父类中同名同参数的方法必须同时声明为非static的(即为重写)，或者同时声明为static的（不是重写）。因为static方法是属于类的，子类无法覆盖父类的方法。</p>
<h3 id="3-3-小结：方法的重载与重写"><a href="#3-3-小结：方法的重载与重写" class="headerlink" title="3.3 小结：方法的重载与重写"></a>3.3 小结：方法的重载与重写</h3><p>方法的重载：方法名相同，形参列表不同。不看返回值类型。</p>
<p>方法的重写：见上面。</p>
<p>（1）同一个类中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.inherited.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOverload</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span> a, <span class="keyword">double</span> b)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b,<span class="keyword">int</span> c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> max(max(a,b),c);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）父子类中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.inherited.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOverloadOverride</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Son s = <span class="keyword">new</span> Son();</span><br><span class="line">        s.method(<span class="number">1</span>);<span class="comment">//只有一个形式的method方法</span></span><br><span class="line"></span><br><span class="line">        Daughter d = <span class="keyword">new</span> Daughter();</span><br><span class="line">        d.method(<span class="number">1</span>);</span><br><span class="line">        d.method(<span class="number">1</span>,<span class="number">2</span>);<span class="comment">//有两个形式的method方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Father.method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span> i)</span></span>&#123;<span class="comment">//重写</span></span><br><span class="line">        System.out.println(<span class="string">"Son.method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Daughter</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> j)</span></span>&#123;<span class="comment">//重载</span></span><br><span class="line">        System.out.println(<span class="string">"Daughter.method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-练习"><a href="#3-4-练习" class="headerlink" title="3.4 练习"></a>3.4 练习</h3><p><strong>练习1：</strong>如果现在父类的一个方法定义成private访问权限，在子类中将此方法声明为default访问权限，那么这样还叫重写吗？ (NO)</p>
<p><strong>练习2：</strong>修改继承内容的练习2中定义的类Kids，在Kids中重新定义employeed()方法，覆盖父类ManKind中定义的employeed()方法，输出“Kids should study and no job.”</p>
<h2 id="4-再谈封装性中的4种权限修饰"><a href="#4-再谈封装性中的4种权限修饰" class="headerlink" title="4. 再谈封装性中的4种权限修饰"></a>4. 再谈封装性中的4种权限修饰</h2><p>权限修饰符：public,protected,缺省,private</p>
<table>
<thead>
<tr>
<th>修饰符</th>
<th>本类</th>
<th>本包</th>
<th align="left">其他包子类</th>
<th>其他包非子类</th>
</tr>
</thead>
<tbody><tr>
<td>private</td>
<td>√</td>
<td>×</td>
<td align="left">×</td>
<td>×</td>
</tr>
<tr>
<td>缺省</td>
<td>√</td>
<td>√（本包子类和非子类都可见）</td>
<td align="left">×</td>
<td>×</td>
</tr>
<tr>
<td>protected</td>
<td>√</td>
<td>√（本包子类和非子类都可见）</td>
<td align="left">√（其他包仅限于子类中可见）</td>
<td>×</td>
</tr>
<tr>
<td>public</td>
<td>√</td>
<td>√</td>
<td align="left">√</td>
<td>√</td>
</tr>
</tbody></table>
<p>外部类：public和缺省</p>
<p>成员变量、成员方法等：public,protected,缺省,private</p>
<p><strong>1、外部类要跨包使用必须是public，否则仅限于本包使用</strong></p>
<p>（1）外部类的权限修饰符如果缺省，本包使用没问题</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212159295.png" alt="image-20211230093627763"></p>
<p>（2）外部类的权限修饰符如果缺省，跨包使用有问题</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212159292.png" alt="image-20211230094236974"></p>
<p><strong>2、成员的权限修饰符问题</strong></p>
<p>（1）本包下使用：成员的权限修饰符可以是public、protected、缺省</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212159380.png" alt="image-20211230095320646"></p>
<p>（2）跨包下使用：要求严格</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212159675.png" alt="image-20211230095817784"></p>
<p>（3）跨包使用时，如果类的权限修饰符缺省，成员权限修饰符&gt;类的权限修饰符也没有意义</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212159358.png" alt="image-20211230100219840"></p>
<h2 id="5-关键字：super"><a href="#5-关键字：super" class="headerlink" title="5. 关键字：super"></a>5. 关键字：super</h2><h3 id="5-1-super的理解"><a href="#5-1-super的理解" class="headerlink" title="5.1 super的理解"></a>5.1 super的理解</h3><p>在Java类中使用super来调用父类中的指定操作：</p>
<ul>
<li>super可用于访问父类中定义的属性</li>
<li>super可用于调用父类中定义的成员方法</li>
<li>super可用于在子类构造器中调用父类的构造器</li>
</ul>
<p>注意：</p>
<ul>
<li>尤其当子父类出现同名成员时，可以用super表明调用的是父类中的成员</li>
<li>super的追溯不仅限于直接父类[从下往上一直找]</li>
<li>super和this的用法相像，this代表本类对象的引用，super代表父类的内存空间的标识</li>
</ul>
<h3 id="5-2-super的使用场景"><a href="#5-2-super的使用场景" class="headerlink" title="5.2 super的使用场景"></a>5.2 super的使用场景</h3><h4 id="5-2-1-子类中调用父类被重写的方法"><a href="#5-2-1-子类中调用父类被重写的方法" class="headerlink" title="5.2.1 子类中调用父类被重写的方法"></a>5.2.1 子类中调用父类被重写的方法</h4><ul>
<li>如果子类没有重写父类的方法，只要权限修饰符允许，在子类中完全可以直接调用父类的方法；</li>
<li>如果子类重写了父类的方法，在子类中需要通过<code>super.</code>才能调用父类被重写的方法，否则默认调用的子类重写的方法</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.inherited.method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"发短信"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"打电话"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showNum</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"来电显示号码"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//smartphone：智能手机</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SmartPhone</span> <span class="keyword">extends</span> <span class="title">Phone</span></span>&#123;</span><br><span class="line">    <span class="comment">//重写父类的来电显示功能的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showNum</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//来电显示姓名和图片功能</span></span><br><span class="line">        System.out.println(<span class="string">"显示来电姓名"</span>);</span><br><span class="line">        System.out.println(<span class="string">"显示头像"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//保留父类来电显示号码的功能</span></span><br><span class="line">        <span class="keyword">super</span>.showNum();<span class="comment">//此处必须加super.，否则就是无限递归，那么就会栈内存溢出</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：</p>
<ul>
<li><p><strong>方法前面没有super.和this.</strong></p>
<ul>
<li>先从子类找匹配方法，如果没有，再从直接父类找，再没有，继续往上追溯</li>
</ul>
</li>
<li><p><strong>方法前面有this.</strong></p>
<ul>
<li>先从子类找匹配方法，如果没有，再从直接父类找，再没有，继续往上追溯</li>
</ul>
</li>
<li><p><strong>方法前面有super.</strong></p>
<ul>
<li>从当前子类的直接父类找，如果没有，继续往上追溯</li>
</ul>
</li>
</ul>
<h4 id="5-2-2-子类中调用父类中同名的成员变量"><a href="#5-2-2-子类中调用父类中同名的成员变量" class="headerlink" title="5.2.2 子类中调用父类中同名的成员变量"></a>5.2.2 子类中调用父类中同名的成员变量</h4><ul>
<li>如果实例变量与局部变量重名，可以在实例变量前面加this.进行区别</li>
<li>如果子类实例变量和父类实例变量重名，并且父类的该实例变量在子类仍然可见，在子类中要访问父类声明的实例变量需要在父类实例变量前加super.，否则默认访问的是子类自己声明的实例变量</li>
<li>如果父子类实例变量没有重名，只要权限修饰符允许，在子类中完全可以直接访问父类中声明的实例变量，也可以用this.实例访问，也可以用super.实例变量访问</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> b = <span class="number">11</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">20</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="comment">//子类与父类的属性同名，子类对象中就有两个a</span></span><br><span class="line">		System.out.println(<span class="string">"子类的a："</span> + a);<span class="comment">//20  先找局部变量找，没有再从本类成员变量找</span></span><br><span class="line">        System.out.println(<span class="string">"子类的a："</span> + <span class="keyword">this</span>.a);<span class="comment">//20   先从本类成员变量找</span></span><br><span class="line">        System.out.println(<span class="string">"父类的a："</span> + <span class="keyword">super</span>.a);<span class="comment">//10    直接从父类成员变量找</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//子类与父类的属性不同名，是同一个b</span></span><br><span class="line">		System.out.println(<span class="string">"b = "</span> + b);<span class="comment">//11  先找局部变量找，没有再从本类成员变量找，没有再从父类找</span></span><br><span class="line">		System.out.println(<span class="string">"b = "</span> + <span class="keyword">this</span>.b);<span class="comment">//11   先从本类成员变量找，没有再从父类找</span></span><br><span class="line">		System.out.println(<span class="string">"b = "</span> + <span class="keyword">super</span>.b);<span class="comment">//11  直接从父类局部变量找</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">		<span class="comment">//子类与父类的属性同名，子类对象中就有两个成员变量a，此时方法中还有一个局部变量a		</span></span><br><span class="line">		System.out.println(<span class="string">"局部变量的a："</span> + a);<span class="comment">//30  先找局部变量</span></span><br><span class="line">        System.out.println(<span class="string">"子类的a："</span> + <span class="keyword">this</span>.a);<span class="comment">//20  先从本类成员变量找</span></span><br><span class="line">        System.out.println(<span class="string">"父类的a："</span> + <span class="keyword">super</span>.a);<span class="comment">//10  直接从父类成员变量找</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"b = "</span> + b);<span class="comment">//13  先找局部变量</span></span><br><span class="line">		System.out.println(<span class="string">"b = "</span> + <span class="keyword">this</span>.b);<span class="comment">//11  先从本类成员变量找</span></span><br><span class="line">		System.out.println(<span class="string">"b = "</span> + <span class="keyword">super</span>.b);<span class="comment">//11  直接从父类局部变量找</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        Son son = <span class="keyword">new</span> Son();</span><br><span class="line">		son.test();</span><br><span class="line">		son.method(<span class="number">30</span>,<span class="number">13</span>);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：起点不同（就近原则）</p>
<ul>
<li><p><strong>变量前面没有super.和this.</strong></p>
<ul>
<li>在构造器、代码块、方法中如果出现使用某个变量，先查看是否是当前块声明的<code>局部变量</code>，</li>
<li>如果不是局部变量，先从当前执行代码的<code>本类去找成员变量</code></li>
<li>如果从当前执行代码的本类中没有找到，会往上找<code>父类声明的成员变量</code>（权限修饰符允许在子类中访问的）</li>
</ul>
</li>
<li><p><strong>变量前面有this.</strong> </p>
<ul>
<li>通过this找成员变量时，先从当前执行代码的==本类去找成员变量==</li>
<li>如果从当前执行代码的本类中没有找到，会往上找==父类声明的成员变量（==权限修饰符允许在子类中访问的）</li>
</ul>
</li>
<li><p><strong>变量前面super.</strong> </p>
<ul>
<li>通过super找成员变量，直接从当前执行代码的直接父类去找成员变量（权限修饰符允许在子类中访问的）</li>
<li>如果直接父类没有，就去父类的父类中找（权限修饰符允许在子类中访问的）</li>
</ul>
</li>
</ul>
<p><strong><font color="red">特别说明：应该避免子类声明和父类重名的成员变量</font></strong></p>
<p>在阿里的开发规范等文档中都做出明确说明：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212159642.png" alt="image-20211230110411580"></p>
<h4 id="5-2-3-子类构造器中调用父类构造器"><a href="#5-2-3-子类构造器中调用父类构造器" class="headerlink" title="5.2.3 子类构造器中调用父类构造器"></a>5.2.3 子类构造器中调用父类构造器</h4><p>① 子类继承父类时，不会继承父类的构造器。只能通过<strong>“super(形参列表)</strong>”的方式调用<strong>父类指定的构造器</strong>。</p>
<p>② 规定：“super(形参列表)”，必须声明在<strong>构造器的首行</strong>。（类似于this也在首行）</p>
<p>③ 我们前面讲过，在构造器的首行可以使用”this(形参列表)”，调用本类中重载的构造器，<br>     结合②，结论：在构造器的首行，<strong>“this(形参列表)” 和 “super(形参列表)”只能二选一</strong>。      </p>
<p>④ 如果在子类构造器的首行既没有显示调用”this(形参列表)”，也没有显式调用”super(形参列表)”，     [先父类后子类]<br>​     则子类此构造器<strong>默认调用”super()”</strong>，即<strong>调用父类中空参的构造器</strong>。</p>
<p>⑤ 由③和④得到结论：子类的任何一个构造器中，要么会调用本类中重载的构造器，要么会调用父类的构造器。<br>     只能是这两种情况之一。  <strong>—–写this就是掉自己  写super就是掉父类  不写就是父类的无参构造器!!!!!</strong></p>
<p>⑥ 由⑤得到：一个类中声明有n个构造器，最多有n-1个构造器中使用了”this(形参列表)”，则剩下的那个一定使用”super(形参列表)”。<br><strong>这里的最后一个可能是写了super，也可能没写用的默认的父类无参的</strong></p>
<blockquote>
<p>开发中常见错误：</p>
<p>如果子类构造器中既未显式调用父类或本类的构造器，且父类中又没有空参的构造器，则<code>编译出错</code>。</p>
</blockquote>
<p>情景举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">        <span class="comment">//A类和B类都是默认有一个无参构造，B类的默认无参构造中还会默认调用A类的默认无参构造</span></span><br><span class="line">        <span class="comment">//但是因为都是默认的，没有打印语句，看不出来</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>情景举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	A()&#123;</span><br><span class="line">		System.out.println(<span class="string">"A类无参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">        <span class="comment">//A类显示声明一个无参构造，</span></span><br><span class="line">		<span class="comment">//B类默认有一个无参构造，</span></span><br><span class="line">		<span class="comment">//B类的默认无参构造中会默认调用A类的无参构造</span></span><br><span class="line">        <span class="comment">//可以看到会输出“A类无参构造器"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>情景举例3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	A()&#123;</span><br><span class="line">		System.out.println(<span class="string">"A类无参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	B()&#123;</span><br><span class="line">		System.out.println(<span class="string">"B类无参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">        <span class="comment">//A类显示声明一个无参构造，</span></span><br><span class="line">		<span class="comment">//B类显示声明一个无参构造，        </span></span><br><span class="line">		<span class="comment">//B类的无参构造中虽然没有写super()，但是仍然会默认调用A类的无参构造</span></span><br><span class="line">        <span class="comment">//可以看到会输出“A类无参构造器"和"B类无参构造器")</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>情景举例4：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	A()&#123;</span><br><span class="line">		System.out.println(<span class="string">"A类无参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	B()&#123;</span><br><span class="line">        <span class="keyword">super</span>();</span><br><span class="line">		System.out.println(<span class="string">"B类无参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">        <span class="comment">//A类显示声明一个无参构造，</span></span><br><span class="line">		<span class="comment">//B类显示声明一个无参构造，        </span></span><br><span class="line">		<span class="comment">//B类的无参构造中明确写了super()，表示调用A类的无参构造</span></span><br><span class="line">        <span class="comment">//可以看到会输出“A类无参构造器"和"B类无参构造器")</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>情景举例5：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	A(<span class="keyword">int</span> a)&#123;</span><br><span class="line">		System.out.println(<span class="string">"A类有参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	B()&#123;</span><br><span class="line">		System.out.println(<span class="string">"B类无参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test05</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">        <span class="comment">//A类显示声明一个有参构造，没有写无参构造，那么A类就没有无参构造了</span></span><br><span class="line">		<span class="comment">//B类显示声明一个无参构造，        </span></span><br><span class="line">		<span class="comment">//B类的无参构造没有写super(...)，表示默认调用A类的无参构造</span></span><br><span class="line">        <span class="comment">//编译报错，因为A类没有无参构造</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212159309.png" alt="image-20200227141228450"></p>
<p>情景举例6：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	A(<span class="keyword">int</span> a)&#123;</span><br><span class="line">		System.out.println(<span class="string">"A类有参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	B()&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		System.out.println(<span class="string">"B类无参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test06</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        B b = <span class="keyword">new</span> B();</span><br><span class="line">        <span class="comment">//A类显示声明一个有参构造，没有写无参构造，那么A类就没有无参构造了</span></span><br><span class="line">		<span class="comment">//B类显示声明一个无参构造，        </span></span><br><span class="line">		<span class="comment">//B类的无参构造明确写super()，表示调用A类的无参构造</span></span><br><span class="line">        <span class="comment">//编译报错，因为A类没有无参构造</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212200300.png" alt="image-20200303183542807"></p>
<p>情景举例7：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	A(<span class="keyword">int</span> a)&#123;</span><br><span class="line">		System.out.println(<span class="string">"A类有参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	B(<span class="keyword">int</span> a)&#123;</span><br><span class="line">		<span class="keyword">super</span>(a);</span><br><span class="line">		System.out.println(<span class="string">"B类有参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test07</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        B b = <span class="keyword">new</span> B(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//A类显示声明一个有参构造，没有写无参构造，那么A类就没有无参构造了</span></span><br><span class="line">		<span class="comment">//B类显示声明一个有参构造，        </span></span><br><span class="line">		<span class="comment">//B类的有参构造明确写super(a)，表示调用A类的有参构造</span></span><br><span class="line">        <span class="comment">//会打印“A类有参构造器"和"B类有参构造器"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>情景举例8：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    A()&#123;</span><br><span class="line">        System.out.println(<span class="string">"A类无参构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	A(<span class="keyword">int</span> a)&#123;</span><br><span class="line">		System.out.println(<span class="string">"A类有参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">    B()&#123;</span><br><span class="line">        <span class="keyword">super</span>();<span class="comment">//可以省略，调用父类的无参构造</span></span><br><span class="line">        System.out.println(<span class="string">"B类无参构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	B(<span class="keyword">int</span> a)&#123;</span><br><span class="line">		<span class="keyword">super</span>(a);<span class="comment">//调用父类有参构造</span></span><br><span class="line">		System.out.println(<span class="string">"B类有参构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test8</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        B b1 = <span class="keyword">new</span> B();</span><br><span class="line">        B b2 = <span class="keyword">new</span> B(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-小结：this与super"><a href="#5-3-小结：this与super" class="headerlink" title="5.3 小结：this与super"></a>5.3 小结：this与super</h3><p><strong>1、this和super的意义</strong></p>
<p>this：当前对象</p>
<ul>
<li>在构造器和非静态代码块中，表示正在new的对象</li>
<li>在实例方法中，表示调用当前方法的对象</li>
</ul>
<p>super：引用父类声明的成员</p>
<p><strong>2、this和super的使用格式</strong></p>
<ul>
<li>this<ul>
<li>this.成员变量：表示当前对象的某个成员变量，而不是局部变量</li>
<li>this.成员方法：表示当前对象的某个成员方法，完全可以省略this.</li>
<li>this()或this(实参列表)：调用另一个构造器协助当前对象的实例化，只能在构造器首行，只会找本类的构造器，找不到就报错</li>
</ul>
</li>
<li>super<ul>
<li>super.成员变量：表示当前对象的某个成员变量，该成员变量在父类中声明的</li>
<li>super.成员方法：表示当前对象的某个成员方法，该成员方法在父类中声明的</li>
<li>super()或super(实参列表)：调用父类的构造器协助当前对象的实例化，只能在构造器首行，只会找直接父类的对应构造器，找不到就报错</li>
</ul>
</li>
</ul>
<h3 id="5-4-练习"><a href="#5-4-练习" class="headerlink" title="5.4 练习"></a>5.4 练习</h3><p><strong>练习1：</strong>修改方法重写的练习2中定义的类Kids中employeed()方法，在该方法中调用父类ManKind的employeed()方法，然后再输出“but Kids should study and no job.”</p>
<p><strong>练习2：</strong>修改继承中的练习3中定义的Cylinder类，在Cylinder类中覆盖findArea()方法，计算圆柱的表面积。考虑：findVolume方法怎样做相应的修改？</p>
<p>在CylinderTest类中创建Cylinder类的对象，设置圆柱的底面半径和高，并输出圆柱的表面积和体积。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public double findVolume()&#123;</span><br><span class="line">    return super.findArea()*length;  &#x2F;&#x2F;直接super调用父类的方法</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public double findArea()&#123;</span><br><span class="line">    &#x2F;&#x2F;S表&#x3D;2πr²+2πrh</span><br><span class="line">	&#x2F;&#x2F;直接super调用父类的属性 因为是private就改成调用get方法</span><br><span class="line">    return 2*Math.PI*super.getRadius()*super.getRadius()+2*Math.PI*super.getRadius()*this.length;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>附加题：在CylinderTest类中创建一个Circle类的对象，设置圆的半径，计算输出圆的面积。体会父类和子类成员的分别调用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Circle circle&#x3D;new Circle();</span><br><span class="line">circle.setRadius(2);</span><br><span class="line">System.out.println(circle.findArea());  &#x2F;&#x2F;直接自己调用自己方法就行</span><br></pre></td></tr></table></figure>

<p><strong>练习3：</strong></p>
<p>1、写一个名为Account的类模拟账户。该类的属性和方法如下图所示。该类包括的属性：账号id，余额balance，年利率annualInterestRate；包含的方法：访问器方法（getter和setter方法），返回月利率的方法getMonthlyInterest()，取款方法withdraw()，存款方法deposit()。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212200145.png" alt="image-20220324003430464"></p>
<p>写一个用户程序测试Account类。在用户程序中，创建一个账号为1122、余额为20000、年利率4.5%的Account对象。使用withdraw方法提款30000元，并打印余额。<br>再使用withdraw方法提款2500元，使用deposit方法存款3000元，然后打印余额和月利率。</p>
<p>提示：在提款方法withdraw中，需要判断用户余额是否能够满足提款数额的要求，如果不能，应给出提示。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">public class Account &#123;</span><br><span class="line">    private int id;  &#x2F;&#x2F;账号</span><br><span class="line">    private double balance;  &#x2F;&#x2F;余额</span><br><span class="line">    private double annuallnterestRate;  &#x2F;&#x2F;年利率</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;三个private属性的set和get方法</span><br><span class="line">    public void setId(int id)&#123;</span><br><span class="line">        this.id&#x3D;id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getId()&#123;</span><br><span class="line">        return this.id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBalance(double balance) &#123;</span><br><span class="line">        this.balance &#x3D; balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getBalance() &#123;</span><br><span class="line">        return this.balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAnnuallnterestRate(double annuallnterestRate) &#123;</span><br><span class="line">        this.annuallnterestRate &#x3D; annuallnterestRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getAnnuallnterestRate() &#123;</span><br><span class="line">        return this.annuallnterestRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;构造器</span><br><span class="line">    public Account(int id,double balance,double annuallnterestRate)&#123;</span><br><span class="line">        this.id&#x3D;id;</span><br><span class="line">        this.balance&#x3D;balance;</span><br><span class="line">        this.annuallnterestRate&#x3D;annuallnterestRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;返回月利率</span><br><span class="line">    public double getMonthlyInterest()&#123;</span><br><span class="line">        return this.annuallnterestRate&#x2F;12;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;取款</span><br><span class="line">    public void withdraw(double amount)&#123;</span><br><span class="line">        if(balance&lt;amount)&#123;</span><br><span class="line">            System.out.println(&quot;余额不够!!!&quot;);</span><br><span class="line">            return;  &#x2F;&#x2F;一定要return 不然余额还是会扣除</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;取款</span><br><span class="line">        balance-&#x3D;amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;存款</span><br><span class="line">    public void deposit(double amount)&#123;</span><br><span class="line">        &#x2F;&#x2F;存款</span><br><span class="line">        balance+&#x3D;amount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class AccountTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Account account&#x3D;new Account(1122,20000,0.045);</span><br><span class="line">        &#x2F;&#x2F;取款30000</span><br><span class="line">        account.withdraw(30000);</span><br><span class="line">        System.out.println(&quot;现在余额是:&quot;+account.getBalance());</span><br><span class="line">        &#x2F;&#x2F;取款2500</span><br><span class="line">        account.withdraw(2500);</span><br><span class="line">        &#x2F;&#x2F;存款3000</span><br><span class="line">        account.deposit(3000);</span><br><span class="line">        System.out.println(&quot;现在余额是:&quot;+account.getBalance());</span><br><span class="line">        System.out.println(&quot;现在是月利率是:&quot;+account.getMonthlyInterest());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如图所示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212200394.png" alt="image-20231003170202016"></p>
<p>2、创建Account类的一个子类CheckAccount代表可透支的账户，该账户中定义一个属性overdraft代表可透支限额。在CheckAccount类中重写withdraw方法，其算法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">如果（取款金额&lt;账户余额），</span><br><span class="line">	可直接取款</span><br><span class="line">如果（取款金额&gt;账户余额），</span><br><span class="line">	计算需要透支的额度</span><br><span class="line">	判断可透支额overdraft是否足够支付本次透支需要，如果可以</span><br><span class="line">		将账户余额修改为0，冲减可透支金额</span><br><span class="line">	如果不可以</span><br><span class="line">		提示用户超过可透支额的限额</span><br></pre></td></tr></table></figure>



<p>要求：写一个用户程序测试CheckAccount类。在用户程序中，创建一个账号为1122、余额为20000、年利率4.5%，可透支限额为5000元的CheckAccount对象。</p>
<p>使用withdraw方法提款5000元，并打印账户余额和可透支额。</p>
<p>再使用withdraw方法提款18000元，并打印账户余额和可透支额。</p>
<p>再使用withdraw方法提款3000元，并打印账户余额和可透支额。</p>
<p>提示：</p>
<p>（1）子类CheckAccount的构造方法需要将从父类继承的3个属性和子类自己的属性全部初始化。【不然被报错】</p>
<p>（2）父类Account的属性balance被设置为private，但在子类CheckAccount的withdraw方法中需要修改它的值，因此应修改父类的balance属性，定义其为protected。【也可以不修改，子类继承父类所有方法 直接用super.setBalance(super.getBalance()-amount);】</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;代表 可透支的账户</span><br><span class="line">public class CheckAccount extends Account &#123;  &#x2F;&#x2F;子类</span><br><span class="line">    private double overdraft;  &#x2F;&#x2F; 可透支额度</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;子类构造器</span><br><span class="line">    public CheckAccount(int id, double balance, double annuallnterestRate,double overdraft) &#123;</span><br><span class="line">        super(id, balance, annuallnterestRate);  &#x2F;&#x2F;显式用super调用父类构造器 [如果不写的话就默认是super()无参构造器]</span><br><span class="line">        this.overdraft&#x3D;overdraft;  &#x2F;&#x2F;自己属性</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;get和set方法</span><br><span class="line">    public double getOverdraft() &#123;</span><br><span class="line">        return overdraft;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setOverdraft(double overdraft) &#123;</span><br><span class="line">        this.overdraft &#x3D; overdraft;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;重写withdraw方法取款</span><br><span class="line">    @Override</span><br><span class="line">    public void withdraw(double amount)&#123;</span><br><span class="line">        &#x2F;&#x2F;因为子类没有balance属性 所以不写super也会从子类找到父类</span><br><span class="line">        if(amount&lt;super.getBalance())&#123;</span><br><span class="line">            super.setBalance(super.getBalance()-amount);  &#x2F;&#x2F;符合条件可以取款</span><br><span class="line">        &#125;</span><br><span class="line">        if(amount&gt;super.getBalance())&#123;</span><br><span class="line">            double cha&#x3D;amount-super.getBalance(); &#x2F;&#x2F;需要透支的额度</span><br><span class="line">            if(this.overdraft&gt;cha)&#123;</span><br><span class="line">                super.setBalance(0);  &#x2F;&#x2F;账户余额修改为0  减少可透支余额</span><br><span class="line">                this.overdraft-&#x3D;cha;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                System.out.println(&quot;超过了可透支余额的限额&quot;);</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class CheckAccountTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        CheckAccount checkAccount&#x3D;new CheckAccount(1122,20000,0.045,5000);</span><br><span class="line">        System.out.println(&quot;一开始余额是:&quot;+checkAccount.getOverdraft());</span><br><span class="line">        System.out.println(&quot;一开始可透支额度是：&quot;+checkAccount.getBalance());</span><br><span class="line">        System.out.println(&quot;--------------------------------------------&quot;);</span><br><span class="line">        checkAccount.withdraw(5000);</span><br><span class="line">        System.out.println(&quot;取了5000之后余额是:&quot;+checkAccount.getBalance());</span><br><span class="line">        System.out.println(&quot;现在可透支额度是：&quot;+checkAccount.getOverdraft());</span><br><span class="line">        System.out.println(&quot;--------------------------------------------&quot;);</span><br><span class="line">        checkAccount.withdraw(18000);</span><br><span class="line">        System.out.println(&quot;取了18000之后余额是:&quot;+checkAccount.getBalance());</span><br><span class="line">        System.out.println(&quot;现在可透支额度是：&quot;+checkAccount.getOverdraft());</span><br><span class="line">        System.out.println(&quot;--------------------------------------------&quot;);</span><br><span class="line">        checkAccount.withdraw(3000);</span><br><span class="line">        System.out.println(&quot;取了3000之后余额是:&quot;+checkAccount.getBalance());</span><br><span class="line">        System.out.println(&quot;现在可透支额度是：&quot;+checkAccount.getOverdraft());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212200466.png" alt="image-20231003172602789"></p>
<h2 id="6-子类对象实例化全过程"><a href="#6-子类对象实例化全过程" class="headerlink" title="6. 子类对象实例化全过程"></a>6. 子类对象实例化全过程</h2><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212200527.png" alt="image-20220324003713230"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dog dog = <span class="keyword">new</span> Dog(<span class="string">"小花"</span>,<span class="string">"小红"</span>);</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212200883.png" alt="image-20220324003735416" style="zoom:80%;">

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212200275.png" alt="image-20220324003813163" style="zoom:67%;">

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Creature</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Creature</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Creature无参数的构造器"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> <span class="keyword">extends</span> <span class="title">Creature</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Animal</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Animal带一个参数的构造器，该动物的name为"</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Animal</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(name);  <span class="comment">//调用上面的构造器</span></span><br><span class="line">        System.out.println(<span class="string">"Animal带两个参数的构造器，其age为"</span> + age);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dog</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="string">"汪汪队阿奇"</span>, <span class="number">3</span>);  <span class="comment">//调用父类的构造器</span></span><br><span class="line">        System.out.println(<span class="string">"Dog无参数的构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Dog();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212200421.png" alt="image-20231003201658599"></p>
<h2 id="7-面向对象特征三：多态性"><a href="#7-面向对象特征三：多态性" class="headerlink" title="7. 面向对象特征三：多态性"></a>7. 面向对象特征三：多态性</h2><blockquote>
<p>一千个读者眼中有一千个哈姆雷特。</p>
</blockquote>
<h3 id="7-1-多态的形式和体现"><a href="#7-1-多态的形式和体现" class="headerlink" title="7.1 多态的形式和体现"></a>7.1 多态的形式和体现</h3><h4 id="7-1-1-对象的多态性"><a href="#7-1-1-对象的多态性" class="headerlink" title="7.1.1 对象的多态性"></a>7.1.1 对象的多态性</h4><p>多态性，是面向对象中最重要的概念，在Java中的体现：<strong>对象的多态性：父类的引用指向子类的对象</strong></p>
<p>格式：（父类类型：指子类继承的父类类型，或者实现的接口类型）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">父类类型 变量名 = 子类对象；</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line">Object o = <span class="keyword">new</span> Person();<span class="comment">//Object类型的变量o，指向Person类型的对象</span></span><br><span class="line"></span><br><span class="line">o = <span class="keyword">new</span> Student(); <span class="comment">//Object类型的变量o，指向Student类型的对象</span></span><br></pre></td></tr></table></figure>

<p>对象的多态：在Java中，子类的对象可以替代父类的对象使用。所以，一个引用类型变量可能指向(引用)多种不同类型的对象</p>
<h4 id="7-1-2-多态的理解"><a href="#7-1-2-多态的理解" class="headerlink" title="7.1.2 多态的理解"></a>7.1.2 多态的理解</h4><p>Java引用变量有两个类型：<code>编译时类型</code>和<code>运行时类型</code>。编译时类型由<code>声明</code>该变量时使用的类型决定，运行时类型由<code>实际赋给该变量的对象</code>决定。<br>简称：<strong>编译时，看左边；运行时，看右边。</strong></p>
<ul>
<li><p>若编译时类型和运行时类型不一致，就出现了对象的多态性(Polymorphism)</p>
</li>
<li><p>多态情况下，“看左边”：看的是父类的引用（父类中不具备子类特有的方法）</p>
<pre><code>“看右边”：看的是子类的对象（实际运行的是子类重写父类的方法）</code></pre></li>
<li><p>多态的<strong>使用前提</strong>：① 类的继承关系  ② 方法的重写</p>
</li>
<li><p>多态的<strong>适用性</strong>：适用于方法，不适用于属性</p>
</li>
<li></li>
</ul>
<h4 id="7-1-3-举例"><a href="#7-1-3-举例" class="headerlink" title="7.1.3 举例"></a>7.1.3 举例</h4><p>创建人、男人和女人三个class。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">int</span> id=<span class="number">1001</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"人吃饭"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"人走路"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Man</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">boolean</span> isSmoking;</span><br><span class="line">    <span class="keyword">int</span> id=<span class="number">1002</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"男人多吃肉，长肌肉"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"男人笔挺的走路"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">earnMoney</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"男人挣钱养家"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Woman</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> isBeauty;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"女人应该少吃，减肥"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">walk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"女人窈窕的走路"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">goShopping</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"女人喜欢逛街..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class PersonTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;1.多态性之前的场景</span><br><span class="line">        Person p1&#x3D;new Person();</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;2.多态性  &#123;左右不一致&#125;</span><br><span class="line">        Person p2&#x3D;new Man();</span><br><span class="line">        &#x2F;&#x2F;走的是man的方法</span><br><span class="line">        System.out.println(p2.id);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201490.png" alt="image-20231003220858899"></p>
<h3 id="7-2-为什么需要多态性-polymorphism-？"><a href="#7-2-为什么需要多态性-polymorphism-？" class="headerlink" title="7.2 为什么需要多态性(polymorphism)？"></a>7.2 为什么需要多态性(polymorphism)？</h3><p>开发中，有时我们在设计一个数组、或一个成员变量、或一个方法的形参、返回值类型时，无法确定它具体的类型，只能确定它是某个系列的类型。<br>[<strong>在设计时候无法确定具体是什么？</strong>]</p>
<p>案例：</p>
<p>（1）声明一个Animal类，包含eat()和jump()方法</p>
<p>（2）声明一个Cat类，重写eat()和jump()方法，并且多一个catchMouse()方法</p>
<p>（3）声明一个Dog类，重写eat()和jump()方法，并且多一个watchDoor()方法</p>
<p>（4）声明一个AnimalTest类，包含adopt(Animal animal)方法，<strong>主要是收养动物【这时候不知道收养的是什么】 –&gt; 考虑多态性</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">class Animal&#123;</span><br><span class="line">    public void eat()&#123;</span><br><span class="line">        System.out.println(&quot;动物进食&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public void jump()&#123;</span><br><span class="line">        System.out.println(&quot;动物跳&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"猫吃鱼"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jump</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"猫跳~~"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">catchMouse</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"猫抓老鼠"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"狗吃骨头"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jump</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"狗急跳墙"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">watchDoor</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"狗能看家"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnimalTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AnimalTest test=<span class="keyword">new</span> AnimalTest();</span><br><span class="line">        <span class="comment">//多态性就可以直接更换new的对象就行 就不用写很多adopt方法了</span></span><br><span class="line">        test.adopt(<span class="keyword">new</span> Dog()); <span class="comment">//就可以执行时候考虑具体的动物对象!!!</span></span><br><span class="line">        test.adopt(<span class="keyword">new</span> Cat()); <span class="comment">//就可以执行时候考虑具体的动物对象!!!</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//领养动物</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">adopt</span><span class="params">(Animal animal)</span></span>&#123;  <span class="comment">//声明一个动物 但是实际上传进来new可以是Dog 或者Cat</span></span><br><span class="line">        animal.eat();</span><br><span class="line">        animal.jump();</span><br><span class="line">        <span class="comment">//在这个情况下就不能写animal.子类方法()!!!!  因为设计的时候只是知道是个动物</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-多态的好处和弊端"><a href="#7-3-多态的好处和弊端" class="headerlink" title="7.3 多态的好处和弊端"></a>7.3 多态的好处和弊端</h3><p><strong>好处</strong>：变量引用的子类对象不同，执行的方法就不同，实现<strong>动态绑定【要什么传入什么】</strong>。代码编写更灵活、功能更强大，可维护性和扩展性更好了。</p>
<p><strong>弊端</strong>：一个引用类型变量如果声明为父类的类型，但实际引用的是子类对象，那么该变量就<strong>不能再访问子类中添加的属性和方法</strong>。<strong>【只能访问被重写的方法和父类的属性】</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;多态的好处!!!</span><br><span class="line">public class AnimalTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        AnimalTest test&#x3D;new AnimalTest();</span><br><span class="line">        &#x2F;&#x2F;多态性就可以直接更换new的对象就行 就不用写很多adopt方法了</span><br><span class="line">        test.adopt(new Dog()); &#x2F;&#x2F;就可以执行时候考虑具体的动物对象!!!</span><br><span class="line">        test.adopt(new Cat()); &#x2F;&#x2F;就可以执行时候考虑具体的动物对象!!!</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;领养动物</span><br><span class="line">    public void adopt(Animal animal)&#123;  &#x2F;&#x2F;声明一个动物 但是实际上传进来new可以是Dog 或者Cat    ------多态的好处!!!!!!!</span><br><span class="line">        animal.eat();</span><br><span class="line">        animal.jump();</span><br><span class="line">        &#x2F;&#x2F;在这个情况下就不能写animal.子类方法()!!!!  因为设计的时候只是知道是个动物</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;多态的弊端!!!</span><br><span class="line">&#x2F;&#x2F;[基于7.1.3举例的Person Woman Man[]</span><br><span class="line">public class PersonTest1 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;向下转型</span><br><span class="line">        Person p1&#x3D;new Man();</span><br><span class="line">        &#x2F;&#x2F;不能调用子类特有的属性和方法   ------多态的弊端!!!!!!!!</span><br><span class="line">        &#x2F;&#x2F;p1.earnMoney();</span><br><span class="line">        &#x2F;&#x2F;System.out.println(p1.isSmoking); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<p>开发中：</p>
<p>方法形参：父类，是多态使用最多的场合。即使增加了新的子类，方法也无需改变，提高了扩展性，符合<strong>开闭原则</strong>。【你具体的类可以更新，毕竟我设计的时候用的是父类，这个不改就行】</p>
<p><strong>【开闭原则OCP】</strong></p>
<ul>
<li>对扩展开放，对修改关闭</li>
<li>通俗解释：软件系统中的各种组件，如模块（Modules）、类（Classes）以及功能（Functions）等，应该在不修改现有代码的基础上，引入新功能</li>
</ul>
</blockquote>
<h3 id="7-4-虚方法调用-Virtual-Method-Invocation"><a href="#7-4-虚方法调用-Virtual-Method-Invocation" class="headerlink" title="7.4 虚方法调用(Virtual Method Invocation)"></a>7.4 虚方法调用(Virtual Method Invocation)</h3><p>在Java中虚方法是指在编译阶段不能确定方法的调用入口地址，在运行阶段才能确定的方法，即可能被重写的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Person e = <span class="keyword">new</span> Student();</span><br><span class="line">e.getInfo();	<span class="comment">//调用Student类的getInfo()方法</span></span><br></pre></td></tr></table></figure>

<p>子类中定义了与父类同名同参数的方法，在多态情况下，将此时父类的方法称为<strong>虚方法</strong>，父类根据赋给它的不同子类对象，动态调用属于子类的该方法。这样的方法调用在编译期是无法确定的。</p>
<p>举例：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201019.png" alt="image-20220324234208997"></p>
<p>前提：Person类中定义了welcome()方法，各个子类重写了welcome()。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201354.png" alt="image-20220324234214932"></p>
<p>执行：多态的情况下，调用对象的welcome()方法，实际执行的是子类重写的方法。</p>
<blockquote>
<p>拓展：</p>
<p><code>静态链接（或早起绑定）</code>：当一个字节码文件被装载进JVM内部时，如果被调用的目标方法在编译期可知，且运行期保持不变时。这种情况下将调用方法的符号引用转换为直接引用的过程称之为静态链接。那么调用这样的方法，就称为非虚方法调用。比如调用静态方法、私有方法、final方法、父类构造器、本类重载构造器等。</p>
<p><code>动态链接（或晚期绑定）</code>：如果被调用的方法在编译期无法被确定下来，也就是说，只能够在程序运行期将调用方法的符号引用转换为直接引用，由于这种引用转换过程具备动态性，因此也就被称之为动态链接。调用这样的方法，就称为虚方法调用。比如调用重写的方法（针对父类）、实现的方法（针对接口）。</p>
</blockquote>
<h3 id="7-5-成员变量没有多态性"><a href="#7-5-成员变量没有多态性" class="headerlink" title="7.5 成员变量没有多态性"></a>7.5 成员变量没有多态性</h3><ul>
<li><p>若子类重写了父类方法，就意味着子类里定义的方法彻底覆盖了父类里的同名方法，系统将不可能把父类里的方法转移到子类中。</p>
</li>
<li><p>对于实例变量则不存在这样的现象，即使子类里定义了与父类完全相同的实例变量，这个实例变量依然不可能覆盖父类中定义的实例变量</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.polymorphism.grammar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestVariable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Base b = <span class="keyword">new</span> Sub();</span><br><span class="line">        System.out.println(b.a);</span><br><span class="line">        System.out.println(((Sub)b).a);</span><br><span class="line"></span><br><span class="line">        Sub s = <span class="keyword">new</span> Sub();</span><br><span class="line">        System.out.println(s.a);</span><br><span class="line">        System.out.println(((Base)s).a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub</span> <span class="keyword">extends</span> <span class="title">Base</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-6-向上转型与向下转型"><a href="#7-6-向上转型与向下转型" class="headerlink" title="7.6 向上转型与向下转型"></a>7.6 向上转型与向下转型</h3><p>首先，一个对象在new的时候创建是哪个类型的对象，它从头至尾都不会变。即这个对象的运行时类型，本质的类型用于不会变。但是，把这个对象赋值给不同类型的变量时，这些变量的编译时类型却不同。</p>
<h4 id="7-6-1-为什么要类型转换"><a href="#7-6-1-为什么要类型转换" class="headerlink" title="7.6.1 为什么要类型转换"></a>7.6.1 为什么要类型转换</h4><p>​    多态的弊端，因为多态我们就<code>不能调用</code>子类特有的方法和属性。所以，<strong>想要调用子类特有的方法</strong>，<strong>必须做类型转换</strong>，使得<code>编译通过</code>。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201908.png" alt="image-20220324235337563" style="zoom:80%;">

<ul>
<li><p><strong>向上转型</strong>：当左边的变量的类型（父类） &gt; 右边对象/变量的类型（子类），我们就称为向上转型</p>
<ul>
<li>此时，编译时按照左边变量的类型处理，就只能调用父类中有的变量和方法，不能调用子类特有的变量和方法了</li>
<li>但是，<strong>运行时，仍然是对象本身的类型</strong>，所以执行的方法是子类重写的方法体。</li>
<li>此时，一定是安全的，而且也是自动完成的</li>
</ul>
</li>
<li><p><strong>向下转型</strong>：当左边的变量的类型（子类）&lt;右边对象/变量的编译时类型（父类），我们就称为向下转型</p>
<ul>
<li>此时，编译时按照左边变量的类型处理，就可以调用子类特有的变量和方法了</li>
<li>但是，<strong>运行时，仍然是对象本身的类型</strong></li>
<li>不是所有通过编译的向下转型都是正确的，可能会发生ClassCastException，为了安全，可以通过isInstanceof关键字进行判断</li>
</ul>
</li>
</ul>
<h4 id="7-6-2-如何向上或向下转型"><a href="#7-6-2-如何向上或向下转型" class="headerlink" title="7.6.2 如何向上或向下转型"></a>7.6.2 如何向上或向下转型</h4><p>向上转型：自动完成</p>
<p>向下转型：（子类类型）父类变量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基于7.1.3举例的Person Woman Man</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PersonTest1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//向下转型</span></span><br><span class="line">        Person p1=<span class="keyword">new</span> Man();</span><br><span class="line">        <span class="comment">//不能调用子类特有的属性和方法</span></span><br><span class="line">        <span class="comment">//p1.earnMoney();</span></span><br><span class="line">        <span class="comment">//System.out.println(p1.isSmoking);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//向下转型【强转】</span></span><br><span class="line">        Man m1=(Man)p1;  <span class="comment">//p1和m1指向堆的同一个地址</span></span><br><span class="line">        m1.earnMoney();</span><br><span class="line">        System.out.println(m1.isSmoking);</span><br><span class="line">         </span><br><span class="line">    	<span class="comment">//可能会出现类型转换异常【ClassCastException】</span></span><br><span class="line">        <span class="comment">//Person p2=new Woman();</span></span><br><span class="line">        <span class="comment">//Man m2=(Man)p2;</span></span><br><span class="line">        <span class="comment">//m2.earnMoney();</span></span><br><span class="line">        <span class="comment">//  |</span></span><br><span class="line">        <span class="comment">//  |    </span></span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201180.png" alt="image-20231003220521144"></p>
<h4 id="7-6-3-instanceof关键字"><a href="#7-6-3-instanceof关键字" class="headerlink" title="7.6.3 instanceof关键字"></a>7.6.3 instanceof关键字</h4><p>但是向下转型类似于数据类型转换一样，可能会存在并不是这个子类，但是你要转移成这个子类，就会出现ClassCastException!!!</p>
<p><img src=".images/image-20231003221329249.png" alt="image-20231003221329249"></p>
<p>为了避免ClassCastException的发生，Java提供了 <code>instanceof</code> 关键字，给引用变量做类型的校验。如下代码格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//检验对象a是否是数据类型A的对象，返回值为boolean型</span></span><br><span class="line">对象a <span class="keyword">instanceof</span> 数据类型A</span><br></pre></td></tr></table></figure>

<ul>
<li>说明：<ul>
<li>只要用instanceof判断返回true的，那么强转为该类型就一定是安全的，不会报ClassCastException异常。</li>
<li>如果对象a属于类A的子类B，a instanceof A值也为true。</li>
<li>要求对象a所属的类与类A必须是子类和父类的关系，否则编译错误。</li>
<li>如果a instanceOf A 返回true，则：a instanceOf superA 返回也是true。[A是superA的子类]</li>
</ul>
</li>
</ul>
<p>代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Person p2=<span class="keyword">new</span> Woman();</span><br><span class="line">      <span class="keyword">if</span>(p2 <span class="keyword">instanceof</span> Man)&#123;  <span class="comment">//如果属于女人类就进强制转换</span></span><br><span class="line">          Man m2=(Man)p2;</span><br><span class="line">          m2.earnMoney(); </span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-7-练习"><a href="#7-7-练习" class="headerlink" title="7.7 练习"></a>7.7 练习</h3><p><strong>练习1：笔试&amp;面试</strong></p>
<p>题目1：继承成员变量和继承方法的区别</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">10</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.count);  <span class="comment">//展示base类的count属性10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123; <span class="comment">//子类</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">20</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.count);  <span class="comment">//展示Sub类的count属性20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FieldMethodTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="comment">//创建一个子类对象</span></span><br><span class="line">        Sub s = <span class="keyword">new</span> Sub();</span><br><span class="line">        System.out.println(s.count); <span class="comment">// 输出20</span></span><br><span class="line">        s.display(); <span class="comment">// 输出20</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//多态</span></span><br><span class="line">        Base b = s;</span><br><span class="line">        System.out.println(b == s);  <span class="comment">// 因为两个指向同一个子类对象 所以输出true</span></span><br><span class="line">        System.out.println(b.count);  <span class="comment">//这时候还是父类的属性 输出10</span></span><br><span class="line">        b.display();  <span class="comment">//输出20</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//考查多态的笔试题目：</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterviewTest1</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">//多态</span></span><br><span class="line">        Base base = <span class="keyword">new</span> Sub();</span><br><span class="line">        base.add(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);  <span class="comment">//调用被重写的子类方法  输出sub_1</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span>... arr)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"base"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sub</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"sub_1"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//getXxx()和setXxx()声明在哪个类中，内部操作的属性就是哪个类里的。</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterviewTest2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//普通创建父类对象f</span></span><br><span class="line">        Father f = <span class="keyword">new</span> Father();</span><br><span class="line">        <span class="comment">//普通创建子类对象s</span></span><br><span class="line">        Son s = <span class="keyword">new</span> Son();</span><br><span class="line">        System.out.println(f.getInfo());  <span class="comment">//输出父类属性 atguigu</span></span><br><span class="line">        System.out.println(s.getInfo());  <span class="comment">//输出子类属性 尚硅谷</span></span><br><span class="line">        <span class="comment">//输出子类的方法</span></span><br><span class="line">        s.test(); <span class="comment">//输出 尚硅谷 atguigu</span></span><br><span class="line">        System.out.println(<span class="string">"-----------------"</span>);</span><br><span class="line">        <span class="comment">//更改子类的属性为大硅谷</span></span><br><span class="line">        s.setInfo(<span class="string">"大硅谷"</span>);</span><br><span class="line">        System.out.println(f.getInfo()); <span class="comment">//输出 atguigu</span></span><br><span class="line">        System.out.println(s.getInfo()); <span class="comment">//输出 大硅谷</span></span><br><span class="line">        s.test(); <span class="comment">//输出 大硅谷 atguigu</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String info = <span class="string">"atguigu"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//私有属性的get和set方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfo</span><span class="params">(String info)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.info = info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;   <span class="comment">//继承父类</span></span><br><span class="line">    <span class="keyword">private</span> String info = <span class="string">"尚硅谷"</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setInfo</span><span class="params">(String info)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.info = info;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">this</span>.getInfo());   <span class="comment">//调用子类的属性 尚硅谷</span></span><br><span class="line">        System.out.println(<span class="keyword">super</span>.getInfo());  <span class="comment">//调用父类的属性 atguigu</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题目4：多态是编译时行为还是运行时行为？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;   <span class="comment">//父类</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"animal eat food"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;   <span class="comment">//子类继承父类</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"cat eat fish"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;   <span class="comment">//子类继承父类</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Dog eat bone"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sheep</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;   <span class="comment">//子类继承父类</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Sheep eat grass"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterviewTest</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Animal <span class="title">getInstance</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;  <span class="comment">//返回值是一个动物父类</span></span><br><span class="line">        <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Cat ();</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Dog ();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Sheep ();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> key = <span class="keyword">new</span> Random().nextInt(<span class="number">3</span>); <span class="comment">//随机生成0-3中的随机数</span></span><br><span class="line">        System.out.println(key); <span class="comment">//输出随机数</span></span><br><span class="line">        <span class="comment">//多态</span></span><br><span class="line">        Animal animal = getInstance(key);  <span class="comment">//获取子类</span></span><br><span class="line">        animal.eat(); <span class="comment">//是哪个子类就输出哪个子类的方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	<span class="comment">//protected修饰符 --可以跨包但是仅限子类可以获取到</span></span><br><span class="line">	<span class="keyword">protected</span> String name=<span class="string">"宋亚翔"</span>;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span> age=<span class="number">24</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	          <span class="keyword">return</span> <span class="string">"Name: "</span>+ name + <span class="string">"\n"</span> +<span class="string">"age: "</span>+ age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">//protected修饰符 --可以跨包但是仅限子类可以获取到</span></span><br><span class="line">	<span class="keyword">protected</span> String school=<span class="string">"东北林业大学"</span>;  <span class="comment">//子类特有的属性</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  	          <span class="keyword">return</span>  <span class="string">"Name: "</span>+ name + <span class="string">"\nage: "</span>+ age + <span class="string">"\nschool: "</span>+ school;</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Graduate</span> <span class="keyword">extends</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> String major=<span class="string">"计算机"</span>;  <span class="comment">//子类特有的属性</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span>  <span class="string">"Name: "</span>+ name + <span class="string">"\nage: "</span>+ age + <span class="string">"\nschool: "</span>+ school+<span class="string">"\nmajor:"</span>+major;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>建立InstanceTest 类，在类中定义方法method(Person e);<br>在method中:<br>(1)根据e的类型调用相应类的getInfo()方法。<br>(2)根据e的类型执行：<br>如果e为Person类的对象，输出：<br>“a person”;<br>如果e为Student类的对象，输出：<br>“a student”<br>“a person ”<br>如果e为Graduate类的对象，输出：<br>“a graduated student”<br>“a student”<br>“a person”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">public class InstanceTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Person person&#x3D;new Person();</span><br><span class="line">        Person person1&#x3D;new Student();</span><br><span class="line">        Person person2&#x3D;new Graduate();</span><br><span class="line">        InstanceTest test&#x3D;new InstanceTest();</span><br><span class="line">        test.method(person);</span><br><span class="line">        System.out.println(&quot;--------------------------&quot;);</span><br><span class="line">        test.method(person1);</span><br><span class="line">        System.out.println(&quot;--------------------------&quot;);</span><br><span class="line">        test.method(person2);</span><br><span class="line">        System.out.println(&quot;--------------------------&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void method(Person e)&#123;</span><br><span class="line">    	&#x2F;&#x2F;设置key来接到底是哪个类 </span><br><span class="line">        int key &#x3D; 0;</span><br><span class="line">        if(e instanceof Person)&#123;</span><br><span class="line">            key&#x3D;0;</span><br><span class="line">        &#125;</span><br><span class="line">        if(e instanceof Student)&#123;</span><br><span class="line">            key&#x3D;1;</span><br><span class="line">        &#125;</span><br><span class="line">        if(e instanceof Graduate)&#123;</span><br><span class="line">            key&#x3D;2;</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F;根据key判断是哪个类型按照要求输出</span><br><span class="line">        switch (key)&#123;</span><br><span class="line">            case 0:System.out.println(e.getInfo());System.out.println(&quot;a person&quot;);</span><br><span class="line"> 				   break;</span><br><span class="line">            case 1:System.out.println(e.getInfo());</span><br><span class="line">                   System.out.println(&quot;a person&quot;);</span><br><span class="line">				   System.out.println(&quot;a student&quot;);</span><br><span class="line">                   break;</span><br><span class="line">            case 2:System.out.println(e.getInfo());</span><br><span class="line">				   System.out.println(&quot;a person&quot;);</span><br><span class="line">				   System.out.println(&quot;a student&quot;);</span><br><span class="line">				   System.out.println(&quot;a graduate&quot;);</span><br><span class="line">				   break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201594.png" alt="image-20231005215343643"></p>
<p><strong>练习3</strong>：定义三个类，父类GeometricObject代表几何形状，子类Circle代表圆形，MyRectangle代表矩形。定义一个测试类GeometricTest，编写equalsArea方法测试两个对象的面积是否相等（注意方法的参数类型，利用动态绑定技术），编写displayGeometricObject方法显示对象的面积（注意方法的参数类型，利用动态绑定技术）。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201972.png" alt="image-20220325000034619" style="zoom:67%;">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;几何类</span><br><span class="line">public class GeometricObject &#123;</span><br><span class="line">    &#x2F;&#x2F; 类图中#表示protected修饰符 --可以跨包但是只能是子类使用</span><br><span class="line">    protected String color;</span><br><span class="line">    protected double weight;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;有参构造器</span><br><span class="line">    protected GeometricObject(String color,double weight)&#123;</span><br><span class="line">        this.color&#x3D;color;</span><br><span class="line">        this.weight&#x3D;weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;set和get方法</span><br><span class="line">    public String getColor() &#123;</span><br><span class="line">        return color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setColor(String color) &#123;</span><br><span class="line">        this.color &#x3D; color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getWeight() &#123;</span><br><span class="line">        return weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setWeight(double weight) &#123;</span><br><span class="line">        this.weight &#x3D; weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;要被重写的方法</span><br><span class="line">    public double findArea()&#123;</span><br><span class="line">        return 0.0;  &#x2F;&#x2F;默认输出0  后来要被重写</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;圆类</span><br><span class="line">public class Circle extends GeometricObject&#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;子类私有属性 -半径</span><br><span class="line">    private double radius;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;构造器</span><br><span class="line">    protected Circle(double radius,String color, double weight) &#123;</span><br><span class="line">        super(color, weight);  &#x2F;&#x2F;【首行】调用父类构造器</span><br><span class="line">        this.radius&#x3D;radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;set和get方法</span><br><span class="line">    public double getRadius() &#123;</span><br><span class="line">        return radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setRadius(double radius) &#123;</span><br><span class="line">        this.radius &#x3D; radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public double findArea()&#123;</span><br><span class="line">        return Math.PI*radius*radius;  &#x2F;&#x2F;重写方法 返回Πr平方²</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;矩形</span><br><span class="line">public class MyRectangle extends GeometricObject&#123;</span><br><span class="line"></span><br><span class="line">    private double width;</span><br><span class="line">    private double height;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;构造器</span><br><span class="line">    public MyRectangle(double width,double height,String color,double weight)&#123;</span><br><span class="line">        super(color, weight); &#x2F;&#x2F;【首行】调用父类构造器</span><br><span class="line">        this.width&#x3D;width;</span><br><span class="line">        this.height&#x3D;height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;set和get方法</span><br><span class="line">    public double getWidth() &#123;</span><br><span class="line">        return width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setWidth(double width) &#123;</span><br><span class="line">        this.width &#x3D; width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getHeight() &#123;</span><br><span class="line">        return height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setHeight(double height) &#123;</span><br><span class="line">        this.height &#x3D; height;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public double findArea()&#123;</span><br><span class="line">        return width*height;  &#x2F;&#x2F;重写方法 返回长*宽</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class GeometricTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &#x2F;&#x2F;两个多态</span><br><span class="line">        GeometricObject g1&#x3D;new Circle(3,&quot;黄色&quot;,10);</span><br><span class="line">        GeometricObject g2&#x3D;new MyRectangle(3,4,&quot;绿色&quot;,10);</span><br><span class="line">        &#x2F;&#x2F;设定test对象测试方法</span><br><span class="line">        GeometricTest test&#x3D;new GeometricTest();</span><br><span class="line">        System.out.println(test.equalsArea(g1,g2));</span><br><span class="line">        System.out.println(test.displayGeometricObject(g1));</span><br><span class="line">        System.out.println(test.displayGeometricObject(g2));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public boolean equalsArea(GeometricObject g1,GeometricObject g2)&#123;</span><br><span class="line">          return g1.findArea()&#x3D;&#x3D;g2.findArea();  &#x2F;&#x2F;判断两个对象的面积是否相等</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double displayGeometricObject(GeometricObject g)&#123;</span><br><span class="line">        &#x2F;&#x2F;根据对象输出对应的方法</span><br><span class="line">        return g.findArea();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果截图如下:</p>
<p><img src=".images/image-20231005222429951.png" alt="image-20231005222429951"></p>
<h2 id="8-Object-类"><a href="#8-Object-类" class="headerlink" title="8. Object 类"></a>8. Object 类</h2><h3 id="8-1-如何理解根父类"><a href="#8-1-如何理解根父类" class="headerlink" title="8.1 如何理解根父类"></a>8.1 如何理解根父类</h3><p>类 <code>java.lang.Object</code>是类层次结构的根类，即所有其它类的父类。每个类都使用 <code>Object</code> 作为超类。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201270.png" alt="image-20220503104750655" style="zoom:67%;">

<ul>
<li><p>Object类型的变量与除Object以外的任意引用数据类型的对象都存在多态引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">method(Object obj)&#123;…&#125; <span class="comment">//可以接收任何类作为其参数</span></span><br><span class="line"></span><br><span class="line">Person o = <span class="keyword">new</span> Person();  </span><br><span class="line">method(o);</span><br></pre></td></tr></table></figure>
</li>
<li><p>所有对象（包括数组）都实现这个类的方法。</p>
</li>
<li><p>如果一个类没有特别指定父类，那么默认则继承自Object类。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//等价于：</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">Object</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="8-2-Object类的方法"><a href="#8-2-Object类的方法" class="headerlink" title="8.2 Object类的方法"></a>8.2 Object类的方法</h3><p>根据JDK源代码及Object类的API文档，Object类当中包含的方法有11个。这里我们主要关注其中的6个：</p>
<h4 id="1、-重点-equals"><a href="#1、-重点-equals" class="headerlink" title="1、(重点)equals()"></a>1、(重点)equals()</h4><p><strong>= =：</strong> </p>
<ul>
<li><p>1.基本类型:比较值:只要两个变量的值相等，即为true。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a=<span class="number">5</span>; </span><br><span class="line"><span class="keyword">if</span>(a==<span class="number">6</span>)&#123;…&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.引用类型:比较引用(是否指向同一个对象)：只有指向同一个对象时，==才返回true。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Person p1=<span class="keyword">new</span> Person();  	    </span><br><span class="line">Person p2=<span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">if</span> (p1==p2)&#123;…&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>用“==”进行比较时，符号两边的<code>数据类型必须兼容</code>(可自动转换的基本数据类型除外)，否则编译出错</li>
</ul>
</li>
</ul>
<p><strong>equals()：</strong>所有类都继承了Object，也就获得了equals()方法。还可以重写。</p>
<ul>
<li><p>只能比较引用类型，Object类源码中equals()的作用与“==”相同：比较是否指向同一个对象。     </p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201473.png" alt="image-20220503104750655" style="zoom:67%;">
</li>
<li><p>格式:obj1.equals(obj2)</p>
</li>
<li><blockquote>
<p>没有重写Object中equals()方法[自定义的类] –&gt; 比较两个对象的引用地址是否相同（或比较两个对象是否指向了堆空间中的同一个对象实体）</p>
</blockquote>
<blockquote>
<p>重写了Object类中的equals()方法[String、File、Date和包装类等] –&gt; 用于比较两个对象的实体内容是否相等</p>
</blockquote>
</li>
<li><p>重写equals()方法的原则</p>
<ul>
<li><p><code>对称性</code>：如果x.equals(y)返回是“true”，那么y.equals(x)也应该返回是“true”。</p>
</li>
<li><p><code>自反性</code>：x.equals(x)必须返回是“true”。</p>
</li>
<li><p><code>传递性</code>：如果x.equals(y)返回是“true”，而且y.equals(z)返回是“true”，那么z.equals(x)也应该返回是“true”。</p>
</li>
<li><p><code>一致性</code>：如果x.equals(y)返回是“true”，只要x和y内容一直不变，不管你重复x.equals(y)多少次，返回都是“true”。</p>
</li>
<li><p>任何情况下，x.equals(null)，永远返回是“false”；</p>
<p>​    x.equals(和x不同类型的对象)永远返回是“false”。</p>
</li>
</ul>
</li>
<li><p>重写equals()方法的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 1.自己写 </span><br><span class="line">&#x2F;&#x2F; 2.idea自动创建[Alt+Ins] 选中equals和hashCode()</span><br></pre></td></tr></table></figure>
</li>
<li><p>重写举例：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name,<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name=name;</span><br><span class="line">        <span class="keyword">this</span>.age=age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重写equals()</span></span><br><span class="line">    <span class="comment">// 1.自己写</span></span><br><span class="line">    <span class="comment">// 2.idea自动创建[Alt+Ins] 选中equals和hashCode() </span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == o) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (!(o <span class="keyword">instanceof</span> User user)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> age == user.age &amp;&amp; Objects.equals(name, user.name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>面试题：</strong>==和equals的区别</p>
<blockquote>
<p>从我面试的反馈，85%的求职者“理直气壮”的回答错误…</p>
</blockquote>
<ul>
<li><p>== 既可以比较基本类型也可以比较引用类型。对于基本类型就是比较值，对于引用类型就是比较内存地址</p>
</li>
<li><p>equals的话，它是属于java.lang.Object类里面的方法，如果该方法没有被重写过默认也是==;我们可以看到String等类的equals方法是被重写过的，而且String类在日常开发中用的比较多，久而久之，形成了equals是比较值的错误观点。</p>
</li>
<li><p>具体要看自定义类里有没有重写Object的equals方法来判断。</p>
</li>
<li><p>通常情况下，重写equals方法，会比较类中的相应属性是否都相等。</p>
</li>
</ul>
<p><strong>练习1：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> it = <span class="number">65</span>;</span><br><span class="line"><span class="keyword">float</span> fl = <span class="number">65.0f</span>;</span><br><span class="line">System.out.println(<span class="string">"65和65.0f是否相等？"</span> + (it == fl));  <span class="comment">// 两个是基本数据类型比较值 输出true 【int会自动类型转换为float】</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> ch1 = <span class="string">'A'</span>; <span class="keyword">char</span> ch2 = <span class="number">12</span>;</span><br><span class="line">System.out.println(<span class="string">"65和'A'是否相等？"</span> + (it == ch1));  <span class="comment">// 两个是基本数据类型比较值 输出true 【char会自动类型转换为int比较】</span></span><br><span class="line">System.out.println(<span class="string">"12和ch2是否相等？"</span> + (<span class="number">12</span> == ch2));  <span class="comment">// 两个是基本数据类型比较值 输出true 【char会自动类型转换为int比较】</span></span><br><span class="line"></span><br><span class="line">String str1 = <span class="keyword">new</span> String(<span class="string">"hello"</span>);</span><br><span class="line">String str2 = <span class="keyword">new</span> String(<span class="string">"hello"</span>);</span><br><span class="line">System.out.println(<span class="string">"str1和str2是否相等？"</span>+ (str1 == str2));   <span class="comment">// 两个是引用数据类型比较是不是同一对象 输出false</span></span><br><span class="line">System.out.println(<span class="string">"str1是否equals str2？"</span>+(str1.equals(str2)));  <span class="comment">// 两个是引用数据类型比较是不是同一对象 又因为是String类型重写了方法比较值 输出true</span></span><br></pre></td></tr></table></figure>

<p><strong>练习2：</strong></p>
<p>编写Order类，有int型的orderId，String型的orderName，相应的getter()和setter()方法，两个参数的构造器，重写父类的equals()方法：public boolean equals(Object obj)，并判断测试类中创建的两个对象是否相等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Objects;</span><br><span class="line">public class Order &#123;</span><br><span class="line">    &#x2F;&#x2F;因为要设置get和set方法 所以需要设置为private</span><br><span class="line">    private int orderld;</span><br><span class="line">    private String orderName;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;get和set方法</span><br><span class="line">    public int getOrderld() &#123;</span><br><span class="line">        return orderld;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setOrderld(int orderld) &#123;</span><br><span class="line">        this.orderld &#x3D; orderld;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getOrderName() &#123;</span><br><span class="line">        return orderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setOrderName(String orderName) &#123;</span><br><span class="line">        this.orderName &#x3D; orderName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;两个参数的构造器</span><br><span class="line">    public Order(int orderld,String ordername)&#123;</span><br><span class="line">        this.orderld&#x3D;orderld;</span><br><span class="line">        this.orderName&#x3D;ordername;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;根据idea重写 Alt+ins</span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object o) &#123;</span><br><span class="line">        if (this &#x3D;&#x3D; o) return true;</span><br><span class="line">        if (!(o instanceof Order order)) return false;</span><br><span class="line">        return getOrderld() &#x3D;&#x3D; order.getOrderld() &amp;&amp; Objects.equals(getOrderName(), order.getOrderName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class OrderTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Order order1&#x3D;new Order(1,&quot;宋亚翔&quot;);</span><br><span class="line">        Order order2&#x3D;new Order(1,&quot;宋亚翔&quot;);</span><br><span class="line">        Order order3&#x3D;new Order(2,&quot;宋亚翔&quot;);</span><br><span class="line">        Order order4&#x3D;new Order(1,&quot;李武&quot;);</span><br><span class="line">        System.out.println(order1.equals(order2));  &#x2F;&#x2F;必须是两个属性都相同才行</span><br><span class="line">        System.out.println(order1.equals(order3));</span><br><span class="line">        System.out.println(order1.equals(order4));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码结果如下:</p>
<p><img src=".images/image-20231006111943546.png" alt="image-20231006111943546"></p>
<p><strong>练习3：</strong></p>
<p>请根据以下代码自行定义能满足需要的MyDate类,在MyDate类中覆盖equals方法，使其判断当两个MyDate类型对象的年月日都相同时，结果为true，否则为false。  public boolean equals(Object o)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EqualsTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyDate m1 = <span class="keyword">new</span> MyDate(<span class="number">14</span>, <span class="number">3</span>, <span class="number">1976</span>);</span><br><span class="line">        MyDate m2 = <span class="keyword">new</span> MyDate(<span class="number">14</span>, <span class="number">3</span>, <span class="number">1976</span>);</span><br><span class="line">        <span class="keyword">if</span> (m1 == m2) &#123;</span><br><span class="line">            System.out.println(<span class="string">"m1==m2"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"m1!=m2"</span>); <span class="comment">// m1 != m2</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (m1.equals(m2)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"m1 is equal to m2"</span>);<span class="comment">// m1 is equal to m2</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"m1 is not equal to m2"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Objects;</span><br><span class="line">public class MyDate &#123;</span><br><span class="line">	&#x2F;&#x2F;三个参数设置为private属性 加上三个get和set方法</span><br><span class="line">    private int year;</span><br><span class="line">    private int month;</span><br><span class="line">    private int day;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;get和set方法</span><br><span class="line">    public int getYear() &#123;</span><br><span class="line">        return year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setYear(int year) &#123;</span><br><span class="line">        this.year &#x3D; year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getMonth() &#123;</span><br><span class="line">        return month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMonth(int month) &#123;</span><br><span class="line">        this.month &#x3D; month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getDay() &#123;</span><br><span class="line">        return day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setDay(int day) &#123;</span><br><span class="line">        this.day &#x3D; day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;构造器 因为Test里面是有参的</span><br><span class="line">    public MyDate(int day, int month, int year) &#123;</span><br><span class="line">        this.year &#x3D; year;</span><br><span class="line">        this.month &#x3D; month;</span><br><span class="line">        this.day &#x3D; day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;重写equals方法</span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object o) &#123;</span><br><span class="line">        if (this &#x3D;&#x3D; o) return true;</span><br><span class="line">        if (!(o instanceof MyDate myDate)) return false;</span><br><span class="line">        return getYear() &#x3D;&#x3D; myDate.getYear() &amp;&amp; getMonth() &#x3D;&#x3D; myDate.getMonth() &amp;&amp; getDay() &#x3D;&#x3D; myDate.getDay();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2、-重点-toString"><a href="#2、-重点-toString" class="headerlink" title="2、(重点)toString()"></a>2、(重点)toString()</h4><p>方法签名：public String toString()</p>
<p>① 默认情况下，toString()返回的是“对象的运行时类型 @ 对象的hashCode值的十六进制形式”</p>
<p>② 在进行String与其它类型数据的连接操作时，自动调用toString()方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Date now=<span class="keyword">new</span> Date();</span><br><span class="line">System.out.println(“now=”+now);  <span class="comment">//相当于</span></span><br><span class="line">System.out.println(“now=”+now.toString());</span><br></pre></td></tr></table></figure>

<p>③ 如果我们直接System.out.println(对象)，默认会自动调用这个对象的toString()</p>
<blockquote>
<p>因为Java的引用数据类型的变量中存储的实际上时对象的内存地址，但是Java对程序员隐藏内存地址信息，所以不能直接将内存地址显示出来，所以当你打印对象时，JVM帮你调用了对象的toString()。</p>
</blockquote>
<p>④ 可以根据需要在用户自定义类型中重写toString()方法<br>    如String 类重写了toString()方法，返回字符串的值。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s1=<span class="string">"hello"</span>;</span><br><span class="line">System.out.println(s1);<span class="comment">//相当于System.out.println(s1.toString());</span></span><br></pre></td></tr></table></figure>

<p>例如自定义的Person类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Person&#123;"</span> + <span class="string">"name='"</span> + name + <span class="string">'\''</span> + <span class="string">", age="</span> + age + <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习</strong>：定义两个类，父类GeometricObject代表几何形状，子类Circle代表圆形。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201402.png" alt="image-20220325002959156" style="zoom:67%;">

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212201298.png" alt="image-20220325002932102" style="zoom:67%;">

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">public class GeometricObject &#123;</span><br><span class="line">    protected String color;</span><br><span class="line">    protected double weight;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;get和set方法</span><br><span class="line">    public String getColor() &#123;</span><br><span class="line">        return color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setColor(String color) &#123;</span><br><span class="line">        this.color &#x3D; color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getWeight() &#123;</span><br><span class="line">        return weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setWeight(double weight) &#123;</span><br><span class="line">        this.weight &#x3D; weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;空参构造器</span><br><span class="line">    protected GeometricObject()&#123;</span><br><span class="line">        this.weight&#x3D;1.0;</span><br><span class="line">        this.color&#x3D;&quot;white&quot;;   &#x2F;&#x2F;初始化对象</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;有参构造器</span><br><span class="line">    protected GeometricObject(String color,double weight)&#123;</span><br><span class="line">        this.color&#x3D;color;</span><br><span class="line">        this.weight&#x3D;weight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Objects;</span><br><span class="line">public class Circle extends GeometricObject &#123;</span><br><span class="line">    private double radius;</span><br><span class="line"></span><br><span class="line">    public Circle()&#123;</span><br><span class="line">        this.radius&#x3D;1.0;</span><br><span class="line">        super.color&#x3D;&quot;white&quot;;  &#x2F;&#x2F;初始化三个属性</span><br><span class="line">        super.weight&#x3D;1.0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Circle(double radius)&#123;</span><br><span class="line">        this.radius&#x3D;radius;     &#x2F;&#x2F;radius根据参数构造器确定</span><br><span class="line">        super.color&#x3D;&quot;white&quot;;</span><br><span class="line">        super.weight&#x3D;1.0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Circle(double radius,String color,double weight)&#123;</span><br><span class="line">        super(color,weight);  &#x2F;&#x2F;显式调用父类有参构造器</span><br><span class="line">        this.radius&#x3D;radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;set和get方法</span><br><span class="line">    public double getRaidus() &#123;</span><br><span class="line">        return radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setRaidus(double raidus) &#123;</span><br><span class="line">        this.radius &#x3D; raidus;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;计算圆面积</span><br><span class="line">    public double findArea()&#123;</span><br><span class="line">        return Math.PI*radius*radius;  &#x2F;&#x2F; π×r²</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;   &#x2F;&#x2F;重写toString()方法</span><br><span class="line">        return &quot;Circle&#123;&quot; +</span><br><span class="line">                &quot;radius&#x3D;&quot; + radius +</span><br><span class="line">                &quot;, color&#x3D;&#39;&quot; + color + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, weight&#x3D;&quot; + weight +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean equals(Object o) &#123;   &#x2F;&#x2F;重写equals()方法</span><br><span class="line">        if (this &#x3D;&#x3D; o) return true;</span><br><span class="line">        if (!(o instanceof Circle circle)) return false;</span><br><span class="line">        return Double.compare(radius, circle.radius) &#x3D;&#x3D; 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3、clone"><a href="#3、clone" class="headerlink" title="3、clone()"></a>3、clone()</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Object类的clone()的使用</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CloneTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Animal a1 = <span class="keyword">new</span> Animal(<span class="string">"花花"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Animal a2 = (Animal) a1.clone();</span><br><span class="line">			System.out.println(<span class="string">"原始对象："</span> + a1);</span><br><span class="line">			a2.setName(<span class="string">"毛毛"</span>);</span><br><span class="line">			System.out.println(<span class="string">"clone之后的对象："</span> + a2);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Cloneable</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Animal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Animal</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Animal [name="</span> + name + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.clone();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4、finalize"><a href="#4、finalize" class="headerlink" title="4、finalize()"></a>4、finalize()</h4><ul>
<li>当对象被回收时，系统自动调用该对象的 finalize() 方法。（不是垃圾回收器调用的，是本类对象调用的）<ul>
<li>永远不要主动调用某个对象的finalize方法，应该交给垃圾回收机制调用。</li>
</ul>
</li>
<li>什么时候被回收：当某个对象没有任何引用时，JVM就认为这个对象是垃圾对象，就会在之后不确定的时间使用垃圾回收机制来销毁该对象，在销毁该对象前，会先调用 finalize()方法。 </li>
<li>子类可以重写该方法，目的是在对象被清理之前执行必要的清理操作。比如，在方法内断开相关连接资源。<ul>
<li>如果重写该方法，让一个新的引用变量重新引用该对象，则会重新激活对象。</li>
</ul>
</li>
<li>在JDK 9中此方法已经被<code>标记为过时</code>的。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalizeTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Person p = <span class="keyword">new</span> Person(<span class="string">"Peter"</span>, <span class="number">12</span>);</span><br><span class="line">		System.out.println(p);</span><br><span class="line">		p = <span class="keyword">null</span>;<span class="comment">//此时对象实体就是垃圾对象，等待被回收。但时间不确定。</span></span><br><span class="line">		System.gc();<span class="comment">//强制性释放空间</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//子类重写此方法，可在释放对象前进行某些操作</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"对象被释放---&gt;"</span> + <span class="keyword">this</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"Person [name="</span> + name + <span class="string">", age="</span> + age + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5、getClass"><a href="#5、getClass" class="headerlink" title="5、getClass()"></a>5、getClass()</h4><p>public final Class&lt;?&gt; getClass()：获取对象的运行时类型</p>
<blockquote>
<p>因为Java有多态现象，所以一个引用数据类型的变量的编译时类型与运行时类型可能不一致，因此如果需要查看这个变量实际指向的对象的类型，需要用getClass()方法</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	Object obj = <span class="keyword">new</span> Person();</span><br><span class="line">	System.out.println(obj.getClass());<span class="comment">//运行时类型</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">atguigu</span>.<span class="title">java</span>.<span class="title">Person</span></span></span><br></pre></td></tr></table></figure>

<h4 id="6、hashCode"><a href="#6、hashCode" class="headerlink" title="6、hashCode()"></a>6、hashCode()</h4><p>public int hashCode()：返回每个对象的hash值。(后续在集合框架章节重点讲解)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"AA"</span>.hashCode());<span class="comment">//2080</span></span><br><span class="line">    System.out.println(<span class="string">"BB"</span>.hashCode());<span class="comment">//2112</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-native关键字的理解"><a href="#8-3-native关键字的理解" class="headerlink" title="8.3 native关键字的理解"></a>8.3 native关键字的理解</h3><p>使用native关键字说明这个方法是<strong>原生函数</strong>，也就是这个方法是用<code>C/C++</code>等实现的，并且<code>被编译成了DLL</code>，由Java去调用。</p>
<ul>
<li><p>本地方法是有方法体的，用c语言编写。由于本地方法的方法体源码没有对我们开源，所以我们看不到方法体</p>
</li>
<li><p>在Java中定义一个native方法时，并不提供实现体。</p>
</li>
</ul>
<p><strong>1. 为什么要用native方法</strong></p>
<p>Java使用起来非常方便，然而有些层次的任务用java实现起来不容易，或者我们对程序的效率很在意时，例如：Java需要与一些底层操作系统或某些硬件交换信息时的情况。native方法正是这样一种交流机制：它为我们提供了一个非常简洁的接口，而且我们无需去了解Java应用之外的繁琐的细节。</p>
<p><strong>2. native声明的方法，对于调用者，可以当做和其他Java方法一样使用</strong></p>
<p>native method的存在并不会对其他类调用这些本地方法产生任何影响，实际上调用这些方法的其他类甚至不知道它所调用的是一个本地方法。JVM将控制调用本地方法的所有细节。</p>
<h1 id="第08章-面向对象编程-高级"><a href="#第08章-面向对象编程-高级" class="headerlink" title="第08章_面向对象编程(高级)"></a>第08章_面向对象编程(高级)</h1><hr>
<h2 id="本章专题与脉络-1"><a href="#本章专题与脉络-1" class="headerlink" title="本章专题与脉络"></a>本章专题与脉络</h2><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202358.png" alt="第2阶段：Java面向对象编程-第08章" style="zoom: 40%;">

<h2 id="1-关键字：static"><a href="#1-关键字：static" class="headerlink" title="1. 关键字：static"></a>1. 关键字：static</h2><p><strong>回顾类中的实例变量（即非static的成员变量）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">    <span class="comment">//私有属性radius</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> radius;</span><br><span class="line">    <span class="comment">//有参构造器</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Circle</span><span class="params">(<span class="keyword">double</span> radius)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.radius=radius;</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//findArea()方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findArea</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Math.PI*radius*radius;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建两个Circle对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Circle c1=<span class="keyword">new</span> Circle(<span class="number">2.0</span>);	<span class="comment">//c1.radius=2.0</span></span><br><span class="line">Circle c2=<span class="keyword">new</span> Circle(<span class="number">3.0</span>);	<span class="comment">//c2.radius=3.0</span></span><br></pre></td></tr></table></figure>

<p>Circle类中的变量radius是一个实例变量(instance variable)，它属于<strong>类的每一个对象</strong>，c1中的radius变化不会影响c2的radius。</p>
<p> –&gt; 如果想让一个成员变量被类的<strong>所有实例所共享</strong>，就用static修饰即可，称为<strong>类变量/类属性</strong>！</p>
<h3 id="1-1-类属性、类方法的设计思想"><a href="#1-1-类属性、类方法的设计思想" class="headerlink" title="1.1 类属性、类方法的设计思想"></a>1.1 类属性、类方法的设计思想</h3><p>当我们编写一个类时，其实就是在描述其对象的属性和行为，而并没有产生实质上的对象，只有通过new关键字才会产出对象，这时系统才会分配内存空间给对象，其方法才可以供外部调用。我们有时候希望无论是否产生了对象或无论产生了多少对象的情况下，<code>某些特定的数据在内存空间里只有一份</code>。例如，所有的中国人都有个国家名称，每一个中国人都共享这个国家名称，不必在每一个中国人的实例对象中都单独分配一个用于代表国家名称的变量。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202226.png" alt="image-20220325213629311"></p>
<p>此外，在类中声明的实例方法，在类的外面必须要先创建对象，才能调用。但是有些方法的调用者和当前类的对象无关，这样的方法通常被声明为<code>类方法</code>，由于不需要创建对象就可以调用类方法，从而简化了方法的调用。</p>
<p>这里的类变量、类方法，只需要使用<code>static</code>修饰即可。所以也称为静态变量、静态方法。</p>
<h3 id="1-2-static关键字"><a href="#1-2-static关键字" class="headerlink" title="1.2 static关键字"></a>1.2 static关键字</h3><ul>
<li><p>使用范围：</p>
<ul>
<li>在Java类中，可用static修饰属性、方法、代码块、内部类</li>
</ul>
</li>
<li><p>被修饰后的成员具备以下特点：</p>
<ul>
<li>随着类的加载而加载</li>
<li>优先于对象存在</li>
<li>修饰的成员，被所有对象所共享</li>
<li>访问权限允许时，可不创建对象，直接被类调用</li>
</ul>
</li>
</ul>
<h3 id="1-3-静态变量"><a href="#1-3-静态变量" class="headerlink" title="1.3 静态变量"></a>1.3 静态变量</h3><h4 id="1-3-1-语法格式"><a href="#1-3-1-语法格式" class="headerlink" title="1.3.1 语法格式"></a>1.3.1 语法格式</h4><p>使用static修饰的成员变量就是静态变量（或类变量、类属性）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] <span class="class"><span class="keyword">class</span> 类</span>&#123;</span><br><span class="line">	[其他修饰符] <span class="keyword">static</span> 数据类型 变量名;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-静态变量的特点"><a href="#1-3-2-静态变量的特点" class="headerlink" title="1.3.2 静态变量的特点"></a>1.3.2 静态变量的特点</h4><ul>
<li><p>静态变量的默认值规则和实例变量一样。</p>
</li>
<li><p>静态变量值是所有对象共享。</p>
</li>
<li><p>静态变量在本类中，可以在任意方法、代码块、构造器中直接使用。</p>
</li>
<li><p>如果权限修饰符允许，在其他类中可以通过“<code>类名.静态变量</code>”直接访问，也可以通过“<code>对象.静态变量</code>”的方式访问（但是更推荐使用类名.静态变量的方式）。</p>
</li>
<li><p>静态变量的get/set方法也静态的，当局部变量与静态变量<code>重名时</code>，使用“<code>类名.静态变量</code>”进行区分。</p>
</li>
</ul>
<h4 id="1-3-3-举例"><a href="#1-3-3-举例" class="headerlink" title="1.3.3 举例"></a>1.3.3 举例</h4><p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span></span>&#123;</span><br><span class="line">    <span class="comment">//实例变量</span></span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">int</span> age;</span><br><span class="line">    <span class="comment">//类变量</span></span><br><span class="line">    <span class="keyword">static</span> String nation;<span class="comment">//国籍</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Chinese</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Chinese</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Chinese&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">", nation='"</span> + nation + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Chinese c1 = <span class="keyword">new</span> Chinese(<span class="string">"康师傅"</span>,<span class="number">36</span>);</span><br><span class="line">        c1.nation = <span class="string">"中华人民共和国"</span>;</span><br><span class="line"></span><br><span class="line">        Chinese c2 = <span class="keyword">new</span> Chinese(<span class="string">"老干妈"</span>,<span class="number">66</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(c1);</span><br><span class="line">        System.out.println(c2);</span><br><span class="line"></span><br><span class="line">        System.out.println(Chinese.nation);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对应的内存结构：（以经典的JDK6内存解析为例，此时静态变量存储在方法区）</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202314.png" alt="image-20220514183814514" style="zoom:67%;">

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.keyword;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> total;<span class="comment">//这里私有化，在类的外面必须使用get/set方法的方式来访问静态变量</span></span><br><span class="line">    <span class="keyword">static</span> String company; <span class="comment">//这里缺省权限修饰符，是为了方便类外以“类名.静态变量”的方式访问</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        total++;</span><br><span class="line">        id = total;<span class="comment">//这里使用total静态变量的值为id属性赋值</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getTotal</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setTotal</span><span class="params">(<span class="keyword">int</span> total)</span> </span>&#123;</span><br><span class="line">        Employee.total = total;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Employee&#123;company = "</span> + company + <span class="string">",id = "</span> + id + <span class="string">" ,name="</span> + name +<span class="string">"&#125;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.keyword;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStaticVariable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//静态变量total的默认值是0</span></span><br><span class="line">        System.out.println(<span class="string">"Employee.total = "</span> + Employee.getTotal());</span><br><span class="line"></span><br><span class="line">        Employee e1 = <span class="keyword">new</span> Employee(<span class="string">"张三"</span>);</span><br><span class="line">        Employee e2 = <span class="keyword">new</span> Employee(<span class="string">"李四"</span>);</span><br><span class="line">        System.out.println(e1);<span class="comment">//静态变量company的默认值是null</span></span><br><span class="line">        System.out.println(e2);<span class="comment">//静态变量company的默认值是null</span></span><br><span class="line">        System.out.println(<span class="string">"Employee.total = "</span> + Employee.getTotal());<span class="comment">//静态变量total值是2</span></span><br><span class="line"></span><br><span class="line">        Employee.company = <span class="string">"尚硅谷"</span>;</span><br><span class="line">        System.out.println(e1);<span class="comment">//静态变量company的值是尚硅谷</span></span><br><span class="line">        System.out.println(e2);<span class="comment">//静态变量company的值是尚硅谷</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//只要权限修饰符允许,虽然不推荐，但是也可以通过“对象.静态变量”的形式来访问</span></span><br><span class="line">        e1.company = <span class="string">"超级尚硅谷"</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(e1);<span class="comment">//静态变量company的值是超级尚硅谷</span></span><br><span class="line">        System.out.println(e2);<span class="comment">//静态变量company的值是超级尚硅谷</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-3-4-内存解析"><a href="#1-3-4-内存解析" class="headerlink" title="1.3.4 内存解析"></a>1.3.4 内存解析</h4><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202954.png" alt="image-20220104100145059"></p>
<h3 id="1-4-静态方法"><a href="#1-4-静态方法" class="headerlink" title="1.4 静态方法"></a>1.4 静态方法</h3><h4 id="1-4-1-语法格式"><a href="#1-4-1-语法格式" class="headerlink" title="1.4.1 语法格式"></a>1.4.1 语法格式</h4><p>用static修饰的成员方法就是静态方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] <span class="class"><span class="keyword">class</span> 类</span>&#123;</span><br><span class="line">	[其他修饰符] <span class="keyword">static</span> 返回值类型 方法名(形参列表)&#123;</span><br><span class="line">        方法体</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-2-静态方法的特点"><a href="#1-4-2-静态方法的特点" class="headerlink" title="1.4.2 静态方法的特点"></a>1.4.2 静态方法的特点</h4><ul>
<li>静态方法在本类的任意方法、代码块、构造器中都可以直接被调用。</li>
<li>只要权限修饰符允许，静态方法在其他类中可以通过“类名.静态方法“的方式调用。也可以通过”对象.静态方法“的方式调用（但是更推荐使用类名.静态方法的方式）。</li>
<li>在static方法内部只能访问类的static修饰的属性或方法，不能访问类的非static的结构。</li>
<li>静态方法可以被子类继承，但不能被子类重写。</li>
<li>静态方法的调用都只看编译时类型。</li>
<li>因为不需要实例就可以访问static方法，因此static方法内部不能有this，也不能有super。如果有重名问题，使用“类名.”进行区别。</li>
</ul>
<h4 id="1-4-3-举例"><a href="#1-4-3-举例" class="headerlink" title="1.4.3 举例"></a>1.4.3 举例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.keyword;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Father.method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Father.fun"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.keyword;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line"><span class="comment">//    @Override //尝试重写静态方法，加上@Override编译报错，去掉Override不报错，但是也不是重写</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Son.fun"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.keyword;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStaticMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Father.method();</span><br><span class="line">        Son.method();<span class="comment">//继承静态方法</span></span><br><span class="line"></span><br><span class="line">        Father f = <span class="keyword">new</span> Son();</span><br><span class="line">        f.method();<span class="comment">//执行Father类中的method</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-练习"><a href="#1-5-练习" class="headerlink" title="1.5 练习"></a>1.5 练习</h3><p>笔试题：如下程序执行会不会报错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticTest</span> </span>&#123;</span><br><span class="line">    <span class="comment">//代码入口</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  <span class="comment">//静态的方法只能调用静态的方法和属性</span></span><br><span class="line">         Demo test = <span class="keyword">null</span>;  <span class="comment">//创建对象</span></span><br><span class="line">        test.hello(); <span class="comment">//对象.静态方法</span></span><br><span class="line">        Demo.hello(); <span class="comment">//类.静态方法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span>&#123;</span><br><span class="line">    <span class="comment">//静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">hello!</span><br><span class="line">hello!</span><br></pre></td></tr></table></figure>

<p>练习：</p>
<p>编写一个类实现银行账户的概念，包含的属性有“帐号”、“密码”、“存款余额”、“利率”、“最小余额”，定义封装这些属性的方法。<code>账号要自动生成。</code></p>
<p>编写主类，使用银行账户类，输入、输出3个储户的上述信息。</p>
<p>考虑：哪些属性可以设计成static属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">package staticTest;</span><br><span class="line"></span><br><span class="line">public class Account &#123;</span><br><span class="line"></span><br><span class="line">    private int id; &#x2F;&#x2F;账号</span><br><span class="line"></span><br><span class="line">    private String password;&#x2F;&#x2F;密码</span><br><span class="line"></span><br><span class="line">    private double balance; &#x2F;&#x2F;余额</span><br><span class="line"></span><br><span class="line">    private static double interestRate;&#x2F;&#x2F;利率</span><br><span class="line"></span><br><span class="line">    private static double minBalance &#x3D; 1.0;&#x2F;&#x2F;最小余额</span><br><span class="line"></span><br><span class="line">    private static int init &#x3D; 1001;&#x2F;&#x2F;用于自动生成id的基数</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;无参构造器</span><br><span class="line">    public Account() &#123;</span><br><span class="line">        this.id &#x3D; init;</span><br><span class="line">        init++;</span><br><span class="line">        password &#x3D; &quot;000000&quot;;  &#x2F;&#x2F;初始化密码</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;有参构造器</span><br><span class="line">    public Account(String password, double balance) &#123;</span><br><span class="line">        this.password &#x3D; password;</span><br><span class="line">        this.balance &#x3D; balance;</span><br><span class="line">        this.id &#x3D; init;</span><br><span class="line">        init++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;set和get方法</span><br><span class="line">    public String getPassword() &#123;</span><br><span class="line">        return password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) &#123;</span><br><span class="line">        this.password &#x3D; password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getBalance() &#123;</span><br><span class="line">        return balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBalance(double balance) &#123;</span><br><span class="line">        this.balance &#x3D; balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static double getInterestRate() &#123;</span><br><span class="line">        return interestRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void setInterestRate(double interestRate) &#123;</span><br><span class="line">        Account.interestRate &#x3D; interestRate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static double getMinBalance() &#123;</span><br><span class="line">        return minBalance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void setMinBalance(double minBalance) &#123;</span><br><span class="line">        Account.minBalance &#x3D; minBalance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;重写toString方法</span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Account&#123;&quot; +</span><br><span class="line">                &quot;id&#x3D;&quot; + id +</span><br><span class="line">                &quot;, password&#x3D;&#39;&quot; + password + &#39;\&#39;&#39; +</span><br><span class="line">                &quot;, balance&#x3D;&quot; + balance +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-单例-Singleton-设计模式"><a href="#2-单例-Singleton-设计模式" class="headerlink" title="2. 单例(Singleton)设计模式"></a>2. 单例(Singleton)设计模式</h2><h3 id="2-1-设计模式概述"><a href="#2-1-设计模式概述" class="headerlink" title="2.1 设计模式概述"></a>2.1 设计模式概述</h3><p><strong>设计模式</strong>是在大量的<code>实践中总结</code>和<code>理论化</code>之后优选的代码结构、编程风格、以及解决问题的思考方式。设计模式免去我们自己再思考和摸索。就像是经典的棋谱，不同的棋局，我们用不同的棋谱。”套路”</p>
<p>经典的设计模式共有23种。每个设计模式均是特定环境下特定问题的处理方法。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202783.png" alt="image-20220520174508815" style="zoom: 80%;">

<blockquote>
<p>简单工厂模式并不是23中经典模式的一种，是其中工厂方法模式的简化版</p>
</blockquote>
<blockquote>
<p>对软件设计模式的研究造就了一本可能是面向对象设计方面最有影响的书籍：《设计模式》：《Design Patterns: Elements of Reusable Object-Oriented Software》（即后述《设计模式》一书），由 Erich Gamma、Richard Helm、Ralph Johnson 和 John Vlissides 合著（Addison-Wesley，1995）。这几位作者常被称为”四人组（Gang of Four）”，而这本书也就被称为”四人组（或 GoF）”书。</p>
</blockquote>
<h3 id="2-2-何为单例模式"><a href="#2-2-何为单例模式" class="headerlink" title="2.2 何为单例模式"></a>2.2 何为单例模式</h3><p>所谓类的单例设计模式，就是采取一定的方法保证在整个的软件系统中，对某个类<strong>只能存在一个对象实例</strong>，并且该类只提供一个取得其对象实例的方法。</p>
<h3 id="2-3-实现思路"><a href="#2-3-实现思路" class="headerlink" title="2.3 实现思路"></a>2.3 实现思路</h3><p>如果我们要让类在一个虚拟机中只能产生一个对象，我们首先必须将<code>类的构造器的访问权限设置为private</code>，[就不能用new操作符在类的外部产生类的对象]，但在类内部仍可以产生该类的对象。因为在类的外部开始还无法得到类的对象，<code>只能调用该类的某个静态方法</code>以返回类内部创建的对象，静态方法只能访问类中的静态成员变量，所以，指向类内部产生的<code>该类对象的变量也必须定义成静态的</code>。</p>
<h3 id="2-4-单例模式的两种实现方式"><a href="#2-4-单例模式的两种实现方式" class="headerlink" title="2.4 单例模式的两种实现方式"></a>2.4 单例模式的两种实现方式</h3><h4 id="2-4-1-饿汉式"><a href="#2-4-1-饿汉式" class="headerlink" title="2.4.1 饿汉式"></a>2.4.1 饿汉式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.私有化构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.内部提供一个当前类的实例</span></span><br><span class="line">    <span class="comment">// 4.此实例也必须静态化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton single = <span class="keyword">new</span> Singleton();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.提供公共的静态的方法，返回当前类的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> single;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-懒汉式"><a href="#2-4-2-懒汉式" class="headerlink" title="2.4.2 懒汉式"></a>2.4.2 懒汉式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1.私有化构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 2.内部提供一个当前类的实例</span></span><br><span class="line">    <span class="comment">// 4.此实例也必须静态化</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton single;</span><br><span class="line">    <span class="comment">// 3.提供公共的静态的方法，返回当前类的对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(single == <span class="keyword">null</span>) &#123;</span><br><span class="line">            single = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> single;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-3-饿汉式-vs-懒汉式"><a href="#2-4-3-饿汉式-vs-懒汉式" class="headerlink" title="2.4.3 饿汉式 vs 懒汉式"></a>2.4.3 饿汉式 vs 懒汉式</h4><p>饿汉式：</p>
<ul>
<li>特点：<code>立即加载</code>，即在使用类的时候已经将对象创建完毕。</li>
<li>优点：实现起来<code>简单</code>；没有多线程安全问题。</li>
<li>缺点：当类被加载的时候，会初始化static的实例，静态变量被创建并分配内存空间，从这以后，这个static的实例便一直占着这块内存，直到类被卸载时，静态变量被摧毁，并释放所占有的内存。因此在某些特定条件下会<code>耗费内存</code>。</li>
</ul>
<p>懒汉式：</p>
<ul>
<li>特点：<code>延迟加载</code>，即在调用静态方法时实例才被创建。</li>
<li>优点：实现起来比较简单；当类被加载的时候，static的实例未被创建并分配内存空间，当静态方法第一次被调用时，初始化实例变量，并分配内存，因此在某些特定条件下会<code>节约内存</code>。</li>
<li>缺点：在多线程环境中，这种实现方法是完全错误的，<code>线程不安全</code>，根本不能保证单例的唯一性。<ul>
<li>说明：在多线程章节，会将懒汉式改造成线程安全的模式。</li>
</ul>
</li>
</ul>
<h3 id="2-5-单例模式的优点及应用场景"><a href="#2-5-单例模式的优点及应用场景" class="headerlink" title="2.5 单例模式的优点及应用场景"></a>2.5 单例模式的优点及应用场景</h3><p>由于单例模式只生成一个实例，减少了<code>系统性能开销</code>，当一个对象的产生需要比较多的资源时，如读取配置、产生其他依赖对象时，则可以通过在应用启动时直接产生一个单例对象，然后永久驻留内存的方式来解决。</p>
<p>举例：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202410.png" alt="image-20220325222541203" style="zoom:67%;">

<p><strong>应用场景</strong></p>
<ul>
<li><p>Windows的Task Manager (任务管理器)就是很典型的单例模式</p>
</li>
<li><p>Windows的Recycle Bin (回收站)也是典型的单例应用。在整个系统运行过程中，回收站一直维护着仅有的一个实例。</p>
</li>
<li><p>Application 也是单例的典型应用</p>
</li>
<li><p>应用程序的日志应用，一般都使用单例模式实现，这一般是由于共享的日志文件一直处于打开状态，因为只</p>
<p>能有一个实例去操作，否则内容不好追加。</p>
</li>
<li><p>数据库连接池的设计一般也是采用单例模式，因为数据库连接是一种数据库资源。</p>
</li>
</ul>
<h2 id="3-理解main方法的语法"><a href="#3-理解main方法的语法" class="headerlink" title="3. 理解main方法的语法"></a>3. 理解main方法的语法</h2><p>由于JVM需要调用类的main()方法，所以该方法的访问权限必须是public，又因为JVM在执行main()方法时不必创建对象，所以该方法必须是static的，该方法接收一个String类型的数组参数，该数组中保存执行Java命令时传递给所运行的类的参数。 </p>
<p>又因为main() 方法是静态的，我们不能直接访问该类中的非静态成员，必须创建该类的一个实例对象后，才能通过这个对象去访问类中的非静态成员，这种情况，我们在之前的例子中多次碰到。</p>
<p><strong>命令行参数用法举例</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommandPara</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">"args["</span> + i + <span class="string">"] = "</span> + args[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//运行程序CommandPara.java</span></span><br><span class="line">java CommandPara <span class="string">"Tom"</span> <span class="string">"Jerry"</span> <span class="string">"Shkstart"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出结果</span></span><br><span class="line">args[<span class="number">0</span>] = Tom</span><br><span class="line">args[<span class="number">1</span>] = Jerry</span><br><span class="line">args[<span class="number">2</span>] = Shkstart</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202809.png" alt="image-20220325223215924"></p>
<p>IDEA工具：</p>
<p>（1）配置运行参数</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202014.png" alt="image-20211228101828718" style="zoom: 80%;">

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202437.png" alt="image-20211228102022216" style="zoom:67%;">

<p>（2）运行程序</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202122.png" alt="image-20211228102059327" style="zoom: 80%;">

<p>笔试题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//此处，Something类的文件名叫OtherThing.java</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Something</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] something_to_do)</span> </span>&#123;        </span><br><span class="line">        System.out.println(<span class="string">"Do something ..."</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//上述程序是否可以正常编译、运行？  如果改一下类名的话，其他事可以啊，没什么影响。</span></span><br></pre></td></tr></table></figure>

<h2 id="4-类的成员之四：代码块"><a href="#4-类的成员之四：代码块" class="headerlink" title="4. 类的成员之四：代码块"></a>4. 类的成员之四：代码块</h2><p>如果成员变量想要初始化的值不是一个硬编码的常量值，而是需要通过复杂的计算或读取文件、或读取运行环境信息等方式才能获取的一些值，该怎么办呢？此时，可以考虑<strong>代码块/初始化块</strong>。</p>
<ul>
<li><p>代码块(或初始化块)的<code>作用</code>：</p>
</li>
<li><p>对Java的类/对象进行初始化</p>
</li>
<li><p>代码块(或初始化块)的<code>分类</code>：</p>
<ul>
<li><p>静态代码块(static block): 用static修饰<strong>[只能被static修饰]</strong></p>
</li>
<li><p>非静态代码块:没有用static修饰</p>
</li>
</ul>
</li>
</ul>
<h3 id="4-1-静态代码块"><a href="#4-1-静态代码块" class="headerlink" title="4.1 静态代码块"></a>4.1 静态代码块</h3><p>如果想要为静态变量初始化，可以直接在静态变量的声明后面直接赋值，也可以使用静态代码块。</p>
<h4 id="4-1-1-语法格式"><a href="#4-1-1-语法格式" class="headerlink" title="4.1.1 语法格式"></a>4.1.1 语法格式</h4><p>在代码块的前面加static，就是静态代码块。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">【修饰符】 <span class="class"><span class="keyword">class</span> 类</span>&#123;</span><br><span class="line">	<span class="keyword">static</span>&#123;</span><br><span class="line">        静态代码块</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-2-静态代码块的特点"><a href="#4-1-2-静态代码块的特点" class="headerlink" title="4.1.2 静态代码块的特点"></a>4.1.2 静态代码块的特点</h4><ol>
<li><p>可以有输出语句。</p>
<ol start="2">
<li><p>可以对类的属性和类的声明进行初始化操作。</p>
</li>
<li><p>不可以对非静态的属性初始化。[即：不可以调用非静态的属性和方法]</p>
</li>
<li><p>若有多个静态的代码块，那么按照<strong>从上到下</strong>的顺序依次执行。</p>
</li>
<li><p>执行顺序: <strong>静态代码块 &gt; 非静态代码块。</strong></p>
</li>
<li><p>静态代码块<strong>随着类</strong>的加载而加载，且<strong>只执行一次</strong>。</p>
</li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chinese</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String country;  <span class="comment">//私有静态属性country</span></span><br><span class="line">    <span class="keyword">private</span> String name;  <span class="comment">//私有非静态属性name</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"非静态代码块，country = "</span> + country);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        country = <span class="string">"中国"</span>;</span><br><span class="line">        System.out.println(<span class="string">"静态代码块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Chinese</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStaticBlock</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建TestStaticBlock类然后创建出country=null 执行静态代码块 country=中国 输出静态代码块</span></span><br><span class="line">        Chinese c1 = <span class="keyword">new</span> Chinese(<span class="string">"张三"</span>); <span class="comment">//创建对象 执行非静态代码块，country =中国</span></span><br><span class="line">        Chinese c2 = <span class="keyword">new</span> Chinese(<span class="string">"李四"</span>); <span class="comment">//创建对象 执行非静态代码块，country =中国</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">静态代码块</span><br><span class="line">非静态代码块，country = 中国</span><br><span class="line">非静态代码块，country = 中国</span><br></pre></td></tr></table></figure>



<h3 id="4-2-非静态代码块"><a href="#4-2-非静态代码块" class="headerlink" title="4.2 非静态代码块"></a>4.2 非静态代码块</h3><h4 id="4-2-1-语法格式"><a href="#4-2-1-语法格式" class="headerlink" title="4.2.1 语法格式"></a>4.2.1 语法格式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">【修饰符】 <span class="class"><span class="keyword">class</span> 类</span>&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        非静态代码块</span><br><span class="line">    &#125;</span><br><span class="line">    【修饰符】 构造器名()&#123;</span><br><span class="line">    	<span class="comment">// 实例初始化代码</span></span><br><span class="line">    &#125;</span><br><span class="line">    【修饰符】 构造器名(参数列表)&#123;</span><br><span class="line">        <span class="comment">// 实例初始化代码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-非静态代码块的作用"><a href="#4-2-2-非静态代码块的作用" class="headerlink" title="4.2.2 非静态代码块的作用"></a>4.2.2 非静态代码块的作用</h4><p>和构造器一样，也是用于实例变量的初始化等操作。</p>
<h4 id="4-2-3-非静态代码块的意义"><a href="#4-2-3-非静态代码块的意义" class="headerlink" title="4.2.3 非静态代码块的意义"></a>4.2.3 非静态代码块的意义</h4><p>如果<strong>多个重载的构造器</strong>有<strong>公共代码[先于构造器其他代码执行的]</strong>，那么可以将这部分代码 —-&gt; <strong>非静态代码块</strong>，减少冗余代码。</p>
<h4 id="4-2-4-非静态代码块的执行特点"><a href="#4-2-4-非静态代码块的执行特点" class="headerlink" title="4.2.4 非静态代码块的执行特点"></a>4.2.4 非静态代码块的执行特点</h4><ol>
<li>可以有输出语句。<ol start="2">
<li>可以对类的属性、类的声明进行初始化操作。</li>
<li>可以调用 非静态的结构 + 静态的变量或方法。</li>
<li>若有多个非静态的代码块，那么按照<strong>从上到下</strong>的顺序依次执行。</li>
<li>每次创建对象的时候，都会执行一次。</li>
<li>执行顺序:<strong>静态代码块 &gt; 非静态代码块 &gt; 构造器</strong>。</li>
</ol>
</li>
</ol>
<h3 id="4-3-举例"><a href="#4-3-举例" class="headerlink" title="4.3 举例"></a>4.3 举例</h3><p><strong>举例1：</strong></p>
<p>（1）声明User类，</p>
<ul>
<li><p>包含属性：username（String类型），password（String类型），registrationTime（long类型），私有化</p>
</li>
<li><p>包含get/set方法，其中registrationTime没有set方法</p>
</li>
<li><p>包含无参构造，</p>
<ul>
<li>输出“新用户注册”，</li>
<li>registrationTime赋值为当前系统时间，</li>
<li>username就默认为当前系统时间值，</li>
<li>password默认为“123456”</li>
</ul>
</li>
<li><p>包含有参构造(String username, String password)，</p>
<ul>
<li>输出“新用户注册”，</li>
<li>registrationTime赋值为当前系统时间，</li>
<li>username和password由参数赋值</li>
</ul>
</li>
<li><p>包含public String getInfo()方法，返回：“用户名：xx，密码：xx，注册时间：xx”</p>
</li>
</ul>
<p>（2）编写测试类，测试类main方法的代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        User u1 = <span class="keyword">new</span> User();</span><br><span class="line">        System.out.println(u1.getInfo());</span><br><span class="line">        User u2 = <span class="keyword">new</span> User(<span class="string">"song"</span>,<span class="string">"8888"</span>);</span><br><span class="line">        System.out.println(u2.getInfo());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">新用户注册</span><br><span class="line">用户名:larkkkkkkk,密码:<span class="number">123456</span>,注册时间:<span class="number">1696858612390</span></span><br><span class="line">新用户注册</span><br><span class="line">用户名:song,密码:<span class="number">8888</span>,注册时间:<span class="number">1696858612400</span></span><br></pre></td></tr></table></figure>

<p>如果不用非静态代码块，User类是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> registrationTime;</span><br><span class="line">    <span class="comment">//属性的set和get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//没有set方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">getRegistrationTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> registrationTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"新用户注册"</span>);</span><br><span class="line">        <span class="keyword">this</span>.registrationTime = System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//System.out.println("新用户注册");</span></span><br><span class="line">        <span class="comment">//this.registrationTime=System.currentTimeMillis();</span></span><br><span class="line">        username=<span class="string">"larkkkkkkk"</span>;</span><br><span class="line">        password=<span class="string">"123456"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//有参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username,String password)</span></span>&#123;</span><br><span class="line">        <span class="comment">//System.out.println("新用户注册");</span></span><br><span class="line">        <span class="comment">//this.registrationTime=System.currentTimeMillis();</span></span><br><span class="line">        <span class="keyword">this</span>.username=username;</span><br><span class="line">        <span class="keyword">this</span>.password=password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getInfo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"用户名:"</span>+getUsername()+<span class="string">",密码:"</span>+getPassword()+<span class="string">",注册时间:"</span>+getRegistrationTime();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果提取构造器公共代码到非静态代码块，User类是这样的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//非静态代码块</span></span><br><span class="line">   &#123;</span><br><span class="line">       System.out.println(<span class="string">"新用户注册"</span>);</span><br><span class="line">       registrationTime = System.currentTimeMillis();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       username = registrationTime+<span class="string">""</span>;</span><br><span class="line">       password = <span class="string">"123456"</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String username, String password)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">this</span>.username = username;</span><br><span class="line">       <span class="keyword">this</span>.password = password;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>举例2：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DataSource dataSource = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span>&#123;</span><br><span class="line">	InputStream is = <span class="keyword">null</span>;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		is = DBCPTest.class.getClassLoader().getResourceAsStream("dbcp.properties");</span><br><span class="line">		Properties pros = <span class="keyword">new</span> Properties();</span><br><span class="line">		pros.load(is);</span><br><span class="line">		<span class="comment">//调用BasicDataSourceFactory的静态方法，获取数据源。</span></span><br><span class="line">		dataSource = BasicDataSourceFactory.createDataSource(pros);</span><br><span class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">		e.printStackTrace();</span><br><span class="line">	&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(is != <span class="keyword">null</span>)&#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				is.close();</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;		</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-小结：实例变量赋值顺序"><a href="#4-4-小结：实例变量赋值顺序" class="headerlink" title="4.4 小结：实例变量赋值顺序"></a>4.4 小结：实例变量赋值顺序</h3><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202138.png" alt="image-20220325230208941" style="zoom:67%;">

<h3 id="4-5-练习"><a href="#4-5-练习" class="headerlink" title="4.5 练习"></a>4.5 练习</h3><p>练习1：分析加载顺序   — <strong>由父后子，静态先行</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Root</span></span>&#123;</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Root的静态初始化块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"Root的普通初始化块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Root</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Root的无参数的构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mid</span> <span class="keyword">extends</span> <span class="title">Root</span></span>&#123;</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Mid的静态初始化块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"Mid的普通初始化块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Mid</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//没写this(参数列表)和super(参数列表)  --默认读取父类的无参构造器</span></span><br><span class="line">        System.out.println(<span class="string">"Mid的无参数的构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//有参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Mid</span><span class="params">(String msg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();<span class="comment">//调用无参构造器</span></span><br><span class="line">        System.out.println(<span class="string">"Mid的带参数构造器，其参数值："</span>+ msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Leaf</span> <span class="keyword">extends</span> <span class="title">Mid</span></span>&#123;</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Leaf的静态初始化块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"Leaf的普通初始化块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Leaf</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="string">"尚硅谷"</span>); <span class="comment">//通过super调用父类中有一个字符串参数的构造器</span></span><br><span class="line">        System.out.println(<span class="string">"Leaf的构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LeafTest</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="comment">//创建一个子类对象</span></span><br><span class="line">        <span class="keyword">new</span> Leaf();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">最终输出:</span><br><span class="line"><span class="comment">//顺序: 静态代码块 &gt; 非静态代码块 &gt; 构造器</span></span><br><span class="line"><span class="comment">//先加载父类</span></span><br><span class="line">Root的静态初始化块</span><br><span class="line">Mid的静态初始化块</span><br><span class="line">Leaf的静态初始化块</span><br><span class="line"><span class="comment">//后面的就根据类的调用顺序执行   </span></span><br><span class="line"><span class="comment">//加载root类    </span></span><br><span class="line">Root的普通初始化块</span><br><span class="line">Root的无参数的构造器</span><br><span class="line"><span class="comment">//加载Mid类</span></span><br><span class="line">Mid的普通初始化块</span><br><span class="line">Mid的无参数的构造器</span><br><span class="line">Mid的带参数构造器，其参数值：尚硅谷</span><br><span class="line"><span class="comment">//最终加载最小子类Leaf</span></span><br><span class="line">Leaf的普通初始化块</span><br><span class="line">Leaf的构造器</span><br></pre></td></tr></table></figure>

<p>练习2：分析加载顺序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"11111111111"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"22222222222"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Father</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"33333333333"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"44444444444"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(<span class="string">"55555555555"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Son</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"66666666666"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//执行顺序: 静态代码块 &gt; 非静态代码块 &gt; 构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"77777777777"</span>);</span><br><span class="line">        System.out.println(<span class="string">"************************"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建子类的匿名对象[只创建一次]</span></span><br><span class="line">        <span class="keyword">new</span> Son();</span><br><span class="line">        System.out.println(<span class="string">"************************"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建子类的匿名对象[只创建一次]</span></span><br><span class="line">        <span class="keyword">new</span> Son();</span><br><span class="line">        System.out.println(<span class="string">"************************"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建父类的匿名对象[只创建一次]</span></span><br><span class="line">        <span class="keyword">new</span> Father();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">最终输出:</span><br><span class="line"><span class="comment">//先初始化父类和子类的静态代码块(只执行一次)</span></span><br><span class="line"><span class="number">11111111111</span></span><br><span class="line"><span class="number">44444444444</span></span><br><span class="line"><span class="number">77777777777</span></span><br><span class="line">************************</span><br><span class="line"><span class="comment">//先执行父类的非静态代码块和构造器</span></span><br><span class="line"><span class="number">22222222222</span></span><br><span class="line"><span class="number">33333333333</span></span><br><span class="line"><span class="comment">//后执行子类的非静态代码块和构造器</span></span><br><span class="line"><span class="number">55555555555</span></span><br><span class="line"><span class="number">66666666666</span></span><br><span class="line">************************</span><br><span class="line"><span class="comment">//先执行父类的非静态代码块和构造器</span></span><br><span class="line"><span class="number">22222222222</span></span><br><span class="line"><span class="number">33333333333</span></span><br><span class="line"><span class="comment">//后执行子类的非静态代码块和构造器</span></span><br><span class="line"><span class="number">55555555555</span></span><br><span class="line"><span class="number">66666666666</span></span><br><span class="line">************************</span><br><span class="line"><span class="number">22222222222</span></span><br><span class="line"><span class="number">33333333333</span></span><br></pre></td></tr></table></figure>

<p>练习3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fu</span></span>&#123;</span><br><span class="line">    <span class="comment">//私有静态属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> i = getNum(<span class="string">"（1）i"</span>);</span><br><span class="line">    <span class="comment">//私有非静态属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> j = getNum(<span class="string">"（2）j"</span>);</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        print(<span class="string">"（3）父类静态代码块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        print(<span class="string">"（4）父类非静态代码块，又称为构造代码块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//父类无参构造器</span></span><br><span class="line">    Fu()&#123;</span><br><span class="line">        print(<span class="string">"（5）父类构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//print方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        System.out.println(str + <span class="string">"-&gt;"</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获得数字</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getNum</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        print(str);</span><br><span class="line">        <span class="keyword">return</span> ++i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Zi</span> <span class="keyword">extends</span> <span class="title">Fu</span></span>&#123;</span><br><span class="line">    <span class="comment">//私有静态属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> k = getNum(<span class="string">"（6）k"</span>);</span><br><span class="line">    <span class="comment">//私有非静态属性</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> h = getNum(<span class="string">"（7）h"</span>);</span><br><span class="line">    <span class="comment">//静态代码块</span></span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        print(<span class="string">"（8）子类静态代码块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//非静态代码块</span></span><br><span class="line">    &#123;</span><br><span class="line">        print(<span class="string">"（9）子类非静态代码块，又称为构造代码块"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//子类无参构造器</span></span><br><span class="line">    Zi()&#123;</span><br><span class="line">        <span class="comment">//默认调用父类无参构造器 super()</span></span><br><span class="line">        print(<span class="string">"（10）子类构造器"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//print方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        System.out.println(str + <span class="string">"-&gt;"</span> + k);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获得数字</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getNum</span><span class="params">(String str)</span></span>&#123;</span><br><span class="line">        print(str);</span><br><span class="line">        <span class="keyword">return</span> ++k;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test04</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建子类对象</span></span><br><span class="line">        Zi zi = <span class="keyword">new</span> Zi();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">最终输出:</span><br><span class="line"><span class="comment">//先执行父类和子类的创建 静态的东西</span></span><br><span class="line">（<span class="number">1</span>）i-&gt;<span class="number">0</span></span><br><span class="line">（<span class="number">3</span>）父类静态代码块-&gt;<span class="number">1</span></span><br><span class="line">（<span class="number">6</span>）k-&gt;<span class="number">0</span></span><br><span class="line">（<span class="number">8</span>）子类静态代码块-&gt;<span class="number">1</span></span><br><span class="line"><span class="comment">//再执行创建对象时从父类-&gt;子类实例化</span></span><br><span class="line">    <span class="comment">//父类的实例化属性</span></span><br><span class="line">	<span class="comment">//父类的非静态代码块</span></span><br><span class="line">    <span class="comment">//父类的构造器</span></span><br><span class="line">（<span class="number">2</span>）j-&gt;<span class="number">1</span></span><br><span class="line">（<span class="number">4</span>）父类非静态代码块，又称为构造代码块-&gt;<span class="number">2</span></span><br><span class="line">（<span class="number">5</span>）父类构造器-&gt;<span class="number">2</span></span><br><span class="line">（<span class="number">7</span>）h-&gt;<span class="number">1</span></span><br><span class="line">（<span class="number">9</span>）子类非静态代码块，又称为构造代码块-&gt;<span class="number">2</span></span><br><span class="line">（<span class="number">10</span>）子类构造器-&gt;<span class="number">2</span></span><br></pre></td></tr></table></figure>

<h2 id="5-final关键字"><a href="#5-final关键字" class="headerlink" title="5. final关键字"></a>5. final关键字</h2><h3 id="5-1-final的意义"><a href="#5-1-final的意义" class="headerlink" title="5.1 final的意义"></a>5.1 final的意义</h3><p>final：最终的，不可更改的</p>
<h3 id="5-2-final的使用"><a href="#5-2-final的使用" class="headerlink" title="5.2 final的使用"></a>5.2 final的使用</h3><h4 id="5-2-1-final修饰类"><a href="#5-2-1-final修饰类" class="headerlink" title="5.2.1 final修饰类"></a>5.2.1 final修饰类</h4><p>表示这个类不能被继承，没有子类。提高安全性，提高程序的可读性。</p>
<p>例如：String类、System类、StringBuffer类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Eunuch</span></span>&#123;<span class="comment">//太监类</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Eunuch</span></span>&#123;<span class="comment">//错误</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-2-final修饰方法"><a href="#5-2-2-final修饰方法" class="headerlink" title="5.2.2 final修饰方法"></a>5.2.2 final修饰方法</h4><p>表示这个方法不能被子类重写。</p>
<p>例如：Object类中的getClass()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"father"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;<span class="comment">//错误</span></span><br><span class="line">		System.out.println(<span class="string">"son"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-2-3-final修饰变量"><a href="#5-2-3-final修饰变量" class="headerlink" title="5.2.3 final修饰变量"></a>5.2.3 final修饰变量</h4><p>final修饰某个变量（成员变量或局部变量），一旦赋值，它的值就不能被修改，即常量，常量名建议使用大写字母。</p>
<p>例如：final double MY_PI = 3.14;</p>
<blockquote>
<p>如果某个成员变量用final修饰后，<strong>没有set方法 + 必须初始化</strong>（可以显式赋值、或在初始化块赋值、实例变量还可以在构造器中赋值）</p>
</blockquote>
<ul>
<li>修饰成员变量</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> totalNumber = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> ID;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ID = ++totalNumber; <span class="comment">// 可在构造器中给final修饰的“变量”赋值</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Test t = <span class="keyword">new</span> Test();</span><br><span class="line">        System.out.println(t.ID);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>修饰局部变量：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFinal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> MIN_SCORE ;</span><br><span class="line">        MIN_SCORE = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> MAX_SCORE = <span class="number">100</span>;</span><br><span class="line">        MAX_SCORE = <span class="number">200</span>; <span class="comment">//非法</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>错误演示：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String INFO = <span class="string">"atguigu"</span>;  <span class="comment">//声明常量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//The final field A.INFO cannot be  assigned</span></span><br><span class="line">        <span class="comment">//INFO = "尚硅谷";   //不能被赋值 修改</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-笔试题"><a href="#5-3-笔试题" class="headerlink" title="5.3 笔试题"></a>5.3 笔试题</h3><p>题1：排错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Something</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addOne</span><span class="params">(<span class="keyword">final</span> <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++x;  <span class="comment">//不能修改</span></span><br><span class="line">        <span class="comment">// return x + 1;  //可以 因为x没被修改 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>题2：排错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Something</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Other o = <span class="keyword">new</span> Other();</span><br><span class="line">        <span class="keyword">new</span> Something().addOne(o);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addOne</span><span class="params">(<span class="keyword">final</span> Other o)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// o = new Other();  //不能重新new一个  只能用o调用方法/调用属性</span></span><br><span class="line">        o.i++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Other</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-抽象类与抽象方法-或abstract关键字"><a href="#6-抽象类与抽象方法-或abstract关键字" class="headerlink" title="6. 抽象类与抽象方法(或abstract关键字)"></a>6. 抽象类与抽象方法(或abstract关键字)</h2><h3 id="6-1-由来"><a href="#6-1-由来" class="headerlink" title="6.1 由来"></a>6.1 由来</h3><p>举例1：</p>
<p>随着继承层次中一个个新子类的定义，类变得越来越具体，而父类则更一般，更通用。类的设计应该保证父类和子类能够共享特征。有时将一个父类设计得非常抽象，以至于它<strong>没有具体的实例</strong>，这样的类叫做抽象类。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202253.png" alt="image-20220325231608838"></p>
<p>举例2：</p>
<p>我们声明一些几何图形类：圆、矩形、三角形类等，发现这些类都有共同特征：求面积、求周长。那么这些共同特征应该抽取到一个共同父类：几何图形类中。但是这些方法在父类中又<code>无法给出具体的实现</code>，而是应该交给子类各自具体实现。那么父类在声明这些方法时，就<strong>只有方法签名，没有方法体</strong>，我们把没有方法体的方法称为<strong>抽象方法</strong>。Java语法规定，包含抽象方法的类必须是<strong>抽象类</strong>。</p>
<h3 id="6-2-语法格式"><a href="#6-2-语法格式" class="headerlink" title="6.2 语法格式"></a>6.2 语法格式</h3><ul>
<li><strong>抽象类</strong>：被abstract修饰的类。</li>
<li><strong>抽象方法</strong>：被abstract修饰没有方法体的方法。</li>
</ul>
<p>抽象类的语法格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[权限修饰符] <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> 类名</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">[权限修饰符] <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> 类名 <span class="keyword">extends</span> 父类</span>&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>抽象方法的语法格式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[其他修饰符] <span class="keyword">abstract</span> 返回值类型 方法名([形参列表]);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：抽象方法没有方法体</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202268.png" alt="image-20220517204707255"></p>
<p>代码举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span> <span class="params">()</span></span>&#123;</span><br><span class="line">      	System.out.println(<span class="string">"小猫吃鱼和猫粮"</span>); </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CatTest</span> </span>&#123;</span><br><span class="line"> 	 <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 创建子类对象</span></span><br><span class="line">        Cat c = <span class="keyword">new</span> Cat(); </span><br><span class="line">       </span><br><span class="line">        <span class="comment">// 调用eat方法</span></span><br><span class="line">        c.eat();</span><br><span class="line">  	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时的方法重写，是子类对父类抽象方法的完成实现，我们将这种方法重写的操作，也叫做<strong>实现方法</strong>。</p>
<h3 id="6-3-使用说明"><a href="#6-3-使用说明" class="headerlink" title="6.3 使用说明"></a>6.3 使用说明</h3><ol>
<li><p>抽象类<strong>不能创建对象</strong>，如果创建，编译无法通过而报错。只能创建其非抽象子类的对象。</p>
<blockquote>
<p>理解：假设创建了抽象类的对象，调用抽象的方法，而抽象方法没有具体的方法体，没有意义。</p>
<p>抽象类是用来被继承的，抽象类的子类必须重写父类的抽象方法，并提供方法体。若没有重写全部的抽象方法，仍为抽象类。</p>
</blockquote>
</li>
<li><p>抽象类中，也有构造方法，是供子类创建对象时，初始化父类成员变量使用的。</p>
<blockquote>
<p>理解：子类的构造方法中，有默认的super()或手动的super(实参列表)，需要访问父类构造方法。</p>
</blockquote>
</li>
<li><p>抽象类中，不一定包含抽象方法，但是有抽象方法的类必定是抽象类。</p>
<blockquote>
<p>理解：未包含抽象方法的抽象类，目的就是不想让调用者创建该类对象，通常用于某些特殊的类结构设计。</p>
</blockquote>
</li>
<li><p>抽象类的子类，必须重写抽象父类中<strong>所有的</strong>抽象方法，否则，编译无法通过而报错。除非该子类也是抽象类。 </p>
<blockquote>
<p>理解：假设不重写所有抽象方法，则类中可能包含抽象方法。那么创建对象后，调用抽象的方法，没有意义。</p>
</blockquote>
</li>
</ol>
<h3 id="6-4-注意事项"><a href="#6-4-注意事项" class="headerlink" title="6.4 注意事项"></a>6.4 注意事项</h3><ul>
<li><p>不能用abstract修饰变量、代码块、构造器；</p>
</li>
<li><p>不能用abstract修饰私有方法、静态方法、final的方法、final的类。</p>
</li>
<li><blockquote>
<p>私有方法不能重写   –私有方法不能被重写但是abstract方法必须让子类重写<br>避免静态方法使用类进行调用  –方法只能被①类[一定是static方法]和②对象调用[抽象类不能实例化对象]  我现在abstract不能调用类 所以方法也不能是static方法<br>final的方法不能被重写   —-抽象类必须有子类重写所有抽象方法<br>final修饰的类不能有子类  –抽象类必须有子类重写所有抽象方法</p>
</blockquote>
</li>
</ul>
<h3 id="6-5-应用举例1"><a href="#6-5-应用举例1" class="headerlink" title="6.5 应用举例1"></a>6.5 应用举例1</h3><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202075.png" alt="image-20220325232847872"></p>
<p>在航运公司系统中，Vehicle类需要定义两个方法分别<code>计算运输工具的燃料效率</code>和<code>行驶距离</code>。</p>
<p><strong>问题：</strong>卡车(Truck)和驳船(RiverBarge)的燃料效率和行驶距离的计算方法完全不同。Vehicle类不能提供计算方法，但子类可以。</p>
<p><strong>解决方案：</strong>Java允许类设计者指定：超类声明一个方法但不提供实现，该方法的实现由子类提供。这样的方法称为抽象方法。有一个或更多抽象方法的类称为抽象类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Vehicle是一个抽象类，有两个抽象方法。</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Vehicle</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">calcFuelEfficiency</span><span class="params">()</span></span>;	<span class="comment">//计算燃料效率的抽象方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">calcTripDistance</span><span class="params">()</span></span>;	<span class="comment">//计算行驶距离的抽象方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//卡车</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Truck</span> <span class="keyword">extends</span> <span class="title">Vehicle</span></span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calcFuelEfficiency</span><span class="params">( )</span></span>&#123;</span><br><span class="line">        <span class="comment">//写出计算卡车的燃料效率的具体方法  </span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calcTripDistance</span><span class="params">( )</span></span>&#123;  </span><br><span class="line">        <span class="comment">//写出计算卡车行驶距离的具体方法   </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//驳船</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RiverBarge</span> <span class="keyword">extends</span> <span class="title">Vehicle</span></span>&#123;</span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calcFuelEfficiency</span><span class="params">( )</span></span>&#123;</span><br><span class="line">         <span class="comment">//写出计算驳船的燃料效率的具体方法  </span></span><br><span class="line">     &#125; </span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calcTripDistance</span><span class="params">( )</span></span>&#123; </span><br><span class="line">         <span class="comment">//写出计算驳船行驶距离的具体方法</span></span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-6-应用举例2：模板方法设计模式-TemplateMethod"><a href="#6-6-应用举例2：模板方法设计模式-TemplateMethod" class="headerlink" title="6.6 应用举例2：模板方法设计模式(TemplateMethod)"></a>6.6 应用举例2：模板方法设计模式(TemplateMethod)</h3><p>抽象类体现的就是一种模板模式的设计，抽象类作为多个子类的通用模板，子类在抽象类的基础上进行扩展、改造，但子类总体上会保留抽象类的行为方式。</p>
<p><strong>解决的问题</strong>：</p>
<ul>
<li><p>当功能内部一部分实现是确定的，另一部分实现是不确定的【这部分暴露出去给子类实现】。</p>
</li>
<li><p>换句话说，在软件开发中实现一个算法时，整体步骤很固定、通用，这些步骤已经在父类中写好了。但是某些部分易变，易变部分可以抽象出来，供不同子类实现。这就是一种模板模式。</p>
</li>
</ul>
<p><strong>类比举例：</strong>英语六级模板</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202034.png" alt="image-20220503145003315" style="zoom: 80%;">

<p>制作月饼的模板：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202504.png" alt="image-20220517205013997" style="zoom: 50%;">

<p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父类要是一个抽象类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Template</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">getTime</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">        code();</span><br><span class="line">        <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">"执行时间是："</span> + (end - start));</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubTemplate</span> <span class="keyword">extends</span> <span class="title">Template</span> </span>&#123;</span><br><span class="line">    <span class="comment">//子类必须重写父类所有抽象方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">code</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++) &#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抽象类的应用：模板方法的设计模式</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TemplateMethodTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        BankTemplateMethod btm = <span class="keyword">new</span> DrawMoney();  <span class="comment">//子类-取款类</span></span><br><span class="line">        btm.process();</span><br><span class="line"></span><br><span class="line">        BankTemplateMethod btm2 = <span class="keyword">new</span> ManageMoney();  <span class="comment">//子类-理财类</span></span><br><span class="line">        btm2.process();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BankTemplateMethod</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 具体方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">takeNumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"取号排队"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">evaluate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"反馈评分"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">transact</span><span class="params">()</span></span>; <span class="comment">// 办理具体的业务 //钩子方法</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 模板方法，把基本操作组合到一起，子类一般不能重写</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//取号</span></span><br><span class="line">        <span class="keyword">this</span>.takeNumber();</span><br><span class="line">        <span class="comment">//办理业务</span></span><br><span class="line">        <span class="keyword">this</span>.transact();<span class="comment">// 具体执行时，挂哪个子类，就执行哪个子类的实现代码</span></span><br><span class="line">        <span class="comment">//评分</span></span><br><span class="line">        <span class="keyword">this</span>.evaluate();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DrawMoney</span> <span class="keyword">extends</span> <span class="title">BankTemplateMethod</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transact</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我要取款！！！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ManageMoney</span> <span class="keyword">extends</span> <span class="title">BankTemplateMethod</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transact</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我要理财！我这里有2000万美元!!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">最终输出:</span><br><span class="line">取号排队</span><br><span class="line">我要取款！！！</span><br><span class="line">反馈评分</span><br><span class="line">取号排队</span><br><span class="line">我要理财！我这里有<span class="number">2000</span>万美元!!</span><br><span class="line">反馈评分</span><br></pre></td></tr></table></figure>

<p>模板方法设计模式是编程中经常用得到的模式。各个框架、类库中都有他的影子，比如常见的有：</p>
<ul>
<li><p>数据库访问的封装</p>
</li>
<li><p>Junit单元测试</p>
</li>
<li><p>JavaWeb的Servlet中关于doGet/doPost方法调用</p>
</li>
<li><p>Hibernate中模板程序</p>
</li>
<li><p>Spring中JDBCTemlate、HibernateTemplate等</p>
</li>
</ul>
<h3 id="6-7-思考与练习"><a href="#6-7-思考与练习" class="headerlink" title="6.7 思考与练习"></a>6.7 思考与练习</h3><p><strong>思考：</strong></p>
<p>问题1：为什么抽象类不可以使用final关键字声明？  — 因为final类是不可以被继承的，abstract类必须让子类重写抽象方法</p>
<p>问题2：一个抽象类中可以定义构造器吗？   — 可以，要留给子类到时候继承父类成员</p>
<p>问题3：抽象类就是比普通类多定义了抽象方法，除了不能直接进行类的实例化操作之外，并没有任何的不同？ — 确实</p>
<p><strong>练习1：</strong></p>
<p>编写一个Employee类，声明为抽象类，包含如下三个属性：name，id，salary。提供必要的构造器和抽象方法：work()。</p>
<p>对于Manager类来说，他既是员工，还具有奖金(bonus)的属性。</p>
<p>请使用继承的思想，设计CommonEmployee类和Manager类，要求类中提供必要的方法进行属性访问。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;抽象类</span><br><span class="line">public abstract class Employee &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int id;</span><br><span class="line">    private double salary;</span><br><span class="line"></span><br><span class="line">    public  Employee()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Employee(String name, int id, double salary) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        this.id &#x3D; id;</span><br><span class="line">        this.salary &#x3D; salary;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;抽象方法</span><br><span class="line">    public abstract void work();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;子类</span><br><span class="line">public class Manager extends Employee&#123;  &#x2F;&#x2F;继承Employee类</span><br><span class="line">    private double bonus;</span><br><span class="line">	&#x2F;&#x2F;必须重写</span><br><span class="line">    @Override</span><br><span class="line">    public void work() &#123;</span><br><span class="line">        System.out.println(&quot;我是管理人员，我需要努力工作&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2：软件外包公司外派管理</strong></p>
<p>有一家软件外包公司，可以外派开发人员，该公司有两个角色：普通开发人员Developer和项目经理Manager。他们的关系如下图：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212202972.png" alt="image-20220504164925878"></p>
<p>普通开发人员的工作内容是“开发项目”，项目经理的工作内容是“项目管理”。对外的报价是普通开发人员每天500,元，超过60天每天400元。项目经理每天800元，超过60天每天700元。</p>
<p>有一家银行需要1名项目经理、2名开发人员，现场开发90天，计算银行需要付给软件公司的总金额。</p>
<p>提示：创建数组 Employee[] emps = new Employee[3]。其中存储驻场的3名员工。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;抽象类</span><br><span class="line">public abstract class Employee &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public Employee(String name, int age) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line">	&#x2F;&#x2F;抽象方法</span><br><span class="line">    public abstract void work();</span><br><span class="line">    public abstract double calMoney(int days);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class Developer extends Employee&#123;</span><br><span class="line">    private int workExperiences&#x3D;500;</span><br><span class="line"></span><br><span class="line">    public Developer(String name,int age)&#123;</span><br><span class="line">        super(name,age);  &#x2F;&#x2F;调用父类的有参构造器</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void work() &#123;</span><br><span class="line">        System.out.println(&quot;开发项目&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public double calMoney(int days) &#123;</span><br><span class="line">        int sum&#x3D;0;</span><br><span class="line">        &#x2F;&#x2F;看看超没超过60天</span><br><span class="line">        int quyu&#x3D;days%60;</span><br><span class="line">        if(quyu&gt;0)&#123;  &#x2F;&#x2F;如果超过60天</span><br><span class="line">            sum+&#x3D;(this.workExperiences*60+400*(quyu));</span><br><span class="line">            return sum;</span><br><span class="line">        &#125;</span><br><span class="line">        return this.workExperiences*days;  &#x2F;&#x2F;默认是没超过60天</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class Manager extends Employee&#123;</span><br><span class="line">    private int manageExperiences&#x3D;800;</span><br><span class="line"></span><br><span class="line">    public Manager(String name,int age) &#123;</span><br><span class="line">        super(name, age);  &#x2F;&#x2F;调用父类的有参构造器</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void work() &#123;</span><br><span class="line">        System.out.println(&quot;项目管理&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public double calMoney(int days) &#123;</span><br><span class="line">        int sum&#x3D;0;</span><br><span class="line">        &#x2F;&#x2F;看看超没超过60天</span><br><span class="line">        int quyu&#x3D;days%60;</span><br><span class="line">        if(quyu&gt;0)&#123;</span><br><span class="line">            sum+&#x3D;(this.manageExperiences*60+700*(quyu));</span><br><span class="line">            return sum;</span><br><span class="line">        &#125;</span><br><span class="line">        return this.manageExperiences*days;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Test&#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Employee[] emps&#x3D;new Employee[3];</span><br><span class="line">        &#x2F;&#x2F;一名项目经理</span><br><span class="line">        emps[0]&#x3D;new Manager(&quot;项目经理&quot;,26);</span><br><span class="line">        &#x2F;&#x2F;两名开发人员</span><br><span class="line">        emps[1]&#x3D;new Developer(&quot;开发人员1&quot;,30);</span><br><span class="line">        emps[2]&#x3D;new Developer(&quot;开发人员2&quot;,30);</span><br><span class="line">        System.out.println(emps[0].calMoney(90)+emps[1].calMoney(90)+emps[2].calMoney(90));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习3：</strong></p>
<p>创建父类Shape，包含绘制形状的抽象方法draw()。</p>
<p>创建Shape的子类Circle和Rectangle，重写draw()方法，绘制圆形和矩形。</p>
<p>绘制多个圆形和矩形。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;抽象类</span><br><span class="line">public abstract class Shape &#123;</span><br><span class="line">	&#x2F;&#x2F;抽象方法</span><br><span class="line">    public abstract void draw();</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;子类</span><br><span class="line">public class Circle extends Shape&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void draw() &#123;</span><br><span class="line">        System.out.println(&quot;绘制圆形&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;子类</span><br><span class="line">public class Rectangle extends Shape&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void draw() &#123;</span><br><span class="line">        System.out.println(&quot;绘制矩形&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习4：</strong></p>
<p>1、声明抽象父类Person，包含抽象方法public abstract void eat();</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Person&#123;</span><br><span class="line">    &#x2F;&#x2F;抽象方法</span><br><span class="line">    public abstract void eat();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、声明子类中国人Chinese，重写抽象方法，打印用筷子吃饭</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Chinese extends Person&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void eat() &#123;</span><br><span class="line">        System.out.println(&quot;用筷子吃饭&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3、声明子类美国人American，重写抽象方法，打印用刀叉吃饭</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class American extends Person&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void eat() &#123;</span><br><span class="line">        System.out.println(&quot;用刀叉吃饭&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、声明子类印度人Indian，重写抽象方法，打印用手抓饭</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Indian extends Person&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void eat() &#123;</span><br><span class="line">        System.out.println(&quot;用手抓饭&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5、声明测试类PersonTest，创建Person数组，存储各国人对象，并遍历数组，调用eat()方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class PersonTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Person[] p1&#x3D;new Person[3];</span><br><span class="line">        p1[0]&#x3D;new Indian();</span><br><span class="line">        p1[0].eat();</span><br><span class="line">        p1[1]&#x3D;new Chinese();</span><br><span class="line">        p1[1].eat();</span><br><span class="line">        p1[2]&#x3D;new American();</span><br><span class="line">        p1[2].eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习5：工资系统设计</strong></p>
<p>编写工资系统，实现不同类型员工(多态)的按月发放工资。如果当月出现某个Employee对象的生日，则将该雇员的工资增加100元。</p>
<p>实验说明：</p>
<p>（1）定义一个Employee类，该类包含：</p>
<p>private成员变量name,number,birthday，其中birthday 为MyDate类的对象；</p>
<p>abstract方法earnings()；</p>
<p>toString()方法输出对象的name,number和birthday。</p>
<p>（2）MyDate类包含:</p>
<p>private成员变量year,month,day ；</p>
<p>toDateString()方法返回日期对应的字符串：xxxx年xx月xx日</p>
<p>（3）定义SalariedEmployee类继承Employee类，实现按月计算工资的员工处理。该类包括：private成员变量monthlySalary；</p>
<p>实现父类的抽象方法earnings(),该方法返回monthlySalary值；toString()方法输出员工类型信息及员工的name，number,birthday。</p>
<p>（4）参照SalariedEmployee类定义HourlyEmployee类，实现按小时计算工资的员工处理。该类包括：</p>
<p>private成员变量wage和hour；</p>
<p>实现父类的抽象方法earnings(),该方法返回wage*hour值；</p>
<p>toString()方法输出员工类型信息及员工的name，number,birthday。</p>
<p>（5）定义PayrollSystem类，创建Employee变量数组并初始化，该数组存放各类雇员对象的引用。利用循环结构遍历数组元素，输出各个对象的类型,name,number,birthday,以及该对象生日。当键盘输入本月月份值时，如果本月是某个Employee对象的生日，还要输出增加工资信息。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//提示：</span></span><br><span class="line"><span class="comment">//定义People类型的数组People c1[]=new People[10];</span></span><br><span class="line"><span class="comment">//数组元素赋值</span></span><br><span class="line">c1[<span class="number">0</span>]=<span class="keyword">new</span> People(<span class="string">"John"</span>,<span class="string">"0001"</span>,<span class="number">20</span>);</span><br><span class="line">c1[<span class="number">1</span>]=<span class="keyword">new</span> People(<span class="string">"Bob"</span>,<span class="string">"0002"</span>,<span class="number">19</span>);</span><br><span class="line"><span class="comment">//若People有两个子类Student和Officer，则数组元素赋值时，可以使父类类型的数组元素指向子类。</span></span><br><span class="line">c1[<span class="number">0</span>]=<span class="keyword">new</span> Student(<span class="string">"John"</span>,<span class="string">"0001"</span>,<span class="number">20</span>,<span class="number">85.0</span>);</span><br><span class="line">c1[<span class="number">1</span>]=<span class="keyword">new</span> Officer(<span class="string">"Bob"</span>,<span class="string">"0002"</span>,<span class="number">19</span>,<span class="number">90.5</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> number;</span><br><span class="line">    <span class="keyword">private</span> MyDate birthday;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, <span class="keyword">int</span> number, MyDate birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.number = number;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getNumber</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNumber</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.number = number;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyDate <span class="title">getBirthday</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBirthday</span><span class="params">(MyDate birthday)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">earnings</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"name = "</span> + name + <span class="string">",number = "</span> + number +<span class="string">", birthday = "</span> + birthday.toDateString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class SalariedEmployee extends Employee&#123;</span><br><span class="line">    private double monthlySalary;&#x2F;&#x2F;月工资</span><br><span class="line"></span><br><span class="line">    public SalariedEmployee() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public double earnings() &#123;</span><br><span class="line">        return monthlySalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public SalariedEmployee(String name, int number, MyDate birthday, double monthlySalary) &#123;</span><br><span class="line">        super(name, number, birthday);</span><br><span class="line">        this.monthlySalary &#x3D; monthlySalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMonthlySalary(double monthlySalary) &#123;</span><br><span class="line">        this.monthlySalary &#x3D; monthlySalary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String toString()&#123;</span><br><span class="line">        return &quot;SalariedEmployee[&quot; + super.toString() + &quot;]&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">public class HourlyEmployee extends Employee&#123;</span><br><span class="line">    private double wage;&#x2F;&#x2F;单位小时的工资</span><br><span class="line">    private int hour;&#x2F;&#x2F;月工作的小时数</span><br><span class="line"></span><br><span class="line">    public HourlyEmployee() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public HourlyEmployee(String name, int number, MyDate birthday, double wage, int hour) &#123;</span><br><span class="line">        super(name, number, birthday);</span><br><span class="line">        this.wage &#x3D; wage;</span><br><span class="line">        this.hour &#x3D; hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public double getWage() &#123;</span><br><span class="line">        return wage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setWage(double wage) &#123;</span><br><span class="line">        this.wage &#x3D; wage;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getHour() &#123;</span><br><span class="line">        return hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setHour(int hour) &#123;</span><br><span class="line">        this.hour &#x3D; hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public double earnings() &#123;</span><br><span class="line">        return wage * hour;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String toString()&#123;</span><br><span class="line">        return &quot;HourlyEmployee[&quot; + super.toString() + &quot;]&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">public class MyDate &#123;</span><br><span class="line">    private int year;</span><br><span class="line">    private int month;</span><br><span class="line">    private int day;</span><br><span class="line">    public MyDate() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public MyDate(int year, int month, int day) &#123;</span><br><span class="line">        this.year &#x3D; year;</span><br><span class="line">        this.month &#x3D; month;</span><br><span class="line">        this.day &#x3D; day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getYear() &#123;</span><br><span class="line">        return year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setYear(int year) &#123;</span><br><span class="line">        this.year &#x3D; year;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getMonth() &#123;</span><br><span class="line">        return month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMonth(int month) &#123;</span><br><span class="line">        this.month &#x3D; month;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getDay() &#123;</span><br><span class="line">        return day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setDay(int day) &#123;</span><br><span class="line">        this.day &#x3D; day;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String toDateString()&#123;</span><br><span class="line">        return year + &quot;年&quot; + month + &quot;月&quot; + day + &quot;日&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class PayrollSystem &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Scanner scan &#x3D; new Scanner(System.in);</span><br><span class="line">        Employee[] emps &#x3D; new Employee[2];</span><br><span class="line"></span><br><span class="line">        emps[0] &#x3D; new SalariedEmployee(&quot;张小亮&quot;,1001,new MyDate(1992,12,21),18000);</span><br><span class="line"></span><br><span class="line">        emps[1] &#x3D; new HourlyEmployee(&quot;侯少鹏&quot;,1002,new MyDate(1997,11,12),240,100);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;请输入当前的月份：&quot;);</span><br><span class="line">        int month &#x3D; scan.nextInt();</span><br><span class="line"></span><br><span class="line">        for (int i &#x3D; 0; i &lt; emps.length; i++) &#123;</span><br><span class="line">            System.out.println(emps[i].toString());</span><br><span class="line">            System.out.println(&quot;工资为：&quot; + emps[i].earnings());</span><br><span class="line">            if(month &#x3D;&#x3D; emps[i].getBirthday().getMonth())&#123;</span><br><span class="line">                System.out.println(&quot;生日快乐！加薪100&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        scan.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-接口-interface"><a href="#7-接口-interface" class="headerlink" title="7. 接口(interface)"></a>7. 接口(interface)</h2><h3 id="7-1-类比"><a href="#7-1-类比" class="headerlink" title="7.1 类比"></a>7.1 类比</h3><p>生活中大家每天都在用USB接口，那么USB接口与我们今天要学习的接口有什么相同点呢？</p>
<pre><code>USB，（Universal Serial Bus，通用串行总线）是Intel公司开发的总线架构，使得在计算机上添加串行设备（鼠标、键盘、打印机、扫描仪、摄像头、充电器、MP3机、手机、数码相机、移动硬盘等）非常容易。</code></pre><p>其实，不管是电脑上的USB插口，还是其他设备上的USB插口都只是<code>遵循了USB规范</code>的一种具体设备而已。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203030.png" alt="bbcc80f541000c71b81650cfaa770c86"></p>
<p>只要设备遵循USB规范的，那么就可以与电脑互联，并正常通信。至于这个设备、电脑是哪个厂家制造的，内部是如何实现的，我们都无需关心。</p>
<p>Java的软件系统会有很多模块组成，那么各个模块之间也应该采用这种<code>面向接口</code>的<code>低耦合</code>，为系统提供更好的可扩展性和可维护性。</p>
<h3 id="7-2-概述"><a href="#7-2-概述" class="headerlink" title="7.2 概述"></a>7.2 概述</h3><p>接口就是规范，定义的是一组规则，体现了现实世界中“如果你是/要…则必须能…”的思想。继承是一个”是不是”的is-a关系，而接口实现则是 “能不能”的<code>has-a</code>关系。</p>
<ul>
<li>例如：电脑都预留了可以插入USB设备的USB接口，USB接口具备基本的数据传输的开启功能和关闭功能。你能不能用USB进行连接，或是否具备USB通信功能，就看你能否遵循USB接口规范</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203886.png" alt="image-20220517211517846" style="zoom:67%;">

<ul>
<li>例如：Java程序是否能够连接使用某种数据库产品，那么要看该数据库产品能否实现Java设计的JDBC规范</li>
</ul>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203377.png" alt="image-20220325235434103" style="zoom:67%;">



<blockquote>
<p>接口的本质是契约、标准、规范，就像我们的法律一样。制定好后大家都要遵守。</p>
</blockquote>
<h3 id="7-3-定义格式"><a href="#7-3-定义格式" class="headerlink" title="7.3 定义格式"></a>7.3 定义格式</h3><p>接口的定义，它与定义类方式相似，但是使用 <code>interface</code> 关键字。它也会被编译成.class文件，但一定要明确它并不是类，而是另外一种引用数据类型。</p>
<blockquote>
<p>引用数据类型：数组，类，枚举，接口，注解。</p>
</blockquote>
<h4 id="7-3-1-接口的声明格式"><a href="#7-3-1-接口的声明格式" class="headerlink" title="7.3.1 接口的声明格式"></a>7.3.1 接口的声明格式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] <span class="class"><span class="keyword">interface</span> 接口名</span>&#123;</span><br><span class="line">    <span class="comment">//接口的成员列表：</span></span><br><span class="line">    <span class="comment">// 公共的静态常量</span></span><br><span class="line">    <span class="comment">// 公共的抽象方法</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 公共的默认方法（JDK1.8以上）</span></span><br><span class="line">    <span class="comment">// 公共的静态方法（JDK1.8以上）</span></span><br><span class="line">    <span class="comment">// 私有方法（JDK1.9以上）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">USB3</span></span>&#123;</span><br><span class="line">    <span class="comment">//静态常量</span></span><br><span class="line">    <span class="keyword">long</span> MAX_SPEED = <span class="number">500</span>*<span class="number">1024</span>*<span class="number">1024</span>;<span class="comment">//500MB/s</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">in</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">out</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//默认方法</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"开始"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"结束"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"USB 3.0可以同步全速地进行读写操作"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-2-接口的成员说明"><a href="#7-3-2-接口的成员说明" class="headerlink" title="7.3.2 接口的成员说明"></a>7.3.2 接口的成员说明</h4><p><strong>在JDK8.0 之前</strong>，接口中只允许出现：</p>
<p>（1）公共的静态的常量：其中<code>public static final</code>可以省略</p>
<p>（2）公共的抽象的方法：其中<code>public abstract</code>可以省略</p>
<blockquote>
<p>理解：接口是从多个相似类中抽象出来的规范，不需要提供具体实现</p>
</blockquote>
<p><strong>在JDK8.0 时</strong>，接口中允许声明<code>默认方法</code>和<code>静态方法</code>：</p>
<p>（3）公共的默认的方法：其中public 可以省略，建议保留，但是default不能省略</p>
<p>（4）公共的静态的方法：其中public 可以省略，建议保留，但是static不能省略</p>
<p><strong>在JDK9.0 时</strong>，接口又增加了：</p>
<p>（5）私有方法</p>
<p>除此之外，接口中没有构造器，没有初始化块，因为接口中没有成员变量需要动态初始化。</p>
<h3 id="7-4-接口的使用规则"><a href="#7-4-接口的使用规则" class="headerlink" title="7.4 接口的使用规则"></a>7.4 接口的使用规则</h3><p><strong>1、类实现接口（implements）</strong></p>
<p>接口<strong>不能创建对象</strong>，但是可以被类实现（<code>implements</code> ，类似于被继承）。</p>
<p>类与接口的关系为实现关系，即<strong>类实现接口</strong>，该类可以称为接口的实现类。实现的动作类似继承，格式相仿，只是关键字不同，实现使用 <code>implements</code>关键字。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【修饰符】 <span class="class"><span class="keyword">class</span> 实现类  <span class="keyword">implements</span> 接口</span>&#123;</span><br><span class="line">	<span class="comment">// 重写接口中抽象方法【必须】，当然如果实现类是抽象类，那么可以不重写</span></span><br><span class="line">  	<span class="comment">// 重写接口中默认方法【可选】</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">【修饰符】 <span class="class"><span class="keyword">class</span> 实现类 <span class="keyword">extends</span> 父类 <span class="keyword">implements</span> 接口</span>&#123;</span><br><span class="line">    <span class="comment">// 重写接口中抽象方法【必须】，当然如果实现类是抽象类，那么可以不重写</span></span><br><span class="line">  	<span class="comment">// 重写接口中默认方法【可选】</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203354.png" alt="image-20220514163212312" style="zoom:80%;">

<p>注意：</p>
<ol>
<li><p>如果接口的实现类是非抽象类，那么必须<code>重写接口中所有抽象方法</code>。</p>
</li>
<li><p>默认方法可以选择保留，也可以重写。</p>
<blockquote>
<p>重写时，default单词就不要再写了，它只用于在接口中表示默认方法，到类中就没有默认方法的概念了</p>
</blockquote>
</li>
<li><p>接口中的静态方法不能被继承也不能被重写</p>
</li>
</ol>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">USB</span></span>&#123;		<span class="comment">// </span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Computer</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(USB usb)</span></span>&#123;	</span><br><span class="line">		usb.start() ;</span><br><span class="line">		System.out.println(<span class="string">"=========== USB 设备工作 ========"</span>) ;</span><br><span class="line">		usb.stop() ;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flash</span> <span class="keyword">implements</span> <span class="title">USB</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;	<span class="comment">// 重写方法</span></span><br><span class="line">		System.out.println(<span class="string">"U盘开始工作。"</span>) ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;		<span class="comment">// 重写方法</span></span><br><span class="line">		System.out.println(<span class="string">"U盘停止工作。"</span>) ;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Print</span> <span class="keyword">implements</span> <span class="title">USB</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;	<span class="comment">// 重写方法</span></span><br><span class="line">		System.out.println(<span class="string">"打印机开始工作。"</span>) ;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;		<span class="comment">// 重写方法</span></span><br><span class="line">		System.out.println(<span class="string">"打印机停止工作。"</span>) ;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InterfaceDemo</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">		Computer.show(<span class="keyword">new</span> Flash()) ;</span><br><span class="line">		Computer.show(<span class="keyword">new</span> Print()) ;</span><br><span class="line"></span><br><span class="line">		c.show(<span class="keyword">new</span> USB()&#123;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;</span><br><span class="line">				System.out.println(<span class="string">"移动硬盘开始运行"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">				System.out.println(<span class="string">"移动硬盘停止运行"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>2、接口的多实现（implements）</strong></p>
<p>之前学过，在继承体系中，一个类只能继承一个父类。而对于接口而言，一个类是可以实现多个接口的，这叫做接口的<code>多实现</code>。并且，一个类能继承一个父类，同时实现多个接口。</p>
<p>实现格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【修饰符】 <span class="class"><span class="keyword">class</span> 实现类  <span class="keyword">implements</span> 接口1，接口2，接口3。。。</span>&#123;</span><br><span class="line">	<span class="comment">// 重写接口中所有抽象方法【必须】，当然如果实现类是抽象类，那么可以不重写</span></span><br><span class="line">  	<span class="comment">// 重写接口中默认方法【可选】</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">【修饰符】 <span class="class"><span class="keyword">class</span> 实现类 <span class="keyword">extends</span> 父类 <span class="keyword">implements</span> 接口1，接口2，接口3。。。</span>&#123;</span><br><span class="line">    <span class="comment">// 重写接口中所有抽象方法【必须】，当然如果实现类是抽象类，那么可以不重写</span></span><br><span class="line">  	<span class="comment">// 重写接口中默认方法【可选】</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>接口中，有多个抽象方法时，实现类必须重写所有抽象方法。<strong>如果抽象方法有重名的，只需要重写一次</strong>。</p>
</blockquote>
<p>举例：</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203509.png" alt="image-20220514163311418" style="zoom:80%;">

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203063.png" alt="image-20220325235321778" style="zoom:67%;">

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203623.png" alt="1562216188519"></p>
<p>定义多个接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showA</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showB</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义实现类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">implements</span> <span class="title">A</span>,<span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"showA"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"showB"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestC</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        C c = <span class="keyword">new</span> C();</span><br><span class="line">        c.showA();</span><br><span class="line">        c.showB();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3、接口的多继承(extends)</strong></p>
<p>一个接口能继承另一个或者多个接口，接口的继承也使用 <code>extends</code> 关键字，子接口继承父接口的方法。</p>
<p>定义父接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Chargeable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">in</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">out</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义子接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UsbC</span> <span class="keyword">extends</span> <span class="title">Chargeable</span>,<span class="title">USB3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">reverse</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义子接口的实现类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TypeCConverter</span> <span class="keyword">implements</span> <span class="title">UsbC</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">reverse</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"正反面都支持"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">charge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"可充电"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"接收数据"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"输出数据"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>所有父接口的抽象方法都有重写。</p>
<p>方法签名相同的抽象方法只需要实现一次。</p>
</blockquote>
<p><strong>4、接口与实现类对象构成多态引用</strong></p>
<p>实现类实现接口，类似于子类继承父类，因此，接口类型的变量与实现类的对象之间，也可以构成多态引用。通过接口类型的变量调用方法，最终执行的是你new的实现类对象实现的方法体。</p>
<p>接口的不同实现类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Mouse</span> <span class="keyword">implements</span> <span class="title">USB3</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"发送脉冲信号"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"不接收信号"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KeyBoard</span> <span class="keyword">implements</span> <span class="title">USB3</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">in</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"不接收信号"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">out</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"发送按键信号"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestComputer</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Computer computer = <span class="keyword">new</span> Computer();</span><br><span class="line">        USB3 usb = <span class="keyword">new</span> Mouse();</span><br><span class="line">        computer.setUsb(usb);</span><br><span class="line">        usb.start();</span><br><span class="line">        usb.out();</span><br><span class="line">        usb.in();</span><br><span class="line">        usb.stop();</span><br><span class="line">        System.out.println(<span class="string">"--------------------------"</span>);</span><br><span class="line"></span><br><span class="line">        usb = <span class="keyword">new</span> KeyBoard();</span><br><span class="line">        computer.setUsb(usb);</span><br><span class="line">        usb.start();</span><br><span class="line">        usb.out();</span><br><span class="line">        usb.in();</span><br><span class="line">        usb.stop();</span><br><span class="line">        System.out.println(<span class="string">"--------------------------"</span>);</span><br><span class="line"></span><br><span class="line">        usb = <span class="keyword">new</span> MobileHDD();</span><br><span class="line">        computer.setUsb(usb);</span><br><span class="line">        usb.start();</span><br><span class="line">        usb.out();</span><br><span class="line">        usb.in();</span><br><span class="line">        usb.stop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5、使用接口的静态成员</strong></p>
<p>接口不能直接创建对象，但是可以通过接口名直接调用接口的静态方法和静态常量。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestUSB3</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//通过“接口名.”调用接口的静态方法 (JDK8.0才能开始使用)</span></span><br><span class="line">        USB3.show();</span><br><span class="line">        <span class="comment">//通过“接口名.”直接使用接口的静态常量</span></span><br><span class="line">        System.out.println(USB3.MAX_SPEED);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>6、使用接口的非静态方法</strong></p>
<ul>
<li>对于接口的静态方法，直接使用“<code>接口名.</code>”进行调用即可<ul>
<li>也只能使用“接口名.”进行调用，不能通过实现类的对象进行调用</li>
</ul>
</li>
<li>对于接口的抽象方法、默认方法，只能通过实现类对象才可以调用<ul>
<li>接口不能直接创建对象，只能创建实现类的对象</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMobileHDD</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建实现类对象</span></span><br><span class="line">        MobileHDD b = <span class="keyword">new</span> MobileHDD();</span><br><span class="line"><span class="comment">//通过实现类对象调用重写的抽象方法，以及接口的默认方法，如果实现类重写了就执行重写的默认方法，如果没有重写，就执行接口中的默认方法</span></span><br><span class="line">        b.start();</span><br><span class="line">        b.in();</span><br><span class="line">        b.stop();</span><br><span class="line">        Usb3.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-5-JDK8中相关冲突问题"><a href="#7-5-JDK8中相关冲突问题" class="headerlink" title="7.5 JDK8中相关冲突问题"></a>7.5 JDK8中相关冲突问题</h3><h4 id="7-5-1-默认方法冲突问题"><a href="#7-5-1-默认方法冲突问题" class="headerlink" title="7.5.1 默认方法冲突问题"></a>7.5.1 默认方法冲突问题</h4><p><strong>（1）类优先原则</strong></p>
<p>当一个类，既继承一个父类，又实现若干个接口时，父类中的成员方法与接口中的抽象方法重名，子类就近选择执行父类的成员方法。代码如下：</p>
<p>定义接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Friend</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">date</span><span class="params">()</span></span>&#123;<span class="comment">//约会</span></span><br><span class="line">        System.out.println(<span class="string">"吃喝玩乐"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义父类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">date</span><span class="params">()</span></span>&#123;<span class="comment">//约会</span></span><br><span class="line">        System.out.println(<span class="string">"爸爸约吃饭"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义子类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span> <span class="keyword">implements</span> <span class="title">Friend</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">date</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//(1)不重写默认保留父类的</span></span><br><span class="line">        <span class="comment">//(2)调用父类被重写的</span></span><br><span class="line"><span class="comment">//        super.date();</span></span><br><span class="line">        <span class="comment">//(3)保留父接口的</span></span><br><span class="line"><span class="comment">//        Friend.super.date();</span></span><br><span class="line">        <span class="comment">//(4)完全重写</span></span><br><span class="line">        System.out.println(<span class="string">"跟康师傅学Java"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSon</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Son s = <span class="keyword">new</span> Son();</span><br><span class="line">        s.date();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>（2）接口冲突（左右为难）</strong></p>
<ul>
<li>当一个类同时实现了多个父接口，而多个父接口中包含方法签名相同的默认方法时，怎么办呢？</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203344.jpg" alt></p>
<p>无论你多难抉择，最终都是要做出选择的。</p>
<p>声明接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BoyFriend</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">date</span><span class="params">()</span></span>&#123;<span class="comment">//约会</span></span><br><span class="line">        System.out.println(<span class="string">"神秘约会"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>选择保留其中一个，通过“<code>接口名.super.方法名</code>“的方法选择保留哪个接口的默认方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Girl</span> <span class="keyword">implements</span> <span class="title">Friend</span>,<span class="title">BoyFriend</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">date</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//(1)保留其中一个父接口的</span></span><br><span class="line"><span class="comment">//        Friend.super.date();</span></span><br><span class="line"><span class="comment">//        BoyFriend.super.date();</span></span><br><span class="line">        <span class="comment">//(2)完全重写</span></span><br><span class="line">        System.out.println(<span class="string">"跟康师傅学Java"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGirl</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Girl girl = <span class="keyword">new</span> Girl();</span><br><span class="line">        girl.date();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>当一个子接口同时继承了多个接口，而多个父接口中包含方法签名相同的默认方法时，怎么办呢？</li>
</ul>
<p>另一个父接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">USB2</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态常量</span></span><br><span class="line">    <span class="keyword">long</span> MAX_SPEED = <span class="number">60</span>*<span class="number">1024</span>*<span class="number">1024</span>;<span class="comment">//60MB/s</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//抽象方法</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">in</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">out</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//默认方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"开始"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">default</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"结束"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"USB 2.0可以高速地进行读写操作"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">USB</span> <span class="keyword">extends</span> <span class="title">USB2</span>,<span class="title">USB3</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Usb.start"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">stop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Usb.stop"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>小贴士：</p>
<p>子接口重写默认方法时，default关键字可以保留。</p>
<p>子类重写默认方法时，default关键字不可以保留。</p>
</blockquote>
<h4 id="7-5-2-常量冲突问题"><a href="#7-5-2-常量冲突问题" class="headerlink" title="7.5.2 常量冲突问题"></a>7.5.2 常量冲突问题</h4><ul>
<li>当子类继承父类又实现父接口，而父类中存在与父接口常量同名的成员变量，并且该成员变量名在子类中仍然可见。</li>
<li>当子类同时实现多个接口，而多个接口存在相同同名常量。</li>
</ul>
<p>此时在子类中想要引用父类或父接口的同名的常量或成员变量时，就会有冲突问题。</p>
<p>父类和父接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuperClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SuperInterface</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MotherInterface</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.interfacetype;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubClass</span> <span class="keyword">extends</span> <span class="title">SuperClass</span> <span class="keyword">implements</span> <span class="title">SuperInterface</span>,<span class="title">MotherInterface</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//        System.out.println("x = " + x);//模糊不清</span></span><br><span class="line">        System.out.println(<span class="string">"super.x = "</span> + <span class="keyword">super</span>.x);</span><br><span class="line">        System.out.println(<span class="string">"SuperInterface.x = "</span> + SuperInterface.x);</span><br><span class="line">        System.out.println(<span class="string">"MotherInterface.x = "</span> + MotherInterface.x);</span><br><span class="line">        System.out.println(<span class="string">"y = "</span> + y);<span class="comment">//没有重名问题，可以直接访问</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-6-接口的总结与面试题"><a href="#7-6-接口的总结与面试题" class="headerlink" title="7.6 接口的总结与面试题"></a>7.6 接口的总结与面试题</h3><ul>
<li>接口本身不能创建对象【没有构造器】，只能创建接口的实现类对象，接口类型的变量可以与实现类对象构成多态引用。</li>
<li>声明接口用interface，接口的成员声明有限制：<ul>
<li>（1）公共的静态常量   public static final可以省略</li>
<li>（2）公共的抽象方法   public abstract可以省略</li>
<li>（3）公共的默认方法（JDK8.0 及以上）</li>
<li>（4）公共的静态方法（JDK8.0 及以上）</li>
<li>（5）私有方法（JDK9.0 及以上）</li>
</ul>
</li>
<li><strong>类可以实现(implements)多个接口</strong>。如果实现类不是抽象类，就必须实现接口中所有的抽象方法。如果实现类既要继承父类又要实现父接口，那么<strong>继承（extends）在前，实现（implements）在后</strong>。</li>
<li><strong>接口可以继承(extends)多个接口</strong>。</li>
<li>接口的默认方法可以选择重写/不重写。如果有冲突问题，另行处理。子类重写父接口的默认方法，要去掉default，子接口重写父接口的默认方法，不要去掉default。</li>
<li>接口的静态方法不能被继承，也不能被重写。接口的静态方法只能通过“接口名.静态方法名”进行调用。</li>
</ul>
<p><strong>面试题</strong></p>
<p><strong>1、为什么接口中只能声明公共的静态的常量？</strong></p>
<p>因为接口是标准规范，那么在规范中需要声明一些底线边界值，当实现者在实现这些规范时，不能去随意修改和触碰这些底线，否则就有“危险”。</p>
<p>例如：USB1.0规范中规定最大传输速率是1.5Mbps，最大输出电流是5V/500mA</p>
<p>​           USB3.0规范中规定最大传输速率是5Gbps(500MB/s)，最大输出电流是5V/900mA</p>
<p>例如：尚硅谷学生行为规范中规定学员，早上8:25之前进班，晚上21:30之后离开等等。</p>
<p><strong>2、为什么JDK8.0 之后允许接口定义静态方法和默认方法呢？因为它违反了接口作为一个抽象标准定义的概念。</strong></p>
<p><code>静态方法</code>：因为之前的标准类库设计中，有很多Collection/Colletions或者Path/Paths这样成对的接口和类，后面的类中都是静态方法，而这些静态方法都是为前面的接口服务的，那么这样设计一对API，不如把静态方法直接定义到接口中使用和维护更方便。</p>
<p><code>默认方法</code>：（1）我们要在已有的老版接口中提供新方法时，如果添加抽象方法，就会涉及到原来使用这些接口的类就会有问题，那么为了保持与旧版本代码的兼容性，只能允许在接口中定义默认方法实现。比如：Java8中对Collection、List、Comparator等接口提供了丰富的默认方法。（2）当我们接口的某个抽象方法，在很多实现类中的实现代码是一样的，此时将这个抽象方法设计为默认方法更为合适，那么实现类就可以选择重写，也可以选择不重写。</p>
<p><strong>3、为什么JDK1.9要允许接口定义私有方法呢？因为我们说接口是规范，规范是需要公开让大家遵守的。</strong></p>
<p><strong>私有方法</strong>：因为有了默认方法和静态方法这样具有具体实现的方法，那么就可能出现多个方法由共同的代码可以抽取，而这些共同的代码抽取出来的方法又只希望在接口内部使用，所以就增加了私有方法。</p>
<h3 id="7-7-接口与抽象类之间的对比"><a href="#7-7-接口与抽象类之间的对比" class="headerlink" title="7.7 接口与抽象类之间的对比"></a>7.7 接口与抽象类之间的对比</h3><p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203085.png" alt="image-20220328002053452"></p>
<blockquote>
<p>在开发中，常看到一个类要么继承抽象类，要么实现接口。</p>
</blockquote>
<h3 id="7-8-练习"><a href="#7-8-练习" class="headerlink" title="7.8 练习"></a>7.8 练习</h3><p><strong>笔试题：</strong>排错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span> <span class="keyword">implements</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(x);  <span class="comment">//没标清楚是谁的x属性 </span></span><br><span class="line">        System.out.println(<span class="keyword">super</span>.x); <span class="comment">//输出B的属性</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> C().pX();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>笔试题：</strong>排错</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Playable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;  <span class="comment">//public abstract可以省略</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Bounceable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;  <span class="comment">//public abstract可以省略</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Rollable</span> <span class="keyword">extends</span> <span class="title">Playable</span>, <span class="title">Bounceable</span> </span>&#123;  <span class="comment">//子接口继承多个父接口</span></span><br><span class="line">    Ball ball = <span class="keyword">new</span> Ball(<span class="string">"PingPang"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ball</span> <span class="keyword">implements</span> <span class="title">Rollable</span> </span>&#123;  <span class="comment">//子类实现接口</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">//get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//有参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Ball</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//重写方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ball = <span class="keyword">new</span> Ball(<span class="string">"Football"</span>);  <span class="comment">//必须Ball ball = new Ball("Football");</span></span><br><span class="line">        System.out.println(ball.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习1：</strong></p>
<p>定义一个接口用来实现两个对象的比较。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">CompareObject</span></span>&#123;</span><br><span class="line">	<span class="comment">//若返回值是 0 , 代表相等; 若为正数，代表当前对象大；负数代表当前对象小</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Object o)</span></span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>定义一个Circle类，声明redius属性，提供getter和setter方法</p>
<p>定义一个ComparableCircle类，继承Circle类并且实现CompareObject接口。在ComparableCircle类中给出接口中方法compareTo的实现体，用来比较两个圆的半径大小。</p>
<p>定义一个测试类InterfaceTest，创建两个ComparableCircle对象，调用compareTo方法比较两个类的半径大小。</p>
<p>思考：参照上述做法定义矩形类Rectangle和ComparableRectangle类，在ComparableRectangle类中给出compareTo方法的实现，比较两个矩形的面积大小。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">public class Circle &#123;</span><br><span class="line">    private double radius;</span><br><span class="line">    &#x2F;&#x2F;无参构造器</span><br><span class="line">    public Circle() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;有参构造器</span><br><span class="line">    public Circle(double radius) &#123;</span><br><span class="line">        this.radius &#x3D; radius;</span><br><span class="line">    &#125;</span><br><span class="line">    public double getRadius()&#123;</span><br><span class="line">        return radius;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setRadius(double radius)&#123;</span><br><span class="line">        this.radius&#x3D;radius;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;Circle&#123;&quot; +&quot;radius&#x3D;&quot; + radius +&#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;接口</span><br><span class="line">public interface CompareObject &#123;</span><br><span class="line">    &#x2F;&#x2F;若返回值是0,代表相等</span><br><span class="line">    &#x2F;&#x2F;若为正数，代表当前对象大</span><br><span class="line">    &#x2F;&#x2F;若为负数，代表当前对象小</span><br><span class="line">    public int conpareTo(Object o);  &#x2F;&#x2F;抽象方法</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;继承Circle类 实现CompareObject接口</span><br><span class="line">public class ComparableCircle extends Circle implements CompareObject&#123;  &#x2F;&#x2F;继承Circle类 实现CompareObject接口</span><br><span class="line">    public ComparableCircle() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public ComparableCircle(double radius) &#123;</span><br><span class="line">        super(radius);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int conpareTo(Object o) &#123;</span><br><span class="line">        if(this &#x3D;&#x3D; o)&#123;  &#x2F;&#x2F;如果当前比较的两个对象一致  返回0</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;</span><br><span class="line">        if(o instanceof ComparableCircle)&#123;  &#x2F;&#x2F;o属于圆类</span><br><span class="line">            ComparableCircle c &#x3D; (ComparableCircle)o; &#x2F;&#x2F;类型强制向下转型</span><br><span class="line">            return Double.compare(this.getRadius(),c.getRadius());  &#x2F;&#x2F;调用Double.compare方法对比</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return 2; &#x2F;&#x2F;如果输入的类型不匹配，则返回2</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;test测试</span><br><span class="line">public class InterfaceTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">      ComparableCircle c1&#x3D;new ComparableCircle();</span><br><span class="line">      ComparableCircle c2&#x3D;new ComparableCircle();</span><br><span class="line">      System.out.println(c1.conpareTo(c2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习2：交通工具案例</strong></p>
<p>阿里的一个工程师，声明的属性和方法如下：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203933.png" alt="image-20220504172547709"></p>
<p>其中，有一个乘坐交通工具的方法takingVehicle()，在此方法中调用交通工具的run()。为了出行方便，他买了一辆捷安特自行车、一辆雅迪电动车和一辆奔驰轿车。这里涉及到的相关类及接口关系如下：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203907.png" alt="image-20220504172918861"></p>
<p>其中，电动车增加动力的方式是充电，轿车增加动力的方式是加油。在具体交通工具的run()中调用其所在类的相关属性信息。</p>
<p>请编写相关代码，并测试。</p>
<p>提示：创建Vehicle[]数组，保存阿里工程师的三辆交通工具，并分别在工程师的takingVehicle()中调用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public class Developer &#123;</span><br><span class="line">    private String name;</span><br><span class="line">    private int age;</span><br><span class="line">    &#x2F;&#x2F;set和get方法</span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age &#x3D; age;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;乘坐交通工具</span><br><span class="line">    public void takingVehicle(Vehicle vehicle)&#123;</span><br><span class="line">        vehicle.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Vehicle &#123;  &#x2F;&#x2F;抽象类</span><br><span class="line">    private String brand;</span><br><span class="line">    private String color;</span><br><span class="line"></span><br><span class="line">    public Vehicle()&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Vehicle(String brand,String color)&#123;  &#x2F;&#x2F;子类调用</span><br><span class="line">        this.brand&#x3D;brand;</span><br><span class="line">        this.color&#x3D;color;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;set和get方法</span><br><span class="line">    public String getBrand() &#123;</span><br><span class="line">        return brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBrand(String brand) &#123;</span><br><span class="line">        this.brand &#x3D; brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getColor() &#123;</span><br><span class="line">        return color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setColor(String color) &#123;</span><br><span class="line">        this.color &#x3D; color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract void run();  &#x2F;&#x2F;抽象方法</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface IPower &#123;</span><br><span class="line">    &#x2F;&#x2F;抽象方法</span><br><span class="line">    public abstract void power(); &#x2F;&#x2F;电车和骑车的充电功能</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Bycicle extends Vehicle&#123;</span><br><span class="line">    public Bycicle(String brand,String color)&#123;</span><br><span class="line">        super(brand,color);  &#x2F;&#x2F;调用父类有参构造器</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;实现抽象类父类的方法</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        System.out.println(&quot;开的是:&quot;+getBrand()+&quot;,颜色是:&quot;+getColor());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class ElectricVehicle extends Vehicle implements IPower&#123;</span><br><span class="line">    public ElectricVehicle(String brand,String color)&#123;</span><br><span class="line">        super(brand,color);  &#x2F;&#x2F;调用父类构造器</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;实现接口方法</span><br><span class="line">    @Override</span><br><span class="line">    public void power() &#123;</span><br><span class="line">        System.out.println(&quot;充电&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;实现抽象类父类方法</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        System.out.println(&quot;开的是:&quot;+super.getBrand()+&quot;,颜色是:&quot;+super.getColor());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class Car extends Vehicle implements IPower&#123;</span><br><span class="line">    private String carNumber;</span><br><span class="line">    public Car(String brand,String color,String carNumber)&#123;</span><br><span class="line">        super(brand,color);  &#x2F;&#x2F;调用父类构造器</span><br><span class="line">        this.carNumber&#x3D;carNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getCarNumber() &#123;</span><br><span class="line">        return carNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setCarNumber(String carNumber) &#123;</span><br><span class="line">        this.carNumber &#x3D; carNumber;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F;实现接口方法</span><br><span class="line">    @Override</span><br><span class="line">    public void power() &#123;</span><br><span class="line">        System.out.println(&quot;加油&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;实现抽象类父类方法</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        System.out.println(&quot;开的是:&quot;+super.getBrand()+&quot;,颜色是:&quot;+super.getColor()+&quot;,开的车号码牌是:&quot;+this.getCarNumber());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class DeveloperTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Developer test&#x3D;new Developer();</span><br><span class="line">        Vehicle[] vehicles&#x3D;new Vehicle[3];</span><br><span class="line">        &#x2F;&#x2F;创建三个交通工具</span><br><span class="line">        vehicles[0]&#x3D;new Bycicle(&quot;捷安特&quot;,&quot;黄色&quot;);</span><br><span class="line">        vehicles[1]&#x3D;new Car(&quot;奥迪&quot;,&quot;黄色&quot;,&quot;1231123&quot;);</span><br><span class="line">        vehicles[2]&#x3D;new ElectricVehicle(&quot;电动车&quot;,&quot;绿色&quot;);</span><br><span class="line">        test.takingVehicle(vehicles[0]);</span><br><span class="line">        test.takingVehicle(vehicles[1]);</span><br><span class="line">        test.takingVehicle(vehicles[2]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终代码结果如下:</p>
<p><img src=".images/image-20231011102622680.png" alt="image-20231011102622680"></p>
<h2 id="8-内部类（InnerClass"><a href="#8-内部类（InnerClass" class="headerlink" title="8. 内部类（InnerClass)"></a>8. 内部类（InnerClass)</h2><h3 id="8-1-概述"><a href="#8-1-概述" class="headerlink" title="8.1 概述"></a>8.1 概述</h3><h4 id="8-1-1-什么是内部类"><a href="#8-1-1-什么是内部类" class="headerlink" title="8.1.1 什么是内部类"></a>8.1.1 什么是内部类</h4><p>将一个类B定义在另一个类A里面，里面的那个类B就称为<code>内部类（InnerClass）</code>，类A则称为<code>外部类（OuterClass）</code>。</p>
<h4 id="8-1-2-为什么要声明内部类呢"><a href="#8-1-2-为什么要声明内部类呢" class="headerlink" title="8.1.2 为什么要声明内部类呢"></a>8.1.2 为什么要声明内部类呢</h4><p>具体来说，当一个事物A的内部，还有一个部分需要一个完整的结构B进行描述，而这个内部的完整的结构B又只为外部事物A提供服务，不在其他地方单独使用，那么整个内部的完整结构B最好使用内部类。</p>
<p>总的来说，遵循<code>高内聚、低耦合</code>的面向对象开发原则。</p>
<h4 id="8-1-3-内部类的分类"><a href="#8-1-3-内部类的分类" class="headerlink" title="8.1.3 内部类的分类"></a>8.1.3 内部类的分类</h4><p>根据内部类声明的位置（如同变量的分类），我们可以分为：</p>
<p><img src=".images/image-20221124223912529.png" alt="image-20221124223912529"></p>
<h3 id="8-2-成员内部类"><a href="#8-2-成员内部类" class="headerlink" title="8.2 成员内部类"></a>8.2 成员内部类</h3><h4 id="8-2-1-概述"><a href="#8-2-1-概述" class="headerlink" title="8.2.1 概述"></a>8.2.1 概述</h4><p>如果成员内部类中不使用外部类的非静态成员，那么通常将内部类声明为静态内部类，否则声明为非静态内部类。</p>
<p><strong>语法格式：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] <span class="class"><span class="keyword">class</span> 外部类</span>&#123;</span><br><span class="line">    [其他修饰符] [<span class="keyword">static</span>] <span class="class"><span class="keyword">class</span> 内部类</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>成员内部类的使用特征，概括来讲有如下两种角色：</strong></p>
<ul>
<li>成员内部类作为<strong>类的成员</strong>：<ul>
<li>和外部类不同，Inner class还可以声明为private或protected；</li>
<li>可以调用外部类的结构。（注意：在静态内部类中不能使用外部类的非静态成员）</li>
<li>Inner class 可以声明为static的，但此时就不能再使用外层类的非static的成员变量；</li>
</ul>
</li>
<li>成员内部类作为<strong>类</strong>：<ul>
<li>可以在内部定义属性、方法、构造器等结构</li>
<li>可以继承自己的想要继承的父类，实现自己想要实现的父接口们，和外部类的父类和父接口无关</li>
<li>可以声明为abstract类 ，因此可以被其它的内部类继承</li>
<li>可以声明为final的，表示不能被继承</li>
<li>编译以后生成OuterClass$InnerClass.class字节码文件（也适用于局部内部类）</li>
</ul>
</li>
</ul>
<p>注意点：</p>
<ol start="2">
<li><p>外部类访问成员内部类的成员，需要“内部类.成员”或“内部类对象.成员”的方式</p>
</li>
<li><p>成员内部类可以直接使用外部类的所有成员，包括私有的数据</p>
</li>
<li><p>当想要在外部类的静态成员部分使用内部类时，可以考虑内部类声明为静态的</p>
</li>
</ol>
<h4 id="8-2-2-创建成员内部类对象"><a href="#8-2-2-创建成员内部类对象" class="headerlink" title="8.2.2 创建成员内部类对象"></a>8.2.2 创建成员内部类对象</h4><ul>
<li>实例化静态内部类</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">外部类名.静态内部类名 变量 &#x3D; 外部类名.静态内部类名();</span><br><span class="line">变量.非静态方法();</span><br></pre></td></tr></table></figure>

<ul>
<li>实例化非静态内部类</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">外部类名 变量1 &#x3D; new 外部类();</span><br><span class="line">外部类名.非静态内部类名 变量2 &#x3D; 变量1.new 非静态内部类名();</span><br><span class="line">变量2.非静态方法();</span><br></pre></td></tr></table></figure>

<h4 id="8-2-3-举例"><a href="#8-2-3-举例" class="headerlink" title="8.2.3 举例"></a>8.2.3 举例</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMemberInnerClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建静态内部类实例，并调用方法</span></span><br><span class="line">        Outer.StaticInner inner = <span class="keyword">new</span> Outer.StaticInner();</span><br><span class="line">        inner.inFun();</span><br><span class="line">        <span class="comment">//调用静态内部类静态方法</span></span><br><span class="line">        Outer.StaticInner.inMethod();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"*****************************"</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//创建非静态内部类实例（方式1），并调用方法</span></span><br><span class="line">        Outer outer = <span class="keyword">new</span> Outer();</span><br><span class="line">        Outer.NoStaticInner inner1 = outer.<span class="keyword">new</span> NoStaticInner();</span><br><span class="line">        inner1.inFun();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建非静态内部类实例（方式2）</span></span><br><span class="line">        Outer.NoStaticInner inner2 = outer.getNoStaticInner();</span><br><span class="line">        inner1.inFun();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//外部类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String a = <span class="string">"外部类的静态a"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String b  = <span class="string">"外部类的静态b"</span>;</span><br><span class="line">    <span class="keyword">private</span> String c = <span class="string">"外部类对象的非静态c"</span>;</span><br><span class="line">    <span class="keyword">private</span> String d = <span class="string">"外部类对象的非静态d"</span>;</span><br><span class="line">	<span class="comment">//内部静态类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticInner</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> String a =<span class="string">"静态内部类的静态a"</span>;</span><br><span class="line">        <span class="keyword">private</span> String c = <span class="string">"静态内部类对象的非静态c"</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">inMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"Inner.a = "</span> + a);</span><br><span class="line">            System.out.println(<span class="string">"Outer.a = "</span> + Outer.a);</span><br><span class="line">            System.out.println(<span class="string">"b = "</span> + b);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inFun</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"Inner.inFun"</span>);</span><br><span class="line">            System.out.println(<span class="string">"Outer.a = "</span> + Outer.a);</span><br><span class="line">            System.out.println(<span class="string">"Inner.a = "</span> + a);</span><br><span class="line">            System.out.println(<span class="string">"b = "</span> + b);</span><br><span class="line">            System.out.println(<span class="string">"c = "</span> + c);</span><br><span class="line"><span class="comment">//            System.out.println("d = " + d);//不能访问外部类的非静态成员</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">NoStaticInner</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> String a = <span class="string">"非静态内部类对象的非静态a"</span>;</span><br><span class="line">        <span class="keyword">private</span> String c = <span class="string">"非静态内部类对象的非静态c"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inFun</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"NoStaticInner.inFun"</span>);</span><br><span class="line">            System.out.println(<span class="string">"Outer.a = "</span> + Outer.a);</span><br><span class="line">            System.out.println(<span class="string">"a = "</span> + a);</span><br><span class="line">            System.out.println(<span class="string">"b = "</span> + b);</span><br><span class="line">            System.out.println(<span class="string">"Outer.c = "</span> + Outer.<span class="keyword">this</span>.c);</span><br><span class="line">            System.out.println(<span class="string">"c = "</span> + c);</span><br><span class="line">            System.out.println(<span class="string">"d = "</span> + d);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> NoStaticInner <span class="title">getNoStaticInner</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> NoStaticInner();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">Inner.inFun</span><br><span class="line">Outer.a = 外部类的静态a</span><br><span class="line">Inner.a = 静态内部类的静态a</span><br><span class="line">b = 外部类的静态b</span><br><span class="line">c = 静态内部类对象的非静态c</span><br><span class="line">Inner.a = 静态内部类的静态a</span><br><span class="line">Outer.a = 外部类的静态a</span><br><span class="line">b = 外部类的静态b</span><br><span class="line">*****************************</span><br><span class="line">NoStaticInner.inFun</span><br><span class="line">Outer.a = 外部类的静态a</span><br><span class="line">a = 非静态内部类对象的非静态a</span><br><span class="line">b = 外部类的静态b</span><br><span class="line">Outer.c = 外部类对象的非静态c</span><br><span class="line">c = 非静态内部类对象的非静态c</span><br><span class="line">d = 外部类对象的非静态d</span><br><span class="line">NoStaticInner.inFun</span><br><span class="line">Outer.a = 外部类的静态a</span><br><span class="line">a = 非静态内部类对象的非静态a</span><br><span class="line">b = 外部类的静态b</span><br><span class="line">Outer.c = 外部类对象的非静态c</span><br><span class="line">c = 非静态内部类对象的非静态c</span><br><span class="line">d = 外部类对象的非静态d</span><br></pre></td></tr></table></figure>

<h3 id="8-3-局部内部类"><a href="#8-3-局部内部类" class="headerlink" title="8.3 局部内部类"></a>8.3 局部内部类</h3><h4 id="8-3-1-非匿名局部内部类"><a href="#8-3-1-非匿名局部内部类" class="headerlink" title="8.3.1 非匿名局部内部类"></a>8.3.1 非匿名局部内部类</h4><p>语法格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[修饰符] <span class="class"><span class="keyword">class</span> 外部类</span>&#123;</span><br><span class="line">    [修饰符] 返回值类型  方法名(形参列表)&#123;</span><br><span class="line">            [<span class="keyword">final</span>/<span class="keyword">abstract</span>] <span class="class"><span class="keyword">class</span> 内部类</span>&#123;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>编译后有自己的独立的字节码文件，只不过在内部类名前面冠以外部类名、$符号、编号。<ul>
<li>这里有编号是因为同一个外部类中，不同的方法中存在相同名称的局部内部类</li>
</ul>
</li>
</ul>
<ul>
<li>和成员内部类不同的是，它前面不能有权限修饰符等</li>
<li>局部内部类如同局部变量一样，有作用域</li>
<li>局部内部类中是否能访问外部类的非静态的成员，取决于所在的方法</li>
</ul>
<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestLocalInner</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outer.outMethod();  <span class="comment">//调用外部类的静态方法</span></span><br><span class="line">        <span class="comment">//输出Outer.outMethod</span></span><br><span class="line">        <span class="comment">//创建局部内部类的对象</span></span><br><span class="line">        <span class="comment">//调用局部内部类的方法  输出Inner.inMehtod</span></span><br><span class="line">        <span class="comment">//输出 外部类方法属性 局部变量c</span></span><br><span class="line">        System.out.println(<span class="string">"-------------------"</span>);</span><br><span class="line"></span><br><span class="line">        Outer out = <span class="keyword">new</span> Outer();  <span class="comment">//创建外部类对象</span></span><br><span class="line">        out.outTest(); <span class="comment">//调用外部类非静态对象</span></span><br><span class="line">        <span class="comment">//创建局部内部类的对象</span></span><br><span class="line">        <span class="comment">//调用局部内部类的方法  输出Inner.inMethod1</span></span><br><span class="line">        System.out.println(<span class="string">"-------------------"</span>);</span><br><span class="line"></span><br><span class="line">        Runner runner = Outer.getRunner();  <span class="comment">//创建外部类对象</span></span><br><span class="line">        runner.run();  <span class="comment">//调用实现接口的方法</span></span><br><span class="line">        <span class="comment">//输出LocalRunner.run</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Outer</span></span>&#123;  <span class="comment">//外部类</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">outMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Outer.outMethod"</span>);</span><br><span class="line">        <span class="keyword">final</span> String c = <span class="string">"局部变量c"</span>;</span><br><span class="line">        <span class="comment">//局部内部类</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;  <span class="comment">//内部类</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"Inner.inMethod"</span>);</span><br><span class="line">                System.out.println(c);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Inner in = <span class="keyword">new</span> Inner();</span><br><span class="line">        in.inMethod();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">outTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//局部内部类</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Inner</span></span>&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inMethod1</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"Inner.inMethod1"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Inner in = <span class="keyword">new</span> Inner();</span><br><span class="line">        in.inMethod1();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Runner <span class="title">getRunner</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">LocalRunner</span> <span class="keyword">implements</span> <span class="title">Runner</span></span>&#123;   <span class="comment">//实现接口</span></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  <span class="comment">//重写run方法</span></span><br><span class="line">                System.out.println(<span class="string">"LocalRunner.run"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> LocalRunner();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Runner</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;   <span class="comment">//抽象方法</span></span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">Outer.outMethod</span><br><span class="line">Inner.inMethod</span><br><span class="line">局部变量c</span><br><span class="line">-------------------</span><br><span class="line">Inner.inMethod1</span><br><span class="line">-------------------</span><br><span class="line">LocalRunner.run</span><br></pre></td></tr></table></figure>

<h4 id="8-3-2-匿名内部类"><a href="#8-3-2-匿名内部类" class="headerlink" title="8.3.2 匿名内部类"></a>8.3.2 匿名内部类</h4><p>因为考虑到这个子类或实现类是一次性的，那么我们“费尽心机”的给它取名字，就显得多余。那么我们完全可以使用匿名内部类的方式来实现，避免给类命名的问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 父类([实参列表])&#123;</span><br><span class="line">    重写方法...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> 父接口()&#123;</span><br><span class="line">    重写方法...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例1：使用匿名内部类的对象直接调用方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span></span>;  <span class="comment">//抽象方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    	<span class="keyword">new</span> A()&#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span> </span>&#123;   <span class="comment">//重写接口方法</span></span><br><span class="line">				System.out.println(<span class="string">"aaaa"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">    	&#125;.a();  <span class="comment">//相当于 new 实现类();  然后调用.a()方法 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">aaaa</span><br></pre></td></tr></table></figure>

<p>举例2：通过父类或父接口的变量多态引用匿名内部类的对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">a</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    	A obj = <span class="keyword">new</span> A()&#123;</span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">a</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				System.out.println(<span class="string">"aaaa"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">    	&#125;;</span><br><span class="line">    	obj.a();  <span class="comment">// 然后调用.a()方法 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例3：匿名内部类的对象作为实参</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(A a)</span></span>&#123;  <span class="comment">//静态方法</span></span><br><span class="line">    	a.method();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">    	<span class="comment">//直接Test.test(A);这样  其中的A属于匿名内部类的对象</span></span><br><span class="line">        test(<span class="keyword">new</span> A()&#123;  </span><br><span class="line">			<span class="meta">@Override</span></span><br><span class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">				System.out.println(<span class="string">"aaaa"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">    	&#125;);</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-4-练习"><a href="#8-4-练习" class="headerlink" title="8.4 练习"></a>8.4 练习</h3><p>练习：判断输出结果为何？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//外部类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;   <span class="comment">//外部类</span></span><br><span class="line">    <span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Inner s1 = <span class="keyword">new</span> Inner();  <span class="comment">//创建内部类对象</span></span><br><span class="line">        s1.a = <span class="number">10</span>;</span><br><span class="line">        Inner s2 = <span class="keyword">new</span> Inner();  <span class="comment">//创建内部类对象</span></span><br><span class="line">        s2.a = <span class="number">20</span>;</span><br><span class="line">        <span class="comment">//创建内部类对象</span></span><br><span class="line">        Test.Inner s3 = <span class="keyword">new</span> Test.Inner();</span><br><span class="line">        System.out.println(s3.a);  <span class="comment">//输出s3的a属性</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//非静态内部类</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> a = <span class="number">5</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//main执行</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建外部类对象</span></span><br><span class="line">        <span class="comment">//直接走无参构造器</span></span><br><span class="line">        <span class="comment">//创建内部类对象s1  获得s1.a=5 更改为10</span></span><br><span class="line">        <span class="comment">//创建内部类对象s2  获得s2.a=5 更改为20</span></span><br><span class="line">        <span class="comment">//创建内部类对象s3  获得s3.a=5 输出5</span></span><br><span class="line">        Test t = <span class="keyword">new</span> Test();</span><br><span class="line">        System.out.println(<span class="string">"-------"</span>);</span><br><span class="line">        <span class="comment">//创建内部类对象</span></span><br><span class="line">        <span class="comment">//常见内部类对象r  获得r.a=5 输出5</span></span><br><span class="line">        Inner r = t.<span class="keyword">new</span> Inner();</span><br><span class="line">        <span class="comment">//输出内部类对象的a属性</span></span><br><span class="line">        <span class="comment">//直接输出5</span></span><br><span class="line">        System.out.println(r.a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line"><span class="number">5</span></span><br><span class="line">---------------------</span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>

<p>练习2：</p>
<p>编写一个匿名内部类，它继承Object，并在匿名内部类中，声明一个方法public void test()打印尚硅谷。</p>
<p>请编写代码调用这个方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种方式</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test02</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//匿名内部类  直接创建Object的对象</span></span><br><span class="line">        <span class="keyword">new</span> Object()&#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"尚硅谷"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.test();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//二和三方式没办法解决 --因为没被重写</span></span><br></pre></td></tr></table></figure>

<h2 id="9-枚举类"><a href="#9-枚举类" class="headerlink" title="9. 枚举类"></a>9. 枚举类</h2><h3 id="9-1-概述"><a href="#9-1-概述" class="headerlink" title="9.1 概述"></a>9.1 概述</h3><ul>
<li><p>枚举类型本质上也是一种类，只不过是这个<strong>类的对象</strong>是<strong>有限的</strong>、<strong>固定几个</strong>，<strong>不让用户随意创建</strong>。</p>
</li>
<li><p>枚举类的例子：</p>
<ul>
<li><code>星期</code>：Monday(星期一)……Sunday(星期天)</li>
<li><code>性别</code>：Man(男)、Woman(女)</li>
<li><code>月份</code>：January(1月)……December(12月)</li>
<li><code>季节</code>：Spring(春节)……Winter(冬天)</li>
<li><code>三原色</code>：red(红色)、green(绿色)、blue(蓝色)</li>
<li><code>支付方式</code>：Cash（现金）、WeChatPay（微信）、Alipay(支付宝)、BankCard(银行卡)、CreditCard(信用卡)</li>
<li><code>就职状态</code>：Busy(忙碌)、Free(空闲)、Vocation(休假)、Dimission(离职)</li>
<li><code>订单状态</code>：Nonpayment（未付款）、Paid（已付款）、Fulfilled（已配货）、Delivered（已发货）、Checked（已确认收货）、Return（退货）、Exchange（换货）、Cancel（取消）</li>
<li><code>线程状态</code>：创建、就绪、运行、阻塞、死亡</li>
</ul>
</li>
<li><p><strong>若枚举只有一个对象, 则作为一种单例模式的实现。</strong></p>
</li>
<li><p>枚举类的实现：</p>
<ul>
<li>在JDK5.0 之前，需要程序员自定义枚举类型。</li>
<li>在JDK5.0 之后，Java支持<code>enum</code>关键字来快速定义枚举类型。</li>
</ul>
</li>
</ul>
<h3 id="9-2-定义枚举类（JDK5-0-之前）"><a href="#9-2-定义枚举类（JDK5-0-之前）" class="headerlink" title="9.2 定义枚举类（JDK5.0 之前）"></a>9.2 定义枚举类（JDK5.0 之前）</h3><p>在JDK5.0 之前如何声明枚举类呢？</p>
<ul>
<li><code>私有化</code>类的构造器，保证不能在类的外部创建其对象</li>
<li>在类的内部创建枚举类的实例。声明为：<code>public static final</code> ，对外暴露这些常量对象</li>
<li>对象如果有<code>实例变量</code>，应该声明为<code>private final</code>（建议，不是必须），并在构造器中初始化</li>
</ul>
<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Season</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String SEASONNAME;<span class="comment">//季节的名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String SEASONDESC;<span class="comment">//季节的描述</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Season</span><span class="params">(String seasonName,String seasonDesc)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.SEASONNAME = seasonName;</span><br><span class="line">        <span class="keyword">this</span>.SEASONDESC = seasonDesc;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season SPRING = <span class="keyword">new</span> Season(<span class="string">"春天"</span>, <span class="string">"春暖花开"</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season SUMMER = <span class="keyword">new</span> Season(<span class="string">"夏天"</span>, <span class="string">"夏日炎炎"</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season AUTUMN = <span class="keyword">new</span> Season(<span class="string">"秋天"</span>, <span class="string">"秋高气爽"</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Season WINTER = <span class="keyword">new</span> Season(<span class="string">"冬天"</span>, <span class="string">"白雪皑皑"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Season&#123;"</span> +<span class="string">"SEASONNAME='"</span> + SEASONNAME + <span class="string">'\''</span> +<span class="string">", SEASONDESC='"</span> + SEASONDESC + <span class="string">'\''</span> +<span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SeasonTest</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(Season.AUTUMN);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-3-定义枚举类（JDK5-0-之后）"><a href="#9-3-定义枚举类（JDK5-0-之后）" class="headerlink" title="9.3 定义枚举类（JDK5.0 之后）"></a>9.3 定义枚举类（JDK5.0 之后）</h3><h4 id="9-3-1-enum关键字声明枚举"><a href="#9-3-1-enum关键字声明枚举" class="headerlink" title="9.3.1 enum关键字声明枚举"></a>9.3.1 enum关键字声明枚举</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">【修饰符】 <span class="keyword">enum</span> 枚举类名&#123;</span><br><span class="line">    常量对象列表</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">【修饰符】 <span class="keyword">enum</span> 枚举类名&#123;</span><br><span class="line">    常量对象列表;</span><br><span class="line">    对象的实例变量列表;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例1：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Week &#123;</span><br><span class="line">    MONDAY,TUESDAY,WEDNESDAY,THURSDAY,FRIDAY,SATURDAY,SUNDAY;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestEnum</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Season spring = Season.SPRING;</span><br><span class="line">		System.out.println(spring);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="9-3-2-enum方式定义的要求和特点"><a href="#9-3-2-enum方式定义的要求和特点" class="headerlink" title="9.3.2 enum方式定义的要求和特点"></a>9.3.2 enum方式定义的要求和特点</h4><ul>
<li>枚举类的常量对象列表必须在枚举类的首行，因为是常量，所以建议大写。</li>
<li>列出的实例系统会自动添加 public static final 修饰。</li>
<li>如果常量对象列表后面没有其他代码，那么“；”可以省略，否则不可以省略“；”。</li>
<li>编译器给枚举类默认提供的是private的无参构造，如果枚举类需要的是无参构造，就不需要声明，写常量对象列表时也不用加参数</li>
<li>如果枚举类需要的是有参构造，需要手动定义，有参构造的private可以省略，调用有参构造的方法就是在常量对象名后面加(实参列表)就可以。</li>
<li>枚举类默认继承的是java.lang.Enum类，因此不能再继承其他的类型。</li>
<li>JDK5.0 之后switch，提供支持枚举类型，case后面可以写枚举常量名，无需添加枚举类作为限定。</li>
</ul>
<p>举例2：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> SeasonEnum &#123;</span><br><span class="line">    SPRING(<span class="string">"春天"</span>,<span class="string">"春风又绿江南岸"</span>),</span><br><span class="line">    SUMMER(<span class="string">"夏天"</span>,<span class="string">"映日荷花别样红"</span>),</span><br><span class="line">    AUTUMN(<span class="string">"秋天"</span>,<span class="string">"秋水共长天一色"</span>),</span><br><span class="line">    WINTER(<span class="string">"冬天"</span>,<span class="string">"窗含西岭千秋雪"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String seasonName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String seasonDesc;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">SeasonEnum</span><span class="params">(String seasonName, String seasonDesc)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.seasonName = seasonName;</span><br><span class="line">        <span class="keyword">this</span>.seasonDesc = seasonDesc;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSeasonName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> seasonName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSeasonDesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> seasonDesc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例3：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Week &#123;</span><br><span class="line">    MONDAY(<span class="string">"星期一"</span>),</span><br><span class="line">    TUESDAY(<span class="string">"星期二"</span>),</span><br><span class="line">    WEDNESDAY(<span class="string">"星期三"</span>),</span><br><span class="line">    THURSDAY(<span class="string">"星期四"</span>),</span><br><span class="line">    FRIDAY(<span class="string">"星期五"</span>),</span><br><span class="line">    SATURDAY(<span class="string">"星期六"</span>),</span><br><span class="line">    SUNDAY(<span class="string">"星期日"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String description;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Week</span><span class="params">(String description)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.description = description;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.toString() +<span class="string">":"</span>+ description;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestWeek</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Week week = Week.MONDAY;</span><br><span class="line">        System.out.println(week);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (week)&#123;</span><br><span class="line">            <span class="keyword">case</span> MONDAY:</span><br><span class="line">                System.out.println(<span class="string">"怀念周末，困意很浓"</span>);<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> TUESDAY:</span><br><span class="line">                System.out.println(<span class="string">"进入学习状态"</span>);<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> WEDNESDAY:</span><br><span class="line">                System.out.println(<span class="string">"死撑"</span>);<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> THURSDAY:</span><br><span class="line">                System.out.println(<span class="string">"小放松"</span>);<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> FRIDAY:</span><br><span class="line">                System.out.println(<span class="string">"又信心满满"</span>);<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> SATURDAY:</span><br><span class="line">                System.out.println(<span class="string">"开始盼周末，无心学习"</span>);<span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> SUNDAY:</span><br><span class="line">                System.out.println(<span class="string">"一觉到下午"</span>);<span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>经验之谈：</p>
<p>开发中，当需要定义一组常量时，强烈建议使用枚举类。</p>
</blockquote>
<h3 id="9-4-enum中常用方法"><a href="#9-4-enum中常用方法" class="headerlink" title="9.4 enum中常用方法"></a>9.4 enum中常用方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. String toString(): 默认返回的是常量名（对象名），可以继续手动重写该方法！</span><br><span class="line">    </span><br><span class="line">2. static 枚举类型[] values():返回枚举类型的对象数组。该方法可以很方便地遍历所有的枚举值，是一个静态方法</span><br><span class="line">    </span><br><span class="line">3. static 枚举类型 valueOf(String name)：可以把一个字符串转为对应的枚举类对象。要求字符串必须是枚举类对象的“名字”。如不是，会有运行时异常：IllegalArgumentException。</span><br><span class="line">    </span><br><span class="line">4. String name():得到当前枚举常量的名称。建议优先使用toString()。</span><br><span class="line">    </span><br><span class="line">5. int ordinal():返回当前枚举常量的次序号，默认从0开始</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SeasonTest1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.toString()   ---返回常量名(对象名)</span></span><br><span class="line">        System.out.println(Season1.SPRING);</span><br><span class="line">        System.out.println(Season1.AUTUMN);</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.name()   ---得到当前枚举常量的名称  [建议先用toString()[</span></span><br><span class="line">        System.out.println(Season1.AUTUMN.name());</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//静态方法</span></span><br><span class="line">        <span class="comment">//3.values()  ---返回枚举类型的对象数组，可以方便遍历所有的枚举值</span></span><br><span class="line">        Season1[] values=Season1.values();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">            System.out.println(values[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.valueOf(String name)  ---一个字符串转为对应的枚举类对象  [要求字符串必须是枚举类对象的"名字"]</span></span><br><span class="line">        String objName=<span class="string">"WINTER"</span>;</span><br><span class="line">        Season1 s1=Season1.valueOf(objName);</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5.ordinal()   ---返回当前枚举常量的次序号[从0开始]</span></span><br><span class="line">        System.out.println(Season1.AUTUMN.ordinal());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Season1&#123;</span><br><span class="line">    <span class="comment">//1.开头必须声明多个对象 之间用逗号隔开</span></span><br><span class="line">    SPRING(<span class="string">"春天"</span>, <span class="string">"春暖花开"</span>),</span><br><span class="line">    SUMMER(<span class="string">"夏天"</span>, <span class="string">"夏日炎炎"</span>),</span><br><span class="line">    AUTUMN(<span class="string">"秋天"</span>, <span class="string">"秋高气爽"</span>),</span><br><span class="line">    WINTER(<span class="string">"冬天"</span>, <span class="string">"白雪皑皑"</span>);</span><br><span class="line">    <span class="comment">//1.私有化类的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Season1</span><span class="params">(String seasonName, String seasoonDesc)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.seasonName = seasonName;</span><br><span class="line">        <span class="keyword">this</span>.seasoonDesc = seasoonDesc;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.声明当前类的对象的实例变量   --只让他获取(private)但是不能修改(没有set方法) 【get方法/构造器内赋值】</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String seasonName;   <span class="comment">//季节的名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String seasoonDesc;  <span class="comment">//季节的描述</span></span><br><span class="line">    <span class="comment">//3.提供get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSeasonName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> seasonName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSeasoonDesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> seasoonDesc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">最终输出:</span><br><span class="line">SPRING</span><br><span class="line">AUTUMN</span><br><span class="line">---------</span><br><span class="line">AUTUMN</span><br><span class="line">---------</span><br><span class="line">SPRING</span><br><span class="line">SUMMER</span><br><span class="line">AUTUMN</span><br><span class="line">WINTER</span><br><span class="line">---------</span><br><span class="line">WINTER</span><br><span class="line">---------</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>

<h3 id="9-5-实现接口的枚举类"><a href="#9-5-实现接口的枚举类" class="headerlink" title="9.5 实现接口的枚举类"></a>9.5 实现接口的枚举类</h3><ul>
<li>和普通 Java 类一样，枚举类可以<strong>实现一个/多个接口</strong></li>
<li>若每个枚举值呈现<strong>相同</strong>的行为方式，<strong>统一实现</strong>该方法。</li>
<li>若每个枚举值呈现出不同的行为方式，让每个枚举值<strong>分别实现</strong>该方法</li>
</ul>
<p>语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、枚举类可以像普通的类一样，实现接口，并且可以多个，但要求必须实现里面所有的抽象方法！</span></span><br><span class="line"><span class="keyword">enum</span> A implements 接口<span class="number">1</span>，接口<span class="number">2</span>&#123;</span><br><span class="line">	<span class="comment">//抽象方法的实现</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2、如果枚举类的常量可以继续重写抽象方法!</span></span><br><span class="line"><span class="keyword">enum</span> A implements 接口<span class="number">1</span>，接口<span class="number">2</span>&#123;</span><br><span class="line">    常量名<span class="number">1</span>(参数)&#123;</span><br><span class="line">        <span class="comment">//抽象方法的实现或重写</span></span><br><span class="line">    &#125;,</span><br><span class="line">    常量名<span class="number">2</span>(参数)&#123;</span><br><span class="line">        <span class="comment">//抽象方法的实现或重写</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Info</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>;  <span class="comment">//抽象方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Season1 implements Info&#123;</span><br><span class="line">    <span class="comment">//1.开头必须声明多个对象 之间用逗号隔开</span></span><br><span class="line">    SPRING(<span class="string">"春天"</span>, <span class="string">"春暖花开"</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"春天在哪里？"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    SUMMER(<span class="string">"夏天"</span>, <span class="string">"夏日炎炎"</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"春天在哪里？"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    AUTUMN(<span class="string">"秋天"</span>, <span class="string">"秋高气爽"</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"春天在哪里？"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    WINTER(<span class="string">"冬天"</span>, <span class="string">"白雪皑皑"</span>)&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"春天在哪里？"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.私有化类的构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Season1</span><span class="params">(String seasonName, String seasoonDesc)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.seasonName = seasonName;</span><br><span class="line">        <span class="keyword">this</span>.seasoonDesc = seasoonDesc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.声明当前类的对象的实例变量   --只让他获取(private)但是不能修改(没有set方法) 【get方法/构造器内赋值】</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String seasonName;   <span class="comment">//季节的名称</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String seasoonDesc;  <span class="comment">//季节的描述</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.提供get方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSeasonName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> seasonName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getSeasoonDesc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> seasoonDesc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"统一的重写"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="10-注解-Annotation"><a href="#10-注解-Annotation" class="headerlink" title="10. 注解(Annotation)"></a>10. 注解(Annotation)</h2><h3 id="10-1-注解概述"><a href="#10-1-注解概述" class="headerlink" title="10.1 注解概述"></a>10.1 注解概述</h3><h4 id="10-1-1-什么是注解"><a href="#10-1-1-什么是注解" class="headerlink" title="10.1.1 什么是注解"></a>10.1.1 什么是注解</h4><p>注解（Annotation）是从<code>JDK5.0</code>开始引入，以“<code>@注解名</code>”在代码中存在。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Deprecated</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(value=”unchecked”)</span><br></pre></td></tr></table></figure>

<p>Annotation 可以像修饰符一样被使用，<br>①修饰包、类、构造器、方法、成员变量、参数、局部变量的声明、<br>②参数值。这些信息被保存在注解的 “name=value” 中。</p>
<p>注解可以在类编译、运行时进行加载，体现不同的功能。</p>
<h4 id="10-1-2-注解与注释"><a href="#10-1-2-注解与注释" class="headerlink" title="10.1.2 注解与注释"></a>10.1.2 注解与注释</h4><p>注解也可以看做是一种注释，通过使用 Annotation，程序员可以在不改变原有逻辑的情况下，在源文件中嵌入一些补充信息。但是，注解，不同于单行注释和多行注释。</p>
<ul>
<li>对于单行注释和多行注释是给程序员看的。</li>
<li>而注解是可以被编译器或其他程序读取的。程序还可以根据注解的不同，做出相应的处理。</li>
</ul>
<h4 id="10-1-3-注解的重要性"><a href="#10-1-3-注解的重要性" class="headerlink" title="10.1.3 注解的重要性"></a>10.1.3 注解的重要性</h4><p>在JavaSE中，注解的使用目的比较简单，例如标记过时的功能，忽略警告等。在<code>JavaEE/Android中注解占据了更重要的角色</code>，例如用来配置应用程序的任何切面，代替JavaEE旧版中所遗留的<code>繁冗代码</code>和<code>XML配置</code>等。</p>
<p>未来的开发模式都是基于注解的，JPA是基于注解的，Spring2.5以上都是基于注解的，Hibernate3.x以后也是基于注解的，Struts2有一部分也是基于注解的了。<code>注解是一种趋势</code>，一定程度上可以说：<code>框架 = 注解 + 反射 + 设计模式</code>。</p>
<h3 id="10-2-常见的Annotation作用"><a href="#10-2-常见的Annotation作用" class="headerlink" title="10.2 常见的Annotation作用"></a>10.2 常见的Annotation作用</h3><p><strong>示例1：生成文档相关的注解</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@author</span> 标明开发该类模块的作者，多个作者之间使用,分割</span><br><span class="line"><span class="meta">@version</span> 标明该类模块的版本</span><br><span class="line"><span class="meta">@see</span> 参考转向，也就是相关主题</span><br><span class="line"><span class="meta">@since</span> 从哪个版本开始增加的</span><br><span class="line"><span class="meta">@param</span> 对方法中某参数的说明，如果没有参数就不能写</span><br><span class="line"><span class="meta">@return</span> 对方法返回值的说明，如果方法的返回值类型是<span class="keyword">void</span>就不能写</span><br><span class="line"><span class="meta">@exception</span> 对方法可能抛出的异常进行说明 ，如果方法没有用<span class="keyword">throws</span>显式抛出的异常就不能写</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.annotation.javadoc;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 尚硅谷-宋红康</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> Math.java</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavadocTest</span> </span>&#123;</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 程序的主方法，程序的入口</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> args String[] 命令行参数</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 求圆面积的方法</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> radius double 半径值</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span> double 圆的面积</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getArea</span><span class="params">(<span class="keyword">double</span> radius)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> Math.PI * radius * radius;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>示例2：在编译时进行格式检查(JDK内置的三个基本注解)</strong></p>
<p><code>@Override</code>: 限定重写父类方法，该注解只能用于方法</p>
<p><code>@Deprecated</code>: 用于表示所修饰的元素(类，方法等)已过时。通常是因为所修饰的结构危险或存在更好的选择</p>
<p><code>@SuppressWarnings</code>: 抑制编译器警告</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.annotation.javadoc;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationTest</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="meta">@SuppressWarnings</span>(<span class="string">"unused"</span>)</span><br><span class="line">		<span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Deprecated</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"过时的方法"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"重写的toString方法()"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>示例3：跟踪代码依赖性，实现替代配置文件功能</strong></p>
<ul>
<li>Servlet3.0提供了注解(annotation)，使得不再需要在web.xml文件中进行Servlet的部署。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/login"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123; &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">	&#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.servlet.LoginServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LoginServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/login<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Spring框架中关于“事务”的管理</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span>(propagation=Propagation.REQUIRES_NEW,isolation=Isolation.READ_COMMITTED,readOnly=<span class="keyword">false</span>,timeout=<span class="number">3</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buyBook</span><span class="params">(String username, String isbn)</span> </span>&#123;</span><br><span class="line">	<span class="comment">//1.查询书的单价</span></span><br><span class="line">    <span class="keyword">int</span> price = bookShopDao.findBookPriceByIsbn(isbn);</span><br><span class="line">    <span class="comment">//2. 更新库存</span></span><br><span class="line">    bookShopDao.updateBookStock(isbn);	</span><br><span class="line">    <span class="comment">//3. 更新用户的余额</span></span><br><span class="line">    bookShopDao.updateUserAccount(username, price);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置事务属性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">transaction-manager</span>=<span class="string">"dataSourceTransactionManager"</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!-- 配置每个方法使用的事务属性 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"buyBook"</span> <span class="attr">propagation</span>=<span class="string">"REQUIRES_NEW"</span> </span></span><br><span class="line"><span class="tag">	 <span class="attr">isolation</span>=<span class="string">"READ_COMMITTED"</span>  <span class="attr">read-only</span>=<span class="string">"false"</span>  <span class="attr">timeout</span>=<span class="string">"3"</span> /&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="10-3-三个最基本的注解"><a href="#10-3-三个最基本的注解" class="headerlink" title="10.3 三个最基本的注解"></a>10.3 三个最基本的注解</h3><h4 id="10-3-1-Override"><a href="#10-3-1-Override" class="headerlink" title="10.3.1 @Override"></a>10.3.1 @Override</h4><ul>
<li>用于检测被标记的方法为有效的重写方法，如果不是，则报编译错误！</li>
</ul>
<ul>
<li>只能标记在方法上。</li>
</ul>
<ul>
<li>它会被编译器程序读取。</li>
</ul>
<h4 id="10-3-2-Deprecated"><a href="#10-3-2-Deprecated" class="headerlink" title="10.3.2 @Deprecated"></a>10.3.2 @Deprecated</h4><ul>
<li>用于表示被标记的数据已经过时，不推荐使用。</li>
</ul>
<ul>
<li>可以用于修饰 属性、方法、构造、类、包、局部变量、参数。</li>
</ul>
<ul>
<li>它会被编译器程序读取。</li>
</ul>
<h4 id="10-3-3-SuppressWarnings"><a href="#10-3-3-SuppressWarnings" class="headerlink" title="10.3.3 @SuppressWarnings"></a>10.3.3 @SuppressWarnings</h4><ul>
<li>抑制编译警告。当我们不希望看到警告信息的时候，可以使用 SuppressWarnings 注解来抑制警告信息</li>
</ul>
<ul>
<li>可以用于修饰类、属性、方法、构造、局部变量、参数</li>
</ul>
<ul>
<li><p>它会被编译器程序读取。</p>
</li>
<li><p>可以指定的警告类型有（了解）</p>
<ul>
<li>all，抑制所有警告</li>
<li>unchecked，抑制与未检查的作业相关的警告</li>
<li>unused，抑制与未用的程式码及停用的程式码相关的警告</li>
<li>deprecation，抑制与淘汰的相关警告</li>
<li>nls，抑制与非 nls 字串文字相关的警告</li>
<li>null，抑制与空值分析相关的警告</li>
<li>rawtypes，抑制与使用 raw 类型相关的警告</li>
<li>static-access，抑制与静态存取不正确相关的警告</li>
<li>static-method，抑制与可能宣告为 static 的方法相关的警告</li>
<li>super，抑制与置换方法相关但不含 super 呼叫的警告</li>
<li>…</li>
</ul>
</li>
</ul>
<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAnnotation</span> </span>&#123;</span><br><span class="line">    <span class="meta">@SuppressWarnings</span>(<span class="string">"all"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">        ArrayList list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">        list.add(<span class="string">"hello"</span>);</span><br><span class="line">        list.add(<span class="number">123</span>);</span><br><span class="line">        list.add(<span class="string">"world"</span>);</span><br><span class="line"></span><br><span class="line">        Father f = <span class="keyword">new</span> Son();</span><br><span class="line">        f.show();</span><br><span class="line">        f.methodOl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Father</span></span>&#123;</span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Father.show"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">methodOl</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Father Method"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Father</span></span>&#123;</span><br><span class="line"><span class="comment">/*	@Override</span></span><br><span class="line"><span class="comment">	void method01() &#123;</span></span><br><span class="line"><span class="comment">		System.out.println("Son Method");</span></span><br><span class="line"><span class="comment">	&#125;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-4-元注解"><a href="#10-4-元注解" class="headerlink" title="10.4 元注解"></a>10.4 元注解</h3><p><strong>元注解</strong>:对现有的注解进行解释说明的注解。</p>
<p>JDK1.5在java.lang.annotation包定义了4个标准的meta-annotation类型，它们被用来提供对其它 annotation类型作说明。</p>
<p>（1）<strong>@Target：</strong>用于描述注解的使用范围</p>
<ul>
<li>可以通过枚举类型ElementType的10个常量对象来指定</li>
<li>TYPE，METHOD，CONSTRUCTOR，PACKAGE…..</li>
</ul>
<p>（2）<strong>@Retention：</strong>用于描述注解的生命周期</p>
<ul>
<li>可以通过枚举类型RetentionPolicy的3个常量对象来指定</li>
<li>SOURCE（源代码）、CLASS（字节码）、RUNTIME（运行时）</li>
<li><code>唯有RUNTIME阶段才能被反射读取到</code>。</li>
</ul>
<p>（3）<strong>@Documented</strong>：表明这个注解应该被 javadoc工具记录。</p>
<p>（4）<strong>@Inherited：</strong>允许子类继承父类中的注解</p>
<p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.lang;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.SOURCE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Override &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.lang;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target</span>(&#123;TYPE, FIELD, METHOD, PARAMETER, CONSTRUCTOR, LOCAL_VARIABLE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.SOURCE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> SuppressWarnings &#123;</span><br><span class="line">    String[] value();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.lang;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="meta">@Target</span>(value=&#123;CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Deprecated &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>拓展：元数据</p>
<p>String name = “Tom”;</p>
</blockquote>
<h3 id="10-5-自定义注解的使用"><a href="#10-5-自定义注解的使用" class="headerlink" title="10.5 自定义注解的使用"></a>10.5 自定义注解的使用</h3><p>一个完整的注解应该包含三个部分：<br>（1）声明<br>（2）使用<br>（3）读取</p>
<h4 id="10-5-1-声明自定义注解"><a href="#10-5-1-声明自定义注解" class="headerlink" title="10.5.1 声明自定义注解"></a>10.5.1 声明自定义注解</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">【元注解】</span><br><span class="line">【修饰符】 <span class="meta">@interface</span> 注解名&#123;</span><br><span class="line">    【成员列表】</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>自定义注解可以通过四个元注解@Retention,@Target，@Inherited,@Documented，分别说明它的声明周期，使用位置，是否被继承，是否被生成到API文档中。</li>
<li>Annotation 的成员在 Annotation 定义中以<strong>无参数有返回值的抽象方法</strong>的形式来声明，我们又称为<strong>配置参数</strong>。返回值类型只能是八种基本数据类型、String类型、Class类型、enum类型、Annotation类型、以上所有类型的数组。</li>
<li>可以使用 default 关键字为抽象方法指定默认返回值</li>
<li>如果定义的注解含有抽象方法，那么<strong>使用时必须指定返回值</strong>，除非它有默认值。格式是“方法名 = 返回值”，如果只有一个抽象方法需要赋值，且方法名为value，可以省略“value=”，所以如果注解只有一个抽象方法成员，建议使用方法名value。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Target</span>(ElementType.TYPE)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Table &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Target</span>(ElementType.FIELD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Column &#123;</span><br><span class="line">    <span class="function">String <span class="title">columnName</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">String <span class="title">columnType</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-5-2-使用自定义注解"><a href="#10-5-2-使用自定义注解" class="headerlink" title="10.5.2 使用自定义注解"></a>10.5.2 使用自定义注解</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.annotation;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Table</span>(<span class="string">"t_stu"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Column</span>(columnName = <span class="string">"sid"</span>,columnType = <span class="string">"int"</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="meta">@Column</span>(columnName = <span class="string">"sname"</span>,columnType = <span class="string">"varchar(20)"</span>)</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="10-5-3-读取和处理自定义注解"><a href="#10-5-3-读取和处理自定义注解" class="headerlink" title="10.5.3 读取和处理自定义注解"></a>10.5.3 读取和处理自定义注解</h4><p>自定义注解必须配上注解的信息处理流程才有意义。</p>
<p>我们自己定义的注解，只能使用反射的代码读取。所以自定义注解的声明周期必须是RetentionPolicy.RUNTIME。</p>
<p>具体的使用见<code>《尚硅谷_宋红康_第17章_反射机制.md》</code>。</p>
<h3 id="10-6-JUnit单元测试"><a href="#10-6-JUnit单元测试" class="headerlink" title="10.6 JUnit单元测试"></a>10.6 JUnit单元测试</h3><h4 id="10-6-1-测试分类"><a href="#10-6-1-测试分类" class="headerlink" title="10.6.1 测试分类"></a>10.6.1 测试分类</h4><p><strong>黑盒测试：</strong>不需要写代码，给输入值，看程序是否能够输出期望的值。 </p>
<p><strong>白盒测试：</strong>需要写代码的。关注程序具体的执行流程。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203694.png" alt="image-20220511181800694" style="zoom: 50%;">

<p><img src=".images/image-20220524102038600.png" alt="image-20220524102038600"></p>
<h4 id="10-6-2-JUnit单元测试介绍"><a href="#10-6-2-JUnit单元测试介绍" class="headerlink" title="10.6.2 JUnit单元测试介绍"></a>10.6.2 JUnit单元测试介绍</h4><p>JUnit 是由 Erich Gamma 和 Kent Beck 编写的一个测试框架（regression testing framework），供Java开发人员编写单元测试之用。</p>
<p><strong>JUnit测试是程序员测试，即所谓白盒测试，因为程序员知道被测试的软件如何（How）完成功能和完成什么样（What）的功能。</strong></p>
<p>要使用JUnit，必须在项目的编译路径中<code>引入JUnit的库</code>，即相关的.class文件组成的jar包。jar就是一个压缩包，压缩包都是开发好的第三方（Oracle公司第一方，我们自己第二方，其他都是第三方）工具类，都是以class文件形式存在的。</p>
<h4 id="10-6-3-引入本地JUnit-jar"><a href="#10-6-3-引入本地JUnit-jar" class="headerlink" title="10.6.3 引入本地JUnit.jar"></a>10.6.3 引入本地JUnit.jar</h4><p>第1步：在项目中File-Project Structure中操作：添加Libraries库</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203431.png" alt="image-20211228180938922" style="zoom:80%;">

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203997.png" alt="image-20221002195547325"></p>
<p>其中，junit-libs包内容如下：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203271.png" alt="image-20220813005206452"></p>
<p>第2步：选择要在哪些module中应用JUnit库</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204752.png" alt="image-20220813005511062"></p>
<p>第3步：检查是否应用成功</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212203435.png" alt="image-20220813005729233"></p>
<p><strong>注意Scope：选择Compile，否则编译时，无法使用JUnit。</strong></p>
<p>第4步：下次如果有新的模块要使用该libs库，这样操作即可</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204191.png" alt="image-20220813005944022"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204980.png" alt="image-20220813010018152"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204579.png" alt="image-20220813010055217"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204484.png" alt="image-20220813010124381"></p>
<h4 id="10-6-4-编写和运行-Test单元测试方法"><a href="#10-6-4-编写和运行-Test单元测试方法" class="headerlink" title="10.6.4 编写和运行@Test单元测试方法"></a>10.6.4 编写和运行@Test单元测试方法</h4><p>JUnit4版本，要求@Test标记的方法必须满足如下要求：</p>
<ul>
<li>所在的类必须是public的，非抽象的，包含唯一的无参构造器。</li>
<li>@Test标记的方法本身必须是public，非抽象的，非静态的，void无返回值，()无参数的。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJUnit</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"TestJUnit.test01"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"TestJUnit.test02"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"TestJUnit.test03"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204748.png" alt="image-20220106152412245"></p>
<h4 id="10-6-5-设置执行JUnit用例时支持控制台输入"><a href="#10-6-5-设置执行JUnit用例时支持控制台输入" class="headerlink" title="10.6.5 设置执行JUnit用例时支持控制台输入"></a>10.6.5 设置执行JUnit用例时支持控制台输入</h4><p><strong>1. 设置数据：</strong></p>
<p>默认情况下，在单元测试方法中使用Scanner时，并不能实现控制台数据的输入。需要做如下设置：</p>
<p>在<code>idea64.exe.vmoptions配置文件</code>中加入下面一行设置，重启idea后生效。</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">-Deditable.java.test.console</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure>

<p><strong>2. 配置文件位置：</strong></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204236.png" alt="image-20220813011625546"></p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204939.png" alt="image-20220813011642180"></p>
<p>添加完成之后，重启IDEA即可。</p>
<p><strong>3. 如果上述位置设置不成功，需要继续修改如下位置</strong></p>
<p>修改位置1：IDEA安装目录的bin目录（例如：<code>D:\develop_tools\IDEA\IntelliJ IDEA 2022.1.2\bin</code>）下的idea64.exe.vmoptions文件。 </p>
<p>修改位置2：C盘的用户目录<code>C:\Users\用户名\AppData\Roaming\JetBrains\IntelliJIdea2022.1</code> 下的idea64.exe.vmoptions`件。</p>
<h4 id="10-6-6-定义test测试方法模板"><a href="#10-6-6-定义test测试方法模板" class="headerlink" title="10.6.6 定义test测试方法模板"></a>10.6.6 定义test测试方法模板</h4><p>选中自定义的模板组，点击”+”（1.Live Template）来定义模板。</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204667.png" alt="image-20211229100040505"></p>
<h2 id="11-包装类"><a href="#11-包装类" class="headerlink" title="11. 包装类"></a>11. 包装类</h2><h3 id="11-1-为什么需要包装类"><a href="#11-1-为什么需要包装类" class="headerlink" title="11.1 为什么需要包装类"></a>11.1 为什么需要包装类</h3><p>Java提供了两个类型系统，<code>基本数据类型</code>与<code>引用数据类型</code>。使用基本数据类型在于效率，然而当要使用只针对对象设计的API或新特性（例如泛型），怎么办呢？例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//情况1：方法形参</span></span><br><span class="line">Object类的equals(Object obj)</span><br><span class="line"></span><br><span class="line"><span class="comment">//情况2：方法形参</span></span><br><span class="line">ArrayList类的add(Object obj)</span><br><span class="line"><span class="comment">//没有如下的方法：</span></span><br><span class="line">add(<span class="keyword">int</span> number)</span><br><span class="line">add(<span class="keyword">double</span> d)</span><br><span class="line">add(<span class="keyword">boolean</span> b)</span><br><span class="line"></span><br><span class="line"><span class="comment">//情况3：泛型</span></span><br><span class="line">Set&lt;T&gt;</span><br><span class="line">List&lt;T&gt;</span><br><span class="line">Cllection&lt;T&gt;</span><br><span class="line">Map&lt;K,V&gt;</span><br></pre></td></tr></table></figure>

<h3 id="11-2-有哪些包装类"><a href="#11-2-有哪些包装类" class="headerlink" title="11.2 有哪些包装类"></a>11.2 有哪些包装类</h3><p>Java针对八种基本数据类型定义了相应的引用类型：包装类（封装类）。<strong>有了类的特点</strong>，就<strong>可以调用类中的方法</strong>，Java才是真正的面向对象。</p>
<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204626.png" alt="image-20220329001912486" style="zoom:80%;">

<p>封装以后的，内存结构对比：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> num = <span class="number">520</span>;</span><br><span class="line">	Integer obj = <span class="keyword">new</span> Integer(<span class="number">520</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204365.png" alt="image-20220514163725830" style="zoom:80%;">

<h3 id="11-3-自定义包装类"><a href="#11-3-自定义包装类" class="headerlink" title="11.3 自定义包装类"></a>11.3 自定义包装类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyInteger</span> </span>&#123;</span><br><span class="line">    <span class="comment">//属性</span></span><br><span class="line">    <span class="keyword">int</span> value;</span><br><span class="line">	<span class="comment">//无参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyInteger</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//有参构造器</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyInteger</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//重写toString方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(value);  <span class="comment">//返回valueOf方法的值</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-4-包装类与基本数据类型间的转换"><a href="#11-4-包装类与基本数据类型间的转换" class="headerlink" title="11.4 包装类与基本数据类型间的转换"></a>11.4 包装类与基本数据类型间的转换</h3><h4 id="11-4-1-装箱"><a href="#11-4-1-装箱" class="headerlink" title="11.4.1 装箱"></a>11.4.1 装箱</h4><p> <strong>装箱：把基本数据类型转为包装类对象</strong></p>
<blockquote>
<p>转为包装类的对象，是为了使用专门为对象设计的API和特性</p>
</blockquote>
<p>基本数值—-&gt;包装对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Integer obj1 = <span class="keyword">new</span> Integer(<span class="number">4</span>);<span class="comment">//使用构造函数函数</span></span><br><span class="line">Float f = <span class="keyword">new</span> Float(“<span class="number">4.56</span>”);</span><br><span class="line">Long l = <span class="keyword">new</span> Long(“asdf”);  <span class="comment">//NumberFormatException</span></span><br><span class="line"></span><br><span class="line">Integer obj2 = Integer.valueOf(<span class="number">4</span>);<span class="comment">//使用包装类中的valueOf方法</span></span><br></pre></td></tr></table></figure>

<h4 id="11-4-2-拆箱"><a href="#11-4-2-拆箱" class="headerlink" title="11.4.2 拆箱"></a>11.4.2 拆箱</h4><p><strong>拆箱：把包装类对象拆为基本数据类型</strong></p>
<blockquote>
<p>转为基本数据类型，一般是因为需要运算，Java中的大多数运算符是为基本数据类型设计的。比较、算术等</p>
</blockquote>
<p>包装对象—-&gt;基本数值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer obj = <span class="keyword">new</span> Integer(<span class="number">4</span>);</span><br><span class="line"><span class="keyword">int</span> num1 = obj.intValue();</span><br></pre></td></tr></table></figure>

<p><strong>自动装箱与拆箱：</strong></p>
<p>由于我们经常要做基本类型与包装类之间的转换，从<code>JDK5.0</code>开始，基本类型与包装类的装箱、拆箱动作可以自动完成。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">4</span>;<span class="comment">//自动装箱。相当于Integer i = Integer.valueOf(4);</span></span><br><span class="line">i = i + <span class="number">5</span>;<span class="comment">//等号右边：将i对象转成基本数值(自动拆箱) i.intValue() + 5;</span></span><br><span class="line"><span class="comment">//加法运算完成后，再次装箱，把基本数值转成对象。</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：只能与自己对应的类型之间才能实现自动装箱与拆箱。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">1</span>;</span><br><span class="line">Double d = <span class="number">1</span>;<span class="comment">//错误的，1是int类型</span></span><br></pre></td></tr></table></figure>

<h3 id="11-5-基本数据类型、包装类与字符串间的转换"><a href="#11-5-基本数据类型、包装类与字符串间的转换" class="headerlink" title="11.5 基本数据类型、包装类与字符串间的转换"></a>11.5 基本数据类型、包装类与字符串间的转换</h3><p><strong>（1）基本数据类型转为字符串</strong></p>
<p><strong>方式1：</strong>调用字符串重载的valueOf()方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="comment">//String str = a;//错误的</span></span><br><span class="line"></span><br><span class="line">String str = String.valueOf(a);</span><br></pre></td></tr></table></figure>

<p><strong>方式2：</strong>更直接的方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">String str = a + <span class="string">""</span>;</span><br></pre></td></tr></table></figure>

<p><strong>（2）字符串转为基本数据类型</strong></p>
<p><strong>方式1：</strong>除了Character类之外，其他所有包装类都具有parseXxx静态方法可以将字符串参数转换为对应的基本类型，例如：</p>
<ul>
<li><code>public static int parseInt(String s)</code>：将字符串参数转换为对应的int基本类型。</li>
<li><code>public static long parseLong(String s)</code>：将字符串参数转换为对应的long基本类型。</li>
<li><code>public static double parseDouble(String s)</code>：将字符串参数转换为对应的double基本类型。</li>
</ul>
<p><strong>方式2：</strong>字符串转为包装类，然后可以自动拆箱为基本数据类型</p>
<ul>
<li><code>public static Integer valueOf(String s)</code>：将字符串参数转换为对应的Integer包装类，然后可以自动拆箱为int基本类型</li>
<li><code>public static Long valueOf(String s)</code>：将字符串参数转换为对应的Long包装类，然后可以自动拆箱为long基本类型</li>
<li><code>public static Double valueOf(String s)</code>：将字符串参数转换为对应的Double包装类，然后可以自动拆箱为double基本类型</li>
</ul>
<p>注意:如果字符串参数的内容无法正确转换为对应的基本类型，则会抛出<code>java.lang.NumberFormatException</code>异常。</p>
<p><strong>方式3：</strong>通过包装类的构造器实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a = Integer.parseInt(<span class="string">"整数的字符串"</span>);</span><br><span class="line"><span class="keyword">double</span> d = Double.parseDouble(<span class="string">"小数的字符串"</span>);</span><br><span class="line"><span class="keyword">boolean</span> b = Boolean.parseBoolean(<span class="string">"true或false"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a = Integer.valueOf(<span class="string">"整数的字符串"</span>);</span><br><span class="line"><span class="keyword">double</span> d = Double.valueOf(<span class="string">"小数的字符串"</span>);</span><br><span class="line"><span class="keyword">boolean</span> b = Boolean.valueOf(<span class="string">"true或false"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> i = <span class="keyword">new</span> Integer(“<span class="number">12</span>”);</span><br></pre></td></tr></table></figure>

<p>其他方式小结：</p>
<p><img src="https://raw.githubusercontent.com/Larkkkkkkk/hexo-picture/main/.images/202310212204066.png" alt="image-20220813012801907"></p>
<h3 id="11-6-包装类的其它API"><a href="#11-6-包装类的其它API" class="headerlink" title="11.6 包装类的其它API"></a>11.6 包装类的其它API</h3><h4 id="11-6-1-数据类型的最大最小值"><a href="#11-6-1-数据类型的最大最小值" class="headerlink" title="11.6.1 数据类型的最大最小值"></a>11.6.1 数据类型的最大最小值</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Integer.MAX_VALUE和Integer.MIN_VALUE</span><br><span class="line">    </span><br><span class="line">Long.MAX_VALUE和Long.MIN_VALUE</span><br><span class="line">    </span><br><span class="line">Double.MAX_VALUE和Double.MIN_VALUE</span><br></pre></td></tr></table></figure>

<h4 id="11-6-2-字符转大小写"><a href="#11-6-2-字符转大小写" class="headerlink" title="11.6.2 字符转大小写"></a>11.6.2 字符转大小写</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Character.toUpperCase(<span class="string">'x'</span>);</span><br><span class="line"></span><br><span class="line">Character.toLowerCase(<span class="string">'X'</span>);</span><br></pre></td></tr></table></figure>

<h4 id="11-6-3-整数转进制"><a href="#11-6-3-整数转进制" class="headerlink" title="11.6.3 整数转进制"></a>11.6.3 整数转进制</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Integer.toBinaryString(<span class="keyword">int</span> i) </span><br><span class="line">    </span><br><span class="line">Integer.toHexString(<span class="keyword">int</span> i)</span><br><span class="line">    </span><br><span class="line">Integer.toOctalString(<span class="keyword">int</span> i)</span><br></pre></td></tr></table></figure>

<h4 id="11-6-4-比较的方法"><a href="#11-6-4-比较的方法" class="headerlink" title="11.6.4 比较的方法"></a>11.6.4 比较的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Double.compare(<span class="keyword">double</span> d1, <span class="keyword">double</span> d2)</span><br><span class="line">    </span><br><span class="line">Integer.compare(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span><br></pre></td></tr></table></figure>

<h3 id="11-7-包装类对象的特点"><a href="#11-7-包装类对象的特点" class="headerlink" title="11.7 包装类对象的特点"></a>11.7 包装类对象的特点</h3><h4 id="11-7-1-包装类缓存对象"><a href="#11-7-1-包装类缓存对象" class="headerlink" title="11.7.1 包装类缓存对象"></a>11.7.1 包装类缓存对象</h4><table>
<thead>
<tr>
<th>包装类</th>
<th>缓存对象</th>
</tr>
</thead>
<tbody><tr>
<td>Byte</td>
<td>-128~127</td>
</tr>
<tr>
<td>Short</td>
<td>-128~127</td>
</tr>
<tr>
<td>Integer</td>
<td>-128~127</td>
</tr>
<tr>
<td>Long</td>
<td>-128~127</td>
</tr>
<tr>
<td>Float</td>
<td>没有</td>
</tr>
<tr>
<td>Double</td>
<td>没有</td>
</tr>
<tr>
<td>Character</td>
<td>0~127</td>
</tr>
<tr>
<td>Boolean</td>
<td>true和false</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Integer a = <span class="number">1</span>;</span><br><span class="line">Integer b = <span class="number">1</span>;</span><br><span class="line">System.out.println(a == b);<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">Integer i = <span class="number">128</span>;</span><br><span class="line">Integer j = <span class="number">128</span>;</span><br><span class="line">System.out.println(i == j);<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">Integer m = <span class="keyword">new</span> Integer(<span class="number">1</span>);<span class="comment">//新new的在堆中</span></span><br><span class="line">Integer n = <span class="number">1</span>;<span class="comment">//这个用的是缓冲的常量对象，在方法区</span></span><br><span class="line">System.out.println(m == n);<span class="comment">//false</span></span><br><span class="line"></span><br><span class="line">Integer x = <span class="keyword">new</span> Integer(<span class="number">1</span>);<span class="comment">//新new的在堆中</span></span><br><span class="line">Integer y = <span class="keyword">new</span> Integer(<span class="number">1</span>);<span class="comment">//另一个新new的在堆中</span></span><br><span class="line">System.out.println(x == y);<span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Double d1 = <span class="number">1.0</span>;</span><br><span class="line">Double d2 = <span class="number">1.0</span>;</span><br><span class="line">System.out.println(d1==d2);<span class="comment">//false 比较地址，没有缓存对象，每一个都是新new的</span></span><br></pre></td></tr></table></figure>

<h4 id="11-7-2-类型转换问题"><a href="#11-7-2-类型转换问题" class="headerlink" title="11.7.2 类型转换问题"></a>11.7.2 类型转换问题</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">1000</span>;  <span class="comment">//先自动拆箱为int  然后自动类型转换为double</span></span><br><span class="line"><span class="keyword">double</span> j = <span class="number">1000</span>;</span><br><span class="line">System.out.println(i==j);<span class="comment">//true  会先将i自动拆箱为int，然后根据基本数据类型“自动类型转换”规则，转为double比较</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">1000</span>;  <span class="comment">//先自动拆箱为int</span></span><br><span class="line"><span class="keyword">int</span> j = <span class="number">1000</span>;</span><br><span class="line">System.out.println(i==j);<span class="comment">//true 会自动拆箱，按照基本数据类型进行比较</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">1</span>;  <span class="comment">//先自动拆箱为int</span></span><br><span class="line">Double d = <span class="number">1.0</span> <span class="comment">//没写;</span></span><br><span class="line">System.out.println(i==d);<span class="comment">//编译报错</span></span><br></pre></td></tr></table></figure>

<h4 id="11-7-3-包装类对象不可变"><a href="#11-7-3-包装类对象不可变" class="headerlink" title="11.7.3 包装类对象不可变"></a>11.7.3 包装类对象不可变</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestExam</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">		Integer j = <span class="keyword">new</span> Integer(<span class="number">2</span>);</span><br><span class="line">		Circle c = <span class="keyword">new</span> Circle();</span><br><span class="line">		change(i,j,c);</span><br><span class="line">		System.out.println(<span class="string">"i = "</span> + i);<span class="comment">//1</span></span><br><span class="line">		System.out.println(<span class="string">"j = "</span> + j);<span class="comment">//2</span></span><br><span class="line">		System.out.println(<span class="string">"c.radius = "</span> + c.radius);<span class="comment">//10.0</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	 * 方法的参数传递机制：</span></span><br><span class="line"><span class="comment">	 * （1）基本数据类型：形参的修改完全不影响实参</span></span><br><span class="line"><span class="comment">	 * （2）引用数据类型：通过形参修改对象的属性值，会影响实参的属性值</span></span><br><span class="line"><span class="comment">	 * 这类Integer等包装类对象是“不可变”对象，即一旦修改，就是新对象，和实参就无关了</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> a ,Integer b,Circle c )</span></span>&#123;</span><br><span class="line">		a += <span class="number">10</span>;</span><br><span class="line"><span class="comment">//		b += 10;//等价于  b = new Integer(b+10);</span></span><br><span class="line">		c.radius += <span class="number">10</span>;</span><br><span class="line">		<span class="comment">/*c = new Circle();</span></span><br><span class="line"><span class="comment">		c.radius+=10;*/</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> radius;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-8-练习"><a href="#11-8-练习" class="headerlink" title="11.8 练习"></a>11.8 练习</h3><p>笔试题：如下两个题目输出结果相同吗？各是什么。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object o1 = <span class="keyword">true</span> ? <span class="keyword">new</span> Integer(<span class="number">1</span>) : <span class="keyword">new</span> Double(<span class="number">2.0</span>);  <span class="comment">//在创建的时候要进行统一编译 同时自动类型转换到1.0和2.0</span></span><br><span class="line">System.out.println(o1);<span class="comment">//1.0  相当于创建两个包装类对象</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Object o2;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">true</span>)</span><br><span class="line">    o2 = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    o2 = <span class="keyword">new</span> Double(<span class="number">2.0</span>);</span><br><span class="line">System.out.println(o2); <span class="comment">//输出1</span></span><br></pre></td></tr></table></figure>

<p>面试题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">Integer j = <span class="keyword">new</span> Integer(<span class="number">1</span>);</span><br><span class="line">System.out.println(i == j);  <span class="comment">//输出false  </span></span><br><span class="line"></span><br><span class="line">Integer m = <span class="number">1</span>;</span><br><span class="line">Integer n = <span class="number">1</span>;</span><br><span class="line">System.out.println(m == n);  <span class="comment">//输出true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Integer内部定义了一个IntegerCache结构，IntegerCache中定义Integer[],保存-128-127范围内的整数。</span></span><br><span class="line"><span class="comment">// 如果我们使用自动装箱的方式【Integer i=xxx;  xxx属于(-128,127]】,就可以直接使用数组中的元素。</span></span><br><span class="line">Integer x = <span class="number">128</span>;  <span class="comment">//128相当于重新new了一个</span></span><br><span class="line">Integer y = <span class="number">128</span>;  <span class="comment">//128相当于重新new了一个</span></span><br><span class="line">System.out.println(x == y);<span class="comment">//输出false</span></span><br></pre></td></tr></table></figure>

<p>练习：</p>
<p>利用Vector代替数组处理：从键盘读入学生成绩（以负数代表输入结束），找出最高分，并输出学生成绩等级。</p>
<ul>
<li><p>提示：数组一旦创建，长度就固定不变，所以在创建数组前就需要知道它的长度。而向量类java.util.Vector可以根据需要动态伸缩。</p>
</li>
<li><p>创建Vector对象：Vector v=new Vector();</p>
</li>
<li><p>给向量添加元素：v.addElement(Object obj);  //obj必须是对象</p>
</li>
<li><p>取出向量中的元素：Object obj=v.elementAt(0);</p>
<ul>
<li>注意第一个元素的下标是0，返回值是Object类型的。</li>
</ul>
</li>
<li><p>计算向量的长度：v.size();</p>
</li>
<li><p>若与最高分相差10分内：A等；20分内：B等；30分内：C等；其它：D等</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">import java.util.Scanner;</span><br><span class="line">import java.util.Vector;</span><br><span class="line">public class WrapperTest3 &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Vector vector&#x3D;new Vector();</span><br><span class="line">        Scanner input&#x3D;new Scanner(System.in);</span><br><span class="line">        for(;;)&#123;</span><br><span class="line">            double x&#x3D;input.nextDouble();</span><br><span class="line">            if(x&lt;0)&#123;</span><br><span class="line">                break;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                vector.addElement(x);  &#x2F;&#x2F;添加向量</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;向量长度:&quot;+vector.size());</span><br><span class="line">        Vector vector1&#x3D;new Vector();</span><br><span class="line">        double max&#x3D;Integer.MIN_VALUE; &#x2F;&#x2F;寻找最大值</span><br><span class="line">        for(int i&#x3D;0;i&lt;vector.size();i++)&#123;</span><br><span class="line">            Object obj&#x3D;vector.elementAt(i);  &#x2F;&#x2F;取出当前值</span><br><span class="line">            vector1.add(obj); &#x2F;&#x2F;到时候判断用</span><br><span class="line">            double temp&#x3D; (double) obj;  &#x2F;&#x2F;转换为double值</span><br><span class="line">            max&#x3D;(max&gt;temp?max:temp); &#x2F;&#x2F;替换max</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;最大值:&quot;+max);</span><br><span class="line">        for(int i&#x3D;0;i&lt;vector1.size();i++)&#123;</span><br><span class="line">            double cha&#x3D;max-(double)vector1.elementAt(i); &#x2F;&#x2F;要统一为double</span><br><span class="line">            if(cha&lt;10)&#123;</span><br><span class="line">                System.out.println(&quot;A&quot;);</span><br><span class="line">            &#125;else if(cha&lt;20)&#123;</span><br><span class="line">                System.out.println(&quot;B&quot;);</span><br><span class="line">            &#125;else if(cha&lt;30)&#123;</span><br><span class="line">                System.out.println(&quot;C&quot;);</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                System.out.println(&quot;D&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终结果如下:<br><img src=".images/image-20231021185053363.png" alt="image-20231021185053363"></p>

      
      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JAVA/" rel="tag">JAVA</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2023 Larkkkkkkk
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="http://bestwing.me" target="_blank">Sw'blog</a> by Swing
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" >海贼到访数: 
                            <span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>, </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit">本页阅读量: 
                            <span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>


<script src="/js/main.js"></script>


    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


    <script type="text/javascript">
      window.onload = function(){
        document.getElementById("search").onclick = function(){
            console.log("search")
            search();
        }
      }
      function search(){
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','A1Pz-LKMXbrzcFg2FWi6','2.0.0');
      }
    </script>

  </div>
</body>
</html>